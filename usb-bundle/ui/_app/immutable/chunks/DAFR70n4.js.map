{"version":3,"file":"DAFR70n4.js","sources":["../../../../../../node_modules/.pnpm/@loaders.gl+loader-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/loader-utils/dist/lib/env-utils/assert.js","../../../../../../node_modules/.pnpm/@loaders.gl+loader-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/loader-utils/dist/lib/env-utils/globals.js","../../../../../../node_modules/.pnpm/@probe.gl+env@4.1.0/node_modules/@probe.gl/env/dist/lib/globals.js","../../../../../../node_modules/.pnpm/@probe.gl+env@4.1.0/node_modules/@probe.gl/env/dist/lib/is-electron.js","../../../../../../node_modules/.pnpm/@probe.gl+env@4.1.0/node_modules/@probe.gl/env/dist/lib/is-browser.js","../../../../../../node_modules/.pnpm/@probe.gl+env@4.1.0/node_modules/@probe.gl/env/dist/lib/get-browser.js","../../../../../../node_modules/.pnpm/@probe.gl+env@4.1.0/node_modules/@probe.gl/env/dist/index.js","../../../../../../node_modules/.pnpm/@probe.gl+log@4.1.0/node_modules/@probe.gl/log/dist/utils/local-storage.js","../../../../../../node_modules/.pnpm/@probe.gl+log@4.1.0/node_modules/@probe.gl/log/dist/utils/formatters.js","../../../../../../node_modules/.pnpm/@probe.gl+log@4.1.0/node_modules/@probe.gl/log/dist/utils/color.js","../../../../../../node_modules/.pnpm/@probe.gl+log@4.1.0/node_modules/@probe.gl/log/dist/utils/autobind.js","../../../../../../node_modules/.pnpm/@probe.gl+log@4.1.0/node_modules/@probe.gl/log/dist/utils/assert.js","../../../../../../node_modules/.pnpm/@probe.gl+log@4.1.0/node_modules/@probe.gl/log/dist/utils/hi-res-timestamp.js","../../../../../../node_modules/.pnpm/@probe.gl+log@4.1.0/node_modules/@probe.gl/log/dist/log.js","../../../../../../node_modules/.pnpm/@loaders.gl+loader-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/loader-utils/dist/lib/log-utils/log.js","../../../../../../node_modules/.pnpm/@loaders.gl+loader-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/loader-utils/dist/lib/option-utils/merge-loader-options.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/env-utils/version.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/env-utils/assert.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/env-utils/globals.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/worker-farm/worker-job.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/node/worker_threads-browser.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/worker-utils/get-loadable-worker-url.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/worker-utils/get-transfer-list.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/worker-farm/worker-thread.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/worker-farm/worker-pool.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/worker-farm/worker-farm.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/worker-api/get-worker-url.js","../../../../../../node_modules/.pnpm/@loaders.gl+worker-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/worker-utils/dist/lib/worker-api/validate-worker-version.js","../../../../../../node_modules/.pnpm/@loaders.gl+loader-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/loader-utils/dist/lib/worker-loader-utils/parse-with-worker.js","../../../../../../node_modules/.pnpm/@loaders.gl+loader-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/loader-utils/dist/lib/binary-utils/array-buffer-utils.js","../../../../../../node_modules/.pnpm/@loaders.gl+loader-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/loader-utils/dist/lib/iterators/async-iteration.js","../../../../../../node_modules/.pnpm/@probe.gl+stats@4.1.0/node_modules/@probe.gl/stats/dist/utils/hi-res-timestamp.js","../../../../../../node_modules/.pnpm/@probe.gl+stats@4.1.0/node_modules/@probe.gl/stats/dist/lib/stat.js","../../../../../../node_modules/.pnpm/@probe.gl+stats@4.1.0/node_modules/@probe.gl/stats/dist/lib/stats.js","../../../../../../node_modules/.pnpm/@loaders.gl+loader-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/loader-utils/dist/lib/path-utils/file-aliases.js","../../../../../../node_modules/.pnpm/@loaders.gl+loader-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/loader-utils/dist/lib/binary-utils/memory-conversion-utils.js","../../../../../../node_modules/.pnpm/@loaders.gl+loader-utils@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/loader-utils/dist/lib/path-utils/path.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/javascript-utils/is-type.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/fetch/fetch-error.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/utils/mime-type-utils.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/utils/url-utils.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/utils/resource-utils.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/utils/response-utils.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/fetch/fetch-file.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/loader-utils/loggers.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/loader-utils/option-defaults.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/loader-utils/option-utils.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/loader-utils/normalize-loader.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/api/register-loaders.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/api/select-loader.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/iterators/make-iterator/make-string-iterator.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/iterators/make-iterator/make-array-buffer-iterator.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/iterators/make-iterator/make-blob-iterator.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/iterators/make-iterator/make-stream-iterator.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/iterators/make-iterator/make-iterator.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/loader-utils/get-data.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/loader-utils/get-fetch-function.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/loader-utils/loader-context.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/api/parse.js","../../../../../../node_modules/.pnpm/@loaders.gl+core@4.3.4/node_modules/@loaders.gl/core/dist/lib/api/load.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/lib/utils/version.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/lib/category-api/image-type.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/lib/category-api/parsed-image-api.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/lib/parsers/svg-utils.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/lib/parsers/parse-to-image.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/lib/parsers/parse-to-image-bitmap.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/lib/category-api/parse-isobmff-binary.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/lib/category-api/binary-image-api.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/lib/parsers/parse-to-node-image.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/lib/parsers/parse-image.js","../../../../../../node_modules/.pnpm/@loaders.gl+images@4.3.4_@loaders.gl+core@4.3.4/node_modules/@loaders.gl/images/dist/image-loader.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/lib/common.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/classes/base/math-array.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/lib/validators.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/lib/assert.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/classes/base/vector.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/gl-matrix/common.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/gl-matrix/vec2.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/lib/gl-matrix-extras.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/gl-matrix/vec3.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/classes/vector3.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/classes/base/matrix.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/gl-matrix/mat4.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/gl-matrix/vec4.js","../../../../../../node_modules/.pnpm/@math.gl+core@4.1.0/node_modules/@math.gl/core/dist/classes/matrix4.js","../../../../../../node_modules/.pnpm/@math.gl+web-mercator@4.1.0/node_modules/@math.gl/web-mercator/dist/math-utils.js","../../../../../../node_modules/.pnpm/@math.gl+web-mercator@4.1.0/node_modules/@math.gl/web-mercator/dist/assert.js","../../../../../../node_modules/.pnpm/@math.gl+web-mercator@4.1.0/node_modules/@math.gl/web-mercator/dist/web-mercator-utils.js","../../../../../../node_modules/.pnpm/@math.gl+web-mercator@4.1.0/node_modules/@math.gl/web-mercator/dist/fit-bounds.js","../../../../../../node_modules/.pnpm/@math.gl+web-mercator@4.1.0/node_modules/@math.gl/web-mercator/dist/get-bounds.js","../../../../../../node_modules/.pnpm/@math.gl+web-mercator@4.1.0/node_modules/@math.gl/web-mercator/dist/normalize-viewport-props.js","../../../../../../node_modules/.pnpm/@math.gl+types@4.1.0/node_modules/@math.gl/types/dist/is-array.js"],"sourcesContent":["/**\n * Throws an `Error` with the optional `message` if `condition` is falsy\n * @note Replacement for the external assert method to reduce bundle size\n */\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'loader assertion failed.');\n    }\n}\n","// Purpose: include this in your module to avoid\n// dependencies on micro modules like 'global' and 'is-browser';\n/* eslint-disable no-restricted-globals */\nconst globals = {\n    self: typeof self !== 'undefined' && self,\n    window: typeof window !== 'undefined' && window,\n    global: typeof global !== 'undefined' && global,\n    document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\n/** true if running in a browser */\nexport const isBrowser = \n// @ts-ignore process does not exist on browser\nBoolean(typeof process !== 'object' || String(process) !== '[object process]' || process.browser);\n/** true if running in a worker thread */\nexport const isWorker = typeof importScripts === 'function';\n// Extract node major version\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\n/** Major Node version (as a number) */\nexport const nodeVersion = (matches && parseFloat(matches[1])) || 0;\n","// Do not name these variables the same as the global objects - will break bundling\nconst global_ = globalThis;\nconst window_ = globalThis;\nconst document_ = globalThis.document || {};\nconst process_ = globalThis.process || {};\nconst console_ = globalThis.console;\nconst navigator_ = globalThis.navigator || {};\nexport { global_ as global, global_ as self, window_ as window, document_ as document, process_ as process, console_ as console, navigator_ as navigator };\n//# sourceMappingURL=globals.js.map","// based on https://github.com/cheton/is-electron\n// https://github.com/electron/electron/issues/2288\n/* eslint-disable complexity */\nexport function isElectron(mockUserAgent) {\n    // Renderer process\n    // @ts-expect-error\n    if (typeof window !== 'undefined' && window.process?.type === 'renderer') {\n        return true;\n    }\n    // Main process\n    // eslint-disable-next-line\n    if (typeof process !== 'undefined' && Boolean(process.versions?.['electron'])) {\n        return true;\n    }\n    // Detect the user agent when the `nodeIntegration` option is set to true\n    const realUserAgent = typeof navigator !== 'undefined' && navigator.userAgent;\n    const userAgent = mockUserAgent || realUserAgent;\n    return Boolean(userAgent && userAgent.indexOf('Electron') >= 0);\n}\n//# sourceMappingURL=is-electron.js.map","// This function is needed in initialization stages,\n// make sure it can be imported in isolation\nimport { isElectron } from \"./is-electron.js\";\n/** Check if in browser by duck-typing Node context */\nexport function isBrowser() {\n    const isNode = \n    // @ts-expect-error\n    typeof process === 'object' && String(process) === '[object process]' && !process?.browser;\n    return !isNode || isElectron();\n}\n//# sourceMappingURL=is-browser.js.map","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n// This function is needed in initialization stages,\n// make sure it can be imported in isolation\nimport { isBrowser } from \"./is-browser.js\";\nimport { isElectron } from \"./is-electron.js\";\nimport { navigator } from \"./globals.js\";\nexport function isMobile() {\n    return typeof globalThis.orientation !== 'undefined';\n}\n// Simple browser detection\n// `mockUserAgent` parameter allows user agent to be overridden for testing\n/* eslint-disable complexity */\nexport function getBrowser(mockUserAgent) {\n    if (!mockUserAgent && !isBrowser()) {\n        return 'Node';\n    }\n    if (isElectron(mockUserAgent)) {\n        return 'Electron';\n    }\n    const userAgent = mockUserAgent || navigator.userAgent || '';\n    // NOTE: Order of tests matter, as many agents list Chrome etc.\n    if (userAgent.indexOf('Edge') > -1) {\n        return 'Edge';\n    }\n    if (globalThis.chrome) {\n        return 'Chrome';\n    }\n    if (globalThis.safari) {\n        return 'Safari';\n    }\n    if (globalThis.mozInnerScreenX) {\n        return 'Firefox';\n    }\n    return 'Unknown';\n}\n//# sourceMappingURL=get-browser.js.map","// Extract injected version from package.json (injected by babel plugin)\n// @ts-expect-error\nexport const VERSION = typeof \"4.1.0\" !== 'undefined' ? \"4.1.0\" : 'untranspiled source';\n// ENVIRONMENT\nexport { self, window, global, document, process, console } from \"./lib/globals.js\";\nexport { isBrowser } from \"./lib/is-browser.js\";\nexport { getBrowser, isMobile } from \"./lib/get-browser.js\";\nexport { isElectron } from \"./lib/is-electron.js\";\n// ENVIRONMENT'S ASSERT IS 5-15KB, SO WE PROVIDE OUR OWN\nexport { assert } from \"./utils/assert.js\";\n// TODO - wish we could just export a constant\n// export const isBrowser = checkIfBrowser();\n//# sourceMappingURL=index.js.map","// probe.gl, MIT license\nfunction getStorage(type) {\n    try {\n        const storage = window[type];\n        const x = '__storage_test__';\n        storage.setItem(x, x);\n        storage.removeItem(x);\n        return storage;\n    }\n    catch (e) {\n        return null;\n    }\n}\n// Store keys in local storage via simple interface\nexport class LocalStorage {\n    constructor(id, defaultConfig, type = 'sessionStorage') {\n        this.storage = getStorage(type);\n        this.id = id;\n        this.config = defaultConfig;\n        this._loadConfiguration();\n    }\n    getConfiguration() {\n        return this.config;\n    }\n    setConfiguration(configuration) {\n        Object.assign(this.config, configuration);\n        if (this.storage) {\n            const serialized = JSON.stringify(this.config);\n            this.storage.setItem(this.id, serialized);\n        }\n    }\n    // Get config from persistent store, if available\n    _loadConfiguration() {\n        let configuration = {};\n        if (this.storage) {\n            const serializedConfiguration = this.storage.getItem(this.id);\n            configuration = serializedConfiguration ? JSON.parse(serializedConfiguration) : {};\n        }\n        Object.assign(this.config, configuration);\n        return this;\n    }\n}\n//# sourceMappingURL=local-storage.js.map","// probe.gl, MIT license\n/**\n * Format time\n */\nexport function formatTime(ms) {\n    let formatted;\n    if (ms < 10) {\n        formatted = `${ms.toFixed(2)}ms`;\n    }\n    else if (ms < 100) {\n        formatted = `${ms.toFixed(1)}ms`;\n    }\n    else if (ms < 1000) {\n        formatted = `${ms.toFixed(0)}ms`;\n    }\n    else {\n        formatted = `${(ms / 1000).toFixed(2)}s`;\n    }\n    return formatted;\n}\nexport function leftPad(string, length = 8) {\n    const padLength = Math.max(length - string.length, 0);\n    return `${' '.repeat(padLength)}${string}`;\n}\nexport function rightPad(string, length = 8) {\n    const padLength = Math.max(length - string.length, 0);\n    return `${string}${' '.repeat(padLength)}`;\n}\nexport function formatValue(v, options = {}) {\n    const EPSILON = 1e-16;\n    const { isInteger = false } = options;\n    if (Array.isArray(v) || ArrayBuffer.isView(v)) {\n        return formatArrayValue(v, options);\n    }\n    if (!Number.isFinite(v)) {\n        return String(v);\n    }\n    // @ts-expect-error\n    if (Math.abs(v) < EPSILON) {\n        return isInteger ? '0' : '0.';\n    }\n    if (isInteger) {\n        // @ts-expect-error\n        return v.toFixed(0);\n    }\n    // @ts-expect-error\n    if (Math.abs(v) > 100 && Math.abs(v) < 10000) {\n        // @ts-expect-error\n        return v.toFixed(0);\n    }\n    // @ts-expect-error\n    const string = v.toPrecision(2);\n    const decimal = string.indexOf('.0');\n    return decimal === string.length - 2 ? string.slice(0, -1) : string;\n}\n/** Helper to formatValue */\nfunction formatArrayValue(v, options) {\n    const { maxElts = 16, size = 1 } = options;\n    let string = '[';\n    for (let i = 0; i < v.length && i < maxElts; ++i) {\n        if (i > 0) {\n            string += `,${i % size === 0 ? ' ' : ''}`;\n        }\n        string += formatValue(v[i], options);\n    }\n    const terminator = v.length > maxElts ? '...' : ']';\n    return `${string}${terminator}`;\n}\n//# sourceMappingURL=formatters.js.map","import { isBrowser } from '@probe.gl/env';\nexport var COLOR;\n(function (COLOR) {\n    COLOR[COLOR[\"BLACK\"] = 30] = \"BLACK\";\n    COLOR[COLOR[\"RED\"] = 31] = \"RED\";\n    COLOR[COLOR[\"GREEN\"] = 32] = \"GREEN\";\n    COLOR[COLOR[\"YELLOW\"] = 33] = \"YELLOW\";\n    COLOR[COLOR[\"BLUE\"] = 34] = \"BLUE\";\n    COLOR[COLOR[\"MAGENTA\"] = 35] = \"MAGENTA\";\n    COLOR[COLOR[\"CYAN\"] = 36] = \"CYAN\";\n    COLOR[COLOR[\"WHITE\"] = 37] = \"WHITE\";\n    COLOR[COLOR[\"BRIGHT_BLACK\"] = 90] = \"BRIGHT_BLACK\";\n    COLOR[COLOR[\"BRIGHT_RED\"] = 91] = \"BRIGHT_RED\";\n    COLOR[COLOR[\"BRIGHT_GREEN\"] = 92] = \"BRIGHT_GREEN\";\n    COLOR[COLOR[\"BRIGHT_YELLOW\"] = 93] = \"BRIGHT_YELLOW\";\n    COLOR[COLOR[\"BRIGHT_BLUE\"] = 94] = \"BRIGHT_BLUE\";\n    COLOR[COLOR[\"BRIGHT_MAGENTA\"] = 95] = \"BRIGHT_MAGENTA\";\n    COLOR[COLOR[\"BRIGHT_CYAN\"] = 96] = \"BRIGHT_CYAN\";\n    COLOR[COLOR[\"BRIGHT_WHITE\"] = 97] = \"BRIGHT_WHITE\";\n})(COLOR || (COLOR = {}));\nconst BACKGROUND_INCREMENT = 10;\nfunction getColor(color) {\n    if (typeof color !== 'string') {\n        return color;\n    }\n    color = color.toUpperCase();\n    return COLOR[color] || COLOR.WHITE;\n}\nexport function addColor(string, color, background) {\n    if (!isBrowser && typeof string === 'string') {\n        if (color) {\n            const colorCode = getColor(color);\n            string = `\\u001b[${colorCode}m${string}\\u001b[39m`;\n        }\n        if (background) {\n            // background colors values are +10\n            const colorCode = getColor(background);\n            string = `\\u001b[${colorCode + BACKGROUND_INCREMENT}m${string}\\u001b[49m`;\n        }\n    }\n    return string;\n}\n//# sourceMappingURL=color.js.map","// Copyright (c) 2015 - 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n/**\n * Binds the \"this\" argument of all functions on a class instance to the instance\n * @param obj - class instance (typically a react component)\n */\nexport function autobind(obj, predefined = ['constructor']) {\n    const proto = Object.getPrototypeOf(obj);\n    const propNames = Object.getOwnPropertyNames(proto);\n    const object = obj;\n    for (const key of propNames) {\n        const value = object[key];\n        if (typeof value === 'function') {\n            if (!predefined.find((name) => key === name)) {\n                object[key] = value.bind(obj);\n            }\n        }\n    }\n}\n//# sourceMappingURL=autobind.js.map","export default function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'Assertion failed');\n    }\n}\n//# sourceMappingURL=assert.js.map","// probe.gl, MIT license\nimport { window, process, isBrowser } from '@probe.gl/env';\n/** Get best timer available. */\nexport function getHiResTimestamp() {\n    let timestamp;\n    if (isBrowser() && window.performance) {\n        timestamp = window?.performance?.now?.();\n    }\n    else if ('hrtime' in process) {\n        // @ts-ignore\n        const timeParts = process?.hrtime?.();\n        timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n    }\n    else {\n        timestamp = Date.now();\n    }\n    return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","// probe.gl, MIT license\n/* eslint-disable no-console,prefer-rest-params */\nimport { VERSION, isBrowser } from '@probe.gl/env';\nimport { LocalStorage } from \"./utils/local-storage.js\";\nimport { formatTime, leftPad } from \"./utils/formatters.js\";\nimport { addColor } from \"./utils/color.js\";\nimport { autobind } from \"./utils/autobind.js\";\nimport assert from \"./utils/assert.js\";\nimport { getHiResTimestamp } from \"./utils/hi-res-timestamp.js\";\n// Instrumentation in other packages may override console methods, so preserve them here\nconst originalConsole = {\n    debug: isBrowser() ? console.debug || console.log : console.log,\n    log: console.log,\n    info: console.info,\n    warn: console.warn,\n    error: console.error\n};\nconst DEFAULT_LOG_CONFIGURATION = {\n    enabled: true,\n    level: 0\n};\nfunction noop() { } // eslint-disable-line @typescript-eslint/no-empty-function\nconst cache = {};\nconst ONCE = { once: true };\n/** A console wrapper */\nexport class Log {\n    constructor({ id } = { id: '' }) {\n        this.VERSION = VERSION;\n        this._startTs = getHiResTimestamp();\n        this._deltaTs = getHiResTimestamp();\n        this.userData = {};\n        // TODO - fix support from throttling groups\n        this.LOG_THROTTLE_TIMEOUT = 0; // Time before throttled messages are logged again\n        this.id = id;\n        this.userData = {};\n        this._storage = new LocalStorage(`__probe-${this.id}__`, DEFAULT_LOG_CONFIGURATION);\n        this.timeStamp(`${this.id} started`);\n        autobind(this);\n        Object.seal(this);\n    }\n    set level(newLevel) {\n        this.setLevel(newLevel);\n    }\n    get level() {\n        return this.getLevel();\n    }\n    isEnabled() {\n        return this._storage.config.enabled;\n    }\n    getLevel() {\n        return this._storage.config.level;\n    }\n    /** @return milliseconds, with fractions */\n    getTotal() {\n        return Number((getHiResTimestamp() - this._startTs).toPrecision(10));\n    }\n    /** @return milliseconds, with fractions */\n    getDelta() {\n        return Number((getHiResTimestamp() - this._deltaTs).toPrecision(10));\n    }\n    /** @deprecated use logLevel */\n    set priority(newPriority) {\n        this.level = newPriority;\n    }\n    /** @deprecated use logLevel */\n    get priority() {\n        return this.level;\n    }\n    /** @deprecated use logLevel */\n    getPriority() {\n        return this.level;\n    }\n    // Configure\n    enable(enabled = true) {\n        this._storage.setConfiguration({ enabled });\n        return this;\n    }\n    setLevel(level) {\n        this._storage.setConfiguration({ level });\n        return this;\n    }\n    /** return the current status of the setting */\n    get(setting) {\n        return this._storage.config[setting];\n    }\n    // update the status of the setting\n    set(setting, value) {\n        this._storage.setConfiguration({ [setting]: value });\n    }\n    /** Logs the current settings as a table */\n    settings() {\n        if (console.table) {\n            console.table(this._storage.config);\n        }\n        else {\n            console.log(this._storage.config);\n        }\n    }\n    // Unconditional logging\n    assert(condition, message) {\n        if (!condition) {\n            throw new Error(message || 'Assertion failed');\n        }\n    }\n    warn(message) {\n        return this._getLogFunction(0, message, originalConsole.warn, arguments, ONCE);\n    }\n    error(message) {\n        return this._getLogFunction(0, message, originalConsole.error, arguments);\n    }\n    /** Print a deprecation warning */\n    deprecated(oldUsage, newUsage) {\n        return this.warn(`\\`${oldUsage}\\` is deprecated and will be removed \\\nin a later version. Use \\`${newUsage}\\` instead`);\n    }\n    /** Print a removal warning */\n    removed(oldUsage, newUsage) {\n        return this.error(`\\`${oldUsage}\\` has been removed. Use \\`${newUsage}\\` instead`);\n    }\n    probe(logLevel, message) {\n        return this._getLogFunction(logLevel, message, originalConsole.log, arguments, {\n            time: true,\n            once: true\n        });\n    }\n    log(logLevel, message) {\n        return this._getLogFunction(logLevel, message, originalConsole.debug, arguments);\n    }\n    info(logLevel, message) {\n        return this._getLogFunction(logLevel, message, console.info, arguments);\n    }\n    once(logLevel, message) {\n        return this._getLogFunction(logLevel, message, originalConsole.debug || originalConsole.info, arguments, ONCE);\n    }\n    /** Logs an object as a table */\n    table(logLevel, table, columns) {\n        if (table) {\n            return this._getLogFunction(logLevel, table, console.table || noop, (columns && [columns]), {\n                tag: getTableHeader(table)\n            });\n        }\n        return noop;\n    }\n    time(logLevel, message) {\n        return this._getLogFunction(logLevel, message, console.time ? console.time : console.info);\n    }\n    timeEnd(logLevel, message) {\n        return this._getLogFunction(logLevel, message, console.timeEnd ? console.timeEnd : console.info);\n    }\n    timeStamp(logLevel, message) {\n        return this._getLogFunction(logLevel, message, console.timeStamp || noop);\n    }\n    group(logLevel, message, opts = { collapsed: false }) {\n        const options = normalizeArguments({ logLevel, message, opts });\n        const { collapsed } = opts;\n        // @ts-expect-error\n        options.method = (collapsed ? console.groupCollapsed : console.group) || console.info;\n        return this._getLogFunction(options);\n    }\n    groupCollapsed(logLevel, message, opts = {}) {\n        return this.group(logLevel, message, Object.assign({}, opts, { collapsed: true }));\n    }\n    groupEnd(logLevel) {\n        return this._getLogFunction(logLevel, '', console.groupEnd || noop);\n    }\n    // EXPERIMENTAL\n    withGroup(logLevel, message, func) {\n        this.group(logLevel, message)();\n        try {\n            func();\n        }\n        finally {\n            this.groupEnd(logLevel)();\n        }\n    }\n    trace() {\n        if (console.trace) {\n            console.trace();\n        }\n    }\n    // PRIVATE METHODS\n    /** Deduces log level from a variety of arguments */\n    _shouldLog(logLevel) {\n        return this.isEnabled() && this.getLevel() >= normalizeLogLevel(logLevel);\n    }\n    _getLogFunction(logLevel, message, method, args, opts) {\n        if (this._shouldLog(logLevel)) {\n            // normalized opts + timings\n            opts = normalizeArguments({ logLevel, message, args, opts });\n            method = method || opts.method;\n            assert(method);\n            opts.total = this.getTotal();\n            opts.delta = this.getDelta();\n            // reset delta timer\n            this._deltaTs = getHiResTimestamp();\n            const tag = opts.tag || opts.message;\n            if (opts.once && tag) {\n                if (!cache[tag]) {\n                    cache[tag] = getHiResTimestamp();\n                }\n                else {\n                    return noop;\n                }\n            }\n            // TODO - Make throttling work with groups\n            // if (opts.nothrottle || !throttle(tag, this.LOG_THROTTLE_TIMEOUT)) {\n            //   return noop;\n            // }\n            message = decorateMessage(this.id, opts.message, opts);\n            // Bind console function so that it can be called after being returned\n            return method.bind(console, message, ...opts.args);\n        }\n        return noop;\n    }\n}\nLog.VERSION = VERSION;\n/**\n * Get logLevel from first argument:\n * - log(logLevel, message, args) => logLevel\n * - log(message, args) => 0\n * - log({logLevel, ...}, message, args) => logLevel\n * - log({logLevel, message, args}) => logLevel\n */\nfunction normalizeLogLevel(logLevel) {\n    if (!logLevel) {\n        return 0;\n    }\n    let resolvedLevel;\n    switch (typeof logLevel) {\n        case 'number':\n            resolvedLevel = logLevel;\n            break;\n        case 'object':\n            // Backward compatibility\n            // TODO - deprecate `priority`\n            // @ts-expect-error\n            resolvedLevel = logLevel.logLevel || logLevel.priority || 0;\n            break;\n        default:\n            return 0;\n    }\n    // 'log level must be a number'\n    assert(Number.isFinite(resolvedLevel) && resolvedLevel >= 0);\n    return resolvedLevel;\n}\n/**\n * \"Normalizes\" the various argument patterns into an object with known types\n * - log(logLevel, message, args) => {logLevel, message, args}\n * - log(message, args) => {logLevel: 0, message, args}\n * - log({logLevel, ...}, message, args) => {logLevel, message, args}\n * - log({logLevel, message, args}) => {logLevel, message, args}\n */\nexport function normalizeArguments(opts) {\n    const { logLevel, message } = opts;\n    opts.logLevel = normalizeLogLevel(logLevel);\n    // We use `arguments` instead of rest parameters (...args) because IE\n    // does not support the syntax. Rest parameters is transpiled to code with\n    // perf impact. Doing it here instead avoids constructing args when logging is\n    // disabled.\n    // TODO - remove when/if IE support is dropped\n    const args = opts.args ? Array.from(opts.args) : [];\n    // args should only contain arguments that appear after `message`\n    // eslint-disable-next-line no-empty\n    while (args.length && args.shift() !== message) { }\n    switch (typeof logLevel) {\n        case 'string':\n        case 'function':\n            if (message !== undefined) {\n                args.unshift(message);\n            }\n            opts.message = logLevel;\n            break;\n        case 'object':\n            Object.assign(opts, logLevel);\n            break;\n        default:\n    }\n    // Resolve functions into strings by calling them\n    if (typeof opts.message === 'function') {\n        opts.message = opts.message();\n    }\n    const messageType = typeof opts.message;\n    // 'log message must be a string' or object\n    assert(messageType === 'string' || messageType === 'object');\n    // original opts + normalized opts + opts arg + fixed up message\n    return Object.assign(opts, { args }, opts.opts);\n}\nfunction decorateMessage(id, message, opts) {\n    if (typeof message === 'string') {\n        const time = opts.time ? leftPad(formatTime(opts.total)) : '';\n        message = opts.time ? `${id}: ${time}  ${message}` : `${id}: ${message}`;\n        message = addColor(message, opts.color, opts.background);\n    }\n    return message;\n}\nfunction getTableHeader(table) {\n    for (const key in table) {\n        for (const title in table[key]) {\n            return title || 'untitled';\n        }\n    }\n    return 'empty';\n}\n//# sourceMappingURL=log.js.map","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { Log } from '@probe.gl/log';\n// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nexport const VERSION = typeof \"4.3.3\" !== 'undefined' ? \"4.3.3\" : 'latest';\nconst version = VERSION[0] >= '0' && VERSION[0] <= '9' ? `v${VERSION}` : '';\n// Make sure we set the global variable\nfunction createLog() {\n    const log = new Log({ id: 'loaders.gl' });\n    globalThis.loaders = globalThis.loaders || {};\n    globalThis.loaders.log = log;\n    globalThis.loaders.version = version;\n    globalThis.probe = globalThis.probe || {};\n    globalThis.probe.loaders = log;\n    return log;\n}\nexport const log = createLog();\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n *\n * @param baseOptions Can be undefined, in which case a fresh options object will be minted\n * @param newOptions\n * @returns\n */\nexport function mergeLoaderOptions(baseOptions, newOptions) {\n    return mergeOptionsRecursively(baseOptions || {}, newOptions);\n}\nfunction mergeOptionsRecursively(baseOptions, newOptions, level = 0) {\n    // Sanity check (jest test runner overwrites the console object which can lead to infinite recursion)\n    if (level > 3) {\n        return newOptions;\n    }\n    const options = { ...baseOptions };\n    for (const [key, newValue] of Object.entries(newOptions)) {\n        if (newValue && typeof newValue === 'object' && !Array.isArray(newValue)) {\n            options[key] = mergeOptionsRecursively(options[key] || {}, newOptions[key], level + 1);\n            // Object.assign(options[key] as object, newOptions[key]);\n        }\n        else {\n            options[key] = newOptions[key];\n        }\n    }\n    return options;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n/**\n * TODO - unpkg.com doesn't seem to have a `latest` specifier for alpha releases...\n * 'beta' on beta branch, 'latest' on prod branch\n */\nexport const NPM_TAG = 'latest';\nfunction getVersion() {\n    if (!globalThis._loadersgl_?.version) {\n        globalThis._loadersgl_ = globalThis._loadersgl_ || {};\n        // __VERSION__ is injected by babel-plugin-version-inline\n        if (typeof \"4.3.3\" === 'undefined') {\n            // eslint-disable-next-line\n            console.warn('loaders.gl: The __VERSION__ variable is not injected using babel plugin. Latest unstable workers would be fetched from the CDN.');\n            globalThis._loadersgl_.version = NPM_TAG;\n        }\n        else {\n            globalThis._loadersgl_.version = \"4.3.3\";\n        }\n    }\n    return globalThis._loadersgl_.version;\n}\nexport const VERSION = getVersion();\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Replacement for the external assert method to reduce bundle size\n// Note: We don't use the second \"message\" argument in calling code,\n// so no need to support it here\n/** Throws an `Error` with the optional `message` if `condition` is falsy */\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message || 'loaders.gl assertion failed.');\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Purpose: include this in your module to avoids adding dependencies on\n// micro modules like 'global' and 'is-browser';\n/* eslint-disable no-restricted-globals */\nconst globals = {\n    self: typeof self !== 'undefined' && self,\n    window: typeof window !== 'undefined' && window,\n    global: typeof global !== 'undefined' && global,\n    document: typeof document !== 'undefined' && document\n};\nconst self_ = globals.self || globals.window || globals.global || {};\nconst window_ = globals.window || globals.self || globals.global || {};\nconst global_ = globals.global || globals.self || globals.window || {};\nconst document_ = globals.document || {};\nexport { self_ as self, window_ as window, global_ as global, document_ as document };\n/** true if running in the browser, false if running in Node.js */\nexport const isBrowser = \n// @ts-ignore process.browser\ntypeof process !== 'object' || String(process) !== '[object process]' || process.browser;\n/** true if running on a worker thread */\nexport const isWorker = typeof importScripts === 'function';\n/** true if running on a mobile device */\nexport const isMobile = typeof window !== 'undefined' && typeof window.orientation !== 'undefined';\n// Extract node major version\nconst matches = typeof process !== 'undefined' && process.version && /v([0-9]*)/.exec(process.version);\n/** Version of Node.js if running under Node, otherwise 0 */\nexport const nodeVersion = (matches && parseFloat(matches[1])) || 0;\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from \"../env-utils/assert.js\";\n/**\n * Represents one Job handled by a WorkerPool or WorkerFarm\n */\nexport default class WorkerJob {\n    name;\n    workerThread;\n    isRunning = true;\n    /** Promise that resolves when Job is done */\n    result;\n    _resolve = () => { };\n    _reject = () => { };\n    constructor(jobName, workerThread) {\n        this.name = jobName;\n        this.workerThread = workerThread;\n        this.result = new Promise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n    }\n    /**\n     * Send a message to the job's worker thread\n     * @param data any data structure, ideally consisting mostly of transferrable objects\n     */\n    postMessage(type, payload) {\n        this.workerThread.postMessage({\n            source: 'loaders.gl', // Lets worker ignore unrelated messages\n            type,\n            payload\n        });\n    }\n    /**\n     * Call to resolve the `result` Promise with the supplied value\n     */\n    done(value) {\n        assert(this.isRunning);\n        this.isRunning = false;\n        this._resolve(value);\n    }\n    /**\n     * Call to reject the `result` Promise with the supplied error\n     */\n    error(error) {\n        assert(this.isRunning);\n        this.isRunning = false;\n        this._reject(error);\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/** Browser polyfill for Node.js built-in `worker_threads` module.\n * These fills are non-functional, and just intended to ensure that\n * `import 'worker_threads` doesn't break browser builds.\n * The replacement is done in package.json browser field\n */\nexport class NodeWorker {\n    terminate() { }\n}\nexport const parentPort = null;\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from \"../env-utils/assert.js\";\nconst workerURLCache = new Map();\n/**\n * Creates a loadable URL from worker source or URL\n * that can be used to create `Worker` instances.\n * Due to CORS issues it may be necessary to wrap a URL in a small importScripts\n * @param props\n * @param props.source Worker source\n * @param props.url Worker URL\n * @returns loadable url\n */\nexport function getLoadableWorkerURL(props) {\n    assert((props.source && !props.url) || (!props.source && props.url)); // Either source or url must be defined\n    let workerURL = workerURLCache.get(props.source || props.url);\n    if (!workerURL) {\n        // Differentiate worker urls from worker source code\n        if (props.url) {\n            workerURL = getLoadableWorkerURLFromURL(props.url);\n            workerURLCache.set(props.url, workerURL);\n        }\n        if (props.source) {\n            workerURL = getLoadableWorkerURLFromSource(props.source);\n            workerURLCache.set(props.source, workerURL);\n        }\n    }\n    assert(workerURL);\n    return workerURL;\n}\n/**\n * Build a loadable worker URL from worker URL\n * @param url\n * @returns loadable URL\n */\nfunction getLoadableWorkerURLFromURL(url) {\n    // A local script url, we can use it to initialize a Worker directly\n    if (!url.startsWith('http')) {\n        return url;\n    }\n    // A remote script, we need to use `importScripts` to load from different origin\n    const workerSource = buildScriptSource(url);\n    return getLoadableWorkerURLFromSource(workerSource);\n}\n/**\n * Build a loadable worker URL from worker source\n * @param workerSource\n * @returns loadable url\n */\nfunction getLoadableWorkerURLFromSource(workerSource) {\n    const blob = new Blob([workerSource], { type: 'application/javascript' });\n    return URL.createObjectURL(blob);\n}\n/**\n * Per spec, worker cannot be initialized with a script from a different origin\n * However a local worker script can still import scripts from other origins,\n * so we simply build a wrapper script.\n *\n * @param workerUrl\n * @returns source\n */\nfunction buildScriptSource(workerUrl) {\n    return `\\\ntry {\n  importScripts('${workerUrl}');\n} catch (error) {\n  console.error(error);\n  throw error;\n}`;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// NOTE - there is a copy of this function is both in core and loader-utils\n// core does not need all the utils in loader-utils, just this one.\n/**\n * Returns an array of Transferrable objects that can be used with postMessage\n * https://developer.mozilla.org/en-US/docs/Web/API/Worker/postMessage\n * @param object data to be sent via postMessage\n * @param recursive - not for application use\n * @param transfers - not for application use\n * @returns a transfer list that can be passed to postMessage\n */\nexport function getTransferList(object, recursive = true, transfers) {\n    // Make sure that items in the transfer list is unique\n    const transfersSet = transfers || new Set();\n    if (!object) {\n        // ignore\n    }\n    else if (isTransferable(object)) {\n        transfersSet.add(object);\n    }\n    else if (isTransferable(object.buffer)) {\n        // Typed array\n        transfersSet.add(object.buffer);\n    }\n    else if (ArrayBuffer.isView(object)) {\n        // object is a TypeArray viewing into a SharedArrayBuffer (not transferable)\n        // Do not iterate through the content in this case\n    }\n    else if (recursive && typeof object === 'object') {\n        for (const key in object) {\n            // Avoid perf hit - only go one level deep\n            getTransferList(object[key], recursive, transfersSet);\n        }\n    }\n    // If transfers is defined, is internal recursive call\n    // Otherwise it's called by the user\n    return transfers === undefined ? Array.from(transfersSet) : [];\n}\n// https://developer.mozilla.org/en-US/docs/Web/API/Transferable\nfunction isTransferable(object) {\n    if (!object) {\n        return false;\n    }\n    if (object instanceof ArrayBuffer) {\n        return true;\n    }\n    if (typeof MessagePort !== 'undefined' && object instanceof MessagePort) {\n        return true;\n    }\n    if (typeof ImageBitmap !== 'undefined' && object instanceof ImageBitmap) {\n        return true;\n    }\n    // @ts-ignore\n    if (typeof OffscreenCanvas !== 'undefined' && object instanceof OffscreenCanvas) {\n        return true;\n    }\n    return false;\n}\n/**\n * Recursively drop non serializable values like functions and regexps.\n * @param object\n */\nexport function getTransferListForWriter(object) {\n    if (object === null) {\n        return {};\n    }\n    const clone = Object.assign({}, object);\n    Object.keys(clone).forEach((key) => {\n        // Typed Arrays and Arrays are passed with no change\n        if (typeof object[key] === 'object' &&\n            !ArrayBuffer.isView(object[key]) &&\n            !(object[key] instanceof Array)) {\n            clone[key] = getTransferListForWriter(object[key]);\n        }\n        else if (typeof clone[key] === 'function' || clone[key] instanceof RegExp) {\n            clone[key] = {};\n        }\n        else {\n            clone[key] = object[key];\n        }\n    });\n    return clone;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { NodeWorker } from \"../node/worker_threads.js\";\nimport { isBrowser } from \"../env-utils/globals.js\";\nimport { assert } from \"../env-utils/assert.js\";\nimport { getLoadableWorkerURL } from \"../worker-utils/get-loadable-worker-url.js\";\nimport { getTransferList } from \"../worker-utils/get-transfer-list.js\";\nconst NOOP = () => { };\n/**\n * Represents one worker thread\n */\nexport default class WorkerThread {\n    name;\n    source;\n    url;\n    terminated = false;\n    worker;\n    onMessage;\n    onError;\n    _loadableURL = '';\n    /** Checks if workers are supported on this platform */\n    static isSupported() {\n        return ((typeof Worker !== 'undefined' && isBrowser) ||\n            (typeof NodeWorker !== 'undefined' && !isBrowser));\n    }\n    constructor(props) {\n        const { name, source, url } = props;\n        assert(source || url); // Either source or url must be defined\n        this.name = name;\n        this.source = source;\n        this.url = url;\n        this.onMessage = NOOP;\n        this.onError = (error) => console.log(error); // eslint-disable-line\n        this.worker = isBrowser ? this._createBrowserWorker() : this._createNodeWorker();\n    }\n    /**\n     * Terminate this worker thread\n     * @note Can free up significant memory\n     */\n    destroy() {\n        this.onMessage = NOOP;\n        this.onError = NOOP;\n        this.worker.terminate(); // eslint-disable-line @typescript-eslint/no-floating-promises\n        this.terminated = true;\n    }\n    get isRunning() {\n        return Boolean(this.onMessage);\n    }\n    /**\n     * Send a message to this worker thread\n     * @param data any data structure, ideally consisting mostly of transferrable objects\n     * @param transferList If not supplied, calculated automatically by traversing data\n     */\n    postMessage(data, transferList) {\n        transferList = transferList || getTransferList(data);\n        // @ts-ignore\n        this.worker.postMessage(data, transferList);\n    }\n    // PRIVATE\n    /**\n     * Generate a standard Error from an ErrorEvent\n     * @param event\n     */\n    _getErrorFromErrorEvent(event) {\n        // Note Error object does not have the expected fields if loading failed completely\n        // https://developer.mozilla.org/en-US/docs/Web/API/Worker#Event_handlers\n        // https://developer.mozilla.org/en-US/docs/Web/API/ErrorEvent\n        let message = 'Failed to load ';\n        message += `worker ${this.name} from ${this.url}. `;\n        if (event.message) {\n            message += `${event.message} in `;\n        }\n        // const hasFilename = event.filename && !event.filename.startsWith('blob:');\n        // message += hasFilename ? event.filename : this.source.slice(0, 100);\n        if (event.lineno) {\n            message += `:${event.lineno}:${event.colno}`;\n        }\n        return new Error(message);\n    }\n    /**\n     * Creates a worker thread on the browser\n     */\n    _createBrowserWorker() {\n        this._loadableURL = getLoadableWorkerURL({ source: this.source, url: this.url });\n        const worker = new Worker(this._loadableURL, { name: this.name });\n        worker.onmessage = (event) => {\n            if (!event.data) {\n                this.onError(new Error('No data received'));\n            }\n            else {\n                this.onMessage(event.data);\n            }\n        };\n        // This callback represents an uncaught exception in the worker thread\n        worker.onerror = (error) => {\n            this.onError(this._getErrorFromErrorEvent(error));\n            this.terminated = true;\n        };\n        // TODO - not clear when this would be called, for now just log in case it happens\n        worker.onmessageerror = (event) => console.error(event); // eslint-disable-line\n        return worker;\n    }\n    /**\n     * Creates a worker thread in node.js\n     * @todo https://nodejs.org/api/async_hooks.html#async-resource-worker-pool\n     */\n    _createNodeWorker() {\n        let worker;\n        if (this.url) {\n            // Make sure relative URLs start with './'\n            const absolute = this.url.includes(':/') || this.url.startsWith('/');\n            const url = absolute ? this.url : `./${this.url}`;\n            // console.log('Starting work from', url);\n            worker = new NodeWorker(url, { eval: false });\n        }\n        else if (this.source) {\n            worker = new NodeWorker(this.source, { eval: true });\n        }\n        else {\n            throw new Error('no worker');\n        }\n        worker.on('message', (data) => {\n            // console.error('message', data);\n            this.onMessage(data);\n        });\n        worker.on('error', (error) => {\n            // console.error('error', error);\n            this.onError(error);\n        });\n        worker.on('exit', (code) => {\n            // console.error('exit', code);\n        });\n        return worker;\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isMobile, isBrowser } from \"../env-utils/globals.js\";\nimport WorkerThread from \"./worker-thread.js\";\nimport WorkerJob from \"./worker-job.js\";\n/**\n * Process multiple data messages with small pool of identical workers\n */\nexport default class WorkerPool {\n    name = 'unnamed';\n    source; // | Function;\n    url;\n    maxConcurrency = 1;\n    maxMobileConcurrency = 1;\n    onDebug = () => { };\n    reuseWorkers = true;\n    props = {};\n    jobQueue = [];\n    idleQueue = [];\n    count = 0;\n    isDestroyed = false;\n    /** Checks if workers are supported on this platform */\n    static isSupported() {\n        return WorkerThread.isSupported();\n    }\n    /**\n     * @param processor - worker function\n     * @param maxConcurrency - max count of workers\n     */\n    constructor(props) {\n        this.source = props.source;\n        this.url = props.url;\n        this.setProps(props);\n    }\n    /**\n     * Terminates all workers in the pool\n     * @note Can free up significant memory\n     */\n    destroy() {\n        // Destroy idle workers, active Workers will be destroyed on completion\n        this.idleQueue.forEach((worker) => worker.destroy());\n        this.isDestroyed = true;\n    }\n    setProps(props) {\n        this.props = { ...this.props, ...props };\n        if (props.name !== undefined) {\n            this.name = props.name;\n        }\n        if (props.maxConcurrency !== undefined) {\n            this.maxConcurrency = props.maxConcurrency;\n        }\n        if (props.maxMobileConcurrency !== undefined) {\n            this.maxMobileConcurrency = props.maxMobileConcurrency;\n        }\n        if (props.reuseWorkers !== undefined) {\n            this.reuseWorkers = props.reuseWorkers;\n        }\n        if (props.onDebug !== undefined) {\n            this.onDebug = props.onDebug;\n        }\n    }\n    async startJob(name, onMessage = (job, type, data) => job.done(data), onError = (job, error) => job.error(error)) {\n        // Promise resolves when thread starts working on this job\n        const startPromise = new Promise((onStart) => {\n            // Promise resolves when thread completes or fails working on this job\n            this.jobQueue.push({ name, onMessage, onError, onStart });\n            return this;\n        });\n        this._startQueuedJob(); // eslint-disable-line @typescript-eslint/no-floating-promises\n        return await startPromise;\n    }\n    // PRIVATE\n    /**\n     * Starts first queued job if worker is available or can be created\n     * Called when job is started and whenever a worker returns to the idleQueue\n     */\n    async _startQueuedJob() {\n        if (!this.jobQueue.length) {\n            return;\n        }\n        const workerThread = this._getAvailableWorker();\n        if (!workerThread) {\n            return;\n        }\n        // We have a worker, dequeue and start the job\n        const queuedJob = this.jobQueue.shift();\n        if (queuedJob) {\n            // Emit a debug event\n            // @ts-ignore\n            this.onDebug({\n                message: 'Starting job',\n                name: queuedJob.name,\n                workerThread,\n                backlog: this.jobQueue.length\n            });\n            // Create a worker job to let the app access thread and manage job completion\n            const job = new WorkerJob(queuedJob.name, workerThread);\n            // Set the worker thread's message handlers\n            workerThread.onMessage = (data) => queuedJob.onMessage(job, data.type, data.payload);\n            workerThread.onError = (error) => queuedJob.onError(job, error);\n            // Resolve the start promise so that the app can start sending messages to worker\n            queuedJob.onStart(job);\n            // Wait for the app to signal that the job is complete, then return worker to queue\n            try {\n                await job.result;\n            }\n            catch (error) {\n                // eslint-disable-next-line no-console\n                console.error(`Worker exception: ${error}`);\n            }\n            finally {\n                this.returnWorkerToQueue(workerThread);\n            }\n        }\n    }\n    /**\n     * Returns a worker to the idle queue\n     * Destroys the worker if\n     *  - pool is destroyed\n     *  - if this pool doesn't reuse workers\n     *  - if maxConcurrency has been lowered\n     * @param worker\n     */\n    returnWorkerToQueue(worker) {\n        const shouldDestroyWorker = \n        // Workers on Node.js prevent the process from exiting.\n        // Until we figure out how to close them before exit, we always destroy them\n        !isBrowser ||\n            // If the pool is destroyed, there is no reason to keep the worker around\n            this.isDestroyed ||\n            // If the app has disabled worker reuse, any completed workers should be destroyed\n            !this.reuseWorkers ||\n            // If concurrency has been lowered, this worker might be surplus to requirements\n            this.count > this._getMaxConcurrency();\n        if (shouldDestroyWorker) {\n            worker.destroy();\n            this.count--;\n        }\n        else {\n            this.idleQueue.push(worker);\n        }\n        if (!this.isDestroyed) {\n            this._startQueuedJob(); // eslint-disable-line @typescript-eslint/no-floating-promises\n        }\n    }\n    /**\n     * Returns idle worker or creates new worker if maxConcurrency has not been reached\n     */\n    _getAvailableWorker() {\n        // If a worker has completed and returned to the queue, it can be used\n        if (this.idleQueue.length > 0) {\n            return this.idleQueue.shift() || null;\n        }\n        // Create fresh worker if we haven't yet created the max amount of worker threads for this worker source\n        if (this.count < this._getMaxConcurrency()) {\n            this.count++;\n            const name = `${this.name.toLowerCase()} (#${this.count} of ${this.maxConcurrency})`;\n            return new WorkerThread({ name, source: this.source, url: this.url });\n        }\n        // No worker available, have to wait\n        return null;\n    }\n    _getMaxConcurrency() {\n        return isMobile ? this.maxMobileConcurrency : this.maxConcurrency;\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport WorkerPool from \"./worker-pool.js\";\nimport WorkerThread from \"./worker-thread.js\";\nconst DEFAULT_PROPS = {\n    maxConcurrency: 3,\n    maxMobileConcurrency: 1,\n    reuseWorkers: true,\n    onDebug: () => { }\n};\n/**\n * Process multiple jobs with a \"farm\" of different workers in worker pools.\n */\nexport default class WorkerFarm {\n    props;\n    workerPools = new Map();\n    // singleton\n    static _workerFarm;\n    /** Checks if workers are supported on this platform */\n    static isSupported() {\n        return WorkerThread.isSupported();\n    }\n    /** Get the singleton instance of the global worker farm */\n    static getWorkerFarm(props = {}) {\n        WorkerFarm._workerFarm = WorkerFarm._workerFarm || new WorkerFarm({});\n        WorkerFarm._workerFarm.setProps(props);\n        return WorkerFarm._workerFarm;\n    }\n    /** get global instance with WorkerFarm.getWorkerFarm() */\n    constructor(props) {\n        this.props = { ...DEFAULT_PROPS };\n        this.setProps(props);\n        /** @type Map<string, WorkerPool>} */\n        this.workerPools = new Map();\n    }\n    /**\n     * Terminate all workers in the farm\n     * @note Can free up significant memory\n     */\n    destroy() {\n        for (const workerPool of this.workerPools.values()) {\n            workerPool.destroy();\n        }\n        this.workerPools = new Map();\n    }\n    /**\n     * Set props used when initializing worker pools\n     * @param props\n     */\n    setProps(props) {\n        this.props = { ...this.props, ...props };\n        // Update worker pool props\n        for (const workerPool of this.workerPools.values()) {\n            workerPool.setProps(this._getWorkerPoolProps());\n        }\n    }\n    /**\n     * Returns a worker pool for the specified worker\n     * @param options - only used first time for a specific worker name\n     * @param options.name - the name of the worker - used to identify worker pool\n     * @param options.url -\n     * @param options.source -\n     * @example\n     *   const job = WorkerFarm.getWorkerFarm().getWorkerPool({name, url}).startJob(...);\n     */\n    getWorkerPool(options) {\n        const { name, source, url } = options;\n        let workerPool = this.workerPools.get(name);\n        if (!workerPool) {\n            workerPool = new WorkerPool({\n                name,\n                source,\n                url\n            });\n            workerPool.setProps(this._getWorkerPoolProps());\n            this.workerPools.set(name, workerPool);\n        }\n        return workerPool;\n    }\n    _getWorkerPoolProps() {\n        return {\n            maxConcurrency: this.props.maxConcurrency,\n            maxMobileConcurrency: this.props.maxMobileConcurrency,\n            reuseWorkers: this.props.reuseWorkers,\n            onDebug: this.props.onDebug\n        };\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from \"../env-utils/assert.js\";\nimport { isBrowser } from \"../env-utils/globals.js\";\nimport { VERSION, NPM_TAG } from \"../env-utils/version.js\";\n/**\n * Gets worker object's name (for debugging in Chrome thread inspector window)\n */\nexport function getWorkerName(worker) {\n    const warning = worker.version !== VERSION ? ` (worker-utils@${VERSION})` : '';\n    return `${worker.name}@${worker.version}${warning}`;\n}\n/**\n * Generate a worker URL based on worker object and options\n * @returns A URL to one of the following:\n * - a published worker on unpkg CDN\n * - a local test worker\n * - a URL provided by the user in options\n */\nexport function getWorkerURL(worker, options = {}) {\n    const workerOptions = options[worker.id] || {};\n    const workerFile = isBrowser ? `${worker.id}-worker.js` : `${worker.id}-worker-node.js`;\n    let url = workerOptions.workerUrl;\n    // HACK: Allow for non-nested workerUrl for the CompressionWorker.\n    // For the compression worker, workerOptions is currently not nested correctly. For most loaders,\n    // you'd have options within an object, i.e. `{mvt: {coordinates: ...}}` but the CompressionWorker\n    // puts options at the top level, not within a `compression` key (its `id`). For this reason, the\n    // above `workerOptions` will always be a string (i.e. `'gzip'`) for the CompressionWorker. To not\n    // break backwards compatibility, we allow the CompressionWorker to have options at the top level.\n    if (!url && worker.id === 'compression') {\n        url = options.workerUrl;\n    }\n    // If URL is test, generate local loaders.gl url\n    // @ts-ignore _workerType\n    if (options._workerType === 'test') {\n        if (isBrowser) {\n            url = `modules/${worker.module}/dist/${workerFile}`;\n        }\n        else {\n            // In the test environment the ts-node loader requires TypeScript code\n            url = `modules/${worker.module}/src/workers/${worker.id}-worker-node.ts`;\n        }\n    }\n    // If url override is not provided, generate a URL to published version on npm CDN unpkg.com\n    if (!url) {\n        // GENERATE\n        let version = worker.version;\n        // On master we need to load npm alpha releases published with the `beta` tag\n        if (version === 'latest') {\n            // throw new Error('latest worker version specified');\n            version = NPM_TAG;\n        }\n        const versionTag = version ? `@${version}` : '';\n        url = `https://unpkg.com/@loaders.gl/${worker.module}${versionTag}/dist/${workerFile}`;\n    }\n    assert(url);\n    // Allow user to override location\n    return url;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from \"../env-utils/assert.js\";\nimport { VERSION } from \"../env-utils/version.js\";\n/**\n * Check if worker is compatible with this library version\n * @param worker\n * @param libVersion\n * @returns `true` if the two versions are compatible\n */\nexport function validateWorkerVersion(worker, coreVersion = VERSION) {\n    assert(worker, 'no worker provided');\n    const workerVersion = worker.version;\n    if (!coreVersion || !workerVersion) {\n        return false;\n    }\n    // TODO enable when fix the __version__ injection\n    // const coreVersions = parseVersion(coreVersion);\n    // const workerVersions = parseVersion(workerVersion);\n    // assert(\n    //   coreVersion.major === workerVersion.major && coreVersion.minor <= workerVersion.minor,\n    //   `worker: ${worker.name} is not compatible. ${coreVersion.major}.${\n    //     coreVersion.minor\n    //   }+ is required.`\n    // );\n    return true;\n}\n// @ts-ignore\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction parseVersion(version) {\n    const parts = version.split('.').map(Number);\n    return { major: parts[0], minor: parts[1] };\n}\n","import { isBrowser, WorkerFarm, getWorkerURL } from '@loaders.gl/worker-utils';\n/**\n * Determines if a loader can parse with worker\n * @param loader\n * @param options\n */\nexport function canParseWithWorker(loader, options) {\n    if (!WorkerFarm.isSupported()) {\n        return false;\n    }\n    // Node workers are still experimental\n    if (!isBrowser && !options?._nodeWorkers) {\n        return false;\n    }\n    return loader.worker && options?.worker;\n}\n/**\n * this function expects that the worker function sends certain messages,\n * this can be automated if the worker is wrapper by a call to createLoaderWorker in @loaders.gl/loader-utils.\n */\nexport async function parseWithWorker(loader, data, options, context, parseOnMainThread) {\n    const name = loader.id; // TODO\n    const url = getWorkerURL(loader, options);\n    const workerFarm = WorkerFarm.getWorkerFarm(options);\n    const workerPool = workerFarm.getWorkerPool({ name, url });\n    // options.log object contains functions which cannot be transferred\n    // context.fetch & context.parse functions cannot be transferred\n    // TODO - decide how to handle logging on workers\n    options = JSON.parse(JSON.stringify(options));\n    context = JSON.parse(JSON.stringify(context || {}));\n    const job = await workerPool.startJob('process-on-worker', \n    // @ts-expect-error\n    onMessage.bind(null, parseOnMainThread) // eslint-disable-line @typescript-eslint/no-misused-promises\n    );\n    job.postMessage('process', {\n        // @ts-ignore\n        input: data,\n        options,\n        context\n    });\n    const result = await job.result;\n    // TODO - what is going on here?\n    return await result.result;\n}\n/**\n * Handle worker's responses to the main thread\n * @param job\n * @param type\n * @param payload\n */\nasync function onMessage(parseOnMainThread, job, type, payload) {\n    switch (type) {\n        case 'done':\n            job.done(payload);\n            break;\n        case 'error':\n            job.error(new Error(payload.error));\n            break;\n        case 'process':\n            // Worker is asking for main thread to parseO\n            const { id, input, options } = payload;\n            try {\n                const result = await parseOnMainThread(input, options);\n                job.postMessage('done', { id, result });\n            }\n            catch (error) {\n                const message = error instanceof Error ? error.message : 'unknown error';\n                job.postMessage('error', { id, error: message });\n            }\n            break;\n        default:\n            // eslint-disable-next-line\n            console.warn(`parse-with-worker unknown message ${type}`);\n    }\n}\n","/**\n * compare two binary arrays for equality\n * @param a\n * @param b\n * @param byteLength\n */\nexport function compareArrayBuffers(arrayBuffer1, arrayBuffer2, byteLength) {\n    byteLength = byteLength || arrayBuffer1.byteLength;\n    if (arrayBuffer1.byteLength < byteLength || arrayBuffer2.byteLength < byteLength) {\n        return false;\n    }\n    const array1 = new Uint8Array(arrayBuffer1);\n    const array2 = new Uint8Array(arrayBuffer2);\n    for (let i = 0; i < array1.length; ++i) {\n        if (array1[i] !== array2[i]) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Concatenate a sequence of ArrayBuffers from arguments\n * @return A concatenated ArrayBuffer\n */\nexport function concatenateArrayBuffers(...sources) {\n    return concatenateArrayBuffersFromArray(sources);\n}\n/**\n * Concatenate a sequence of ArrayBuffers from array\n * @return A concatenated ArrayBuffer\n */\nexport function concatenateArrayBuffersFromArray(sources) {\n    // Make sure all inputs are wrapped in typed arrays\n    const sourceArrays = sources.map((source2) => source2 instanceof ArrayBuffer ? new Uint8Array(source2) : source2);\n    // Get length of all inputs\n    const byteLength = sourceArrays.reduce((length, typedArray) => length + typedArray.byteLength, 0);\n    // Allocate array with space for all inputs\n    const result = new Uint8Array(byteLength);\n    // Copy the subarrays\n    let offset = 0;\n    for (const sourceArray of sourceArrays) {\n        result.set(sourceArray, offset);\n        offset += sourceArray.byteLength;\n    }\n    // We work with ArrayBuffers, discard the typed array wrapper\n    return result.buffer;\n}\n/**\n * Concatenate arbitrary count of typed arrays\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Typed_arrays\n * @param - list of arrays. All arrays should be the same type\n * @return A concatenated TypedArray\n */\nexport function concatenateTypedArrays(...typedArrays) {\n    // @ts-ignore\n    const arrays = typedArrays;\n    // @ts-ignore\n    const TypedArrayConstructor = (arrays && arrays.length > 1 && arrays[0].constructor) || null;\n    if (!TypedArrayConstructor) {\n        throw new Error('\"concatenateTypedArrays\" - incorrect quantity of arguments or arguments have incompatible data types');\n    }\n    const sumLength = arrays.reduce((acc, value) => acc + value.length, 0);\n    // @ts-ignore typescript does not like dynamic constructors\n    const result = new TypedArrayConstructor(sumLength);\n    let offset = 0;\n    for (const array of arrays) {\n        result.set(array, offset);\n        offset += array.length;\n    }\n    return result;\n}\n/**\n * Copy a view of an ArrayBuffer into new ArrayBuffer with byteOffset = 0\n * @param arrayBuffer\n * @param byteOffset\n * @param byteLength\n */\nexport function sliceArrayBuffer(arrayBuffer, byteOffset, byteLength) {\n    const subArray = byteLength !== undefined\n        ? new Uint8Array(arrayBuffer).subarray(byteOffset, byteOffset + byteLength)\n        : new Uint8Array(arrayBuffer).subarray(byteOffset);\n    const arrayCopy = new Uint8Array(subArray);\n    return arrayCopy.buffer;\n}\n","import { concatenateArrayBuffers } from \"../binary-utils/array-buffer-utils.js\";\n// GENERAL UTILITIES\n/**\n * Iterate over async iterator, without resetting iterator if end is not reached\n * - forEach intentionally does not reset iterator if exiting loop prematurely\n *   so that iteration can continue in a second loop\n * - It is recommended to use a standard for-await as last loop to ensure\n *   iterator gets properly reset\n *\n * TODO - optimize using sync iteration if argument is an Iterable?\n *\n * @param iterator\n * @param visitor\n */\nexport async function forEach(iterator, visitor) {\n    // eslint-disable-next-line\n    while (true) {\n        const { done, value } = await iterator.next();\n        if (done) {\n            iterator.return();\n            return;\n        }\n        const cancel = visitor(value);\n        if (cancel) {\n            return;\n        }\n    }\n}\n// Breaking big data into iterable chunks, concatenating iterable chunks into big data objects\n/**\n * Concatenates all data chunks yielded by an (async) iterator\n * This function can e.g. be used to enable atomic parsers to work on (async) iterator inputs\n */\nexport async function concatenateArrayBuffersAsync(asyncIterator) {\n    const arrayBuffers = [];\n    for await (const chunk of asyncIterator) {\n        arrayBuffers.push(chunk);\n    }\n    return concatenateArrayBuffers(...arrayBuffers);\n}\nexport async function concatenateStringsAsync(asyncIterator) {\n    const strings = [];\n    for await (const chunk of asyncIterator) {\n        strings.push(chunk);\n    }\n    return strings.join('');\n}\n","// Copyright (c) 2017 Uber Technologies, Inc.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nexport default function getHiResTimestamp() {\n    let timestamp;\n    // Get best timer available.\n    if (typeof window !== 'undefined' && window.performance) {\n        timestamp = window.performance.now();\n    }\n    else if (typeof process !== 'undefined' && process.hrtime) {\n        const timeParts = process.hrtime();\n        timestamp = timeParts[0] * 1000 + timeParts[1] / 1e6;\n    }\n    else {\n        timestamp = Date.now();\n    }\n    return timestamp;\n}\n//# sourceMappingURL=hi-res-timestamp.js.map","import getHiResTimestamp from \"../utils/hi-res-timestamp.js\";\nexport default class Stat {\n    constructor(name, type) {\n        this.sampleSize = 1;\n        this.time = 0;\n        this.count = 0;\n        this.samples = 0;\n        this.lastTiming = 0;\n        this.lastSampleTime = 0;\n        this.lastSampleCount = 0;\n        this._count = 0;\n        this._time = 0;\n        this._samples = 0;\n        this._startTime = 0;\n        this._timerPending = false;\n        this.name = name;\n        this.type = type;\n        this.reset();\n    }\n    reset() {\n        this.time = 0;\n        this.count = 0;\n        this.samples = 0;\n        this.lastTiming = 0;\n        this.lastSampleTime = 0;\n        this.lastSampleCount = 0;\n        this._count = 0;\n        this._time = 0;\n        this._samples = 0;\n        this._startTime = 0;\n        this._timerPending = false;\n        return this;\n    }\n    setSampleSize(samples) {\n        this.sampleSize = samples;\n        return this;\n    }\n    /** Call to increment count (+1) */\n    incrementCount() {\n        this.addCount(1);\n        return this;\n    }\n    /** Call to decrement count (-1) */\n    decrementCount() {\n        this.subtractCount(1);\n        return this;\n    }\n    /** Increase count */\n    addCount(value) {\n        this._count += value;\n        this._samples++;\n        this._checkSampling();\n        return this;\n    }\n    /** Decrease count */\n    subtractCount(value) {\n        this._count -= value;\n        this._samples++;\n        this._checkSampling();\n        return this;\n    }\n    /** Add an arbitrary timing and bump the count */\n    addTime(time) {\n        this._time += time;\n        this.lastTiming = time;\n        this._samples++;\n        this._checkSampling();\n        return this;\n    }\n    /** Start a timer */\n    timeStart() {\n        this._startTime = getHiResTimestamp();\n        this._timerPending = true;\n        return this;\n    }\n    /** End a timer. Adds to time and bumps the timing count. */\n    timeEnd() {\n        if (!this._timerPending) {\n            return this;\n        }\n        this.addTime(getHiResTimestamp() - this._startTime);\n        this._timerPending = false;\n        this._checkSampling();\n        return this;\n    }\n    getSampleAverageCount() {\n        return this.sampleSize > 0 ? this.lastSampleCount / this.sampleSize : 0;\n    }\n    /** Calculate average time / count for the previous window */\n    getSampleAverageTime() {\n        return this.sampleSize > 0 ? this.lastSampleTime / this.sampleSize : 0;\n    }\n    /** Calculate counts per second for the previous window */\n    getSampleHz() {\n        return this.lastSampleTime > 0 ? this.sampleSize / (this.lastSampleTime / 1000) : 0;\n    }\n    getAverageCount() {\n        return this.samples > 0 ? this.count / this.samples : 0;\n    }\n    /** Calculate average time / count */\n    getAverageTime() {\n        return this.samples > 0 ? this.time / this.samples : 0;\n    }\n    /** Calculate counts per second */\n    getHz() {\n        return this.time > 0 ? this.samples / (this.time / 1000) : 0;\n    }\n    _checkSampling() {\n        if (this._samples === this.sampleSize) {\n            this.lastSampleTime = this._time;\n            this.lastSampleCount = this._count;\n            this.count += this._count;\n            this.time += this._time;\n            this.samples += this._samples;\n            this._time = 0;\n            this._count = 0;\n            this._samples = 0;\n        }\n    }\n}\n//# sourceMappingURL=stat.js.map","// probe.gl, MIT license\nimport Stat from \"./stat.js\";\n/** A \"bag\" of `Stat` objects, can be visualized using `StatsWidget` */\nexport default class Stats {\n    constructor(options) {\n        this.stats = {};\n        this.id = options.id;\n        this.stats = {};\n        this._initializeStats(options.stats);\n        Object.seal(this);\n    }\n    /** Acquire a stat. Create if it doesn't exist. */\n    get(name, type = 'count') {\n        return this._getOrCreate({ name, type });\n    }\n    get size() {\n        return Object.keys(this.stats).length;\n    }\n    /** Reset all stats */\n    reset() {\n        for (const stat of Object.values(this.stats)) {\n            stat.reset();\n        }\n        return this;\n    }\n    forEach(fn) {\n        for (const stat of Object.values(this.stats)) {\n            fn(stat);\n        }\n    }\n    getTable() {\n        const table = {};\n        this.forEach(stat => {\n            table[stat.name] = {\n                time: stat.time || 0,\n                count: stat.count || 0,\n                average: stat.getAverageTime() || 0,\n                hz: stat.getHz() || 0\n            };\n        });\n        return table;\n    }\n    _initializeStats(stats = []) {\n        stats.forEach(stat => this._getOrCreate(stat));\n    }\n    _getOrCreate(stat) {\n        const { name, type } = stat;\n        let result = this.stats[name];\n        if (!result) {\n            if (stat instanceof Stat) {\n                result = stat;\n            }\n            else {\n                result = new Stat(name, type);\n            }\n            this.stats[name] = result;\n        }\n        return result;\n    }\n}\n//# sourceMappingURL=stats.js.map","// Simple file alias mechanisms for tests.\nlet pathPrefix = '';\nconst fileAliases = {};\n/*\n * Set a relative path prefix\n */\nexport function setPathPrefix(prefix) {\n    pathPrefix = prefix;\n}\n/*\n * Get the relative path prefix\n */\nexport function getPathPrefix() {\n    return pathPrefix;\n}\n/**\n *\n * @param aliases\n *\n * Note: addAliases are an experimental export, they are only for testing of loaders.gl loaders\n * not intended as a generic aliasing mechanism\n */\nexport function addAliases(aliases) {\n    Object.assign(fileAliases, aliases);\n}\n/**\n * Resolves aliases and adds path-prefix to paths\n */\nexport function resolvePath(filename) {\n    for (const alias in fileAliases) {\n        if (filename.startsWith(alias)) {\n            const replacement = fileAliases[alias];\n            filename = filename.replace(alias, replacement);\n        }\n    }\n    if (!filename.startsWith('http://') && !filename.startsWith('https://')) {\n        filename = `${pathPrefix}${filename}`;\n    }\n    return filename;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport * as node from \"../node/buffer.js\";\n/**\n * Check for Node.js `Buffer` (without triggering bundler to include Buffer polyfill on browser)\n */\nexport function isBuffer(value) {\n    return value && typeof value === 'object' && value.isBuffer;\n}\n/**\n * Converts to Node.js `Buffer` (without triggering bundler to include Buffer polyfill on browser)\n * @todo better data type\n */\nexport function toBuffer(data) {\n    return node.toBuffer ? node.toBuffer(data) : data;\n}\n/**\n * Convert an object to an array buffer\n */\nexport function toArrayBuffer(data) {\n    // Note: Should be called first, Buffers can trigger other detections below\n    if (isBuffer(data)) {\n        return node.toArrayBuffer(data);\n    }\n    if (data instanceof ArrayBuffer) {\n        return data;\n    }\n    // Careful - Node Buffers look like Uint8Arrays (keep after isBuffer)\n    if (ArrayBuffer.isView(data)) {\n        if (data.byteOffset === 0 && data.byteLength === data.buffer.byteLength) {\n            return data.buffer;\n        }\n        return data.buffer.slice(data.byteOffset, data.byteOffset + data.byteLength);\n    }\n    if (typeof data === 'string') {\n        const text = data;\n        const uint8Array = new TextEncoder().encode(text);\n        return uint8Array.buffer;\n    }\n    // HACK to support Blob polyfill\n    if (data && typeof data === 'object' && data._toArrayBuffer) {\n        return data._toArrayBuffer();\n    }\n    throw new Error('toArrayBuffer');\n}\n","// Beginning of a minimal implementation of the Node.js path API, that doesn't pull in big polyfills.\nimport { getCWD } from \"./get-cwd.js\";\n/**\n * Replacement for Node.js path.filename\n * @param url\n */\nexport function filename(url) {\n    const slashIndex = url ? url.lastIndexOf('/') : -1;\n    return slashIndex >= 0 ? url.substr(slashIndex + 1) : '';\n}\n/**\n * Replacement for Node.js path.dirname\n * @param url\n */\nexport function dirname(url) {\n    const slashIndex = url ? url.lastIndexOf('/') : -1;\n    return slashIndex >= 0 ? url.substr(0, slashIndex) : '';\n}\n/**\n * Replacement for Node.js path.join\n * @param parts\n */\nexport function join(...parts) {\n    const separator = '/';\n    parts = parts.map((part, index) => {\n        if (index) {\n            part = part.replace(new RegExp(`^${separator}`), '');\n        }\n        if (index !== parts.length - 1) {\n            part = part.replace(new RegExp(`${separator}$`), '');\n        }\n        return part;\n    });\n    return parts.join(separator);\n}\n/* eslint-disable no-continue */\n/**\n * https://nodejs.org/api/path.html#path_path_resolve_paths\n * @param paths A sequence of paths or path segments.\n * @return resolved path\n * Forked from BTOdell/path-resolve under MIT license\n * @see https://github.com/BTOdell/path-resolve/blob/master/LICENSE\n */\nexport function resolve(...components) {\n    const paths = [];\n    for (let _i = 0; _i < components.length; _i++) {\n        paths[_i] = components[_i];\n    }\n    let resolvedPath = '';\n    let resolvedAbsolute = false;\n    let cwd;\n    for (let i = paths.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n        let path;\n        if (i >= 0) {\n            path = paths[i];\n        }\n        else {\n            if (cwd === undefined) {\n                cwd = getCWD();\n            }\n            path = cwd;\n        }\n        // Skip empty entries\n        if (path.length === 0) {\n            continue;\n        }\n        resolvedPath = `${path}/${resolvedPath}`;\n        resolvedAbsolute = path.charCodeAt(0) === SLASH;\n    }\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n    // Normalize the path (removes leading slash)\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n    if (resolvedAbsolute) {\n        return `/${resolvedPath}`;\n    }\n    else if (resolvedPath.length > 0) {\n        return resolvedPath;\n    }\n    return '.';\n}\nconst SLASH = 47;\nconst DOT = 46;\n/**\n * Resolves . and .. elements in a path with directory names\n * Forked from BTOdell/path-resolve under MIT license\n * @see https://github.com/BTOdell/path-resolve/blob/master/LICENSE\n */\n/* eslint-disable max-depth */\n// eslint-disable-next-line complexity, max-statements\nfunction normalizeStringPosix(path, allowAboveRoot) {\n    let res = '';\n    let lastSlash = -1;\n    let dots = 0;\n    let code;\n    let isAboveRoot = false;\n    for (let i = 0; i <= path.length; ++i) {\n        if (i < path.length) {\n            code = path.charCodeAt(i);\n        }\n        else if (code === SLASH) {\n            break;\n        }\n        else {\n            code = SLASH;\n        }\n        if (code === SLASH) {\n            if (lastSlash === i - 1 || dots === 1) {\n                // NOOP\n            }\n            else if (lastSlash !== i - 1 && dots === 2) {\n                if (res.length < 2 ||\n                    !isAboveRoot ||\n                    res.charCodeAt(res.length - 1) !== DOT ||\n                    res.charCodeAt(res.length - 2) !== DOT) {\n                    if (res.length > 2) {\n                        const start = res.length - 1;\n                        let j = start;\n                        for (; j >= 0; --j) {\n                            if (res.charCodeAt(j) === SLASH) {\n                                break;\n                            }\n                        }\n                        if (j !== start) {\n                            res = j === -1 ? '' : res.slice(0, j);\n                            lastSlash = i;\n                            dots = 0;\n                            isAboveRoot = false;\n                            continue;\n                        }\n                    }\n                    else if (res.length === 2 || res.length === 1) {\n                        res = '';\n                        lastSlash = i;\n                        dots = 0;\n                        isAboveRoot = false;\n                        continue;\n                    }\n                }\n                if (allowAboveRoot) {\n                    if (res.length > 0) {\n                        res += '/..';\n                    }\n                    else {\n                        res = '..';\n                    }\n                    isAboveRoot = true;\n                }\n            }\n            else {\n                const slice = path.slice(lastSlash + 1, i);\n                if (res.length > 0) {\n                    res += `/${slice}`;\n                }\n                else {\n                    res = slice;\n                }\n                isAboveRoot = false;\n            }\n            lastSlash = i;\n            dots = 0;\n        }\n        else if (code === DOT && dots !== -1) {\n            ++dots;\n        }\n        else {\n            dots = -1;\n        }\n    }\n    return res;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst isBoolean = (x) => typeof x === 'boolean';\nconst isFunction = (x) => typeof x === 'function';\nexport const isObject = (x) => x !== null && typeof x === 'object';\nexport const isPureObject = (x) => isObject(x) && x.constructor === {}.constructor;\nexport const isPromise = (x) => isObject(x) && isFunction(x.then);\nexport const isIterable = (x) => Boolean(x) && typeof x[Symbol.iterator] === 'function';\nexport const isAsyncIterable = (x) => x && typeof x[Symbol.asyncIterator] === 'function';\nexport const isIterator = (x) => x && isFunction(x.next);\nexport const isResponse = (x) => (typeof Response !== 'undefined' && x instanceof Response) ||\n    (x && x.arrayBuffer && x.text && x.json);\nexport const isFile = (x) => typeof File !== 'undefined' && x instanceof File;\nexport const isBlob = (x) => typeof Blob !== 'undefined' && x instanceof Blob;\n/** Check for Node.js `Buffer` without triggering bundler to include buffer polyfill */\nexport const isBuffer = (x) => x && typeof x === 'object' && x.isBuffer;\nexport const isWritableDOMStream = (x) => isObject(x) && isFunction(x.abort) && isFunction(x.getWriter);\nexport const isReadableDOMStream = (x) => (typeof ReadableStream !== 'undefined' && x instanceof ReadableStream) ||\n    (isObject(x) && isFunction(x.tee) && isFunction(x.cancel) && isFunction(x.getReader));\n// Not implemented in Firefox: && isFunction(x.pipeTo)\nexport const isWritableNodeStream = (x) => isObject(x) && isFunction(x.end) && isFunction(x.write) && isBoolean(x.writable);\nexport const isReadableNodeStream = (x) => isObject(x) && isFunction(x.read) && isFunction(x.pipe) && isBoolean(x.readable);\nexport const isReadableStream = (x) => isReadableDOMStream(x) || isReadableNodeStream(x);\nexport const isWritableStream = (x) => isWritableDOMStream(x) || isWritableNodeStream(x);\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport class FetchError extends Error {\n    constructor(message, info) {\n        super(message);\n        this.reason = info.reason;\n        this.url = info.url;\n        this.response = info.response;\n    }\n    /** A best effort reason for why the fetch failed */\n    reason;\n    /** The URL that failed to load. Empty string if not available. */\n    url;\n    /** The Response object, if any. */\n    response;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// TODO - build/integrate proper MIME type parsing\n// https://mimesniff.spec.whatwg.org/\nconst DATA_URL_PATTERN = /^data:([-\\w.]+\\/[-\\w.+]+)(;|,)/;\nconst MIME_TYPE_PATTERN = /^([-\\w.]+\\/[-\\w.+]+)/;\n/**\n * Compare two MIME types, case insensitively etc.\n * @param mimeType1\n * @param mimeType2\n * @returns true if the MIME types are equivalent\n * @see https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types#structure_of_a_mime_type\n */\nexport function compareMIMETypes(mimeType1, mimeType2) {\n    if (mimeType1.toLowerCase() === mimeType2.toLowerCase()) {\n        return true;\n    }\n    return false;\n}\n/**\n * Remove extra data like `charset` from MIME types\n * @param mimeString\n * @returns A clean MIME type, or an empty string\n *\n * @todo - handle more advanced MIMETYpes, multiple types\n * @todo - extract charset etc\n */\nexport function parseMIMEType(mimeString) {\n    // If resource is a data url, extract any embedded mime type\n    const matches = MIME_TYPE_PATTERN.exec(mimeString);\n    if (matches) {\n        return matches[1];\n    }\n    return mimeString;\n}\n/**\n * Extract MIME type from data URL\n *\n * @param mimeString\n * @returns A clean MIME type, or an empty string\n *\n * @todo - handle more advanced MIMETYpes, multiple types\n * @todo - extract charset etc\n */\nexport function parseMIMETypeFromURL(url) {\n    // If resource is a data URL, extract any embedded mime type\n    const matches = DATA_URL_PATTERN.exec(url);\n    if (matches) {\n        return matches[1];\n    }\n    return '';\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst QUERY_STRING_PATTERN = /\\?.*/;\nexport function extractQueryString(url) {\n    const matches = url.match(QUERY_STRING_PATTERN);\n    return matches && matches[0];\n}\nexport function stripQueryString(url) {\n    return url.replace(QUERY_STRING_PATTERN, '');\n}\nexport function shortenUrlForDisplay(url) {\n    if (url.length < 50) {\n        return url;\n    }\n    const urlEnd = url.slice(url.length - 15);\n    const urlStart = url.substr(0, 32);\n    return `${urlStart}...${urlEnd}`;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isResponse, isBlob } from \"../../javascript-utils/is-type.js\";\nimport { parseMIMEType, parseMIMETypeFromURL } from \"./mime-type-utils.js\";\nimport { stripQueryString } from \"./url-utils.js\";\n/**\n * Returns the URL associated with this resource.\n * The returned value may include a query string and need further processing.\n * If it cannot determine url, the corresponding value will be an empty string\n *\n * @todo string parameters are assumed to be URLs\n */\nexport function getResourceUrl(resource) {\n    // If resource is a `Response`, it contains the information directly as a field\n    if (isResponse(resource)) {\n        const response = resource;\n        return response.url;\n    }\n    // If the resource is a Blob or a File (subclass of Blob)\n    if (isBlob(resource)) {\n        const blob = resource;\n        // File objects have a \"name\" property. Blob objects don't have any\n        // url (name) information\n        return blob.name || '';\n    }\n    if (typeof resource === 'string') {\n        return resource;\n    }\n    // Unknown\n    return '';\n}\n/**\n * Returns the URL associated with this resource.\n * The returned value may include a query string and need further processing.\n * If it cannot determine url, the corresponding value will be an empty string\n *\n * @todo string parameters are assumed to be URLs\n */\nexport function getResourceMIMEType(resource) {\n    // If resource is a response, it contains the information directly\n    if (isResponse(resource)) {\n        const response = resource;\n        const contentTypeHeader = response.headers.get('content-type') || '';\n        const noQueryUrl = stripQueryString(response.url);\n        return parseMIMEType(contentTypeHeader) || parseMIMETypeFromURL(noQueryUrl);\n    }\n    // If the resource is a Blob or a File (subclass of Blob)\n    if (isBlob(resource)) {\n        const blob = resource;\n        return blob.type || '';\n    }\n    if (typeof resource === 'string') {\n        return parseMIMETypeFromURL(resource);\n    }\n    // Unknown\n    return '';\n}\n/**\n  * Returns (approximate) content length for a resource if it can be determined.\n  * Returns -1 if content length cannot be determined.\n  * @param resource\n\n  * @note string parameters are NOT assumed to be URLs\n  */\nexport function getResourceContentLength(resource) {\n    if (isResponse(resource)) {\n        const response = resource;\n        return response.headers['content-length'] || -1;\n    }\n    if (isBlob(resource)) {\n        const blob = resource;\n        return blob.size;\n    }\n    if (typeof resource === 'string') {\n        // TODO - handle data URL?\n        return resource.length;\n    }\n    if (resource instanceof ArrayBuffer) {\n        return resource.byteLength;\n    }\n    if (ArrayBuffer.isView(resource)) {\n        return resource.byteLength;\n    }\n    return -1;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isResponse } from \"../../javascript-utils/is-type.js\";\nimport { FetchError } from \"../fetch/fetch-error.js\";\nimport { getResourceContentLength, getResourceUrl, getResourceMIMEType } from \"./resource-utils.js\";\nimport { shortenUrlForDisplay } from \"./url-utils.js\";\n/**\n * Returns a Response object\n * Adds content-length header when possible\n *\n * @param resource\n */\nexport async function makeResponse(resource) {\n    if (isResponse(resource)) {\n        return resource;\n    }\n    // Add content-length header if possible\n    const headers = {};\n    const contentLength = getResourceContentLength(resource);\n    if (contentLength >= 0) {\n        headers['content-length'] = String(contentLength);\n    }\n    // `new Response(File)` does not preserve content-type and URL\n    // so we add them here\n    const url = getResourceUrl(resource);\n    const type = getResourceMIMEType(resource);\n    if (type) {\n        headers['content-type'] = type;\n    }\n    // Add a custom header with initial bytes if available\n    const initialDataUrl = await getInitialDataUrl(resource);\n    if (initialDataUrl) {\n        headers['x-first-bytes'] = initialDataUrl;\n    }\n    // TODO - is this the best way of handling strings?\n    // Maybe package as data URL instead?\n    if (typeof resource === 'string') {\n        // Convert to ArrayBuffer to avoid Response treating it as a URL\n        resource = new TextEncoder().encode(resource);\n    }\n    // Attempt to create a Response from the resource, adding headers and setting url\n    const response = new Response(resource, { headers });\n    // We can't control `Response.url` via constructor, use a property override to record URL.\n    Object.defineProperty(response, 'url', { value: url });\n    return response;\n}\n/**\n * Checks response status (async) and throws a helpful error message if status is not OK.\n * @param response\n */\nexport async function checkResponse(response) {\n    if (!response.ok) {\n        const error = await getResponseError(response);\n        throw error;\n    }\n}\n/**\n * Checks response status (sync) and throws a helpful error message if status is not OK.\n * @param response\n */\nexport function checkResponseSync(response) {\n    if (!response.ok) {\n        let message = `${response.status} ${response.statusText}`;\n        message = message.length > 60 ? `${message.slice(0, 60)}...` : message;\n        throw new Error(message);\n    }\n}\n// HELPERS\nasync function getResponseError(response) {\n    const shortUrl = shortenUrlForDisplay(response.url);\n    let message = `Failed to fetch resource (${response.status}) ${response.statusText}: ${shortUrl}`;\n    message = message.length > 100 ? `${message.slice(0, 100)}...` : message;\n    const info = {\n        reason: response.statusText,\n        url: response.url,\n        response\n    };\n    // See if we got an error message in the body\n    try {\n        const contentType = response.headers.get('Content-Type');\n        info.reason =\n            !response.bodyUsed && contentType?.includes('application/json')\n                ? await response.json()\n                : await response.text();\n    }\n    catch (error) {\n        // eslint forbids return in a finally statement, so we just catch here\n    }\n    return new FetchError(message, info);\n}\nasync function getInitialDataUrl(resource) {\n    const INITIAL_DATA_LENGTH = 5;\n    if (typeof resource === 'string') {\n        return `data:,${resource.slice(0, INITIAL_DATA_LENGTH)}`;\n    }\n    if (resource instanceof Blob) {\n        const blobSlice = resource.slice(0, 5);\n        return await new Promise((resolve) => {\n            const reader = new FileReader();\n            reader.onload = (event) => resolve(event?.target?.result);\n            reader.readAsDataURL(blobSlice);\n        });\n    }\n    if (resource instanceof ArrayBuffer) {\n        const slice = resource.slice(0, INITIAL_DATA_LENGTH);\n        const base64 = arrayBufferToBase64(slice);\n        return `data:base64,${base64}`;\n    }\n    return null;\n}\n// https://stackoverflow.com/questions/9267899/arraybuffer-to-base64-encoded-string\nfunction arrayBufferToBase64(buffer) {\n    let binary = '';\n    const bytes = new Uint8Array(buffer);\n    for (let i = 0; i < bytes.byteLength; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return btoa(binary);\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { resolvePath } from '@loaders.gl/loader-utils';\nimport { makeResponse } from \"../utils/response-utils.js\";\n// import {FetchError} from './fetch-error';\nexport function isNodePath(url) {\n    return !isRequestURL(url) && !isDataURL(url);\n}\nexport function isRequestURL(url) {\n    return url.startsWith('http:') || url.startsWith('https:');\n}\nexport function isDataURL(url) {\n    return url.startsWith('data:');\n}\n/**\n * fetch API compatible function\n * - Supports fetching from Node.js local file system paths\n * - Respects pathPrefix and file aliases\n */\nexport async function fetchFile(urlOrData, fetchOptions) {\n    if (typeof urlOrData === 'string') {\n        const url = resolvePath(urlOrData);\n        // Support fetching from local file system\n        if (isNodePath(url)) {\n            if (globalThis.loaders?.fetchNode) {\n                return globalThis.loaders?.fetchNode(url, fetchOptions);\n            }\n            // throw new Error(\n            //   'fetchFile: globalThis.loaders.fetchNode not defined. Install @loaders.gl/polyfills'\n            // );\n        }\n        // Call global fetch\n        return await fetch(url, fetchOptions);\n    }\n    // TODO - should we still call fetch on non-URL inputs?\n    return await makeResponse(urlOrData);\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// probe.gl Log compatible loggers\nimport { Log } from '@probe.gl/log';\nexport const probeLog = new Log({ id: 'loaders.gl' });\n// Logs nothing\nexport class NullLog {\n    log() {\n        return () => { };\n    }\n    info() {\n        return () => { };\n    }\n    warn() {\n        return () => { };\n    }\n    error() {\n        return () => { };\n    }\n}\n// Logs to console\nexport class ConsoleLog {\n    console;\n    constructor() {\n        this.console = console; // eslint-disable-line\n    }\n    log(...args) {\n        return this.console.log.bind(this.console, ...args);\n    }\n    info(...args) {\n        return this.console.info.bind(this.console, ...args);\n    }\n    warn(...args) {\n        return this.console.warn.bind(this.console, ...args);\n    }\n    error(...args) {\n        return this.console.error.bind(this.console, ...args);\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isBrowser } from '@loaders.gl/loader-utils';\nimport { ConsoleLog } from \"./loggers.js\";\nexport const DEFAULT_LOADER_OPTIONS = {\n    // baseUri\n    fetch: null,\n    mimeType: undefined,\n    nothrow: false,\n    log: new ConsoleLog(), // A probe.gl compatible (`log.log()()` syntax) that just logs to console\n    useLocalLibraries: false,\n    CDN: 'https://unpkg.com/@loaders.gl',\n    worker: true, // By default, use worker if provided by loader.\n    maxConcurrency: 3, // How many worker instances should be created for each loader.\n    maxMobileConcurrency: 1, // How many worker instances should be created for each loader on mobile devices.\n    reuseWorkers: isBrowser, // By default reuse workers in browser (Node.js refuses to terminate if browsers are running)\n    _nodeWorkers: false, // By default do not support node workers\n    _workerType: '', // 'test' to use locally generated workers\n    limit: 0,\n    _limitMB: 0,\n    batchSize: 'auto',\n    batchDebounceMs: 0,\n    metadata: false, // TODO - currently only implemented for parseInBatches, adds initial metadata batch,\n    transforms: []\n};\nexport const REMOVED_LOADER_OPTIONS = {\n    throws: 'nothrow',\n    dataType: '(no longer used)',\n    uri: 'baseUri',\n    // Warn if fetch options are used on top-level\n    method: 'fetch.method',\n    headers: 'fetch.headers',\n    body: 'fetch.body',\n    mode: 'fetch.mode',\n    credentials: 'fetch.credentials',\n    cache: 'fetch.cache',\n    redirect: 'fetch.redirect',\n    referrer: 'fetch.referrer',\n    referrerPolicy: 'fetch.referrerPolicy',\n    integrity: 'fetch.integrity',\n    keepalive: 'fetch.keepalive',\n    signal: 'fetch.signal'\n};\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { registerJSModules } from '@loaders.gl/loader-utils';\nimport { isPureObject, isObject } from \"../../javascript-utils/is-type.js\";\nimport { probeLog, NullLog } from \"./loggers.js\";\nimport { DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS } from \"./option-defaults.js\";\n/**\n * Helper for safely accessing global loaders.gl variables\n * Wraps initialization of global variable in function to defeat overly aggressive tree-shakers\n */\nexport function getGlobalLoaderState() {\n    // @ts-ignore\n    globalThis.loaders = globalThis.loaders || {};\n    // @ts-ignore\n    const { loaders } = globalThis;\n    // Add _state object to keep separate from modules added to globalThis.loaders\n    if (!loaders._state) {\n        loaders._state = {};\n    }\n    return loaders._state;\n}\n/**\n * Store global loader options on the global object to increase chances of cross loaders-version interoperability\n * NOTE: This use case is not reliable but can help when testing new versions of loaders.gl with existing frameworks\n * @returns global loader options merged with default loader options\n */\nexport function getGlobalLoaderOptions() {\n    const state = getGlobalLoaderState();\n    // Ensure all default loader options from this library are mentioned\n    state.globalOptions = state.globalOptions || { ...DEFAULT_LOADER_OPTIONS };\n    return state.globalOptions;\n}\n/**\n * Set global loader options\n * @param options\n */\nexport function setGlobalOptions(options) {\n    const state = getGlobalLoaderState();\n    const globalOptions = getGlobalLoaderOptions();\n    // @ts-expect-error First param looks incorrect\n    state.globalOptions = normalizeOptionsInternal(globalOptions, options);\n    // Make sure any new modules are registered\n    registerJSModules(options.modules);\n}\n/**\n * Merges options with global opts and loader defaults, also injects baseUri\n * @param options\n * @param loader\n * @param loaders\n * @param url\n */\nexport function normalizeOptions(options, loader, loaders, url) {\n    loaders = loaders || [];\n    loaders = Array.isArray(loaders) ? loaders : [loaders];\n    validateOptions(options, loaders);\n    return normalizeOptionsInternal(loader, options, url);\n}\n// VALIDATE OPTIONS\n/**\n * Warn for unsupported options\n * @param options\n * @param loaders\n */\nfunction validateOptions(options, loaders) {\n    // Check top level options\n    validateOptionsObject(options, null, DEFAULT_LOADER_OPTIONS, REMOVED_LOADER_OPTIONS, loaders);\n    for (const loader of loaders) {\n        // Get the scoped, loader specific options from the user supplied options\n        const idOptions = ((options && options[loader.id]) || {});\n        // Get scoped, loader specific default and deprecated options from the selected loader\n        const loaderOptions = (loader.options && loader.options[loader.id]) || {};\n        const deprecatedOptions = (loader.deprecatedOptions && loader.deprecatedOptions[loader.id]) || {};\n        // Validate loader specific options\n        // @ts-ignore\n        validateOptionsObject(idOptions, loader.id, loaderOptions, deprecatedOptions, loaders);\n    }\n}\n// eslint-disable-next-line max-params, complexity\nfunction validateOptionsObject(options, id, defaultOptions, deprecatedOptions, loaders) {\n    const loaderName = id || 'Top level';\n    const prefix = id ? `${id}.` : '';\n    for (const key in options) {\n        // If top level option value is an object it could options for a loader, so ignore\n        const isSubOptions = !id && isObject(options[key]);\n        const isBaseUriOption = key === 'baseUri' && !id;\n        const isWorkerUrlOption = key === 'workerUrl' && id;\n        // <loader>.workerUrl requires special handling as it is now auto-generated and no longer specified as a default option.\n        if (!(key in defaultOptions) && !isBaseUriOption && !isWorkerUrlOption) {\n            // Issue deprecation warnings\n            if (key in deprecatedOptions) {\n                probeLog.warn(`${loaderName} loader option \\'${prefix}${key}\\' no longer supported, use \\'${deprecatedOptions[key]}\\'`)();\n            }\n            else if (!isSubOptions) {\n                const suggestion = findSimilarOption(key, loaders);\n                probeLog.warn(`${loaderName} loader option \\'${prefix}${key}\\' not recognized. ${suggestion}`)();\n            }\n        }\n    }\n}\nfunction findSimilarOption(optionKey, loaders) {\n    const lowerCaseOptionKey = optionKey.toLowerCase();\n    let bestSuggestion = '';\n    for (const loader of loaders) {\n        for (const key in loader.options) {\n            if (optionKey === key) {\n                return `Did you mean \\'${loader.id}.${key}\\'?`;\n            }\n            const lowerCaseKey = key.toLowerCase();\n            const isPartialMatch = lowerCaseOptionKey.startsWith(lowerCaseKey) || lowerCaseKey.startsWith(lowerCaseOptionKey);\n            if (isPartialMatch) {\n                bestSuggestion = bestSuggestion || `Did you mean \\'${loader.id}.${key}\\'?`;\n            }\n        }\n    }\n    return bestSuggestion;\n}\nfunction normalizeOptionsInternal(loader, options, url) {\n    const loaderDefaultOptions = loader.options || {};\n    const mergedOptions = { ...loaderDefaultOptions };\n    addUrlOptions(mergedOptions, url);\n    // LOGGING: options.log can be set to `null` to defeat logging\n    if (mergedOptions.log === null) {\n        mergedOptions.log = new NullLog();\n    }\n    mergeNestedFields(mergedOptions, getGlobalLoaderOptions());\n    mergeNestedFields(mergedOptions, options);\n    return mergedOptions;\n}\n// Merge nested options objects\nfunction mergeNestedFields(mergedOptions, options) {\n    for (const key in options) {\n        // Check for nested options\n        // object in options => either no key in defaultOptions or object in defaultOptions\n        if (key in options) {\n            const value = options[key];\n            if (isPureObject(value) && isPureObject(mergedOptions[key])) {\n                mergedOptions[key] = {\n                    ...mergedOptions[key],\n                    ...options[key]\n                };\n            }\n            else {\n                mergedOptions[key] = options[key];\n            }\n        }\n        // else: No need to merge nested opts, and the initial merge already copied over the nested options\n    }\n}\n/**\n * Harvest information from the url\n * @deprecated This is mainly there to support a hack in the GLTFLoader\n * TODO - baseUri should be a directory, i.e. remove file component from baseUri\n * TODO - extract extension?\n * TODO - extract query parameters?\n * TODO - should these be injected on context instead of options?\n */\nfunction addUrlOptions(options, url) {\n    if (url && !('baseUri' in options)) {\n        options.baseUri = url;\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { assert } from '@loaders.gl/loader-utils';\nexport function isLoaderObject(loader) {\n    if (!loader) {\n        return false;\n    }\n    if (Array.isArray(loader)) {\n        loader = loader[0];\n    }\n    const hasExtensions = Array.isArray(loader?.extensions);\n    /* Now handled by types and worker loaders do not have these\n    let hasParser =\n      loader.parseTextSync ||\n      loader.parseSync ||\n      loader.parse ||\n      loader.parseStream || // TODO Remove, Replace with parseInBatches\n      loader.parseInBatches;\n    */\n    return hasExtensions;\n}\nexport function normalizeLoader(loader) {\n    // This error is fairly easy to trigger by mixing up import statements etc\n    // So we make an exception and add a developer error message for this case\n    // To help new users from getting stuck here\n    assert(loader, 'null loader');\n    assert(isLoaderObject(loader), 'invalid loader');\n    // NORMALIZE [LOADER, OPTIONS] => LOADER\n    // If [loader, options], create a new loaders object with options merged in\n    let options;\n    if (Array.isArray(loader)) {\n        options = loader[1];\n        loader = loader[0];\n        loader = {\n            ...loader,\n            options: { ...loader.options, ...options }\n        };\n    }\n    // NORMALIZE text and binary flags\n    // Ensure at least one of text/binary flags are properly set\n    // @ts-expect-error\n    if (loader?.parseTextSync || loader?.parseText) {\n        loader.text = true;\n    }\n    if (!loader.text) {\n        loader.binary = true;\n    }\n    return loader;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { normalizeLoader } from \"../loader-utils/normalize-loader.js\";\nimport { getGlobalLoaderState } from \"../loader-utils/option-utils.js\";\n/**\n * Store global registered loaders on the global object to increase chances of cross loaders-version interoperability\n * This use case is not reliable but can help when testing new versions of loaders.gl with existing frameworks\n */\nconst getGlobalLoaderRegistry = () => {\n    const state = getGlobalLoaderState();\n    state.loaderRegistry = state.loaderRegistry || [];\n    return state.loaderRegistry;\n};\n/**\n * Register a list of global loaders\n * @note Registration erases loader type information.\n * @deprecated It is recommended that applications manage loader registration. This function will likely be remove in loaders.gl v5\n */\nexport function registerLoaders(loaders) {\n    const loaderRegistry = getGlobalLoaderRegistry();\n    loaders = Array.isArray(loaders) ? loaders : [loaders];\n    for (const loader of loaders) {\n        const normalizedLoader = normalizeLoader(loader);\n        if (!loaderRegistry.find((registeredLoader) => normalizedLoader === registeredLoader)) {\n            // add to the beginning of the loaderRegistry, so the last registeredLoader get picked\n            loaderRegistry.unshift(normalizedLoader);\n        }\n    }\n}\n/**\n * @deprecated It is recommended that applications manage loader registration. This function will likely be remove in loaders.gl v5\n */\nexport function getRegisteredLoaders() {\n    return getGlobalLoaderRegistry();\n}\n/** @deprecated For testing only  */\nexport function _unregisterLoaders() {\n    const state = getGlobalLoaderState();\n    state.loaderRegistry = [];\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { compareArrayBuffers, path, log } from '@loaders.gl/loader-utils';\nimport { normalizeLoader } from \"../loader-utils/normalize-loader.js\";\nimport { getResourceUrl, getResourceMIMEType } from \"../utils/resource-utils.js\";\nimport { compareMIMETypes } from \"../utils/mime-type-utils.js\";\nimport { getRegisteredLoaders } from \"./register-loaders.js\";\nimport { isBlob } from \"../../javascript-utils/is-type.js\";\nimport { stripQueryString } from \"../utils/url-utils.js\";\nconst EXT_PATTERN = /\\.([^.]+)$/;\n// TODO - Need a variant that peeks at streams for parseInBatches\n// TODO - Detect multiple matching loaders? Use heuristics to grade matches?\n// TODO - Allow apps to pass context to disambiguate between multiple matches (e.g. multiple .json formats)?\n/**\n * Find a loader that matches file extension and/or initial file content\n * Search the loaders array argument for a loader that matches url extension or initial data\n * Returns: a normalized loader\n * @param data data to assist\n * @param loaders\n * @param options\n * @param context used internally, applications should not provide this parameter\n */\nexport async function selectLoader(data, loaders = [], options, context) {\n    if (!validHTTPResponse(data)) {\n        return null;\n    }\n    // First make a sync attempt, disabling exceptions\n    let loader = selectLoaderSync(data, loaders, { ...options, nothrow: true }, context);\n    if (loader) {\n        return loader;\n    }\n    // For Blobs and Files, try to asynchronously read a small initial slice and test again with that\n    // to see if we can detect by initial content\n    if (isBlob(data)) {\n        data = await data.slice(0, 10).arrayBuffer();\n        loader = selectLoaderSync(data, loaders, options, context);\n    }\n    // no loader available\n    if (!loader && !options?.nothrow) {\n        throw new Error(getNoValidLoaderMessage(data));\n    }\n    return loader;\n}\n/**\n * Find a loader that matches file extension and/or initial file content\n * Search the loaders array argument for a loader that matches url extension or initial data\n * Returns: a normalized loader\n * @param data data to assist\n * @param loaders\n * @param options\n * @param context used internally, applications should not provide this parameter\n */\nexport function selectLoaderSync(data, loaders = [], options, context) {\n    if (!validHTTPResponse(data)) {\n        return null;\n    }\n    // eslint-disable-next-line complexity\n    // if only a single loader was provided (not as array), force its use\n    // TODO - Should this behavior be kept and documented?\n    if (loaders && !Array.isArray(loaders)) {\n        // TODO - remove support for legacy loaders\n        return normalizeLoader(loaders);\n    }\n    // Build list of candidate loaders that will be searched in order for a match\n    let candidateLoaders = [];\n    // First search supplied loaders\n    if (loaders) {\n        candidateLoaders = candidateLoaders.concat(loaders);\n    }\n    // Then fall back to registered loaders\n    if (!options?.ignoreRegisteredLoaders) {\n        candidateLoaders.push(...getRegisteredLoaders());\n    }\n    // TODO - remove support for legacy loaders\n    normalizeLoaders(candidateLoaders);\n    const loader = selectLoaderInternal(data, candidateLoaders, options, context);\n    // no loader available\n    if (!loader && !options?.nothrow) {\n        throw new Error(getNoValidLoaderMessage(data));\n    }\n    return loader;\n}\n/** Implements loaders selection logic */\n// eslint-disable-next-line complexity\nfunction selectLoaderInternal(data, loaders, options, context) {\n    const url = getResourceUrl(data);\n    const type = getResourceMIMEType(data);\n    const testUrl = stripQueryString(url) || context?.url;\n    let loader = null;\n    let reason = '';\n    // if options.mimeType is supplied, it takes precedence\n    if (options?.mimeType) {\n        loader = findLoaderByMIMEType(loaders, options?.mimeType);\n        reason = `match forced by supplied MIME type ${options?.mimeType}`;\n    }\n    // Look up loader by url\n    loader = loader || findLoaderByUrl(loaders, testUrl);\n    reason = reason || (loader ? `matched url ${testUrl}` : '');\n    // Look up loader by mime type\n    loader = loader || findLoaderByMIMEType(loaders, type);\n    reason = reason || (loader ? `matched MIME type ${type}` : '');\n    // Look for loader via initial bytes (Note: not always accessible (e.g. Response, stream, async iterator)\n    // @ts-ignore Blob | Response\n    loader = loader || findLoaderByInitialBytes(loaders, data);\n    // @ts-ignore Blob | Response\n    reason = reason || (loader ? `matched initial data ${getFirstCharacters(data)}` : '');\n    // Look up loader by fallback mime type\n    if (options?.fallbackMimeType) {\n        loader = loader || findLoaderByMIMEType(loaders, options?.fallbackMimeType);\n        reason = reason || (loader ? `matched fallback MIME type ${type}` : '');\n    }\n    if (reason) {\n        log.log(1, `selectLoader selected ${loader?.name}: ${reason}.`);\n    }\n    return loader;\n}\n/** Check HTTP Response */\nfunction validHTTPResponse(data) {\n    // HANDLE HTTP status\n    if (data instanceof Response) {\n        // 204 - NO CONTENT. This handles cases where e.g. a tile server responds with 204 for a missing tile\n        if (data.status === 204) {\n            return false;\n        }\n    }\n    return true;\n}\n/** Generate a helpful message to help explain why loader selection failed. */\nfunction getNoValidLoaderMessage(data) {\n    const url = getResourceUrl(data);\n    const type = getResourceMIMEType(data);\n    let message = 'No valid loader found (';\n    message += url ? `${path.filename(url)}, ` : 'no url provided, ';\n    message += `MIME type: ${type ? `\"${type}\"` : 'not provided'}, `;\n    // First characters are only accessible when called on data (string or arrayBuffer).\n    // @ts-ignore Blob | Response\n    const firstCharacters = data ? getFirstCharacters(data) : '';\n    message += firstCharacters ? ` first bytes: \"${firstCharacters}\"` : 'first bytes: not available';\n    message += ')';\n    return message;\n}\nfunction normalizeLoaders(loaders) {\n    for (const loader of loaders) {\n        normalizeLoader(loader);\n    }\n}\n// TODO - Would be nice to support http://example.com/file.glb?parameter=1\n// E.g: x = new URL('http://example.com/file.glb?load=1'; x.pathname\nfunction findLoaderByUrl(loaders, url) {\n    // Get extension\n    const match = url && EXT_PATTERN.exec(url);\n    const extension = match && match[1];\n    return extension ? findLoaderByExtension(loaders, extension) : null;\n}\nfunction findLoaderByExtension(loaders, extension) {\n    extension = extension.toLowerCase();\n    for (const loader of loaders) {\n        for (const loaderExtension of loader.extensions) {\n            if (loaderExtension.toLowerCase() === extension) {\n                return loader;\n            }\n        }\n    }\n    return null;\n}\nfunction findLoaderByMIMEType(loaders, mimeType) {\n    for (const loader of loaders) {\n        if (loader.mimeTypes?.some((mimeType1) => compareMIMETypes(mimeType, mimeType1))) {\n            return loader;\n        }\n        // Support referring to loaders using the \"unregistered tree\"\n        // https://en.wikipedia.org/wiki/Media_type#Unregistered_tree\n        if (compareMIMETypes(mimeType, `application/x.${loader.id}`)) {\n            return loader;\n        }\n    }\n    return null;\n}\nfunction findLoaderByInitialBytes(loaders, data) {\n    if (!data) {\n        return null;\n    }\n    for (const loader of loaders) {\n        if (typeof data === 'string') {\n            if (testDataAgainstText(data, loader)) {\n                return loader;\n            }\n        }\n        else if (ArrayBuffer.isView(data)) {\n            // Typed Arrays can have offsets into underlying buffer\n            if (testDataAgainstBinary(data.buffer, data.byteOffset, loader)) {\n                return loader;\n            }\n        }\n        else if (data instanceof ArrayBuffer) {\n            const byteOffset = 0;\n            if (testDataAgainstBinary(data, byteOffset, loader)) {\n                return loader;\n            }\n        }\n        // TODO Handle streaming case (requires creating a new AsyncIterator)\n    }\n    return null;\n}\nfunction testDataAgainstText(data, loader) {\n    if (loader.testText) {\n        return loader.testText(data);\n    }\n    const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n    return tests.some((test) => data.startsWith(test));\n}\nfunction testDataAgainstBinary(data, byteOffset, loader) {\n    const tests = Array.isArray(loader.tests) ? loader.tests : [loader.tests];\n    return tests.some((test) => testBinary(data, byteOffset, loader, test));\n}\nfunction testBinary(data, byteOffset, loader, test) {\n    if (test instanceof ArrayBuffer) {\n        return compareArrayBuffers(test, data, test.byteLength);\n    }\n    switch (typeof test) {\n        case 'function':\n            return test(data);\n        case 'string':\n            // Magic bytes check: If `test` is a string, check if binary data starts with that strings\n            const magic = getMagicString(data, byteOffset, test.length);\n            return test === magic;\n        default:\n            return false;\n    }\n}\nfunction getFirstCharacters(data, length = 5) {\n    if (typeof data === 'string') {\n        return data.slice(0, length);\n    }\n    else if (ArrayBuffer.isView(data)) {\n        // Typed Arrays can have offsets into underlying buffer\n        return getMagicString(data.buffer, data.byteOffset, length);\n    }\n    else if (data instanceof ArrayBuffer) {\n        const byteOffset = 0;\n        return getMagicString(data, byteOffset, length);\n    }\n    return '';\n}\nfunction getMagicString(arrayBuffer, byteOffset, length) {\n    if (arrayBuffer.byteLength < byteOffset + length) {\n        return '';\n    }\n    const dataView = new DataView(arrayBuffer);\n    let magic = '';\n    for (let i = 0; i < length; i++) {\n        magic += String.fromCharCode(dataView.getUint8(byteOffset + i));\n    }\n    return magic;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst DEFAULT_CHUNK_SIZE = 256 * 1024;\n/**\n * Returns an iterator that breaks a big string into chunks and yields them one-by-one as ArrayBuffers\n * @param blob string to iterate over\n * @param options\n * @param options.chunkSize\n */\nexport function* makeStringIterator(string, options) {\n    const chunkSize = options?.chunkSize || DEFAULT_CHUNK_SIZE;\n    let offset = 0;\n    const textEncoder = new TextEncoder();\n    while (offset < string.length) {\n        // Create a chunk of the right size\n        const chunkLength = Math.min(string.length - offset, chunkSize);\n        const chunk = string.slice(offset, offset + chunkLength);\n        offset += chunkLength;\n        // yield an ArrayBuffer chunk\n        yield textEncoder.encode(chunk);\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst DEFAULT_CHUNK_SIZE = 256 * 1024;\n/**\n * Returns an iterator that breaks a big ArrayBuffer into chunks and yields them one-by-one\n * @param blob ArrayBuffer to iterate over\n * @param options\n * @param options.chunkSize\n */\nexport function* makeArrayBufferIterator(arrayBuffer, options = {}) {\n    const { chunkSize = DEFAULT_CHUNK_SIZE } = options;\n    let byteOffset = 0;\n    while (byteOffset < arrayBuffer.byteLength) {\n        // Create a chunk of the right size\n        const chunkByteLength = Math.min(arrayBuffer.byteLength - byteOffset, chunkSize);\n        const chunk = new ArrayBuffer(chunkByteLength);\n        // Copy data from the big chunk\n        const sourceArray = new Uint8Array(arrayBuffer, byteOffset, chunkByteLength);\n        const chunkArray = new Uint8Array(chunk);\n        chunkArray.set(sourceArray);\n        // yield the chunk\n        byteOffset += chunkByteLength;\n        yield chunk;\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst DEFAULT_CHUNK_SIZE = 1024 * 1024; // 1MB  biggest value that keeps UI responsive\n/**\n * Returns an iterator that breaks a big Blob into chunks and yields them one-by-one\n * @param blob Blob or File object\n * @param options\n * @param options.chunkSize\n */\nexport async function* makeBlobIterator(blob, options) {\n    const chunkSize = options?.chunkSize || DEFAULT_CHUNK_SIZE;\n    let offset = 0;\n    while (offset < blob.size) {\n        const end = offset + chunkSize;\n        const chunk = await blob.slice(offset, end).arrayBuffer();\n        offset = end;\n        yield chunk;\n    }\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isBrowser, toArrayBuffer } from '@loaders.gl/loader-utils';\n/**\n * Returns an async iterable that reads from a stream (works in both Node.js and browsers)\n * @param stream stream to iterator over\n */\nexport function makeStreamIterator(stream, options) {\n    return isBrowser\n        ? makeBrowserStreamIterator(stream, options)\n        : makeNodeStreamIterator(stream, options);\n}\n/**\n * Returns an async iterable that reads from a DOM (browser) stream\n * @param stream stream to iterate from\n * @see https://jakearchibald.com/2017/async-iterators-and-generators/#making-streams-iterate\n */\nasync function* makeBrowserStreamIterator(stream, options) {\n    // WhatWG: stream is supposed to have a `getIterator` method\n    // if (typeof stream.getIterator === 'function') {\n    //   return stream.getIterator();\n    // }\n    // if (typeof stream[Symbol.asyncIterator] === 'function') {\n    //   return makeToArrayBufferIterator(stream);\n    // }\n    // In the browser, we first need to get a lock on the stream\n    const reader = stream.getReader();\n    let nextBatchPromise;\n    try {\n        // eslint-disable-next-line no-constant-condition\n        while (true) {\n            const currentBatchPromise = nextBatchPromise || reader.read();\n            // Issue a read for an additional batch, while we await the next batch\n            // Idea is to make fetching happen in parallel with processing / parsing\n            if (options?._streamReadAhead) {\n                nextBatchPromise = reader.read();\n            }\n            // Read from the stream\n            // value is a Uint8Array\n            const { done, value } = await currentBatchPromise;\n            // Exit if we're done\n            if (done) {\n                return;\n            }\n            // Else yield the chunk\n            yield toArrayBuffer(value);\n        }\n    }\n    catch (error) {\n        // TODO - examples makes it look like this should always be called,\n        // but that generates exceptions so only call it if we do not reach the end\n        reader.releaseLock();\n    }\n}\n/**\n * Returns an async iterable that reads from a DOM (browser) stream\n * @param stream stream to iterate from\n * @note Requires Node.js >= 10\n */\nasync function* makeNodeStreamIterator(stream, options) {\n    // Hacky test for node version to ensure we don't call bad polyfills\n    // NODE 10+: stream is an asyncIterator\n    for await (const chunk of stream) {\n        yield toArrayBuffer(chunk); // Coerce each chunk to ArrayBuffer\n    }\n}\n/* TODO - remove NODE < 10\n * @see https://github.com/bustle/streaming-iterables, MIT license\n *\n  if (typeof stream[Symbol.asyncIterator] === 'function') {\n    return;\n  }\n\n  // TODO - check if is this ever used in Node 10+?\n  // eslint-disable-next-line no-constant-condition\n  while (true) {\n    const data = stream.read();\n    if (data !== null) {\n      yield toArrayBuffer(data);\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    if (stream._readableState?.ended) {\n      return;\n    }\n    await onceReadable(stream);\n  }\n\nasync function onceReadable(stream: Readable): Promise<any> {\n  return new Promise((resolve) => {\n    stream.once('readable', resolve);\n  });\n}\n  */\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { makeStringIterator } from \"./make-string-iterator.js\";\nimport { makeArrayBufferIterator } from \"./make-array-buffer-iterator.js\";\nimport { makeBlobIterator } from \"./make-blob-iterator.js\";\nimport { makeStreamIterator } from \"./make-stream-iterator.js\";\nimport { isBlob, isReadableStream, isResponse } from \"../../javascript-utils/is-type.js\";\n/**\n * Returns an iterator that breaks its input into chunks and yields them one-by-one.\n * @param data\n * @param options\n * @returns\n * This function can e.g. be used to enable data sources that can only be read atomically\n * (such as `Blob` and `File` via `FileReader`) to still be parsed in batches.\n */\nexport function makeIterator(data, options) {\n    if (typeof data === 'string') {\n        // Note: Converts string chunks to binary\n        return makeStringIterator(data, options);\n    }\n    if (data instanceof ArrayBuffer) {\n        return makeArrayBufferIterator(data, options);\n    }\n    if (isBlob(data)) {\n        return makeBlobIterator(data, options);\n    }\n    if (isReadableStream(data)) {\n        return makeStreamIterator(data, options);\n    }\n    if (isResponse(data)) {\n        const response = data;\n        return makeStreamIterator(response.body, options);\n    }\n    throw new Error('makeIterator');\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { concatenateArrayBuffersAsync } from '@loaders.gl/loader-utils';\nimport { isResponse, isReadableStream, isAsyncIterable, isIterable, isIterator, isBlob, isBuffer } from \"../../javascript-utils/is-type.js\";\nimport { makeIterator } from \"../../iterators/make-iterator/make-iterator.js\";\nimport { checkResponse, makeResponse } from \"../utils/response-utils.js\";\nconst ERR_DATA = 'Cannot convert supplied data type';\n// eslint-disable-next-line complexity\nexport function getArrayBufferOrStringFromDataSync(data, loader, options) {\n    if (loader.text && typeof data === 'string') {\n        return data;\n    }\n    if (isBuffer(data)) {\n        // @ts-ignore\n        data = data.buffer;\n    }\n    if (data instanceof ArrayBuffer) {\n        const arrayBuffer = data;\n        if (loader.text && !loader.binary) {\n            const textDecoder = new TextDecoder('utf8');\n            return textDecoder.decode(arrayBuffer);\n        }\n        return arrayBuffer;\n    }\n    // We may need to handle offsets\n    if (ArrayBuffer.isView(data)) {\n        // TextDecoder is invoked on typed arrays and will handle offsets\n        if (loader.text && !loader.binary) {\n            const textDecoder = new TextDecoder('utf8');\n            return textDecoder.decode(data);\n        }\n        let arrayBuffer = data.buffer;\n        // Since we are returning the underlying arrayBuffer, we must create a new copy\n        // if this typed array / Buffer is a partial view into the ArryayBuffer\n        // TODO - this is a potentially unnecessary copy\n        const byteLength = data.byteLength || data.length;\n        if (data.byteOffset !== 0 || byteLength !== arrayBuffer.byteLength) {\n            // console.warn(`loaders.gl copying arraybuffer of length ${byteLength}`);\n            arrayBuffer = arrayBuffer.slice(data.byteOffset, data.byteOffset + byteLength);\n        }\n        return arrayBuffer;\n    }\n    throw new Error(ERR_DATA);\n}\n// Convert async iterator to a promise\nexport async function getArrayBufferOrStringFromData(data, loader, options) {\n    const isArrayBuffer = data instanceof ArrayBuffer || ArrayBuffer.isView(data);\n    if (typeof data === 'string' || isArrayBuffer) {\n        return getArrayBufferOrStringFromDataSync(data, loader, options);\n    }\n    // Blobs and files are FileReader compatible\n    if (isBlob(data)) {\n        data = await makeResponse(data);\n    }\n    if (isResponse(data)) {\n        const response = data;\n        await checkResponse(response);\n        return loader.binary ? await response.arrayBuffer() : await response.text();\n    }\n    if (isReadableStream(data)) {\n        // @ts-expect-error TS2559 options type\n        data = makeIterator(data, options);\n    }\n    if (isIterable(data) || isAsyncIterable(data)) {\n        // Assume arrayBuffer iterator - attempt to concatenate\n        return concatenateArrayBuffersAsync(data);\n    }\n    throw new Error(ERR_DATA);\n}\nexport async function getAsyncIterableFromData(data, options) {\n    if (isIterator(data)) {\n        return data;\n    }\n    if (isResponse(data)) {\n        const response = data;\n        // Note Since this function is not async, we currently can't load error message, just status\n        await checkResponse(response);\n        // TODO - bug in polyfill, body can be a Promise under Node.js\n        // eslint-disable-next-line @typescript-eslint/await-thenable\n        const body = await response.body;\n        // TODO - body can be null?\n        return makeIterator(body, options);\n    }\n    if (isBlob(data) || isReadableStream(data)) {\n        return makeIterator(data, options);\n    }\n    if (isAsyncIterable(data)) {\n        return data;\n    }\n    return getIterableFromData(data);\n}\nexport async function getReadableStream(data) {\n    if (isReadableStream(data)) {\n        return data;\n    }\n    if (isResponse(data)) {\n        // @ts-ignore\n        return data.body;\n    }\n    const response = await makeResponse(data);\n    // @ts-ignore\n    return response.body;\n}\n// HELPERS\nfunction getIterableFromData(data) {\n    // generate an iterator that emits a single chunk\n    if (ArrayBuffer.isView(data)) {\n        return (function* oneChunk() {\n            yield data.buffer;\n        })();\n    }\n    if (data instanceof ArrayBuffer) {\n        return (function* oneChunk() {\n            yield data;\n        })();\n    }\n    if (isIterator(data)) {\n        return data;\n    }\n    if (isIterable(data)) {\n        return data[Symbol.iterator]();\n    }\n    throw new Error(ERR_DATA);\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isObject } from \"../../javascript-utils/is-type.js\";\nimport { fetchFile } from \"../fetch/fetch-file.js\";\nimport { getGlobalLoaderOptions } from \"./option-utils.js\";\n/**\n * Gets the current fetch function from options and context\n * @param options\n * @param context\n */\nexport function getFetchFunction(options, context) {\n    const globalOptions = getGlobalLoaderOptions();\n    const loaderOptions = options || globalOptions;\n    // options.fetch can be a function\n    if (typeof loaderOptions.fetch === 'function') {\n        return loaderOptions.fetch;\n    }\n    // options.fetch can be an options object\n    if (isObject(loaderOptions.fetch)) {\n        return (url) => fetchFile(url, loaderOptions.fetch);\n    }\n    // else refer to context (from parent loader) if available\n    if (context?.fetch) {\n        return context?.fetch;\n    }\n    // else return the default fetch function\n    return fetchFile;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { getFetchFunction } from \"./get-fetch-function.js\";\nimport { extractQueryString, stripQueryString } from \"../utils/url-utils.js\";\nimport { path } from '@loaders.gl/loader-utils';\n/**\n * \"sub\" loaders invoked by other loaders get a \"context\" injected on `this`\n * The context will inject core methods like `parse` and contain information\n * about loaders and options passed in to the top-level `parse` call.\n *\n * @param context\n * @param options\n * @param previousContext\n */\nexport function getLoaderContext(context, options, parentContext) {\n    // For recursive calls, we already have a context\n    // TODO - add any additional loaders to context?\n    if (parentContext) {\n        return parentContext;\n    }\n    const newContext = {\n        fetch: getFetchFunction(options, context),\n        ...context\n    };\n    // Parse URLs so that subloaders can easily generate correct strings\n    if (newContext.url) {\n        const baseUrl = stripQueryString(newContext.url);\n        newContext.baseUrl = baseUrl;\n        newContext.queryString = extractQueryString(newContext.url);\n        newContext.filename = path.filename(baseUrl);\n        newContext.baseUrl = path.dirname(baseUrl);\n    }\n    // Recursive loading does not use single loader\n    if (!Array.isArray(newContext.loaders)) {\n        newContext.loaders = null;\n    }\n    return newContext;\n}\n// eslint-disable-next-line complexity\nexport function getLoadersFromContext(loaders, context) {\n    // A single loader (non-array) indicates no selection desired. Force select.\n    if (loaders && !Array.isArray(loaders)) {\n        return loaders;\n    }\n    // Create a merged list\n    let candidateLoaders;\n    if (loaders) {\n        candidateLoaders = Array.isArray(loaders) ? loaders : [loaders];\n    }\n    if (context && context.loaders) {\n        const contextLoaders = Array.isArray(context.loaders) ? context.loaders : [context.loaders];\n        candidateLoaders = candidateLoaders ? [...candidateLoaders, ...contextLoaders] : contextLoaders;\n    }\n    // If no loaders, return null to look in globally registered loaders\n    return candidateLoaders && candidateLoaders.length ? candidateLoaders : undefined;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { parseWithWorker, canParseWithWorker, mergeLoaderOptions } from '@loaders.gl/loader-utils';\nimport { assert, validateWorkerVersion } from '@loaders.gl/worker-utils';\nimport { isLoaderObject } from \"../loader-utils/normalize-loader.js\";\nimport { isResponse } from \"../../javascript-utils/is-type.js\";\nimport { normalizeOptions } from \"../loader-utils/option-utils.js\";\nimport { getArrayBufferOrStringFromData } from \"../loader-utils/get-data.js\";\nimport { getLoaderContext, getLoadersFromContext } from \"../loader-utils/loader-context.js\";\nimport { getResourceUrl } from \"../utils/resource-utils.js\";\nimport { selectLoader } from \"./select-loader.js\";\n/**\n * Parses `data` using a specified loader\n * @param data\n * @param loaders\n * @param options\n * @param context\n */\n// implementation signature\nexport async function parse(data, loaders, options, context) {\n    // Signature: parse(data, options, context | url)\n    // Uses registered loaders\n    if (loaders && !Array.isArray(loaders) && !isLoaderObject(loaders)) {\n        context = undefined; // context not supported in short signature\n        options = loaders;\n        loaders = undefined;\n    }\n    data = await data; // Resolve any promise\n    options = options || {}; // Could be invalid...\n    // Extract a url for auto detection\n    const url = getResourceUrl(data);\n    // Chooses a loader (and normalizes it)\n    // Also use any loaders in the context, new loaders take priority\n    const typedLoaders = loaders;\n    const candidateLoaders = getLoadersFromContext(typedLoaders, context);\n    // todo hacky type cast\n    const loader = await selectLoader(data, candidateLoaders, options);\n    // Note: if no loader was found, if so just return null\n    if (!loader) {\n        return null;\n    }\n    // Normalize options\n    // @ts-expect-error\n    options = normalizeOptions(options, loader, candidateLoaders, url); // Could be invalid...\n    // Get a context (if already present, will be unchanged)\n    context = getLoaderContext(\n    // @ts-expect-error\n    { url, _parse: parse, loaders: candidateLoaders }, options, context || null);\n    return await parseWithLoader(loader, data, options, context);\n}\n// TODO: support progress and abort\n// TODO - should accept loader.parseAsyncIterator and concatenate.\nasync function parseWithLoader(loader, data, options, context) {\n    validateWorkerVersion(loader);\n    options = mergeLoaderOptions(loader.options, options);\n    if (isResponse(data)) {\n        // Serialize to support passing the response to web worker\n        const response = data;\n        const { ok, redirected, status, statusText, type, url } = response;\n        const headers = Object.fromEntries(response.headers.entries());\n        // @ts-expect-error TODO - fix this\n        context.response = { headers, ok, redirected, status, statusText, type, url };\n    }\n    data = await getArrayBufferOrStringFromData(data, loader, options);\n    const loaderWithParser = loader;\n    // First check for synchronous text parser, wrap results in promises\n    if (loaderWithParser.parseTextSync && typeof data === 'string') {\n        return loaderWithParser.parseTextSync(data, options, context);\n    }\n    // If we have a workerUrl and the loader can parse the given options efficiently in a worker\n    if (canParseWithWorker(loader, options)) {\n        return await parseWithWorker(loader, data, options, context, parse);\n    }\n    // Check for asynchronous parser\n    if (loaderWithParser.parseText && typeof data === 'string') {\n        return await loaderWithParser.parseText(data, options, context);\n    }\n    if (loaderWithParser.parse) {\n        return await loaderWithParser.parse(data, options, context);\n    }\n    // This should not happen, all sync loaders should also offer `parse` function\n    assert(!loaderWithParser.parseSync);\n    // TBD - If asynchronous parser not available, return null\n    throw new Error(`${loader.id} loader - no parser found and worker is disabled`);\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { isBlob } from \"../../javascript-utils/is-type.js\";\nimport { isLoaderObject } from \"../loader-utils/normalize-loader.js\";\nimport { getFetchFunction } from \"../loader-utils/get-fetch-function.js\";\nimport { parse } from \"./parse.js\";\n// export async function load(url: string | DataType, loaders: LoaderOptions): Promise<any>;\n// implementation signature\nexport async function load(url, loaders, options, context) {\n    let resolvedLoaders;\n    let resolvedOptions;\n    // Signature: load(url, options)\n    if (!Array.isArray(loaders) && !isLoaderObject(loaders)) {\n        resolvedLoaders = [];\n        resolvedOptions = loaders;\n        context = undefined; // context not supported in short signature\n    }\n    else {\n        resolvedLoaders = loaders;\n        resolvedOptions = options;\n    }\n    // Select fetch function\n    const fetch = getFetchFunction(resolvedOptions);\n    // at this point, `url` could be already loaded binary data\n    let data = url;\n    // url is a string, fetch the url\n    if (typeof url === 'string') {\n        data = await fetch(url);\n        // URL is Blob or File, fetchFile handles it (alt: we could generate ObjectURL here)\n    }\n    if (isBlob(url)) {\n        // The fetch response object will contain blob.name\n        // @ts-expect-error TODO - This may not work for overridden fetch functions\n        data = await fetch(url);\n    }\n    // Data is loaded (at least we have a `Response` object) so time to hand over to `parse`\n    // return await parse(data, loaders as Loader[], options);\n    return Array.isArray(resolvedLoaders)\n        ? await parse(data, resolvedLoaders, resolvedOptions) // loader array overload\n        : await parse(data, resolvedLoaders, resolvedOptions); // single loader overload\n}\n","// Version constant cannot be imported, it needs to correspond to the build version of **this** module.\n// __VERSION__ is injected by babel-plugin-version-inline\n// @ts-ignore TS2304: Cannot find name '__VERSION__'.\nexport const VERSION = typeof \"4.3.3\" !== 'undefined' ? \"4.3.3\" : 'latest';\n","import { isBrowser } from '@loaders.gl/loader-utils';\n// @ts-ignore TS2339: Property does not exist on type\nconst parseImageNode = globalThis.loaders?.parseImageNode;\nconst IMAGE_SUPPORTED = typeof Image !== 'undefined'; // NOTE: \"false\" positives if jsdom is installed\nconst IMAGE_BITMAP_SUPPORTED = typeof ImageBitmap !== 'undefined';\nconst NODE_IMAGE_SUPPORTED = Boolean(parseImageNode);\nconst DATA_SUPPORTED = isBrowser ? true : NODE_IMAGE_SUPPORTED;\n/**\n * Checks if a loaders.gl image type is supported\n * @param type image type string\n */\nexport function isImageTypeSupported(type) {\n    switch (type) {\n        case 'auto':\n            // Should only ever be false in Node.js, if polyfills have not been installed...\n            return IMAGE_BITMAP_SUPPORTED || IMAGE_SUPPORTED || DATA_SUPPORTED;\n        case 'imagebitmap':\n            return IMAGE_BITMAP_SUPPORTED;\n        case 'image':\n            return IMAGE_SUPPORTED;\n        case 'data':\n            return DATA_SUPPORTED;\n        default:\n            throw new Error(`@loaders.gl/images: image ${type} not supported in this environment`);\n    }\n}\n/**\n * Returns the \"most performant\" supported image type on this platform\n * @returns image type string\n */\nexport function getDefaultImageType() {\n    if (IMAGE_BITMAP_SUPPORTED) {\n        return 'imagebitmap';\n    }\n    if (IMAGE_SUPPORTED) {\n        return 'image';\n    }\n    if (DATA_SUPPORTED) {\n        return 'data';\n    }\n    // This should only happen in Node.js\n    throw new Error('Install \\'@loaders.gl/polyfills\\' to parse images under Node.js');\n}\n","export function isImage(image) {\n    return Boolean(getImageTypeOrNull(image));\n}\nexport function deleteImage(image) {\n    switch (getImageType(image)) {\n        case 'imagebitmap':\n            image.close();\n            break;\n        default:\n        // Nothing to do for images and image data objects\n    }\n}\nexport function getImageType(image) {\n    const format = getImageTypeOrNull(image);\n    if (!format) {\n        throw new Error('Not an image');\n    }\n    return format;\n}\nexport function getImageSize(image) {\n    return getImageData(image);\n}\nexport function getImageData(image) {\n    switch (getImageType(image)) {\n        case 'data':\n            return image;\n        case 'image':\n        case 'imagebitmap':\n            // Extract the image data from the image via a canvas\n            const canvas = document.createElement('canvas');\n            // TODO - reuse the canvas?\n            const context = canvas.getContext('2d');\n            if (!context) {\n                throw new Error('getImageData');\n            }\n            // @ts-ignore\n            canvas.width = image.width;\n            // @ts-ignore\n            canvas.height = image.height;\n            // @ts-ignore\n            context.drawImage(image, 0, 0);\n            // @ts-ignore\n            return context.getImageData(0, 0, image.width, image.height);\n        default:\n            throw new Error('getImageData');\n    }\n}\n// PRIVATE\n// eslint-disable-next-line complexity\nfunction getImageTypeOrNull(image) {\n    if (typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap) {\n        return 'imagebitmap';\n    }\n    if (typeof Image !== 'undefined' && image instanceof Image) {\n        return 'image';\n    }\n    if (image && typeof image === 'object' && image.data && image.width && image.height) {\n        return 'data';\n    }\n    return null;\n}\n","// SVG parsing has limitations, e.g:\n// https://bugs.chromium.org/p/chromium/issues/detail?id=606319\nconst SVG_DATA_URL_PATTERN = /^data:image\\/svg\\+xml/;\nconst SVG_URL_PATTERN = /\\.svg((\\?|#).*)?$/;\nexport function isSVG(url) {\n    return url && (SVG_DATA_URL_PATTERN.test(url) || SVG_URL_PATTERN.test(url));\n}\nexport function getBlobOrSVGDataUrl(arrayBuffer, url) {\n    if (isSVG(url)) {\n        // Prepare a properly tagged data URL, and load using normal mechanism\n        const textDecoder = new TextDecoder();\n        let xmlText = textDecoder.decode(arrayBuffer);\n        // TODO Escape in browser to support e.g. Chinese characters\n        try {\n            if (typeof unescape === 'function' && typeof encodeURIComponent === 'function') {\n                xmlText = unescape(encodeURIComponent(xmlText));\n            }\n        }\n        catch (error) {\n            throw new Error(error.message);\n        }\n        // base64 encoding is safer. utf-8 fails in some browsers\n        const src = `data:image/svg+xml;base64,${btoa(xmlText)}`;\n        return src;\n    }\n    return getBlob(arrayBuffer, url);\n}\nexport function getBlob(arrayBuffer, url) {\n    if (isSVG(url)) {\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=606319\n        // return new Blob([new Uint8Array(arrayBuffer)], {type: 'image/svg+xml'});\n        throw new Error('SVG cannot be parsed directly to imagebitmap');\n    }\n    // TODO - how to determine mime type? Param? Sniff here?\n    return new Blob([new Uint8Array(arrayBuffer)]); // MIME type not needed?\n}\n","import { getBlobOrSVGDataUrl } from \"./svg-utils.js\";\n// Parses html image from array buffer\nexport async function parseToImage(arrayBuffer, options, url) {\n    // Note: image parsing requires conversion to Blob (for createObjectURL).\n    // Potentially inefficient for not using `response.blob()` (and for File / Blob inputs)...\n    // But presumably not worth adding 'blob' flag to loader objects?\n    const blobOrDataUrl = getBlobOrSVGDataUrl(arrayBuffer, url);\n    const URL = self.URL || self.webkitURL;\n    const objectUrl = typeof blobOrDataUrl !== 'string' && URL.createObjectURL(blobOrDataUrl);\n    try {\n        return await loadToImage(objectUrl || blobOrDataUrl, options);\n    }\n    finally {\n        if (objectUrl) {\n            URL.revokeObjectURL(objectUrl);\n        }\n    }\n}\nexport async function loadToImage(url, options) {\n    const image = new Image();\n    image.src = url;\n    // The `image.onload()` callback does not guarantee that the image has been decoded\n    // so a main thread \"freeze\" can be incurred when using the image for the first time.\n    // `Image.decode()` returns a promise that completes when image is decoded.\n    // https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/decode\n    // Note: When calling `img.decode()`, we do not need to wait for `img.onload()`\n    // Note: `HTMLImageElement.decode()` is not available in Edge and IE11\n    if (options.image && options.image.decode && image.decode) {\n        await image.decode();\n        return image;\n    }\n    // Create a promise that tracks onload/onerror callbacks\n    return await new Promise((resolve, reject) => {\n        try {\n            image.onload = () => resolve(image);\n            image.onerror = (error) => {\n                const message = error instanceof Error ? error.message : 'error';\n                reject(new Error(message));\n            };\n        }\n        catch (error) {\n            reject(error);\n        }\n    });\n}\n","import { isSVG, getBlob } from \"./svg-utils.js\";\nimport { parseToImage } from \"./parse-to-image.js\";\nconst EMPTY_OBJECT = {};\nlet imagebitmapOptionsSupported = true;\n/**\n * Asynchronously parses an array buffer into an ImageBitmap - this contains the decoded data\n * ImageBitmaps are supported on worker threads, but not supported on Edge, IE11 and Safari\n * https://developer.mozilla.org/en-US/docs/Web/API/ImageBitmap#Browser_compatibility\n *\n * TODO - createImageBitmap supports source rect (5 param overload), pass through?\n */\nexport async function parseToImageBitmap(arrayBuffer, options, url) {\n    let blob;\n    // Cannot parse SVG directly to ImageBitmap, parse to Image first\n    if (isSVG(url)) {\n        // Note: this only works on main thread\n        const image = await parseToImage(arrayBuffer, options, url);\n        blob = image;\n    }\n    else {\n        // Create blob from the array buffer\n        blob = getBlob(arrayBuffer, url);\n    }\n    const imagebitmapOptions = options && options.imagebitmap;\n    return await safeCreateImageBitmap(blob, imagebitmapOptions);\n}\n/**\n * Safely creates an imageBitmap with options\n * *\n * Firefox crashes if imagebitmapOptions is supplied\n * Avoid supplying if not provided or supported, remember if not supported\n */\nasync function safeCreateImageBitmap(blob, imagebitmapOptions = null) {\n    if (isEmptyObject(imagebitmapOptions) || !imagebitmapOptionsSupported) {\n        imagebitmapOptions = null;\n    }\n    if (imagebitmapOptions) {\n        try {\n            // @ts-ignore Options\n            return await createImageBitmap(blob, imagebitmapOptions);\n        }\n        catch (error) {\n            console.warn(error); // eslint-disable-line\n            imagebitmapOptionsSupported = false;\n        }\n    }\n    return await createImageBitmap(blob);\n}\nfunction isEmptyObject(object) {\n    // @ts-ignore\n    for (const key in object || EMPTY_OBJECT) {\n        return false;\n    }\n    return true;\n}\n","// loaders.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// code adapted from https://github.com/sindresorhus/file-type under MIT license\n/**\n * Tests if a buffer is in ISO base media file format (ISOBMFF) @see https://en.wikipedia.org/wiki/ISO_base_media_file_format\n * (ISOBMFF is a media container standard based on the Apple QuickTime container format)\n */\nexport function getISOBMFFMediaType(buffer) {\n    // Almost all ISO base media files start with `ftyp` box. (It's not required to be first, but it's recommended to be.)\n    if (!checkString(buffer, 'ftyp', 4)) {\n        return null;\n    }\n    // Extra check: test for 8859-1 printable characters (for simplicity, it's a mask which also catches one non-printable character).\n    if ((buffer[8] & 0x60) === 0x00) {\n        return null;\n    }\n    // `ftyp` box must contain a brand major identifier, which must consist of ISO 8859-1 printable characters.\n    return decodeMajorBrand(buffer);\n}\n/**\n * brands explained @see https://github.com/strukturag/libheif/issues/83\n * code adapted from @see https://github.com/sindresorhus/file-type/blob/main/core.js#L489-L492\n */\nexport function decodeMajorBrand(buffer) {\n    const brandMajor = getUTF8String(buffer, 8, 12).replace('\\0', ' ').trim();\n    switch (brandMajor) {\n        case 'avif':\n        case 'avis':\n            return { extension: 'avif', mimeType: 'image/avif' };\n        default:\n            return null;\n    }\n    // We don't need these now, but they are easy to add\n    // case 'mif1':\n    //   return {extension: 'heic', mimeType: 'image/heif'};\n    // case 'msf1':\n    //   return {extension: 'heic', mimeType: 'image/heif-sequence'};\n    // case 'heic':\n    // case 'heix':\n    //   return {extension: 'heic', mimeType: 'image/heic'};\n    // case 'hevc':\n    // case 'hevx':\n    //   return {extension: 'heic', mimeType: 'image/heic-sequence'};\n    // case 'qt':\n    //   return {ext: 'mov', mime: 'video/quicktime'};\n    // case 'M4V':\n    // case 'M4VH':\n    // case 'M4VP':\n    //   return {ext: 'm4v', mime: 'video/x-m4v'};\n    // case 'M4P':\n    //   return {ext: 'm4p', mime: 'video/mp4'};\n    // case 'M4B':\n    //   return {ext: 'm4b', mime: 'audio/mp4'};\n    // case 'M4A':\n    //   return {ext: 'm4a', mime: 'audio/x-m4a'};\n    // case 'F4V':\n    //   return {ext: 'f4v', mime: 'video/mp4'};\n    // case 'F4P':\n    //   return {ext: 'f4p', mime: 'video/mp4'};\n    // case 'F4A':\n    //   return {ext: 'f4a', mime: 'audio/mp4'};\n    // case 'F4B':\n    //   return {ext: 'f4b', mime: 'audio/mp4'};\n    // case 'crx':\n    //   return {ext: 'cr3', mime: 'image/x-canon-cr3'};\n    // default:\n    // if (brandMajor.startsWith('3g')) {\n    //   if (brandMajor.startsWith('3g2')) {\n    //     return {ext: '3g2', mime: 'video/3gpp2'};\n    //   }\n    //   return {ext: '3gp', mime: 'video/3gpp'};\n    // }\n    // return {ext: 'mp4', mime: 'video/mp4'};\n}\n/** Interpret a chunk of bytes as a UTF8 string */\nfunction getUTF8String(array, start, end) {\n    return String.fromCharCode(...array.slice(start, end));\n}\nfunction stringToBytes(string) {\n    return [...string].map((character) => character.charCodeAt(0));\n}\nfunction checkString(buffer, header, offset = 0) {\n    const headerBytes = stringToBytes(header);\n    for (let i = 0; i < headerBytes.length; ++i) {\n        if (headerBytes[i] !== buffer[i + offset]) {\n            return false;\n        }\n    }\n    return true;\n}\n","// Attributions\n// * Based on binary-gltf-utils under MIT license: Copyright (c) 2016-17 Karl Cheng\nimport { getISOBMFFMediaType } from \"./parse-isobmff-binary.js\";\nconst BIG_ENDIAN = false;\nconst LITTLE_ENDIAN = true;\n/**\n * Extracts `{mimeType, width and height}` from a memory buffer containing a known image format\n * Currently supports `image/png`, `image/jpeg`, `image/bmp` and `image/gif`.\n * @param binaryData: DataView | ArrayBuffer image file memory to parse\n * @returns metadata or null if memory is not a valid image file format layout.\n */\nexport function getBinaryImageMetadata(binaryData) {\n    const dataView = toDataView(binaryData);\n    return (getPngMetadata(dataView) ||\n        getJpegMetadata(dataView) ||\n        getGifMetadata(dataView) ||\n        getBmpMetadata(dataView) ||\n        getISOBMFFMetadata(dataView));\n}\n// ISOBMFF\nfunction getISOBMFFMetadata(binaryData) {\n    const buffer = new Uint8Array(binaryData instanceof DataView ? binaryData.buffer : binaryData);\n    const mediaType = getISOBMFFMediaType(buffer);\n    if (!mediaType) {\n        return null;\n    }\n    return {\n        mimeType: mediaType.mimeType,\n        // TODO - decode width and height\n        width: 0,\n        height: 0\n    };\n}\n// PNG\nfunction getPngMetadata(binaryData) {\n    const dataView = toDataView(binaryData);\n    // Check file contains the first 4 bytes of the PNG signature.\n    const isPng = dataView.byteLength >= 24 && dataView.getUint32(0, BIG_ENDIAN) === 0x89504e47;\n    if (!isPng) {\n        return null;\n    }\n    // Extract size from a binary PNG file\n    return {\n        mimeType: 'image/png',\n        width: dataView.getUint32(16, BIG_ENDIAN),\n        height: dataView.getUint32(20, BIG_ENDIAN)\n    };\n}\n// GIF\n// Extract size from a binary GIF file\n// TODO: GIF is not this simple\nfunction getGifMetadata(binaryData) {\n    const dataView = toDataView(binaryData);\n    // Check first 4 bytes of the GIF signature (\"GIF8\").\n    const isGif = dataView.byteLength >= 10 && dataView.getUint32(0, BIG_ENDIAN) === 0x47494638;\n    if (!isGif) {\n        return null;\n    }\n    // GIF is little endian.\n    return {\n        mimeType: 'image/gif',\n        width: dataView.getUint16(6, LITTLE_ENDIAN),\n        height: dataView.getUint16(8, LITTLE_ENDIAN)\n    };\n}\n// BMP\n// TODO: BMP is not this simple\nexport function getBmpMetadata(binaryData) {\n    const dataView = toDataView(binaryData);\n    // Check magic number is valid (first 2 characters should be \"BM\").\n    // The mandatory bitmap file header is 14 bytes long.\n    const isBmp = dataView.byteLength >= 14 &&\n        dataView.getUint16(0, BIG_ENDIAN) === 0x424d &&\n        dataView.getUint32(2, LITTLE_ENDIAN) === dataView.byteLength;\n    if (!isBmp) {\n        return null;\n    }\n    // BMP is little endian.\n    return {\n        mimeType: 'image/bmp',\n        width: dataView.getUint32(18, LITTLE_ENDIAN),\n        height: dataView.getUint32(22, LITTLE_ENDIAN)\n    };\n}\n// JPEG\n// Extract width and height from a binary JPEG file\nfunction getJpegMetadata(binaryData) {\n    const dataView = toDataView(binaryData);\n    // Check file contains the JPEG \"start of image\" (SOI) marker\n    // followed by another marker.\n    const isJpeg = dataView.byteLength >= 3 &&\n        dataView.getUint16(0, BIG_ENDIAN) === 0xffd8 &&\n        dataView.getUint8(2) === 0xff;\n    if (!isJpeg) {\n        return null;\n    }\n    const { tableMarkers, sofMarkers } = getJpegMarkers();\n    // Exclude the two byte SOI marker.\n    let i = 2;\n    while (i + 9 < dataView.byteLength) {\n        const marker = dataView.getUint16(i, BIG_ENDIAN);\n        // The frame that contains the width and height of the JPEG image.\n        if (sofMarkers.has(marker)) {\n            return {\n                mimeType: 'image/jpeg',\n                height: dataView.getUint16(i + 5, BIG_ENDIAN), // Number of lines\n                width: dataView.getUint16(i + 7, BIG_ENDIAN) // Number of pixels per line\n            };\n        }\n        // Miscellaneous tables/data preceding the frame header.\n        if (!tableMarkers.has(marker)) {\n            return null;\n        }\n        // Length includes size of length parameter but not the two byte header.\n        i += 2;\n        i += dataView.getUint16(i, BIG_ENDIAN);\n    }\n    return null;\n}\nfunction getJpegMarkers() {\n    // Tables/misc header markers.\n    // DQT, DHT, DAC, DRI, COM, APP_n\n    const tableMarkers = new Set([0xffdb, 0xffc4, 0xffcc, 0xffdd, 0xfffe]);\n    for (let i = 0xffe0; i < 0xfff0; ++i) {\n        tableMarkers.add(i);\n    }\n    // SOF markers and DHP marker.\n    // These markers are after tables/misc data.\n    const sofMarkers = new Set([\n        0xffc0, 0xffc1, 0xffc2, 0xffc3, 0xffc5, 0xffc6, 0xffc7, 0xffc9, 0xffca, 0xffcb, 0xffcd, 0xffce,\n        0xffcf, 0xffde\n    ]);\n    return { tableMarkers, sofMarkers };\n}\n// TODO - move into image module?\nfunction toDataView(data) {\n    if (data instanceof DataView) {\n        return data;\n    }\n    if (ArrayBuffer.isView(data)) {\n        return new DataView(data.buffer);\n    }\n    // TODO: make these functions work for Node.js buffers?\n    // if (bufferToArrayBuffer) {\n    //   data = bufferToArrayBuffer(data);\n    // }\n    // Careful - Node Buffers will look like ArrayBuffers (keep after isBuffer)\n    if (data instanceof ArrayBuffer) {\n        return new DataView(data);\n    }\n    throw new Error('toDataView');\n}\n","import { assert } from '@loaders.gl/loader-utils';\nimport { getBinaryImageMetadata } from \"../category-api/binary-image-api.js\";\n// Use polyfills if installed to parsed image using get-pixels\nexport async function parseToNodeImage(arrayBuffer, options) {\n    const { mimeType } = getBinaryImageMetadata(arrayBuffer) || {};\n    // @ts-ignore\n    const parseImageNode = globalThis.loaders?.parseImageNode;\n    assert(parseImageNode); // '@loaders.gl/polyfills not installed'\n    // @ts-expect-error TODO should we throw error in this case?\n    return await parseImageNode(arrayBuffer, mimeType);\n}\n","import { assert } from '@loaders.gl/loader-utils';\nimport { isImageTypeSupported, getDefaultImageType } from \"../category-api/image-type.js\";\nimport { getImageData } from \"../category-api/parsed-image-api.js\";\nimport { parseToImage } from \"./parse-to-image.js\";\nimport { parseToImageBitmap } from \"./parse-to-image-bitmap.js\";\nimport { parseToNodeImage } from \"./parse-to-node-image.js\";\n// Parse to platform defined image type (data on node, ImageBitmap or HTMLImage on browser)\n// eslint-disable-next-line complexity\nexport async function parseImage(arrayBuffer, options, context) {\n    options = options || {};\n    const imageOptions = options.image || {};\n    // The user can request a specific output format via `options.image.type`\n    const imageType = imageOptions.type || 'auto';\n    const { url } = context || {};\n    // Note: For options.image.type === `data`, we may still need to load as `image` or `imagebitmap`\n    const loadType = getLoadableImageType(imageType);\n    let image;\n    switch (loadType) {\n        case 'imagebitmap':\n            image = await parseToImageBitmap(arrayBuffer, options, url);\n            break;\n        case 'image':\n            image = await parseToImage(arrayBuffer, options, url);\n            break;\n        case 'data':\n            // Node.js loads imagedata directly\n            image = await parseToNodeImage(arrayBuffer, options);\n            break;\n        default:\n            assert(false);\n    }\n    // Browser: if options.image.type === 'data', we can now extract data from the loaded image\n    if (imageType === 'data') {\n        image = getImageData(image);\n    }\n    return image;\n}\n// Get a loadable image type from image type\nfunction getLoadableImageType(type) {\n    switch (type) {\n        case 'auto':\n        case 'data':\n            // Browser: For image data we need still need to load using an image format\n            // Node: the default image type is `data`.\n            return getDefaultImageType();\n        default:\n            // Throw an error if not supported\n            isImageTypeSupported(type);\n            return type;\n    }\n}\n","// import type { ImageType } from '@loaders.gl/schema';\nimport { VERSION } from \"./lib/utils/version.js\";\nimport { parseImage } from \"./lib/parsers/parse-image.js\";\nimport { getBinaryImageMetadata } from \"./lib/category-api/binary-image-api.js\";\nconst EXTENSIONS = ['png', 'jpg', 'jpeg', 'gif', 'webp', 'bmp', 'ico', 'svg', 'avif'];\nconst MIME_TYPES = [\n    'image/png',\n    'image/jpeg',\n    'image/gif',\n    'image/webp',\n    'image/avif',\n    'image/bmp',\n    'image/vnd.microsoft.icon',\n    'image/svg+xml'\n];\nconst DEFAULT_IMAGE_LOADER_OPTIONS = {\n    image: {\n        type: 'auto',\n        decode: true // if format is HTML\n    }\n    // imagebitmap: {} - passes (platform dependent) parameters to ImageBitmap constructor\n};\n/**\n * Loads a platform-specific image type\n * Note: This type can be used as input data to WebGL texture creation\n */\nexport const ImageLoader = {\n    dataType: null,\n    batchType: null,\n    id: 'image',\n    module: 'images',\n    name: 'Images',\n    version: VERSION,\n    mimeTypes: MIME_TYPES,\n    extensions: EXTENSIONS,\n    parse: parseImage,\n    // TODO: byteOffset, byteLength;\n    tests: [(arrayBuffer) => Boolean(getBinaryImageMetadata(new DataView(arrayBuffer)))],\n    options: DEFAULT_IMAGE_LOADER_OPTIONS\n};\n","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nconst RADIANS_TO_DEGREES = (1 / Math.PI) * 180;\nconst DEGREES_TO_RADIANS = (1 / 180) * Math.PI;\nconst DEFAULT_CONFIG = {\n    EPSILON: 1e-12,\n    debug: false,\n    precision: 4,\n    printTypes: false,\n    printDegrees: false,\n    printRowMajor: true,\n    _cartographicRadians: false\n};\n// Configuration is truly global as of v3.6 to ensure single config even if multiple copies of math.gl\n// Multiple copies of config can be quite tricky to debug...\nglobalThis.mathgl = globalThis.mathgl || { config: { ...DEFAULT_CONFIG } };\nexport const config = globalThis.mathgl.config;\nexport function configure(options) {\n    // Only copy existing keys\n    Object.assign(config, options);\n    return config;\n}\n/**\n * Formats a value into a string\n * @param value\n * @param param1\n * @returns\n */\nexport function formatValue(value, { precision = config.precision } = {}) {\n    value = round(value);\n    // get rid of trailing zeros\n    return `${parseFloat(value.toPrecision(precision))}`;\n}\n/**\n * Check if value is an \"array\"\n * Returns `true` if value is either an array or a typed array\n * Note: returns `false` for `ArrayBuffer` and `DataView` instances\n * @note isTypedArray and isNumericArray are often more useful in TypeScript\n */\nexport function isArray(value) {\n    return Array.isArray(value) || (ArrayBuffer.isView(value) && !(value instanceof DataView));\n}\nexport function clone(array) {\n    return 'clone' in array ? array.clone() : array.slice();\n}\nexport function toRadians(degrees) {\n    return radians(degrees);\n}\nexport function toDegrees(radians) {\n    return degrees(radians);\n}\nexport function radians(degrees, result) {\n    return map(degrees, (degrees) => degrees * DEGREES_TO_RADIANS, result);\n}\nexport function degrees(radians, result) {\n    return map(radians, (radians) => radians * RADIANS_TO_DEGREES, result);\n}\n/**\n * \"GLSL equivalent\" of `Math.sin`: Works on single values and vectors\n * @deprecated\n */\nexport function sin(radians, result) {\n    return map(radians, (angle) => Math.sin(angle), result);\n}\n/**\n * \"GLSL equivalent\" of `Math.cos`: Works on single values and vectors\n * @deprecated\n */\nexport function cos(radians, result) {\n    return map(radians, (angle) => Math.cos(angle), result);\n}\n/**\n * \"GLSL equivalent\" of `Math.tan`: Works on single values and vectors\n * @deprecated\n */\nexport function tan(radians, result) {\n    return map(radians, (angle) => Math.tan(angle), result);\n}\n/**\n * \"GLSL equivalent\" of `Math.asin`: Works on single values and vectors\n * @deprecated\n */\nexport function asin(radians, result) {\n    return map(radians, (angle) => Math.asin(angle), result);\n}\n/**\n * \"GLSL equivalent\" of `Math.acos`: Works on single values and vectors\n * @deprecated\n */\nexport function acos(radians, result) {\n    return map(radians, (angle) => Math.acos(angle), result);\n}\n/**\n * \"GLSL equivalent\" of `Math.atan`: Works on single values and vectors\n * @deprecated\n */\nexport function atan(radians, result) {\n    return map(radians, (angle) => Math.atan(angle), result);\n}\nexport function clamp(value, min, max) {\n    return map(value, (value) => Math.max(min, Math.min(max, value)));\n}\nexport function lerp(a, b, t) {\n    if (isArray(a)) {\n        return a.map((ai, i) => lerp(ai, b[i], t));\n    }\n    return t * b + (1 - t) * a;\n}\n/* eslint-disable */\n/**\n * Compares any two math objects, using `equals` method if available.\n * @param a\n * @param b\n * @param epsilon\n * @returns\n */\nexport function equals(a, b, epsilon) {\n    const oldEpsilon = config.EPSILON;\n    if (epsilon) {\n        config.EPSILON = epsilon;\n    }\n    try {\n        if (a === b) {\n            return true;\n        }\n        if (isArray(a) && isArray(b)) {\n            if (a.length !== b.length) {\n                return false;\n            }\n            for (let i = 0; i < a.length; ++i) {\n                // eslint-disable-next-line max-depth\n                if (!equals(a[i], b[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        if (a && a.equals) {\n            return a.equals(b);\n        }\n        if (b && b.equals) {\n            return b.equals(a);\n        }\n        if (typeof a === 'number' && typeof b === 'number') {\n            return Math.abs(a - b) <= config.EPSILON * Math.max(1, Math.abs(a), Math.abs(b));\n        }\n        return false;\n    }\n    finally {\n        config.EPSILON = oldEpsilon;\n    }\n}\nexport function exactEquals(a, b) {\n    if (a === b) {\n        return true;\n    }\n    if (a && typeof a === 'object' && b && typeof b === 'object') {\n        if (a.constructor !== b.constructor) {\n            return false;\n        }\n        if (a.exactEquals) {\n            return a.exactEquals(b);\n        }\n    }\n    if (isArray(a) && isArray(b)) {\n        if (a.length !== b.length) {\n            return false;\n        }\n        for (let i = 0; i < a.length; ++i) {\n            if (!exactEquals(a[i], b[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n/* eslint-enable */\nexport function withEpsilon(epsilon, func) {\n    const oldPrecision = config.EPSILON;\n    config.EPSILON = epsilon;\n    let value;\n    try {\n        value = func();\n    }\n    finally {\n        config.EPSILON = oldPrecision;\n    }\n    return value;\n}\n// HELPERS\nfunction round(value) {\n    return Math.round(value / config.EPSILON) * config.EPSILON;\n}\n// If the array has a clone function, calls it, otherwise returns a copy\nfunction duplicateArray(array) {\n    // @ts-expect-error We check for math.gl class methods\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-call\n    return array.clone ? array.clone() : new Array(array.length);\n}\n// If the argument value is an array, applies the func element wise,\n// otherwise applies func to the argument value\nfunction map(value, func, result) {\n    if (isArray(value)) {\n        const array = value;\n        result = result || duplicateArray(array);\n        for (let i = 0; i < result.length && i < array.length; ++i) {\n            const val = typeof value === 'number' ? value : value[i];\n            result[i] = func(val, i, result);\n        }\n        return result;\n    }\n    return func(value);\n}\n//# sourceMappingURL=common.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { config, formatValue, equals, isArray } from \"../../lib/common.js\";\n/** Base class for vectors and matrices */\nexport class MathArray extends Array {\n    // Common methods\n    /**\n     * Clone the current object\n     * @returns a new copy of this object\n     */\n    clone() {\n        // @ts-expect-error TS2351: Cannot use 'new' with an expression whose type lacks a call or construct signature.\n        return new this.constructor().copy(this); // eslint-disable-line\n    }\n    fromArray(array, offset = 0) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = array[i + offset];\n        }\n        return this.check();\n    }\n    toArray(targetArray = [], offset = 0) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            targetArray[offset + i] = this[i];\n        }\n        return targetArray;\n    }\n    toObject(targetObject) {\n        return targetObject;\n    }\n    from(arrayOrObject) {\n        return Array.isArray(arrayOrObject)\n            ? this.copy(arrayOrObject)\n            : // @ts-ignore\n                this.fromObject(arrayOrObject);\n    }\n    to(arrayOrObject) {\n        // @ts-ignore\n        if (arrayOrObject === this) {\n            return this;\n        }\n        // @ts-expect-error TS2339: Property 'toObject' does not exist on type 'MathArray'.\n        return isArray(arrayOrObject) ? this.toArray(arrayOrObject) : this.toObject(arrayOrObject);\n    }\n    toTarget(target) {\n        return target ? this.to(target) : this;\n    }\n    /** @deprecated */\n    toFloat32Array() {\n        return new Float32Array(this);\n    }\n    toString() {\n        return this.formatString(config);\n    }\n    /** Formats string according to options */\n    formatString(opts) {\n        let string = '';\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            string += (i > 0 ? ', ' : '') + formatValue(this[i], opts);\n        }\n        return `${opts.printTypes ? this.constructor.name : ''}[${string}]`;\n    }\n    equals(array) {\n        if (!array || this.length !== array.length) {\n            return false;\n        }\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            if (!equals(this[i], array[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    exactEquals(array) {\n        if (!array || this.length !== array.length) {\n            return false;\n        }\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            if (this[i] !== array[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    // Modifiers\n    /** Negates all values in this object */\n    negate() {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = -this[i];\n        }\n        return this.check();\n    }\n    lerp(a, b, t) {\n        if (t === undefined) {\n            return this.lerp(this, a, b);\n        }\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            const ai = a[i];\n            const endValue = typeof b === 'number' ? b : b[i];\n            this[i] = ai + t * (endValue - ai);\n        }\n        return this.check();\n    }\n    /** Minimal */\n    min(vector) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = Math.min(vector[i], this[i]);\n        }\n        return this.check();\n    }\n    /** Maximal */\n    max(vector) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = Math.max(vector[i], this[i]);\n        }\n        return this.check();\n    }\n    clamp(minVector, maxVector) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = Math.min(Math.max(this[i], minVector[i]), maxVector[i]);\n        }\n        return this.check();\n    }\n    add(...vectors) {\n        for (const vector of vectors) {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] += vector[i];\n            }\n        }\n        return this.check();\n    }\n    subtract(...vectors) {\n        for (const vector of vectors) {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] -= vector[i];\n            }\n        }\n        return this.check();\n    }\n    scale(scale) {\n        if (typeof scale === 'number') {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] *= scale;\n            }\n        }\n        else {\n            for (let i = 0; i < this.ELEMENTS && i < scale.length; ++i) {\n                this[i] *= scale[i];\n            }\n        }\n        return this.check();\n    }\n    /**\n     * Multiplies all elements by `scale`\n     * Note: `Matrix4.multiplyByScalar` only scales its 3x3 \"minor\"\n     */\n    multiplyByScalar(scalar) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] *= scalar;\n        }\n        return this.check();\n    }\n    // Debug checks\n    /** Throws an error if array length is incorrect or contains illegal values */\n    check() {\n        if (config.debug && !this.validate()) {\n            throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);\n        }\n        return this;\n    }\n    /** Returns false if the array length is incorrect or contains illegal values */\n    validate() {\n        let valid = this.length === this.ELEMENTS;\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            valid = valid && Number.isFinite(this[i]);\n        }\n        return valid;\n    }\n    // three.js compatibility\n    /** @deprecated */\n    sub(a) {\n        return this.subtract(a);\n    }\n    /** @deprecated */\n    setScalar(a) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = a;\n        }\n        return this.check();\n    }\n    /** @deprecated */\n    addScalar(a) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] += a;\n        }\n        return this.check();\n    }\n    /** @deprecated */\n    subScalar(a) {\n        return this.addScalar(-a);\n    }\n    /** @deprecated */\n    multiplyScalar(scalar) {\n        // Multiplies all elements\n        // `Matrix4.scale` only scales its 3x3 \"minor\"\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] *= scalar;\n        }\n        return this.check();\n    }\n    /** @deprecated */\n    divideScalar(a) {\n        return this.multiplyByScalar(1 / a);\n    }\n    /** @deprecated */\n    clampScalar(min, max) {\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            this[i] = Math.min(Math.max(this[i], min), max);\n        }\n        return this.check();\n    }\n    /** @deprecated */\n    get elements() {\n        return this;\n    }\n}\n//# sourceMappingURL=math-array.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nimport { config } from \"./common.js\";\nexport function validateVector(v, length) {\n    if (v.length !== length) {\n        return false;\n    }\n    // Could be arguments \"array\" (v.every not availasble)\n    for (let i = 0; i < v.length; ++i) {\n        if (!Number.isFinite(v[i])) {\n            return false;\n        }\n    }\n    return true;\n}\nexport function checkNumber(value) {\n    if (!Number.isFinite(value)) {\n        throw new Error(`Invalid number ${JSON.stringify(value)}`);\n    }\n    return value;\n}\nexport function checkVector(v, length, callerName = '') {\n    if (config.debug && !validateVector(v, length)) {\n        throw new Error(`math.gl: ${callerName} some fields set to invalid numbers'`);\n    }\n    return v;\n}\nconst map = {};\nexport function deprecated(method, version) {\n    if (!map[method]) {\n        map[method] = true;\n        // eslint-disable-next-line\n        console.warn(`${method} has been removed in version ${version}, see upgrade guide for more information`);\n    }\n}\n//# sourceMappingURL=validators.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(`math.gl assertion ${message}`);\n    }\n}\n//# sourceMappingURL=assert.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Copyright (c) 2017 Uber Technologies, Inc.\nimport { MathArray } from \"./math-array.js\";\nimport { checkNumber } from \"../../lib/validators.js\";\nimport { assert } from \"../../lib/assert.js\";\n/** Base class for vectors with at least 2 elements */\nexport class Vector extends MathArray {\n    // ACCESSORS\n    get x() {\n        return this[0];\n    }\n    set x(value) {\n        this[0] = checkNumber(value);\n    }\n    get y() {\n        return this[1];\n    }\n    set y(value) {\n        this[1] = checkNumber(value);\n    }\n    /**\n     * Returns the length of the vector from the origin to the point described by this vector\n     *\n     * @note `length` is a reserved word for Arrays, so `v.length()` will return number of elements\n     * Instead we provide `len` and `magnitude`\n     */\n    len() {\n        return Math.sqrt(this.lengthSquared());\n    }\n    /**\n     * Returns the length of the vector from the origin to the point described by this vector\n     */\n    magnitude() {\n        return this.len();\n    }\n    /**\n     * Returns the squared length of the vector from the origin to the point described by this vector\n     */\n    lengthSquared() {\n        let length = 0;\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            length += this[i] * this[i];\n        }\n        return length;\n    }\n    /**\n     * Returns the squared length of the vector from the origin to the point described by this vector\n     */\n    magnitudeSquared() {\n        return this.lengthSquared();\n    }\n    distance(mathArray) {\n        return Math.sqrt(this.distanceSquared(mathArray));\n    }\n    distanceSquared(mathArray) {\n        let length = 0;\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            const dist = this[i] - mathArray[i];\n            length += dist * dist;\n        }\n        return checkNumber(length);\n    }\n    dot(mathArray) {\n        let product = 0;\n        for (let i = 0; i < this.ELEMENTS; ++i) {\n            product += this[i] * mathArray[i];\n        }\n        return checkNumber(product);\n    }\n    // MODIFIERS\n    normalize() {\n        const length = this.magnitude();\n        if (length !== 0) {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] /= length;\n            }\n        }\n        return this.check();\n    }\n    multiply(...vectors) {\n        for (const vector of vectors) {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] *= vector[i];\n            }\n        }\n        return this.check();\n    }\n    divide(...vectors) {\n        for (const vector of vectors) {\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                this[i] /= vector[i];\n            }\n        }\n        return this.check();\n    }\n    // THREE.js compatibility\n    lengthSq() {\n        return this.lengthSquared();\n    }\n    distanceTo(vector) {\n        return this.distance(vector);\n    }\n    distanceToSquared(vector) {\n        return this.distanceSquared(vector);\n    }\n    getComponent(i) {\n        assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n        return checkNumber(this[i]);\n    }\n    setComponent(i, value) {\n        assert(i >= 0 && i < this.ELEMENTS, 'index is out of range');\n        this[i] = value;\n        return this.check();\n    }\n    addVectors(a, b) {\n        return this.copy(a).add(b);\n    }\n    subVectors(a, b) {\n        return this.copy(a).subtract(b);\n    }\n    multiplyVectors(a, b) {\n        return this.copy(a).multiply(b);\n    }\n    addScaledVector(a, b) {\n        // @ts-expect-error error TS2351: Cannot use 'new' with an expression whose type lacks a call or construct signature.\n        return this.add(new this.constructor(a).multiplyScalar(b));\n    }\n}\n//# sourceMappingURL=vector.js.map","// @eslint-disable\n// @ts-nocheck\n/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport const EPSILON = 0.000001;\nexport let ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport const RANDOM = Math.random;\nexport const ANGLE_ORDER = 'zyx';\n/**\n * Symmetric round\n * see https://www.npmjs.com/package/round-half-up-symmetric#user-content-detailed-background\n *\n * @param {Number} a value to round\n */\nexport function round(a) {\n    if (a >= 0)\n        return Math.round(a);\n    return a % 0.5 === 0 ? Math.floor(a) : Math.round(a);\n}\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\nexport function setMatrixArrayType(type) {\n    ARRAY_TYPE = type;\n}\nconst degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\nexport function toRadian(a) {\n    return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\nexport function equals(a, b) {\n    return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\n//# sourceMappingURL=common.js.map","// @eslint-disable\n// @ts-nocheck\nimport * as glMatrix from './common.js';\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n/**\n * Creates a new, empty vec2\n *\n * @returns a new 2D vector\n */\nexport function create() {\n    const out = new glMatrix.ARRAY_TYPE(2);\n    if (glMatrix.ARRAY_TYPE != Float32Array) {\n        out[0] = 0;\n        out[1] = 0;\n    }\n    return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param a vector to clone\n * @returns a new 2D vector\n */\nexport function clone(a) {\n    const out = new glMatrix.ARRAY_TYPE(2);\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param x X component\n * @param y Y component\n * @returns a new 2D vector\n */\nexport function fromValues(x, y) {\n    const out = new glMatrix.ARRAY_TYPE(2);\n    out[0] = x;\n    out[1] = y;\n    return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the source vector\n * @returns {NumericArray} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {NumericArray} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {NumericArray} out\n */\nexport function set(out, x, y) {\n    out[0] = x;\n    out[1] = y;\n    return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function multiply(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function divide(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to ceil\n * @returns {NumericArray} out\n */\nexport function ceil(out, a) {\n    out[0] = Math.ceil(a[0]);\n    out[1] = Math.ceil(a[1]);\n    return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to floor\n * @returns {NumericArray} out\n */\nexport function floor(out, a) {\n    out[0] = Math.floor(a[0]);\n    out[1] = Math.floor(a[1]);\n    return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function min(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {NumericArray} out\n */\nexport function max(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    return out;\n}\n/**\n * symmetric round the components of a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to round\n * @returns {NumericArray} out\n */\nexport function round(out, a) {\n    out[0] = glMatrix.round(a[0]);\n    out[1] = glMatrix.round(a[1]);\n    return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {NumericArray} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {NumericArray} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    return Math.sqrt(x * x + y * y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {Readonly<NumericArray>} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    const x = a[0];\n    const y = a[1];\n    return Math.sqrt(x * x + y * y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {Readonly<NumericArray>} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n    const x = a[0];\n    const y = a[1];\n    return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to negate\n * @returns {NumericArray} out\n */\nexport function negate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to invert\n * @returns {NumericArray} out\n */\nexport function inverse(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a vector to normalize\n * @returns {NumericArray} out\n */\nexport function normalize(out, a) {\n    const x = a[0];\n    const y = a[1];\n    let len = x * x + y * y;\n    if (len > 0) {\n        // TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n    const z = a[0] * b[1] - a[1] * b[0];\n    out[0] = out[1] = 0;\n    out[2] = z;\n    return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the first operand\n * @param {Readonly<NumericArray>} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {NumericArray} out\n */\nexport function lerp(out, a, b, t) {\n    const ax = a[0];\n    const ay = a[1];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {NumericArray} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {NumericArray} out\n */\nexport function random(out, scale) {\n    scale = scale === undefined ? 1.0 : scale;\n    const r = glMatrix.RANDOM() * 2.0 * Math.PI;\n    out[0] = Math.cos(r) * scale;\n    out[1] = Math.sin(r) * scale;\n    return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {NumericArray} out\n */\nexport function transformMat2(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {NumericArray} out\n */\nexport function transformMat2d(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[2] * y + m[4];\n    out[1] = m[1] * x + m[3] * y + m[5];\n    return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {NumericArray} out\n */\nexport function transformMat3(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[3] * y + m[6];\n    out[1] = m[1] * x + m[4] * y + m[7];\n    return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {NumericArray} out the receiving vector\n * @param {Readonly<NumericArray>} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {NumericArray} out\n */\nexport function transformMat4(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[4] * y + m[12];\n    out[1] = m[1] * x + m[5] * y + m[13];\n    return out;\n}\n/**\n * Rotate a 2D vector\n * @param {NumericArray} out The receiving vec2\n * @param {Readonly<NumericArray>} a The vec2 point to rotate\n * @param {Readonly<NumericArray>} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {NumericArray} out\n */\nexport function rotate(out, a, b, rad) {\n    // Translate point to the origin\n    const p0 = a[0] - b[0];\n    const p1 = a[1] - b[1];\n    const sinC = Math.sin(rad);\n    const cosC = Math.cos(rad);\n    // perform rotation and translate to correct position\n    out[0] = p0 * cosC - p1 * sinC + b[0];\n    out[1] = p0 * sinC + p1 * cosC + b[1];\n    return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {Readonly<NumericArray>} a The first operand\n * @param {Readonly<NumericArray>} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n    const x1 = a[0];\n    const y1 = a[1];\n    const x2 = b[0];\n    const y2 = b[1];\n    // mag is the product of the magnitudes of a and b\n    const mag = Math.sqrt((x1 * x1 + y1 * y1) * (x2 * x2 + y2 * y2));\n    // mag &&.. short circuits if mag == 0\n    const cosine = mag && (x1 * x2 + y1 * y2) / mag;\n    // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n    return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {NumericArray} out the receiving vector\n * @returns {NumericArray} out\n */\nexport function zero(out) {\n    out[0] = 0.0;\n    out[1] = 0.0;\n    return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {Readonly<NumericArray>} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n    return `vec2(${a[0]}, ${a[1]})`;\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {Readonly<NumericArray>} a The first vector.\n * @param {Readonly<NumericArray>} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {Readonly<NumericArray>} a The first vector.\n * @param {Readonly<NumericArray>} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n    const a0 = a[0];\n    const a1 = a[1];\n    const b0 = b[0];\n    const b1 = b[1];\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n        Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\nexport const len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\nexport const sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\nexport const mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\nexport const div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\nexport const dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function () {\n    const vec = create();\n    return function (a, stride, offset, count, fn, arg) {\n        let i;\n        let l;\n        if (!stride) {\n            stride = 2;\n        }\n        if (!offset) {\n            offset = 0;\n        }\n        if (count) {\n            l = Math.min(count * stride + offset, a.length);\n        }\n        else {\n            l = a.length;\n        }\n        for (i = offset; i < l; i += stride) {\n            vec[0] = a[i];\n            vec[1] = a[i + 1];\n            fn(vec, vec, arg);\n            a[i] = vec[0];\n            a[i + 1] = vec[1];\n        }\n        return a;\n    };\n})();\n//# sourceMappingURL=vec2.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// vec2 additions\nexport function vec2_transformMat4AsVector(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const w = m[3] * x + m[7] * y || 1.0;\n    out[0] = (m[0] * x + m[4] * y) / w;\n    out[1] = (m[1] * x + m[5] * y) / w;\n    return out;\n}\n// vec3 additions\n// Transform as vector, only uses 3x3 minor matrix\nexport function vec3_transformMat4AsVector(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const w = m[3] * x + m[7] * y + m[11] * z || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z) / w;\n    return out;\n}\nexport function vec3_transformMat2(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    out[2] = a[2];\n    return out;\n}\n// vec4 additions\nexport function vec4_transformMat2(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    out[0] = m[0] * x + m[2] * y;\n    out[1] = m[1] * x + m[3] * y;\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\nexport function vec4_transformMat3(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    out[0] = m[0] * x + m[3] * y + m[6] * z;\n    out[1] = m[1] * x + m[4] * y + m[7] * z;\n    out[2] = m[2] * x + m[5] * y + m[8] * z;\n    out[3] = a[3];\n    return out;\n}\n//# sourceMappingURL=gl-matrix-extras.js.map","// @eslint-disable\n// @ts-nocheck\nimport * as glMatrix from './common.js';\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\nexport function create() {\n    const out = new glMatrix.ARRAY_TYPE(3);\n    if (glMatrix.ARRAY_TYPE != Float32Array) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n    }\n    return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\nexport function clone(a) {\n    const out = new glMatrix.ARRAY_TYPE(3);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\nexport function fromValues(x, y, z) {\n    const out = new glMatrix.ARRAY_TYPE(3);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\nexport function set(out, x, y, z) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function multiply(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function divide(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\nexport function ceil(out, a) {\n    out[0] = Math.ceil(a[0]);\n    out[1] = Math.ceil(a[1]);\n    out[2] = Math.ceil(a[2]);\n    return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\nexport function floor(out, a) {\n    out[0] = Math.floor(a[0]);\n    out[1] = Math.floor(a[1]);\n    out[2] = Math.floor(a[2]);\n    return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function min(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function max(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    return out;\n}\n/**\n * symmetric round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\nexport function round(out, a) {\n    out[0] = glMatrix.round(a[0]);\n    out[1] = glMatrix.round(a[1]);\n    out[2] = glMatrix.round(a[2]);\n    return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    const z = b[2] - a[2];\n    return Math.sqrt(x * x + y * y + z * z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    const z = b[2] - a[2];\n    return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\nexport function negate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\nexport function inverse(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\nexport function normalize(out, a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    let len = x * x + y * y + z * z;\n    if (len > 0) {\n        // TODO: evaluate use of glm_invsqrt here?\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = a[0] * len;\n    out[1] = a[1] * len;\n    out[2] = a[2] * len;\n    return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\nexport function cross(out, a, b) {\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const bx = b[0];\n    const by = b[1];\n    const bz = b[2];\n    out[0] = ay * bz - az * by;\n    out[1] = az * bx - ax * bz;\n    out[2] = ax * by - ay * bx;\n    return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function lerp(out, a, b, t) {\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    return out;\n}\n/**\n * Performs a spherical linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function slerp(out, a, b, t) {\n    const angle = Math.acos(Math.min(Math.max(dot(a, b), -1), 1));\n    const sinTotal = Math.sin(angle);\n    const ratioA = Math.sin((1 - t) * angle) / sinTotal;\n    const ratioB = Math.sin(t * angle) / sinTotal;\n    out[0] = ratioA * a[0] + ratioB * b[0];\n    out[1] = ratioA * a[1] + ratioB * b[1];\n    out[2] = ratioA * a[2] + ratioB * b[2];\n    return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function hermite(out, a, b, c, d, t) {\n    const factorTimes2 = t * t;\n    const factor1 = factorTimes2 * (2 * t - 3) + 1;\n    const factor2 = factorTimes2 * (t - 2) + t;\n    const factor3 = factorTimes2 * (t - 1);\n    const factor4 = factorTimes2 * (3 - 2 * t);\n    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n    return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\nexport function bezier(out, a, b, c, d, t) {\n    const inverseFactor = 1 - t;\n    const inverseFactorTimesTwo = inverseFactor * inverseFactor;\n    const factorTimes2 = t * t;\n    const factor1 = inverseFactorTimesTwo * inverseFactor;\n    const factor2 = 3 * t * inverseFactorTimesTwo;\n    const factor3 = 3 * factorTimes2 * inverseFactor;\n    const factor4 = factorTimes2 * t;\n    out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n    out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n    out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n    return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {vec3} out\n */\nexport function random(out, scale) {\n    scale = scale === undefined ? 1.0 : scale;\n    const r = glMatrix.RANDOM() * 2.0 * Math.PI;\n    const z = glMatrix.RANDOM() * 2.0 - 1.0;\n    const zScale = Math.sqrt(1.0 - z * z) * scale;\n    out[0] = Math.cos(r) * zScale;\n    out[1] = Math.sin(r) * zScale;\n    out[2] = z * scale;\n    return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat4(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    let w = m[3] * x + m[7] * y + m[11] * z + m[15];\n    w = w || 1.0;\n    out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n    out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n    out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n    return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\nexport function transformMat3(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    out[0] = x * m[0] + y * m[3] + z * m[6];\n    out[1] = x * m[1] + y * m[4] + z * m[7];\n    out[2] = x * m[2] + y * m[5] + z * m[8];\n    return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\nexport function transformQuat(out, a, q) {\n    // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const qw = q[3];\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    // var qvec = [qx, qy, qz];\n    // var uv = vec3.cross([], qvec, a);\n    let uvx = qy * z - qz * y;\n    let uvy = qz * x - qx * z;\n    let uvz = qx * y - qy * x;\n    // var uuv = vec3.cross([], qvec, uv);\n    let uuvx = qy * uvz - qz * uvy;\n    let uuvy = qz * uvx - qx * uvz;\n    let uuvz = qx * uvy - qy * uvx;\n    // vec3.scale(uv, uv, 2 * w);\n    const w2 = qw * 2;\n    uvx *= w2;\n    uvy *= w2;\n    uvz *= w2;\n    // vec3.scale(uuv, uuv, 2);\n    uuvx *= 2;\n    uuvy *= 2;\n    uuvz *= 2;\n    // return vec3.add(out, a, vec3.add(out, uv, uuv));\n    out[0] = x + uvx + uuvx;\n    out[1] = y + uvy + uuvy;\n    out[2] = z + uvz + uuvz;\n    return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateX(out, a, b, rad) {\n    const p = [];\n    const r = [];\n    // Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n    // perform rotation\n    r[0] = p[0];\n    r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n    r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad);\n    // translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateY(out, a, b, rad) {\n    const p = [];\n    const r = [];\n    // Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n    // perform rotation\n    r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n    r[1] = p[1];\n    r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad);\n    // translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\nexport function rotateZ(out, a, b, rad) {\n    const p = [];\n    const r = [];\n    // Translate point to the origin\n    p[0] = a[0] - b[0];\n    p[1] = a[1] - b[1];\n    p[2] = a[2] - b[2];\n    // perform rotation\n    r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n    r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n    r[2] = p[2];\n    // translate to correct position\n    out[0] = r[0] + b[0];\n    out[1] = r[1] + b[1];\n    out[2] = r[2] + b[2];\n    return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\nexport function angle(a, b) {\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const bx = b[0];\n    const by = b[1];\n    const bz = b[2];\n    const mag = Math.sqrt((ax * ax + ay * ay + az * az) * (bx * bx + by * by + bz * bz));\n    const cosine = mag && dot(a, b) / mag;\n    return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\nexport function zero(out) {\n    out[0] = 0.0;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n    return `vec3(${a[0]}, ${a[1]}, ${a[2]})`;\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n    const a0 = a[0];\n    const a1 = a[1];\n    const a2 = a[2];\n    const b0 = b[0];\n    const b1 = b[1];\n    const b2 = b[2];\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n        Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n        Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\nexport const sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\nexport const mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\nexport const div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\nexport const dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\nexport const len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function () {\n    const vec = create();\n    return function (a, stride, offset, count, fn, arg) {\n        let i;\n        let l;\n        if (!stride) {\n            stride = 3;\n        }\n        if (!offset) {\n            offset = 0;\n        }\n        if (count) {\n            l = Math.min(count * stride + offset, a.length);\n        }\n        else {\n            l = a.length;\n        }\n        for (i = offset; i < l; i += stride) {\n            vec[0] = a[i];\n            vec[1] = a[i + 1];\n            vec[2] = a[i + 2];\n            fn(vec, vec, arg);\n            a[i] = vec[0];\n            a[i + 1] = vec[1];\n            a[i + 2] = vec[2];\n        }\n        return a;\n    };\n})();\n//# sourceMappingURL=vec3.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Copyright (c) 2017 Uber Technologies, Inc.\nimport { Vector } from \"./base/vector.js\";\nimport { config, isArray } from \"../lib/common.js\";\nimport { checkNumber } from \"../lib/validators.js\";\n// @ts-ignore gl-matrix types\nimport { angle as vec3_angle, cross as vec3_cross, rotateX as vec3_rotateX, rotateY as vec3_rotateY, rotateZ as vec3_rotateZ, transformMat4 as vec3_transformMat4, transformMat3 as vec3_transformMat3, transformQuat as vec3_transformQuat } from \"../gl-matrix/vec3.js\";\n/* eslint-disable camelcase */\nimport { vec3_transformMat2, vec3_transformMat4AsVector } from \"../lib/gl-matrix-extras.js\";\nconst ORIGIN = [0, 0, 0];\nlet ZERO;\n/**\n * Three-element vector class with common linear algebra operations.\n * Subclass of Array<number> meaning that it is highly compatible with other libraries\n */\nexport class Vector3 extends Vector {\n    static get ZERO() {\n        if (!ZERO) {\n            ZERO = new Vector3(0, 0, 0);\n            Object.freeze(ZERO);\n        }\n        return ZERO;\n    }\n    /**\n     * @class\n     * @param x\n     * @param y\n     * @param z\n     */\n    constructor(x = 0, y = 0, z = 0) {\n        // PERF NOTE: initialize elements as double precision numbers\n        super(-0, -0, -0);\n        if (arguments.length === 1 && isArray(x)) {\n            this.copy(x);\n        }\n        else {\n            // this.set(x, y, z);\n            if (config.debug) {\n                checkNumber(x);\n                checkNumber(y);\n                checkNumber(z);\n            }\n            // @ts-expect-error TS2412: Property '0' of type 'number | [number, number, number]' is not assignable to numeric index type 'number'\n            this[0] = x;\n            this[1] = y;\n            this[2] = z;\n        }\n    }\n    set(x, y, z) {\n        this[0] = x;\n        this[1] = y;\n        this[2] = z;\n        return this.check();\n    }\n    copy(array) {\n        this[0] = array[0];\n        this[1] = array[1];\n        this[2] = array[2];\n        return this.check();\n    }\n    fromObject(object) {\n        if (config.debug) {\n            checkNumber(object.x);\n            checkNumber(object.y);\n            checkNumber(object.z);\n        }\n        this[0] = object.x;\n        this[1] = object.y;\n        this[2] = object.z;\n        return this.check();\n    }\n    toObject(object) {\n        object.x = this[0];\n        object.y = this[1];\n        object.z = this[2];\n        return object;\n    }\n    // Getters/setters\n    get ELEMENTS() {\n        return 3;\n    }\n    get z() {\n        return this[2];\n    }\n    set z(value) {\n        this[2] = checkNumber(value);\n    }\n    // ACCESSORS\n    angle(vector) {\n        return vec3_angle(this, vector);\n    }\n    // MODIFIERS\n    cross(vector) {\n        vec3_cross(this, this, vector);\n        return this.check();\n    }\n    rotateX({ radians, origin = ORIGIN }) {\n        vec3_rotateX(this, this, origin, radians);\n        return this.check();\n    }\n    rotateY({ radians, origin = ORIGIN }) {\n        vec3_rotateY(this, this, origin, radians);\n        return this.check();\n    }\n    rotateZ({ radians, origin = ORIGIN }) {\n        vec3_rotateZ(this, this, origin, radians);\n        return this.check();\n    }\n    // Transforms\n    // transforms as point (4th component is implicitly 1)\n    transform(matrix4) {\n        return this.transformAsPoint(matrix4);\n    }\n    // transforms as point (4th component is implicitly 1)\n    transformAsPoint(matrix4) {\n        vec3_transformMat4(this, this, matrix4);\n        return this.check();\n    }\n    // transforms as vector  (4th component is implicitly 0, ignores translation. slightly faster)\n    transformAsVector(matrix4) {\n        vec3_transformMat4AsVector(this, this, matrix4);\n        return this.check();\n    }\n    transformByMatrix3(matrix3) {\n        vec3_transformMat3(this, this, matrix3);\n        return this.check();\n    }\n    transformByMatrix2(matrix2) {\n        vec3_transformMat2(this, this, matrix2);\n        return this.check();\n    }\n    transformByQuaternion(quaternion) {\n        vec3_transformQuat(this, this, quaternion);\n        return this.check();\n    }\n}\n//# sourceMappingURL=vector3.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Copyright (c) 2017 Uber Technologies, Inc.\nimport { MathArray } from \"./math-array.js\";\nimport { checkNumber } from \"../../lib/validators.js\";\nimport { config } from \"../../lib/common.js\";\n/** Base class for matrices */\nexport class Matrix extends MathArray {\n    // fromObject(object) {\n    //   const array = object.elements;\n    //   return this.fromRowMajor(array);\n    // }\n    // toObject(object) {\n    //   const array = object.elements;\n    //   this.toRowMajor(array);\n    //   return object;\n    // }\n    // TODO better override formatString?\n    toString() {\n        let string = '[';\n        if (config.printRowMajor) {\n            string += 'row-major:';\n            for (let row = 0; row < this.RANK; ++row) {\n                for (let col = 0; col < this.RANK; ++col) {\n                    string += ` ${this[col * this.RANK + row]}`;\n                }\n            }\n        }\n        else {\n            string += 'column-major:';\n            for (let i = 0; i < this.ELEMENTS; ++i) {\n                string += ` ${this[i]}`;\n            }\n        }\n        string += ']';\n        return string;\n    }\n    getElementIndex(row, col) {\n        return col * this.RANK + row;\n    }\n    // By default assumes row major indices\n    getElement(row, col) {\n        return this[col * this.RANK + row];\n    }\n    // By default assumes row major indices\n    setElement(row, col, value) {\n        this[col * this.RANK + row] = checkNumber(value);\n        return this;\n    }\n    getColumn(columnIndex, result = new Array(this.RANK).fill(-0)) {\n        const firstIndex = columnIndex * this.RANK;\n        for (let i = 0; i < this.RANK; ++i) {\n            result[i] = this[firstIndex + i];\n        }\n        return result;\n    }\n    setColumn(columnIndex, columnVector) {\n        const firstIndex = columnIndex * this.RANK;\n        for (let i = 0; i < this.RANK; ++i) {\n            this[firstIndex + i] = columnVector[i];\n        }\n        return this;\n    }\n}\n//# sourceMappingURL=matrix.js.map","// @eslint-disable\n// @ts-nocheck\nimport * as glMatrix from './common.js';\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n/**\n * Creates a new identity mat4\n *\n * @returns a new 4x4 matrix\n */\nexport function create() {\n    const out = new glMatrix.ARRAY_TYPE(16);\n    if (glMatrix.ARRAY_TYPE != Float32Array) {\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n        out[4] = 0;\n        out[6] = 0;\n        out[7] = 0;\n        out[8] = 0;\n        out[9] = 0;\n        out[11] = 0;\n        out[12] = 0;\n        out[13] = 0;\n        out[14] = 0;\n    }\n    out[0] = 1;\n    out[5] = 1;\n    out[10] = 1;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\nexport function clone(a) {\n    const out = new glMatrix.ARRAY_TYPE(16);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    const out = new glMatrix.ARRAY_TYPE(16);\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n    out[0] = m00;\n    out[1] = m01;\n    out[2] = m02;\n    out[3] = m03;\n    out[4] = m10;\n    out[5] = m11;\n    out[6] = m12;\n    out[7] = m13;\n    out[8] = m20;\n    out[9] = m21;\n    out[10] = m22;\n    out[11] = m23;\n    out[12] = m30;\n    out[13] = m31;\n    out[14] = m32;\n    out[15] = m33;\n    return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\nexport function identity(out) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function transpose(out, a) {\n    // If we are transposing ourselves we can skip a few steps but have to cache some values\n    if (out === a) {\n        const a01 = a[1];\n        const a02 = a[2];\n        const a03 = a[3];\n        const a12 = a[6];\n        const a13 = a[7];\n        const a23 = a[11];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a01;\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a02;\n        out[9] = a12;\n        out[11] = a[14];\n        out[12] = a03;\n        out[13] = a13;\n        out[14] = a23;\n    }\n    else {\n        out[0] = a[0];\n        out[1] = a[4];\n        out[2] = a[8];\n        out[3] = a[12];\n        out[4] = a[1];\n        out[5] = a[5];\n        out[6] = a[9];\n        out[7] = a[13];\n        out[8] = a[2];\n        out[9] = a[6];\n        out[10] = a[10];\n        out[11] = a[14];\n        out[12] = a[3];\n        out[13] = a[7];\n        out[14] = a[11];\n        out[15] = a[15];\n    }\n    return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function invert(out, a) {\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    const a30 = a[12];\n    const a31 = a[13];\n    const a32 = a[14];\n    const a33 = a[15];\n    const b00 = a00 * a11 - a01 * a10;\n    const b01 = a00 * a12 - a02 * a10;\n    const b02 = a00 * a13 - a03 * a10;\n    const b03 = a01 * a12 - a02 * a11;\n    const b04 = a01 * a13 - a03 * a11;\n    const b05 = a02 * a13 - a03 * a12;\n    const b06 = a20 * a31 - a21 * a30;\n    const b07 = a20 * a32 - a22 * a30;\n    const b08 = a20 * a33 - a23 * a30;\n    const b09 = a21 * a32 - a22 * a31;\n    const b10 = a21 * a33 - a23 * a31;\n    const b11 = a22 * a33 - a23 * a32;\n    // Calculate the determinant\n    let det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n    if (!det) {\n        return null;\n    }\n    det = 1.0 / det;\n    out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n    out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n    out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n    out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n    out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n    out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n    out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n    out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n    out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n    out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n    out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n    out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n    out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n    out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n    out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n    out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n    return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\nexport function adjoint(out, a) {\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    const a30 = a[12];\n    const a31 = a[13];\n    const a32 = a[14];\n    const a33 = a[15];\n    const b00 = a00 * a11 - a01 * a10;\n    const b01 = a00 * a12 - a02 * a10;\n    const b02 = a00 * a13 - a03 * a10;\n    const b03 = a01 * a12 - a02 * a11;\n    const b04 = a01 * a13 - a03 * a11;\n    const b05 = a02 * a13 - a03 * a12;\n    const b06 = a20 * a31 - a21 * a30;\n    const b07 = a20 * a32 - a22 * a30;\n    const b08 = a20 * a33 - a23 * a30;\n    const b09 = a21 * a32 - a22 * a31;\n    const b10 = a21 * a33 - a23 * a31;\n    const b11 = a22 * a33 - a23 * a32;\n    out[0] = a11 * b11 - a12 * b10 + a13 * b09;\n    out[1] = a02 * b10 - a01 * b11 - a03 * b09;\n    out[2] = a31 * b05 - a32 * b04 + a33 * b03;\n    out[3] = a22 * b04 - a21 * b05 - a23 * b03;\n    out[4] = a12 * b08 - a10 * b11 - a13 * b07;\n    out[5] = a00 * b11 - a02 * b08 + a03 * b07;\n    out[6] = a32 * b02 - a30 * b05 - a33 * b01;\n    out[7] = a20 * b05 - a22 * b02 + a23 * b01;\n    out[8] = a10 * b10 - a11 * b08 + a13 * b06;\n    out[9] = a01 * b08 - a00 * b10 - a03 * b06;\n    out[10] = a30 * b04 - a31 * b02 + a33 * b00;\n    out[11] = a21 * b02 - a20 * b04 - a23 * b00;\n    out[12] = a11 * b07 - a10 * b09 - a12 * b06;\n    out[13] = a00 * b09 - a01 * b07 + a02 * b06;\n    out[14] = a31 * b01 - a30 * b03 - a32 * b00;\n    out[15] = a20 * b03 - a21 * b01 + a22 * b00;\n    return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\nexport function determinant(a) {\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    const a30 = a[12];\n    const a31 = a[13];\n    const a32 = a[14];\n    const a33 = a[15];\n    const b0 = a00 * a11 - a01 * a10;\n    const b1 = a00 * a12 - a02 * a10;\n    const b2 = a01 * a12 - a02 * a11;\n    const b3 = a20 * a31 - a21 * a30;\n    const b4 = a20 * a32 - a22 * a30;\n    const b5 = a21 * a32 - a22 * a31;\n    const b6 = a00 * b5 - a01 * b4 + a02 * b3;\n    const b7 = a10 * b5 - a11 * b4 + a12 * b3;\n    const b8 = a20 * b2 - a21 * b1 + a22 * b0;\n    const b9 = a30 * b2 - a31 * b1 + a32 * b0;\n    // Calculate the determinant\n    return a13 * b6 - a03 * b7 + a33 * b8 - a23 * b9;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function multiply(out, a, b) {\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    const a30 = a[12];\n    const a31 = a[13];\n    const a32 = a[14];\n    const a33 = a[15];\n    // Cache only the current line of the second matrix\n    let b0 = b[0];\n    let b1 = b[1];\n    let b2 = b[2];\n    let b3 = b[3];\n    out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[4];\n    b1 = b[5];\n    b2 = b[6];\n    b3 = b[7];\n    out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[8];\n    b1 = b[9];\n    b2 = b[10];\n    b3 = b[11];\n    out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    b0 = b[12];\n    b1 = b[13];\n    b2 = b[14];\n    b3 = b[15];\n    out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n    out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n    out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n    out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n    return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\nexport function translate(out, a, v) {\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    let a00;\n    let a01;\n    let a02;\n    let a03;\n    let a10;\n    let a11;\n    let a12;\n    let a13;\n    let a20;\n    let a21;\n    let a22;\n    let a23;\n    if (a === out) {\n        out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n        out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n        out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n        out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n    }\n    else {\n        a00 = a[0];\n        a01 = a[1];\n        a02 = a[2];\n        a03 = a[3];\n        a10 = a[4];\n        a11 = a[5];\n        a12 = a[6];\n        a13 = a[7];\n        a20 = a[8];\n        a21 = a[9];\n        a22 = a[10];\n        a23 = a[11];\n        out[0] = a00;\n        out[1] = a01;\n        out[2] = a02;\n        out[3] = a03;\n        out[4] = a10;\n        out[5] = a11;\n        out[6] = a12;\n        out[7] = a13;\n        out[8] = a20;\n        out[9] = a21;\n        out[10] = a22;\n        out[11] = a23;\n        out[12] = a00 * x + a10 * y + a20 * z + a[12];\n        out[13] = a01 * x + a11 * y + a21 * z + a[13];\n        out[14] = a02 * x + a12 * y + a22 * z + a[14];\n        out[15] = a03 * x + a13 * y + a23 * z + a[15];\n    }\n    return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\nexport function scale(out, a, v) {\n    const x = v[0];\n    const y = v[1];\n    const z = v[2];\n    out[0] = a[0] * x;\n    out[1] = a[1] * x;\n    out[2] = a[2] * x;\n    out[3] = a[3] * x;\n    out[4] = a[4] * y;\n    out[5] = a[5] * y;\n    out[6] = a[6] * y;\n    out[7] = a[7] * y;\n    out[8] = a[8] * z;\n    out[9] = a[9] * z;\n    out[10] = a[10] * z;\n    out[11] = a[11] * z;\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n    return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function rotate(out, a, rad, axis) {\n    let x = axis[0];\n    let y = axis[1];\n    let z = axis[2];\n    let len = Math.sqrt(x * x + y * y + z * z);\n    let c;\n    let s;\n    let t;\n    let a00;\n    let a01;\n    let a02;\n    let a03;\n    let a10;\n    let a11;\n    let a12;\n    let a13;\n    let a20;\n    let a21;\n    let a22;\n    let a23;\n    let b00;\n    let b01;\n    let b02;\n    let b10;\n    let b11;\n    let b12;\n    let b20;\n    let b21;\n    let b22;\n    if (len < glMatrix.EPSILON) {\n        return null;\n    }\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    // Construct the elements of the rotation matrix\n    b00 = x * x * t + c;\n    b01 = y * x * t + z * s;\n    b02 = z * x * t - y * s;\n    b10 = x * y * t - z * s;\n    b11 = y * y * t + c;\n    b12 = z * y * t + x * s;\n    b20 = x * z * t + y * s;\n    b21 = y * z * t - x * s;\n    b22 = z * z * t + c;\n    // Perform rotation-specific matrix multiplication\n    out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n    out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n    out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n    out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n    out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n    out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n    out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n    out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n    out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n    out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n    out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n    out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateX(out, a, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged rows\n        out[0] = a[0];\n        out[1] = a[1];\n        out[2] = a[2];\n        out[3] = a[3];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    // Perform axis-specific matrix multiplication\n    out[4] = a10 * c + a20 * s;\n    out[5] = a11 * c + a21 * s;\n    out[6] = a12 * c + a22 * s;\n    out[7] = a13 * c + a23 * s;\n    out[8] = a20 * c - a10 * s;\n    out[9] = a21 * c - a11 * s;\n    out[10] = a22 * c - a12 * s;\n    out[11] = a23 * c - a13 * s;\n    return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateY(out, a, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a20 = a[8];\n    const a21 = a[9];\n    const a22 = a[10];\n    const a23 = a[11];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged rows\n        out[4] = a[4];\n        out[5] = a[5];\n        out[6] = a[6];\n        out[7] = a[7];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c - a20 * s;\n    out[1] = a01 * c - a21 * s;\n    out[2] = a02 * c - a22 * s;\n    out[3] = a03 * c - a23 * s;\n    out[8] = a00 * s + a20 * c;\n    out[9] = a01 * s + a21 * c;\n    out[10] = a02 * s + a22 * c;\n    out[11] = a03 * s + a23 * c;\n    return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function rotateZ(out, a, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    const a00 = a[0];\n    const a01 = a[1];\n    const a02 = a[2];\n    const a03 = a[3];\n    const a10 = a[4];\n    const a11 = a[5];\n    const a12 = a[6];\n    const a13 = a[7];\n    if (a !== out) {\n        // If the source and destination differ, copy the unchanged last row\n        out[8] = a[8];\n        out[9] = a[9];\n        out[10] = a[10];\n        out[11] = a[11];\n        out[12] = a[12];\n        out[13] = a[13];\n        out[14] = a[14];\n        out[15] = a[15];\n    }\n    // Perform axis-specific matrix multiplication\n    out[0] = a00 * c + a10 * s;\n    out[1] = a01 * c + a11 * s;\n    out[2] = a02 * c + a12 * s;\n    out[3] = a03 * c + a13 * s;\n    out[4] = a10 * c - a00 * s;\n    out[5] = a11 * c - a01 * s;\n    out[6] = a12 * c - a02 * s;\n    out[7] = a13 * c - a03 * s;\n    return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromTranslation(out, v) {\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\nexport function fromScaling(out, v) {\n    out[0] = v[0];\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = v[1];\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = v[2];\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\nexport function fromRotation(out, rad, axis) {\n    let x = axis[0];\n    let y = axis[1];\n    let z = axis[2];\n    let len = Math.sqrt(x * x + y * y + z * z);\n    let c;\n    let s;\n    let t;\n    if (len < glMatrix.EPSILON) {\n        return null;\n    }\n    len = 1 / len;\n    x *= len;\n    y *= len;\n    z *= len;\n    s = Math.sin(rad);\n    c = Math.cos(rad);\n    t = 1 - c;\n    // Perform rotation-specific matrix multiplication\n    out[0] = x * x * t + c;\n    out[1] = y * x * t + z * s;\n    out[2] = z * x * t - y * s;\n    out[3] = 0;\n    out[4] = x * y * t - z * s;\n    out[5] = y * y * t + c;\n    out[6] = z * y * t + x * s;\n    out[7] = 0;\n    out[8] = x * z * t + y * s;\n    out[9] = y * z * t - x * s;\n    out[10] = z * z * t + c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromXRotation(out, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    // Perform axis-specific matrix multiplication\n    out[0] = 1;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = c;\n    out[6] = s;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = -s;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromYRotation(out, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    // Perform axis-specific matrix multiplication\n    out[0] = c;\n    out[1] = 0;\n    out[2] = -s;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = 1;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = s;\n    out[9] = 0;\n    out[10] = c;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\nexport function fromZRotation(out, rad) {\n    const s = Math.sin(rad);\n    const c = Math.cos(rad);\n    // Perform axis-specific matrix multiplication\n    out[0] = c;\n    out[1] = s;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = -s;\n    out[5] = c;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 1;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslation(out, q, v) {\n    // Quaternion math\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const xy = x * y2;\n    const xz = x * z2;\n    const yy = y * y2;\n    const yz = y * z2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    out[0] = 1 - (yy + zz);\n    out[1] = xy + wz;\n    out[2] = xz - wy;\n    out[3] = 0;\n    out[4] = xy - wz;\n    out[5] = 1 - (xx + zz);\n    out[6] = yz + wx;\n    out[7] = 0;\n    out[8] = xz + wy;\n    out[9] = yz - wx;\n    out[10] = 1 - (xx + yy);\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\nexport function fromQuat2(out, a) {\n    const translation = new glMatrix.ARRAY_TYPE(3);\n    const bx = -a[0];\n    const by = -a[1];\n    const bz = -a[2];\n    const bw = a[3];\n    const ax = a[4];\n    const ay = a[5];\n    const az = a[6];\n    const aw = a[7];\n    const magnitude = bx * bx + by * by + bz * bz + bw * bw;\n    // Only scale if it makes sense\n    if (magnitude > 0) {\n        translation[0] = ((ax * bw + aw * bx + ay * bz - az * by) * 2) / magnitude;\n        translation[1] = ((ay * bw + aw * by + az * bx - ax * bz) * 2) / magnitude;\n        translation[2] = ((az * bw + aw * bz + ax * by - ay * bx) * 2) / magnitude;\n    }\n    else {\n        translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n        translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n        translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n    }\n    fromRotationTranslation(out, a, translation);\n    return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getTranslation(out, mat) {\n    out[0] = mat[12];\n    out[1] = mat[13];\n    out[2] = mat[14];\n    return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\nexport function getScaling(out, mat) {\n    const m11 = mat[0];\n    const m12 = mat[1];\n    const m13 = mat[2];\n    const m21 = mat[4];\n    const m22 = mat[5];\n    const m23 = mat[6];\n    const m31 = mat[8];\n    const m32 = mat[9];\n    const m33 = mat[10];\n    out[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n    out[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n    out[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n    return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\nexport function getRotation(out, mat) {\n    const scaling = new glMatrix.ARRAY_TYPE(3);\n    getScaling(scaling, mat);\n    const is1 = 1 / scaling[0];\n    const is2 = 1 / scaling[1];\n    const is3 = 1 / scaling[2];\n    const sm11 = mat[0] * is1;\n    const sm12 = mat[1] * is2;\n    const sm13 = mat[2] * is3;\n    const sm21 = mat[4] * is1;\n    const sm22 = mat[5] * is2;\n    const sm23 = mat[6] * is3;\n    const sm31 = mat[8] * is1;\n    const sm32 = mat[9] * is2;\n    const sm33 = mat[10] * is3;\n    const trace = sm11 + sm22 + sm33;\n    let S = 0;\n    if (trace > 0) {\n        S = Math.sqrt(trace + 1.0) * 2;\n        out[3] = 0.25 * S;\n        out[0] = (sm23 - sm32) / S;\n        out[1] = (sm31 - sm13) / S;\n        out[2] = (sm12 - sm21) / S;\n    }\n    else if (sm11 > sm22 && sm11 > sm33) {\n        S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n        out[3] = (sm23 - sm32) / S;\n        out[0] = 0.25 * S;\n        out[1] = (sm12 + sm21) / S;\n        out[2] = (sm31 + sm13) / S;\n    }\n    else if (sm22 > sm33) {\n        S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n        out[3] = (sm31 - sm13) / S;\n        out[0] = (sm12 + sm21) / S;\n        out[1] = 0.25 * S;\n        out[2] = (sm23 + sm32) / S;\n    }\n    else {\n        S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n        out[3] = (sm12 - sm21) / S;\n        out[0] = (sm31 + sm13) / S;\n        out[1] = (sm23 + sm32) / S;\n        out[2] = 0.25 * S;\n    }\n    return out;\n}\n/**\n * Decomposes a transformation matrix into its rotation, translation\n * and scale components. Returns only the rotation component\n * @param  {quat} out_r Quaternion to receive the rotation component\n * @param  {vec3} out_t Vector to receive the translation vector\n * @param  {vec3} out_s Vector to receive the scaling factor\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @returns {quat} out_r\n */\nexport function decompose(out_r, out_t, out_s, mat) {\n    out_t[0] = mat[12];\n    out_t[1] = mat[13];\n    out_t[2] = mat[14];\n    const m11 = mat[0];\n    const m12 = mat[1];\n    const m13 = mat[2];\n    const m21 = mat[4];\n    const m22 = mat[5];\n    const m23 = mat[6];\n    const m31 = mat[8];\n    const m32 = mat[9];\n    const m33 = mat[10];\n    out_s[0] = Math.sqrt(m11 * m11 + m12 * m12 + m13 * m13);\n    out_s[1] = Math.sqrt(m21 * m21 + m22 * m22 + m23 * m23);\n    out_s[2] = Math.sqrt(m31 * m31 + m32 * m32 + m33 * m33);\n    const is1 = 1 / out_s[0];\n    const is2 = 1 / out_s[1];\n    const is3 = 1 / out_s[2];\n    const sm11 = m11 * is1;\n    const sm12 = m12 * is2;\n    const sm13 = m13 * is3;\n    const sm21 = m21 * is1;\n    const sm22 = m22 * is2;\n    const sm23 = m23 * is3;\n    const sm31 = m31 * is1;\n    const sm32 = m32 * is2;\n    const sm33 = m33 * is3;\n    const trace = sm11 + sm22 + sm33;\n    let S = 0;\n    if (trace > 0) {\n        S = Math.sqrt(trace + 1.0) * 2;\n        out_r[3] = 0.25 * S;\n        out_r[0] = (sm23 - sm32) / S;\n        out_r[1] = (sm31 - sm13) / S;\n        out_r[2] = (sm12 - sm21) / S;\n    }\n    else if (sm11 > sm22 && sm11 > sm33) {\n        S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n        out_r[3] = (sm23 - sm32) / S;\n        out_r[0] = 0.25 * S;\n        out_r[1] = (sm12 + sm21) / S;\n        out_r[2] = (sm31 + sm13) / S;\n    }\n    else if (sm22 > sm33) {\n        S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n        out_r[3] = (sm31 - sm13) / S;\n        out_r[0] = (sm12 + sm21) / S;\n        out_r[1] = 0.25 * S;\n        out_r[2] = (sm23 + sm32) / S;\n    }\n    else {\n        S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n        out_r[3] = (sm12 - sm21) / S;\n        out_r[0] = (sm31 + sm13) / S;\n        out_r[1] = (sm23 + sm32) / S;\n        out_r[2] = 0.25 * S;\n    }\n    return out_r;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScale(out, q, v, s) {\n    // Quaternion math\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const xy = x * y2;\n    const xz = x * z2;\n    const yy = y * y2;\n    const yz = y * z2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    const sx = s[0];\n    const sy = s[1];\n    const sz = s[2];\n    out[0] = (1 - (yy + zz)) * sx;\n    out[1] = (xy + wz) * sx;\n    out[2] = (xz - wy) * sx;\n    out[3] = 0;\n    out[4] = (xy - wz) * sy;\n    out[5] = (1 - (xx + zz)) * sy;\n    out[6] = (yz + wx) * sy;\n    out[7] = 0;\n    out[8] = (xz + wy) * sz;\n    out[9] = (yz - wx) * sz;\n    out[10] = (1 - (xx + yy)) * sz;\n    out[11] = 0;\n    out[12] = v[0];\n    out[13] = v[1];\n    out[14] = v[2];\n    out[15] = 1;\n    return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n    // Quaternion math\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const xy = x * y2;\n    const xz = x * z2;\n    const yy = y * y2;\n    const yz = y * z2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    const sx = s[0];\n    const sy = s[1];\n    const sz = s[2];\n    const ox = o[0];\n    const oy = o[1];\n    const oz = o[2];\n    const out0 = (1 - (yy + zz)) * sx;\n    const out1 = (xy + wz) * sx;\n    const out2 = (xz - wy) * sx;\n    const out4 = (xy - wz) * sy;\n    const out5 = (1 - (xx + zz)) * sy;\n    const out6 = (yz + wx) * sy;\n    const out8 = (xz + wy) * sz;\n    const out9 = (yz - wx) * sz;\n    const out10 = (1 - (xx + yy)) * sz;\n    out[0] = out0;\n    out[1] = out1;\n    out[2] = out2;\n    out[3] = 0;\n    out[4] = out4;\n    out[5] = out5;\n    out[6] = out6;\n    out[7] = 0;\n    out[8] = out8;\n    out[9] = out9;\n    out[10] = out10;\n    out[11] = 0;\n    out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n    out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n    out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n    out[15] = 1;\n    return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\nexport function fromQuat(out, q) {\n    const x = q[0];\n    const y = q[1];\n    const z = q[2];\n    const w = q[3];\n    const x2 = x + x;\n    const y2 = y + y;\n    const z2 = z + z;\n    const xx = x * x2;\n    const yx = y * x2;\n    const yy = y * y2;\n    const zx = z * x2;\n    const zy = z * y2;\n    const zz = z * z2;\n    const wx = w * x2;\n    const wy = w * y2;\n    const wz = w * z2;\n    out[0] = 1 - yy - zz;\n    out[1] = yx + wz;\n    out[2] = zx - wy;\n    out[3] = 0;\n    out[4] = yx - wz;\n    out[5] = 1 - xx - zz;\n    out[6] = zy + wx;\n    out[7] = 0;\n    out[8] = zx + wy;\n    out[9] = zy - wx;\n    out[10] = 1 - xx - yy;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n    out[15] = 1;\n    return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function frustum(out, left, right, bottom, top, near, far) {\n    const rl = 1 / (right - left);\n    const tb = 1 / (top - bottom);\n    const nf = 1 / (near - far);\n    out[0] = near * 2 * rl;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = near * 2 * tb;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = (right + left) * rl;\n    out[9] = (top + bottom) * tb;\n    out[10] = (far + near) * nf;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = far * near * 2 * nf;\n    out[15] = 0;\n    return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n    const f = 1.0 / Math.tan(fovy / 2);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[15] = 0;\n    if (far != null && far !== Infinity) {\n        const nf = 1 / (near - far);\n        out[10] = (far + near) * nf;\n        out[14] = 2 * far * near * nf;\n    }\n    else {\n        out[10] = -1;\n        out[14] = -2 * near;\n    }\n    return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\nexport const perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n    const f = 1.0 / Math.tan(fovy / 2);\n    out[0] = f / aspect;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = f;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = -1;\n    out[12] = 0;\n    out[13] = 0;\n    out[15] = 0;\n    if (far != null && far !== Infinity) {\n        const nf = 1 / (near - far);\n        out[10] = far * nf;\n        out[14] = far * near * nf;\n    }\n    else {\n        out[10] = -1;\n        out[14] = -near;\n    }\n    return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n    const upTan = Math.tan((fov.upDegrees * Math.PI) / 180.0);\n    const downTan = Math.tan((fov.downDegrees * Math.PI) / 180.0);\n    const leftTan = Math.tan((fov.leftDegrees * Math.PI) / 180.0);\n    const rightTan = Math.tan((fov.rightDegrees * Math.PI) / 180.0);\n    const xScale = 2.0 / (leftTan + rightTan);\n    const yScale = 2.0 / (upTan + downTan);\n    out[0] = xScale;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    out[4] = 0.0;\n    out[5] = yScale;\n    out[6] = 0.0;\n    out[7] = 0.0;\n    out[8] = -((leftTan - rightTan) * xScale * 0.5);\n    out[9] = (upTan - downTan) * yScale * 0.5;\n    out[10] = far / (near - far);\n    out[11] = -1.0;\n    out[12] = 0.0;\n    out[13] = 0.0;\n    out[14] = (far * near) / (near - far);\n    out[15] = 0.0;\n    return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n    const lr = 1 / (left - right);\n    const bt = 1 / (bottom - top);\n    const nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = 2 * nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = (far + near) * nf;\n    out[15] = 1;\n    return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\nexport const ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n    const lr = 1 / (left - right);\n    const bt = 1 / (bottom - top);\n    const nf = 1 / (near - far);\n    out[0] = -2 * lr;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[5] = -2 * bt;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[10] = nf;\n    out[11] = 0;\n    out[12] = (left + right) * lr;\n    out[13] = (top + bottom) * bt;\n    out[14] = near * nf;\n    out[15] = 1;\n    return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function lookAt(out, eye, center, up) {\n    let len;\n    let x0;\n    let x1;\n    let x2;\n    let y0;\n    let y1;\n    let y2;\n    let z0;\n    let z1;\n    let z2;\n    const eyex = eye[0];\n    const eyey = eye[1];\n    const eyez = eye[2];\n    const upx = up[0];\n    const upy = up[1];\n    const upz = up[2];\n    const centerx = center[0];\n    const centery = center[1];\n    const centerz = center[2];\n    if (Math.abs(eyex - centerx) < glMatrix.EPSILON &&\n        Math.abs(eyey - centery) < glMatrix.EPSILON &&\n        Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n        return identity(out);\n    }\n    z0 = eyex - centerx;\n    z1 = eyey - centery;\n    z2 = eyez - centerz;\n    len = 1 / Math.sqrt(z0 * z0 + z1 * z1 + z2 * z2);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n    x0 = upy * z2 - upz * z1;\n    x1 = upz * z0 - upx * z2;\n    x2 = upx * z1 - upy * z0;\n    len = Math.sqrt(x0 * x0 + x1 * x1 + x2 * x2);\n    if (!len) {\n        x0 = 0;\n        x1 = 0;\n        x2 = 0;\n    }\n    else {\n        len = 1 / len;\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n    y0 = z1 * x2 - z2 * x1;\n    y1 = z2 * x0 - z0 * x2;\n    y2 = z0 * x1 - z1 * x0;\n    len = Math.sqrt(y0 * y0 + y1 * y1 + y2 * y2);\n    if (!len) {\n        y0 = 0;\n        y1 = 0;\n        y2 = 0;\n    }\n    else {\n        len = 1 / len;\n        y0 *= len;\n        y1 *= len;\n        y2 *= len;\n    }\n    out[0] = x0;\n    out[1] = y0;\n    out[2] = z0;\n    out[3] = 0;\n    out[4] = x1;\n    out[5] = y1;\n    out[6] = z1;\n    out[7] = 0;\n    out[8] = x2;\n    out[9] = y2;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n    out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n    out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n    out[15] = 1;\n    return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\nexport function targetTo(out, eye, target, up) {\n    const eyex = eye[0];\n    const eyey = eye[1];\n    const eyez = eye[2];\n    const upx = up[0];\n    const upy = up[1];\n    const upz = up[2];\n    let z0 = eyex - target[0];\n    let z1 = eyey - target[1];\n    let z2 = eyez - target[2];\n    let len = z0 * z0 + z1 * z1 + z2 * z2;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n        z0 *= len;\n        z1 *= len;\n        z2 *= len;\n    }\n    let x0 = upy * z2 - upz * z1;\n    let x1 = upz * z0 - upx * z2;\n    let x2 = upx * z1 - upy * z0;\n    len = x0 * x0 + x1 * x1 + x2 * x2;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n        x0 *= len;\n        x1 *= len;\n        x2 *= len;\n    }\n    out[0] = x0;\n    out[1] = x1;\n    out[2] = x2;\n    out[3] = 0;\n    out[4] = z1 * x2 - z2 * x1;\n    out[5] = z2 * x0 - z0 * x2;\n    out[6] = z0 * x1 - z1 * x0;\n    out[7] = 0;\n    out[8] = z0;\n    out[9] = z1;\n    out[10] = z2;\n    out[11] = 0;\n    out[12] = eyex;\n    out[13] = eyey;\n    out[14] = eyez;\n    out[15] = 1;\n    return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\nexport function str(a) {\n    return `mat4(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]}, ${a[4]}, ${a[5]}, ${a[6]}, ${a[7]}, ${a[8]}, ${a[9]}, ${a[10]}, ${a[11]}, ${a[12]}, ${a[13]}, ${a[14]}, ${a[15]})`;\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\nexport function frob(a) {\n    return Math.sqrt(a[0] * a[0] +\n        a[1] * a[1] +\n        a[2] * a[2] +\n        a[3] * a[3] +\n        a[4] * a[4] +\n        a[5] * a[5] +\n        a[6] * a[6] +\n        a[7] * a[7] +\n        a[8] * a[8] +\n        a[9] * a[9] +\n        a[10] * a[10] +\n        a[11] * a[11] +\n        a[12] * a[12] +\n        a[13] * a[13] +\n        a[14] * a[14] +\n        a[15] * a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    out[4] = a[4] + b[4];\n    out[5] = a[5] + b[5];\n    out[6] = a[6] + b[6];\n    out[7] = a[7] + b[7];\n    out[8] = a[8] + b[8];\n    out[9] = a[9] + b[9];\n    out[10] = a[10] + b[10];\n    out[11] = a[11] + b[11];\n    out[12] = a[12] + b[12];\n    out[13] = a[13] + b[13];\n    out[14] = a[14] + b[14];\n    out[15] = a[15] + b[15];\n    return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    out[4] = a[4] - b[4];\n    out[5] = a[5] - b[5];\n    out[6] = a[6] - b[6];\n    out[7] = a[7] - b[7];\n    out[8] = a[8] - b[8];\n    out[9] = a[9] - b[9];\n    out[10] = a[10] - b[10];\n    out[11] = a[11] - b[11];\n    out[12] = a[12] - b[12];\n    out[13] = a[13] - b[13];\n    out[14] = a[14] - b[14];\n    out[15] = a[15] - b[15];\n    return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\nexport function multiplyScalar(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    out[4] = a[4] * b;\n    out[5] = a[5] * b;\n    out[6] = a[6] * b;\n    out[7] = a[7] * b;\n    out[8] = a[8] * b;\n    out[9] = a[9] * b;\n    out[10] = a[10] * b;\n    out[11] = a[11] * b;\n    out[12] = a[12] * b;\n    out[13] = a[13] * b;\n    out[14] = a[14] * b;\n    out[15] = a[15] * b;\n    return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    out[3] = a[3] + b[3] * scale;\n    out[4] = a[4] + b[4] * scale;\n    out[5] = a[5] + b[5] * scale;\n    out[6] = a[6] + b[6] * scale;\n    out[7] = a[7] + b[7] * scale;\n    out[8] = a[8] + b[8] * scale;\n    out[9] = a[9] + b[9] * scale;\n    out[10] = a[10] + b[10] * scale;\n    out[11] = a[11] + b[11] * scale;\n    out[12] = a[12] + b[12] * scale;\n    out[13] = a[13] + b[13] * scale;\n    out[14] = a[14] + b[14] * scale;\n    out[15] = a[15] + b[15] * scale;\n    return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return (a[0] === b[0] &&\n        a[1] === b[1] &&\n        a[2] === b[2] &&\n        a[3] === b[3] &&\n        a[4] === b[4] &&\n        a[5] === b[5] &&\n        a[6] === b[6] &&\n        a[7] === b[7] &&\n        a[8] === b[8] &&\n        a[9] === b[9] &&\n        a[10] === b[10] &&\n        a[11] === b[11] &&\n        a[12] === b[12] &&\n        a[13] === b[13] &&\n        a[14] === b[14] &&\n        a[15] === b[15]);\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\nexport function equals(a, b) {\n    const a0 = a[0];\n    const a1 = a[1];\n    const a2 = a[2];\n    const a3 = a[3];\n    const a4 = a[4];\n    const a5 = a[5];\n    const a6 = a[6];\n    const a7 = a[7];\n    const a8 = a[8];\n    const a9 = a[9];\n    const a10 = a[10];\n    const a11 = a[11];\n    const a12 = a[12];\n    const a13 = a[13];\n    const a14 = a[14];\n    const a15 = a[15];\n    const b0 = b[0];\n    const b1 = b[1];\n    const b2 = b[2];\n    const b3 = b[3];\n    const b4 = b[4];\n    const b5 = b[5];\n    const b6 = b[6];\n    const b7 = b[7];\n    const b8 = b[8];\n    const b9 = b[9];\n    const b10 = b[10];\n    const b11 = b[11];\n    const b12 = b[12];\n    const b13 = b[13];\n    const b14 = b[14];\n    const b15 = b[15];\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n        Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n        Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n        Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) &&\n        Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) &&\n        Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) &&\n        Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) &&\n        Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) &&\n        Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) &&\n        Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) &&\n        Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) &&\n        Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) &&\n        Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) &&\n        Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) &&\n        Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) &&\n        Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15)));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\nexport const mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\nexport const sub = subtract;\n//# sourceMappingURL=mat4.js.map","// @eslint-disable\n// @ts-nocheck\nimport * as glMatrix from './common.js';\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\nexport function create() {\n    const out = new glMatrix.ARRAY_TYPE(4);\n    if (glMatrix.ARRAY_TYPE != Float32Array) {\n        out[0] = 0;\n        out[1] = 0;\n        out[2] = 0;\n        out[3] = 0;\n    }\n    return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\nexport function clone(a) {\n    const out = new glMatrix.ARRAY_TYPE(4);\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\nexport function fromValues(x, y, z, w) {\n    const out = new glMatrix.ARRAY_TYPE(4);\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\nexport function copy(out, a) {\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\nexport function set(out, x, y, z, w) {\n    out[0] = x;\n    out[1] = y;\n    out[2] = z;\n    out[3] = w;\n    return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function add(out, a, b) {\n    out[0] = a[0] + b[0];\n    out[1] = a[1] + b[1];\n    out[2] = a[2] + b[2];\n    out[3] = a[3] + b[3];\n    return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function subtract(out, a, b) {\n    out[0] = a[0] - b[0];\n    out[1] = a[1] - b[1];\n    out[2] = a[2] - b[2];\n    out[3] = a[3] - b[3];\n    return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function multiply(out, a, b) {\n    out[0] = a[0] * b[0];\n    out[1] = a[1] * b[1];\n    out[2] = a[2] * b[2];\n    out[3] = a[3] * b[3];\n    return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function divide(out, a, b) {\n    out[0] = a[0] / b[0];\n    out[1] = a[1] / b[1];\n    out[2] = a[2] / b[2];\n    out[3] = a[3] / b[3];\n    return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\nexport function ceil(out, a) {\n    out[0] = Math.ceil(a[0]);\n    out[1] = Math.ceil(a[1]);\n    out[2] = Math.ceil(a[2]);\n    out[3] = Math.ceil(a[3]);\n    return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\nexport function floor(out, a) {\n    out[0] = Math.floor(a[0]);\n    out[1] = Math.floor(a[1]);\n    out[2] = Math.floor(a[2]);\n    out[3] = Math.floor(a[3]);\n    return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function min(out, a, b) {\n    out[0] = Math.min(a[0], b[0]);\n    out[1] = Math.min(a[1], b[1]);\n    out[2] = Math.min(a[2], b[2]);\n    out[3] = Math.min(a[3], b[3]);\n    return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\nexport function max(out, a, b) {\n    out[0] = Math.max(a[0], b[0]);\n    out[1] = Math.max(a[1], b[1]);\n    out[2] = Math.max(a[2], b[2]);\n    out[3] = Math.max(a[3], b[3]);\n    return out;\n}\n/**\n * symmetric round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\nexport function round(out, a) {\n    out[0] = glMatrix.round(a[0]);\n    out[1] = glMatrix.round(a[1]);\n    out[2] = glMatrix.round(a[2]);\n    out[3] = glMatrix.round(a[3]);\n    return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\nexport function scale(out, a, b) {\n    out[0] = a[0] * b;\n    out[1] = a[1] * b;\n    out[2] = a[2] * b;\n    out[3] = a[3] * b;\n    return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\nexport function scaleAndAdd(out, a, b, scale) {\n    out[0] = a[0] + b[0] * scale;\n    out[1] = a[1] + b[1] * scale;\n    out[2] = a[2] + b[2] * scale;\n    out[3] = a[3] + b[3] * scale;\n    return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\nexport function distance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    const z = b[2] - a[2];\n    const w = b[3] - a[3];\n    return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\nexport function squaredDistance(a, b) {\n    const x = b[0] - a[0];\n    const y = b[1] - a[1];\n    const z = b[2] - a[2];\n    const w = b[3] - a[3];\n    return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\nexport function length(a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const w = a[3];\n    return Math.sqrt(x * x + y * y + z * z + w * w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\nexport function squaredLength(a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const w = a[3];\n    return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\nexport function negate(out, a) {\n    out[0] = -a[0];\n    out[1] = -a[1];\n    out[2] = -a[2];\n    out[3] = -a[3];\n    return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\nexport function inverse(out, a) {\n    out[0] = 1.0 / a[0];\n    out[1] = 1.0 / a[1];\n    out[2] = 1.0 / a[2];\n    out[3] = 1.0 / a[3];\n    return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\nexport function normalize(out, a) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const w = a[3];\n    let len = x * x + y * y + z * z + w * w;\n    if (len > 0) {\n        len = 1 / Math.sqrt(len);\n    }\n    out[0] = x * len;\n    out[1] = y * len;\n    out[2] = z * len;\n    out[3] = w * len;\n    return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\nexport function dot(a, b) {\n    return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\nexport function cross(out, u, v, w) {\n    const A = v[0] * w[1] - v[1] * w[0];\n    const B = v[0] * w[2] - v[2] * w[0];\n    const C = v[0] * w[3] - v[3] * w[0];\n    const D = v[1] * w[2] - v[2] * w[1];\n    const E = v[1] * w[3] - v[3] * w[1];\n    const F = v[2] * w[3] - v[3] * w[2];\n    const G = u[0];\n    const H = u[1];\n    const I = u[2];\n    const J = u[3];\n    out[0] = H * F - I * E + J * D;\n    out[1] = -(G * F) + I * C - J * B;\n    out[2] = G * E - H * C + J * A;\n    out[3] = -(G * D) + H * B - I * A;\n    return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\nexport function lerp(out, a, b, t) {\n    const ax = a[0];\n    const ay = a[1];\n    const az = a[2];\n    const aw = a[3];\n    out[0] = ax + t * (b[0] - ax);\n    out[1] = ay + t * (b[1] - ay);\n    out[2] = az + t * (b[2] - az);\n    out[3] = aw + t * (b[3] - aw);\n    return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If omitted, a unit vector will be returned\n * @returns {vec4} out\n */\nexport function random(out, scale) {\n    scale = scale === undefined ? 1.0 : scale;\n    // Marsaglia, George. Choosing a Point from the Surface of a\n    // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n    // http://projecteuclid.org/euclid.aoms/1177692644;\n    let v1;\n    let v2;\n    let v3;\n    let v4;\n    let s1;\n    let s2;\n    do {\n        v1 = glMatrix.RANDOM() * 2 - 1;\n        v2 = glMatrix.RANDOM() * 2 - 1;\n        s1 = v1 * v1 + v2 * v2;\n    } while (s1 >= 1);\n    do {\n        v3 = glMatrix.RANDOM() * 2 - 1;\n        v4 = glMatrix.RANDOM() * 2 - 1;\n        s2 = v3 * v3 + v4 * v4;\n    } while (s2 >= 1);\n    const d = Math.sqrt((1 - s1) / s2);\n    out[0] = scale * v1;\n    out[1] = scale * v2;\n    out[2] = scale * v3 * d;\n    out[3] = scale * v4 * d;\n    return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\nexport function transformMat4(out, a, m) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const w = a[3];\n    out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n    out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n    out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n    out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n    return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\nexport function transformQuat(out, a, q) {\n    const x = a[0];\n    const y = a[1];\n    const z = a[2];\n    const qx = q[0];\n    const qy = q[1];\n    const qz = q[2];\n    const qw = q[3];\n    // calculate quat * vec\n    const ix = qw * x + qy * z - qz * y;\n    const iy = qw * y + qz * x - qx * z;\n    const iz = qw * z + qx * y - qy * x;\n    const iw = -qx * x - qy * y - qz * z;\n    // calculate result * inverse quat\n    out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n    out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n    out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n    out[3] = a[3];\n    return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\nexport function zero(out) {\n    out[0] = 0.0;\n    out[1] = 0.0;\n    out[2] = 0.0;\n    out[3] = 0.0;\n    return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\nexport function str(a) {\n    return `vec4(${a[0]}, ${a[1]}, ${a[2]}, ${a[3]})`;\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function exactEquals(a, b) {\n    return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\nexport function equals(a, b) {\n    const a0 = a[0];\n    const a1 = a[1];\n    const a2 = a[2];\n    const a3 = a[3];\n    const b0 = b[0];\n    const b1 = b[1];\n    const b2 = b[2];\n    const b3 = b[3];\n    return (Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) &&\n        Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) &&\n        Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) &&\n        Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\nexport const sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\nexport const mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\nexport const div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\nexport const dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\nexport const sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\nexport const len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\nexport const sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\nexport const forEach = (function () {\n    const vec = create();\n    return function (a, stride, offset, count, fn, arg) {\n        let i;\n        let l;\n        if (!stride) {\n            stride = 4;\n        }\n        if (!offset) {\n            offset = 0;\n        }\n        if (count) {\n            l = Math.min(count * stride + offset, a.length);\n        }\n        else {\n            l = a.length;\n        }\n        for (i = offset; i < l; i += stride) {\n            vec[0] = a[i];\n            vec[1] = a[i + 1];\n            vec[2] = a[i + 2];\n            vec[3] = a[i + 3];\n            fn(vec, vec, arg);\n            a[i] = vec[0];\n            a[i + 1] = vec[1];\n            a[i + 2] = vec[2];\n            a[i + 3] = vec[3];\n        }\n        return a;\n    };\n})();\n//# sourceMappingURL=vec4.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n// Copyright (c) 2017 Uber Technologies, Inc.\nimport { Matrix } from \"./base/matrix.js\";\nimport { checkVector } from \"../lib/validators.js\";\n/* eslint-disable camelcase */\nimport { vec2_transformMat4AsVector, vec3_transformMat4AsVector } from \"../lib/gl-matrix-extras.js\";\n// @ts-ignore gl-matrix types...\nimport { fromQuat as mat4_fromQuat, frustum as mat4_frustum, lookAt as mat4_lookAt, ortho as mat4_ortho, perspective as mat4_perspective, determinant as mat4_determinant, transpose as mat4_transpose, invert as mat4_invert, multiply as mat4_multiply, rotateX as mat4_rotateX, rotateY as mat4_rotateY, rotateZ as mat4_rotateZ, rotate as mat4_rotate, scale as mat4_scale, translate as mat4_translate } from \"../gl-matrix/mat4.js\";\nimport { transformMat4 as vec2_transformMat4 } from \"../gl-matrix/vec2.js\";\nimport { transformMat4 as vec3_transformMat4 } from \"../gl-matrix/vec3.js\";\nimport { transformMat4 as vec4_transformMat4 } from \"../gl-matrix/vec4.js\";\n// eslint-disable-next-line no-shadow\nvar INDICES;\n(function (INDICES) {\n    INDICES[INDICES[\"COL0ROW0\"] = 0] = \"COL0ROW0\";\n    INDICES[INDICES[\"COL0ROW1\"] = 1] = \"COL0ROW1\";\n    INDICES[INDICES[\"COL0ROW2\"] = 2] = \"COL0ROW2\";\n    INDICES[INDICES[\"COL0ROW3\"] = 3] = \"COL0ROW3\";\n    INDICES[INDICES[\"COL1ROW0\"] = 4] = \"COL1ROW0\";\n    INDICES[INDICES[\"COL1ROW1\"] = 5] = \"COL1ROW1\";\n    INDICES[INDICES[\"COL1ROW2\"] = 6] = \"COL1ROW2\";\n    INDICES[INDICES[\"COL1ROW3\"] = 7] = \"COL1ROW3\";\n    INDICES[INDICES[\"COL2ROW0\"] = 8] = \"COL2ROW0\";\n    INDICES[INDICES[\"COL2ROW1\"] = 9] = \"COL2ROW1\";\n    INDICES[INDICES[\"COL2ROW2\"] = 10] = \"COL2ROW2\";\n    INDICES[INDICES[\"COL2ROW3\"] = 11] = \"COL2ROW3\";\n    INDICES[INDICES[\"COL3ROW0\"] = 12] = \"COL3ROW0\";\n    INDICES[INDICES[\"COL3ROW1\"] = 13] = \"COL3ROW1\";\n    INDICES[INDICES[\"COL3ROW2\"] = 14] = \"COL3ROW2\";\n    INDICES[INDICES[\"COL3ROW3\"] = 15] = \"COL3ROW3\";\n})(INDICES || (INDICES = {}));\nconst DEFAULT_FOVY = (45 * Math.PI) / 180;\nconst DEFAULT_ASPECT = 1;\nconst DEFAULT_NEAR = 0.1;\nconst DEFAULT_FAR = 500;\nconst IDENTITY_MATRIX = Object.freeze([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]);\n/**\n * A 4x4 matrix with common linear algebra operations\n * Subclass of Array<number> meaning that it is highly compatible with other libraries\n */\nexport class Matrix4 extends Matrix {\n    static get IDENTITY() {\n        return getIdentityMatrix();\n    }\n    static get ZERO() {\n        return getZeroMatrix();\n    }\n    get ELEMENTS() {\n        return 16;\n    }\n    get RANK() {\n        return 4;\n    }\n    get INDICES() {\n        return INDICES;\n    }\n    constructor(array) {\n        // PERF NOTE: initialize elements as double precision numbers\n        super(-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0);\n        if (arguments.length === 1 && Array.isArray(array)) {\n            this.copy(array);\n        }\n        else {\n            this.identity();\n        }\n    }\n    copy(array) {\n        this[0] = array[0];\n        this[1] = array[1];\n        this[2] = array[2];\n        this[3] = array[3];\n        this[4] = array[4];\n        this[5] = array[5];\n        this[6] = array[6];\n        this[7] = array[7];\n        this[8] = array[8];\n        this[9] = array[9];\n        this[10] = array[10];\n        this[11] = array[11];\n        this[12] = array[12];\n        this[13] = array[13];\n        this[14] = array[14];\n        this[15] = array[15];\n        return this.check();\n    }\n    // eslint-disable-next-line max-params\n    set(m00, m10, m20, m30, m01, m11, m21, m31, m02, m12, m22, m32, m03, m13, m23, m33) {\n        this[0] = m00;\n        this[1] = m10;\n        this[2] = m20;\n        this[3] = m30;\n        this[4] = m01;\n        this[5] = m11;\n        this[6] = m21;\n        this[7] = m31;\n        this[8] = m02;\n        this[9] = m12;\n        this[10] = m22;\n        this[11] = m32;\n        this[12] = m03;\n        this[13] = m13;\n        this[14] = m23;\n        this[15] = m33;\n        return this.check();\n    }\n    // accepts row major order, stores as column major\n    // eslint-disable-next-line max-params\n    setRowMajor(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n        this[0] = m00;\n        this[1] = m10;\n        this[2] = m20;\n        this[3] = m30;\n        this[4] = m01;\n        this[5] = m11;\n        this[6] = m21;\n        this[7] = m31;\n        this[8] = m02;\n        this[9] = m12;\n        this[10] = m22;\n        this[11] = m32;\n        this[12] = m03;\n        this[13] = m13;\n        this[14] = m23;\n        this[15] = m33;\n        return this.check();\n    }\n    toRowMajor(result) {\n        result[0] = this[0];\n        result[1] = this[4];\n        result[2] = this[8];\n        result[3] = this[12];\n        result[4] = this[1];\n        result[5] = this[5];\n        result[6] = this[9];\n        result[7] = this[13];\n        result[8] = this[2];\n        result[9] = this[6];\n        result[10] = this[10];\n        result[11] = this[14];\n        result[12] = this[3];\n        result[13] = this[7];\n        result[14] = this[11];\n        result[15] = this[15];\n        return result;\n    }\n    // Constructors\n    /** Set to identity matrix */\n    identity() {\n        return this.copy(IDENTITY_MATRIX);\n    }\n    /**\n     *\n     * @param object\n     * @returns self\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    fromObject(object) {\n        return this.check();\n    }\n    /**\n     * Calculates a 4x4 matrix from the given quaternion\n     * @param quaternion Quaternion to create matrix from\n     * @returns self\n     */\n    fromQuaternion(quaternion) {\n        mat4_fromQuat(this, quaternion);\n        return this.check();\n    }\n    /**\n     * Generates a frustum matrix with the given bounds\n     * @param view.left - Left bound of the frustum\n     * @param view.right - Right bound of the frustum\n     * @param view.bottom - Bottom bound of the frustum\n     * @param view.top - Top bound of the frustum\n     * @param view.near - Near bound of the frustum\n     * @param view.far - Far bound of the frustum. Can be set to Infinity.\n     * @returns self\n     */\n    frustum(view) {\n        const { left, right, bottom, top, near = DEFAULT_NEAR, far = DEFAULT_FAR } = view;\n        if (far === Infinity) {\n            computeInfinitePerspectiveOffCenter(this, left, right, bottom, top, near);\n        }\n        else {\n            mat4_frustum(this, left, right, bottom, top, near, far);\n        }\n        return this.check();\n    }\n    /**\n     * Generates a look-at matrix with the given eye position, focal point,\n     * and up axis\n     * @param view.eye - (vector) Position of the viewer\n     * @param view.center - (vector) Point the viewer is looking at\n     * @param view.up - (vector) Up axis\n     * @returns self\n     */\n    lookAt(view) {\n        const { eye, center = [0, 0, 0], up = [0, 1, 0] } = view;\n        mat4_lookAt(this, eye, center, up);\n        return this.check();\n    }\n    /**\n     * Generates a orthogonal projection matrix with the given bounds\n     * from \"traditional\" view space parameters\n     * @param view.left - Left bound of the frustum\n     * @param view.right number  Right bound of the frustum\n     * @param view.bottom - Bottom bound of the frustum\n     * @param view.top number  Top bound of the frustum\n     * @param view.near - Near bound of the frustum\n     * @param view.far number  Far bound of the frustum\n     * @returns self\n     */\n    ortho(view) {\n        const { left, right, bottom, top, near = DEFAULT_NEAR, far = DEFAULT_FAR } = view;\n        mat4_ortho(this, left, right, bottom, top, near, far);\n        return this.check();\n    }\n    /**\n     * Generates an orthogonal projection matrix with the same parameters\n     * as a perspective matrix (plus focalDistance)\n     * @param view.fovy Vertical field of view in radians\n     * @param view.aspect Aspect ratio. Typically viewport width / viewport height\n     * @param view.focalDistance Distance in the view frustum used for extent calculations\n     * @param view.near Near bound of the frustum\n     * @param view.far Far bound of the frustum\n     * @returns self\n     */\n    orthographic(view) {\n        const { fovy = DEFAULT_FOVY, aspect = DEFAULT_ASPECT, focalDistance = 1, near = DEFAULT_NEAR, far = DEFAULT_FAR } = view;\n        checkRadians(fovy);\n        const halfY = fovy / 2;\n        const top = focalDistance * Math.tan(halfY); // focus_plane is the distance from the camera\n        const right = top * aspect;\n        return this.ortho({\n            left: -right,\n            right,\n            bottom: -top,\n            top,\n            near,\n            far\n        });\n    }\n    /**\n     * Generates a perspective projection matrix with the given bounds\n     * @param view.fovy Vertical field of view in radians\n     * @param view.aspect Aspect ratio. typically viewport width/height\n     * @param view.near Near bound of the frustum\n     * @param view.far Far bound of the frustum\n     * @returns self\n     */\n    perspective(view) {\n        const { fovy = (45 * Math.PI) / 180, aspect = 1, near = 0.1, far = 500 } = view;\n        checkRadians(fovy);\n        mat4_perspective(this, fovy, aspect, near, far);\n        return this.check();\n    }\n    // Accessors\n    determinant() {\n        return mat4_determinant(this);\n    }\n    /**\n     * Extracts the non-uniform scale assuming the matrix is an affine transformation.\n     * The scales are the \"lengths\" of the column vectors in the upper-left 3x3 matrix.\n     * @param result\n     * @returns self\n     */\n    getScale(result = [-0, -0, -0]) {\n        // explicit is faster than hypot...\n        result[0] = Math.sqrt(this[0] * this[0] + this[1] * this[1] + this[2] * this[2]);\n        result[1] = Math.sqrt(this[4] * this[4] + this[5] * this[5] + this[6] * this[6]);\n        result[2] = Math.sqrt(this[8] * this[8] + this[9] * this[9] + this[10] * this[10]);\n        // result[0] = Math.hypot(this[0], this[1], this[2]);\n        // result[1] = Math.hypot(this[4], this[5], this[6]);\n        // result[2] = Math.hypot(this[8], this[9], this[10]);\n        return result;\n    }\n    /**\n     * Gets the translation portion, assuming the matrix is a affine transformation matrix.\n     * @param result\n     * @returns self\n     */\n    getTranslation(result = [-0, -0, -0]) {\n        result[0] = this[12];\n        result[1] = this[13];\n        result[2] = this[14];\n        return result;\n    }\n    /**\n     * Gets upper left 3x3 pure rotation matrix (non-scaling), assume affine transformation matrix\n     * @param result\n     * @param scaleResult\n     * @returns self\n     */\n    getRotation(result, scaleResult) {\n        result = result || [-0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0, -0];\n        scaleResult = scaleResult || [-0, -0, -0];\n        const scale = this.getScale(scaleResult);\n        const inverseScale0 = 1 / scale[0];\n        const inverseScale1 = 1 / scale[1];\n        const inverseScale2 = 1 / scale[2];\n        result[0] = this[0] * inverseScale0;\n        result[1] = this[1] * inverseScale1;\n        result[2] = this[2] * inverseScale2;\n        result[3] = 0;\n        result[4] = this[4] * inverseScale0;\n        result[5] = this[5] * inverseScale1;\n        result[6] = this[6] * inverseScale2;\n        result[7] = 0;\n        result[8] = this[8] * inverseScale0;\n        result[9] = this[9] * inverseScale1;\n        result[10] = this[10] * inverseScale2;\n        result[11] = 0;\n        result[12] = 0;\n        result[13] = 0;\n        result[14] = 0;\n        result[15] = 1;\n        return result;\n    }\n    /**\n     *\n     * @param result\n     * @param scaleResult\n     * @returns self\n     */\n    getRotationMatrix3(result, scaleResult) {\n        result = result || [-0, -0, -0, -0, -0, -0, -0, -0, -0];\n        scaleResult = scaleResult || [-0, -0, -0];\n        const scale = this.getScale(scaleResult);\n        const inverseScale0 = 1 / scale[0];\n        const inverseScale1 = 1 / scale[1];\n        const inverseScale2 = 1 / scale[2];\n        result[0] = this[0] * inverseScale0;\n        result[1] = this[1] * inverseScale1;\n        result[2] = this[2] * inverseScale2;\n        result[3] = this[4] * inverseScale0;\n        result[4] = this[5] * inverseScale1;\n        result[5] = this[6] * inverseScale2;\n        result[6] = this[8] * inverseScale0;\n        result[7] = this[9] * inverseScale1;\n        result[8] = this[10] * inverseScale2;\n        return result;\n    }\n    // Modifiers\n    transpose() {\n        mat4_transpose(this, this);\n        return this.check();\n    }\n    invert() {\n        mat4_invert(this, this);\n        return this.check();\n    }\n    // Operations\n    multiplyLeft(a) {\n        mat4_multiply(this, a, this);\n        return this.check();\n    }\n    multiplyRight(a) {\n        mat4_multiply(this, this, a);\n        return this.check();\n    }\n    // Rotates a matrix by the given angle around the X axis\n    rotateX(radians) {\n        mat4_rotateX(this, this, radians);\n        // mat4_rotate(this, this, radians, [1, 0, 0]);\n        return this.check();\n    }\n    // Rotates a matrix by the given angle around the Y axis.\n    rotateY(radians) {\n        mat4_rotateY(this, this, radians);\n        // mat4_rotate(this, this, radians, [0, 1, 0]);\n        return this.check();\n    }\n    /**\n     * Rotates a matrix by the given angle around the Z axis.\n     * @param radians\n     * @returns self\n     */\n    rotateZ(radians) {\n        mat4_rotateZ(this, this, radians);\n        // mat4_rotate(this, this, radians, [0, 0, 1]);\n        return this.check();\n    }\n    /**\n     *\n     * @param param0\n     * @returns self\n     */\n    rotateXYZ(angleXYZ) {\n        return this.rotateX(angleXYZ[0]).rotateY(angleXYZ[1]).rotateZ(angleXYZ[2]);\n    }\n    /**\n     *\n     * @param radians\n     * @param axis\n     * @returns self\n     */\n    rotateAxis(radians, axis) {\n        mat4_rotate(this, this, radians, axis);\n        return this.check();\n    }\n    /**\n     *\n     * @param factor\n     * @returns self\n     */\n    scale(factor) {\n        mat4_scale(this, this, Array.isArray(factor) ? factor : [factor, factor, factor]);\n        return this.check();\n    }\n    /**\n     *\n     * @param vec\n     * @returns self\n     */\n    translate(vector) {\n        mat4_translate(this, this, vector);\n        return this.check();\n    }\n    // Transforms\n    /**\n     * Transforms any 2, 3 or 4 element vector. 2 and 3 elements are treated as points\n     * @param vector\n     * @param result\n     * @returns self\n     */\n    transform(vector, result) {\n        if (vector.length === 4) {\n            result = vec4_transformMat4(result || [-0, -0, -0, -0], vector, this);\n            checkVector(result, 4);\n            return result;\n        }\n        return this.transformAsPoint(vector, result);\n    }\n    /**\n     * Transforms any 2 or 3 element array as point (w implicitly 1)\n     * @param vector\n     * @param result\n     * @returns self\n     */\n    transformAsPoint(vector, result) {\n        const { length } = vector;\n        let out;\n        switch (length) {\n            case 2:\n                out = vec2_transformMat4(result || [-0, -0], vector, this);\n                break;\n            case 3:\n                out = vec3_transformMat4(result || [-0, -0, -0], vector, this);\n                break;\n            default:\n                throw new Error('Illegal vector');\n        }\n        checkVector(out, vector.length);\n        return out;\n    }\n    /**\n     * Transforms any 2 or 3 element array as vector (w implicitly 0)\n     * @param vector\n     * @param result\n     * @returns self\n     */\n    transformAsVector(vector, result) {\n        let out;\n        switch (vector.length) {\n            case 2:\n                out = vec2_transformMat4AsVector(result || [-0, -0], vector, this);\n                break;\n            case 3:\n                out = vec3_transformMat4AsVector(result || [-0, -0, -0], vector, this);\n                break;\n            default:\n                throw new Error('Illegal vector');\n        }\n        checkVector(out, vector.length);\n        return out;\n    }\n    /** @deprecated */\n    transformPoint(vector, result) {\n        return this.transformAsPoint(vector, result);\n    }\n    /** @deprecated */\n    transformVector(vector, result) {\n        return this.transformAsPoint(vector, result);\n    }\n    /** @deprecated */\n    transformDirection(vector, result) {\n        return this.transformAsVector(vector, result);\n    }\n    // three.js math API compatibility\n    makeRotationX(radians) {\n        return this.identity().rotateX(radians);\n    }\n    makeTranslation(x, y, z) {\n        return this.identity().translate([x, y, z]);\n    }\n}\n// TODO initializing static members directly is an option, but make sure no tree-shaking issues\nlet ZERO;\nlet IDENTITY;\nfunction getZeroMatrix() {\n    if (!ZERO) {\n        ZERO = new Matrix4([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]);\n        Object.freeze(ZERO);\n    }\n    return ZERO;\n}\nfunction getIdentityMatrix() {\n    if (!IDENTITY) {\n        IDENTITY = new Matrix4();\n        Object.freeze(IDENTITY);\n    }\n    return IDENTITY;\n}\n// HELPER FUNCTIONS\nfunction checkRadians(possiblyDegrees) {\n    if (possiblyDegrees > Math.PI * 2) {\n        throw Error('expected radians');\n    }\n}\n// eslint-disable-next-line max-params\nfunction computeInfinitePerspectiveOffCenter(result, left, right, bottom, top, near) {\n    const column0Row0 = (2 * near) / (right - left);\n    const column1Row1 = (2 * near) / (top - bottom);\n    const column2Row0 = (right + left) / (right - left);\n    const column2Row1 = (top + bottom) / (top - bottom);\n    const column2Row2 = -1;\n    const column2Row3 = -1;\n    const column3Row2 = -2 * near;\n    result[0] = column0Row0;\n    result[1] = 0;\n    result[2] = 0;\n    result[3] = 0;\n    result[4] = 0;\n    result[5] = column1Row1;\n    result[6] = 0;\n    result[7] = 0;\n    result[8] = column2Row0;\n    result[9] = column2Row1;\n    result[10] = column2Row2;\n    result[11] = column2Row3;\n    result[12] = 0;\n    result[13] = 0;\n    result[14] = column3Row2;\n    result[15] = 0;\n    return result;\n}\n//# sourceMappingURL=matrix4.js.map","import { vec4 } from '@math.gl/core';\n// Helper, avoids low-precision 32 bit matrices from gl-matrix mat4.create()\nexport function createMat4() {\n    return [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1];\n}\n// Transforms a vec4 with a projection matrix\nexport function transformVector(matrix, vector) {\n    const result = vec4.transformMat4([], vector, matrix);\n    vec4.scale(result, result, 1 / result[3]);\n    return result;\n}\nexport function mod(value, divisor) {\n    const modulus = value % divisor;\n    return modulus < 0 ? divisor + modulus : modulus;\n}\nexport function lerp(start, end, step) {\n    return step * end + (1 - step) * start;\n}\nexport function clamp(x, min, max) {\n    return x < min ? min : x > max ? max : x;\n}\nfunction ieLog2(x) {\n    return Math.log(x) * Math.LOG2E;\n}\n// Handle missing log2 in IE 11\nexport const log2 = Math.log2 || ieLog2;\n//# sourceMappingURL=math-utils.js.map","// Replacement for the external assert method to reduce bundle size\n// Note: We don't use the second \"message\" argument in calling code,\n// so no need to support it here\nexport function assert(condition, message) {\n    if (!condition) {\n        throw new Error(message || '@math.gl/web-mercator: assertion failed.');\n    }\n}\n//# sourceMappingURL=assert.js.map","// TODO - THE UTILITIES IN THIS FILE SHOULD BE IMPORTED FROM WEB-MERCATOR-VIEWPORT MODULE\nimport { createMat4, transformVector, clamp, log2 } from \"./math-utils.js\";\nimport { mat4, vec2, vec3 } from '@math.gl/core';\nimport { assert } from \"./assert.js\";\n// CONSTANTS\nconst PI = Math.PI;\nconst PI_4 = PI / 4;\nconst DEGREES_TO_RADIANS = PI / 180;\nconst RADIANS_TO_DEGREES = 180 / PI;\nconst TILE_SIZE = 512;\n// Average circumference (40075 km equatorial, 40007 km meridional)\nconst EARTH_CIRCUMFERENCE = 40.03e6;\n// Latitude that makes a square world, 2 * atan(E ** PI) - PI / 2\nexport const MAX_LATITUDE = 85.051129;\n// Mapbox default altitude\nexport const DEFAULT_ALTITUDE = 1.5;\n/** Logarithimic zoom to linear scale **/\nexport function zoomToScale(zoom) {\n    return Math.pow(2, zoom);\n}\n/** Linear scale to logarithimic zoom **/\nexport function scaleToZoom(scale) {\n    return log2(scale);\n}\n/**\n * Project [lng,lat] on sphere onto [x,y] on 512*512 Mercator Zoom 0 tile.\n * Performs the nonlinear part of the web mercator projection.\n * Remaining projection is done with 4x4 matrices which also handles\n * perspective.\n *\n * @param lngLat - [lng, lat] coordinates\n *   Specifies a point on the sphere to project onto the map.\n * @return [x,y] coordinates.\n */\nexport function lngLatToWorld(lngLat) {\n    const [lng, lat] = lngLat;\n    assert(Number.isFinite(lng));\n    assert(Number.isFinite(lat) && lat >= -90 && lat <= 90, 'invalid latitude');\n    const lambda2 = lng * DEGREES_TO_RADIANS;\n    const phi2 = lat * DEGREES_TO_RADIANS;\n    const x = (TILE_SIZE * (lambda2 + PI)) / (2 * PI);\n    const y = (TILE_SIZE * (PI + Math.log(Math.tan(PI_4 + phi2 * 0.5)))) / (2 * PI);\n    return [x, y];\n}\n/**\n * Unproject world point [x,y] on map onto {lat, lon} on sphere\n *\n * @param xy - array with [x,y] members\n *  representing point on projected map plane\n * @return - array with [x,y] of point on sphere.\n *   Has toArray method if you need a GeoJSON Array.\n *   Per cartographic tradition, lat and lon are specified as degrees.\n */\nexport function worldToLngLat(xy) {\n    const [x, y] = xy;\n    const lambda2 = (x / TILE_SIZE) * (2 * PI) - PI;\n    const phi2 = 2 * (Math.atan(Math.exp((y / TILE_SIZE) * (2 * PI) - PI)) - PI_4);\n    return [lambda2 * RADIANS_TO_DEGREES, phi2 * RADIANS_TO_DEGREES];\n}\n/**\n * Returns the zoom level that gives a 1 meter pixel at a certain latitude\n * 1 = C*cos(y)/2^z/TILE_SIZE = C*cos(y)/2^(z+9)\n */\nexport function getMeterZoom(options) {\n    const { latitude } = options;\n    assert(Number.isFinite(latitude));\n    const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n    return scaleToZoom(EARTH_CIRCUMFERENCE * latCosine) - 9;\n}\n/**\n * Calculate the conversion from meter to common units at a given latitude\n * This is a cheaper version of `getDistanceScales`\n * @param latitude center latitude in degrees\n * @returns common units per meter\n */\nexport function unitsPerMeter(latitude) {\n    const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n    return TILE_SIZE / EARTH_CIRCUMFERENCE / latCosine;\n}\n/**\n * Calculate distance scales in meters around current lat/lon, both for\n * degrees and pixels.\n * In mercator projection mode, the distance scales vary significantly\n * with latitude.\n */\nexport function getDistanceScales(options) {\n    const { latitude, longitude, highPrecision = false } = options;\n    assert(Number.isFinite(latitude) && Number.isFinite(longitude));\n    const worldSize = TILE_SIZE;\n    const latCosine = Math.cos(latitude * DEGREES_TO_RADIANS);\n    /**\n     * Number of pixels occupied by one degree longitude around current lat/lon:\n       unitsPerDegreeX = d(lngLatToWorld([lng, lat])[0])/d(lng)\n         = scale * TILE_SIZE * DEGREES_TO_RADIANS / (2 * PI)\n       unitsPerDegreeY = d(lngLatToWorld([lng, lat])[1])/d(lat)\n         = -scale * TILE_SIZE * DEGREES_TO_RADIANS / cos(lat * DEGREES_TO_RADIANS)  / (2 * PI)\n     */\n    const unitsPerDegreeX = worldSize / 360;\n    const unitsPerDegreeY = unitsPerDegreeX / latCosine;\n    /**\n     * Number of pixels occupied by one meter around current lat/lon:\n     */\n    const altUnitsPerMeter = worldSize / EARTH_CIRCUMFERENCE / latCosine;\n    /**\n     * LngLat: longitude -> east and latitude -> north (bottom left)\n     * UTM meter offset: x -> east and y -> north (bottom left)\n     * World space: x -> east and y -> south (top left)\n     *\n     * Y needs to be flipped when converting delta degree/meter to delta pixels\n     */\n    const result = {\n        unitsPerMeter: [altUnitsPerMeter, altUnitsPerMeter, altUnitsPerMeter],\n        metersPerUnit: [1 / altUnitsPerMeter, 1 / altUnitsPerMeter, 1 / altUnitsPerMeter],\n        unitsPerDegree: [unitsPerDegreeX, unitsPerDegreeY, altUnitsPerMeter],\n        degreesPerUnit: [1 / unitsPerDegreeX, 1 / unitsPerDegreeY, 1 / altUnitsPerMeter]\n    };\n    /**\n     * Taylor series 2nd order for 1/latCosine\n       f'(a) * (x - a)\n         = d(1/cos(lat * DEGREES_TO_RADIANS))/d(lat) * dLat\n         = DEGREES_TO_RADIANS * tan(lat * DEGREES_TO_RADIANS) / cos(lat * DEGREES_TO_RADIANS) * dLat\n     */\n    if (highPrecision) {\n        const latCosine2 = (DEGREES_TO_RADIANS * Math.tan(latitude * DEGREES_TO_RADIANS)) / latCosine;\n        const unitsPerDegreeY2 = (unitsPerDegreeX * latCosine2) / 2;\n        const altUnitsPerDegree2 = (worldSize / EARTH_CIRCUMFERENCE) * latCosine2;\n        const altUnitsPerMeter2 = (altUnitsPerDegree2 / unitsPerDegreeY) * altUnitsPerMeter;\n        result.unitsPerDegree2 = [0, unitsPerDegreeY2, altUnitsPerDegree2];\n        result.unitsPerMeter2 = [altUnitsPerMeter2, 0, altUnitsPerMeter2];\n    }\n    // Main results, used for converting meters to latlng deltas and scaling offsets\n    return result;\n}\n/**\n * Offset a lng/lat position by meterOffset (northing, easting)\n */\nexport function addMetersToLngLat(lngLatZ, xyz) {\n    const [longitude, latitude, z0] = lngLatZ;\n    const [x, y, z] = xyz;\n    // eslint-disable-next-line no-shadow\n    const { unitsPerMeter, unitsPerMeter2 } = getDistanceScales({\n        longitude,\n        latitude,\n        highPrecision: true\n    });\n    const worldspace = lngLatToWorld(lngLatZ);\n    worldspace[0] += x * (unitsPerMeter[0] + unitsPerMeter2[0] * y);\n    worldspace[1] += y * (unitsPerMeter[1] + unitsPerMeter2[1] * y);\n    const newLngLat = worldToLngLat(worldspace);\n    const newZ = (z0 || 0) + (z || 0);\n    return Number.isFinite(z0) || Number.isFinite(z) ? [newLngLat[0], newLngLat[1], newZ] : newLngLat;\n}\n/**\n *\n * view and projection matrix creation is intentionally kept compatible with\n * mapbox-gl's implementation to ensure that seamless interoperation\n * with mapbox and react-map-gl. See: https://github.com/mapbox/mapbox-gl-js\n */\nexport function getViewMatrix(options) {\n    const { \n    // Viewport props\n    height, pitch, bearing, altitude, \n    // Pre-calculated parameters\n    scale, center } = options;\n    // VIEW MATRIX: PROJECTS MERCATOR WORLD COORDINATES\n    // Note that mercator world coordinates typically need to be flipped\n    //\n    // Note: As usual, matrix operation orders should be read in reverse\n    // since vectors will be multiplied from the right during transformation\n    const vm = createMat4();\n    // Move camera to altitude (along the pitch & bearing direction)\n    mat4.translate(vm, vm, [0, 0, -altitude]);\n    // Rotate by bearing, and then by pitch (which tilts the view)\n    mat4.rotateX(vm, vm, -pitch * DEGREES_TO_RADIANS);\n    mat4.rotateZ(vm, vm, bearing * DEGREES_TO_RADIANS);\n    const relativeScale = scale / height;\n    mat4.scale(vm, vm, [relativeScale, relativeScale, relativeScale]);\n    if (center) {\n        mat4.translate(vm, vm, vec3.negate([], center));\n    }\n    return vm;\n}\n/**\n * Calculates mapbox compatible projection matrix from parameters\n *\n * @param options.width Width of \"viewport\" or window\n * @param options.height Height of \"viewport\" or window\n * @param options.scale Scale at the current zoom\n * @param options.center Offset of the target, vec3 in world space\n * @param options.offset Offset of the focal point, vec2 in screen space\n * @param options.pitch Camera angle in degrees (0 is straight down)\n * @param options.fovy field of view in degrees\n * @param options.altitude if provided, field of view is calculated using `altitudeToFovy()`\n * @param options.nearZMultiplier control z buffer\n * @param options.farZMultiplier control z buffer\n * @returns project parameters object\n */\nexport function getProjectionParameters(options) {\n    const { width, height, altitude, pitch = 0, offset, center, scale, nearZMultiplier = 1, farZMultiplier = 1 } = options;\n    let { fovy = altitudeToFovy(DEFAULT_ALTITUDE) } = options;\n    // For back-compatibility allow field of view to be\n    // derived from altitude\n    if (altitude !== undefined) {\n        fovy = altitudeToFovy(altitude);\n    }\n    const fovRadians = fovy * DEGREES_TO_RADIANS;\n    const pitchRadians = pitch * DEGREES_TO_RADIANS;\n    // Distance from camera to the target\n    const focalDistance = fovyToAltitude(fovy);\n    let cameraToSeaLevelDistance = focalDistance;\n    if (center) {\n        cameraToSeaLevelDistance += (center[2] * scale) / Math.cos(pitchRadians) / height;\n    }\n    const fovAboveCenter = fovRadians * (0.5 + (offset ? offset[1] : 0) / height);\n    // Find the distance from the center point to the center top\n    // in focal distance units using law of sines.\n    const topHalfSurfaceDistance = (Math.sin(fovAboveCenter) * cameraToSeaLevelDistance) /\n        Math.sin(clamp(Math.PI / 2 - pitchRadians - fovAboveCenter, 0.01, Math.PI - 0.01));\n    // Calculate z distance of the farthest fragment that should be rendered.\n    const furthestDistance = Math.sin(pitchRadians) * topHalfSurfaceDistance + cameraToSeaLevelDistance;\n    // Matches mapbox limit\n    const horizonDistance = cameraToSeaLevelDistance * 10;\n    // Calculate z value of the farthest fragment that should be rendered.\n    const farZ = Math.min(furthestDistance * farZMultiplier, horizonDistance);\n    return {\n        fov: fovRadians,\n        aspect: width / height,\n        focalDistance,\n        near: nearZMultiplier,\n        far: farZ\n    };\n}\n/**\n * CALCULATE PROJECTION MATRIX: PROJECTS FROM CAMERA (VIEW) SPACE TO CLIPSPACE\n *\n * To match mapbox's z buffer:\n *  - \\<= 0.28: nearZMultiplier: 0.1, farZmultiplier: 1\n *  - \\>= 0.29: nearZMultiplier: 1 / height, farZMultiplier: 1.01\n *\n * @param options Viewport options\n * @param options.width Width of \"viewport\" or window\n * @param options.height Height of \"viewport\" or window\n * @param options.scale Scale at the current zoom\n * @param options.center Offset of the target, vec3 in world space\n * @param options.offset Offset of the focal point, vec2 in screen space\n * @param options.pitch Camera angle in degrees (0 is straight down)\n * @param options.fovy field of view in degrees\n * @param options.altitude if provided, field of view is calculated using `altitudeToFovy()`\n * @param options.nearZMultiplier control z buffer\n * @param options.farZMultiplier control z buffer\n * @returns 4x4 projection matrix\n */\nexport function getProjectionMatrix(options) {\n    const { fov, aspect, near, far } = getProjectionParameters(options);\n    const projectionMatrix = mat4.perspective([], fov, // fov in radians\n    aspect, // aspect ratio\n    near, // near plane\n    far // far plane\n    );\n    return projectionMatrix;\n}\n/**\n *\n * Convert an altitude to field of view such that the\n * focal distance is equal to the altitude\n *\n * @param altitude - altitude of camera in screen units\n * @return fovy field of view in degrees\n */\nexport function altitudeToFovy(altitude) {\n    return 2 * Math.atan(0.5 / altitude) * RADIANS_TO_DEGREES;\n}\n/**\n *\n * Convert an field of view such that the\n * focal distance is equal to the altitude\n *\n * @param fovy - field of view in degrees\n * @return altitude altitude of camera in screen units\n */\nexport function fovyToAltitude(fovy) {\n    return 0.5 / Math.tan(0.5 * fovy * DEGREES_TO_RADIANS);\n}\n// Project flat coordinates to pixels on screen.\nexport function worldToPixels(xyz, pixelProjectionMatrix) {\n    const [x, y, z = 0] = xyz;\n    assert(Number.isFinite(x) && Number.isFinite(y) && Number.isFinite(z));\n    return transformVector(pixelProjectionMatrix, [x, y, z, 1]);\n}\n/**\n * Unproject pixels on screen to flat coordinates.\n *\n * @param xyz - pixel coordinate on screen.\n * @param pixelUnprojectionMatrix - unprojection matrix 4x4\n * @param targetZ - if pixel coordinate does not have a 3rd component (depth),\n *    targetZ is used as the elevation plane to unproject onto\n * @return [x, y, Z] flat coordinates on 512*512 Mercator Zoom 0 tile.\n */\nexport function pixelsToWorld(xyz, pixelUnprojectionMatrix, targetZ = 0) {\n    const [x, y, z] = xyz;\n    assert(Number.isFinite(x) && Number.isFinite(y), 'invalid pixel coordinate');\n    if (Number.isFinite(z)) {\n        // Has depth component\n        const coord = transformVector(pixelUnprojectionMatrix, [x, y, z, 1]);\n        return coord;\n    }\n    // since we don't know the correct projected z value for the point,\n    // unproject two points to get a line and then find the point on that line with z=0\n    const coord0 = transformVector(pixelUnprojectionMatrix, [x, y, 0, 1]);\n    const coord1 = transformVector(pixelUnprojectionMatrix, [x, y, 1, 1]);\n    const z0 = coord0[2];\n    const z1 = coord1[2];\n    const t = z0 === z1 ? 0 : ((targetZ || 0) - z0) / (z1 - z0);\n    return vec2.lerp([], coord0, coord1, t);\n}\n//# sourceMappingURL=web-mercator-utils.js.map","import { assert } from \"./assert.js\";\nimport { log2, clamp } from \"./math-utils.js\";\nimport { MAX_LATITUDE, lngLatToWorld, worldToLngLat } from \"./web-mercator-utils.js\";\n/**\n * Returns map settings {latitude, longitude, zoom}\n * that will contain the provided corners within the provided width.\n *\n * > _Note: Only supports non-perspective mode._\n *\n * @param options fit bounds parameters\n * @returns - latitude, longitude and zoom\n */\nexport function fitBounds(options) {\n    const { width, height, bounds, minExtent = 0, // 0.01 would be about 1000 meters (degree is ~110KM)\n    maxZoom = 24, // ~x4,000,000 => About 10 meter extents\n    offset = [0, 0] } = options;\n    const [[west, south], [east, north]] = bounds;\n    const padding = getPaddingObject(options.padding);\n    const nw = lngLatToWorld([west, clamp(north, -MAX_LATITUDE, MAX_LATITUDE)]);\n    const se = lngLatToWorld([east, clamp(south, -MAX_LATITUDE, MAX_LATITUDE)]);\n    // width/height on the Web Mercator plane\n    const size = [\n        Math.max(Math.abs(se[0] - nw[0]), minExtent),\n        Math.max(Math.abs(se[1] - nw[1]), minExtent)\n    ];\n    const targetSize = [\n        width - padding.left - padding.right - Math.abs(offset[0]) * 2,\n        height - padding.top - padding.bottom - Math.abs(offset[1]) * 2\n    ];\n    assert(targetSize[0] > 0 && targetSize[1] > 0);\n    // scale = screen pixels per unit on the Web Mercator plane\n    const scaleX = targetSize[0] / size[0];\n    const scaleY = targetSize[1] / size[1];\n    // Find how much we need to shift the center\n    const offsetX = (padding.right - padding.left) / 2 / scaleX;\n    const offsetY = (padding.top - padding.bottom) / 2 / scaleY;\n    const center = [(se[0] + nw[0]) / 2 + offsetX, (se[1] + nw[1]) / 2 + offsetY];\n    const centerLngLat = worldToLngLat(center);\n    const zoom = Math.min(maxZoom, log2(Math.abs(Math.min(scaleX, scaleY))));\n    assert(Number.isFinite(zoom));\n    return {\n        longitude: centerLngLat[0],\n        latitude: centerLngLat[1],\n        zoom\n    };\n}\n// Helpers\nfunction getPaddingObject(padding = 0) {\n    if (typeof padding === 'number') {\n        return {\n            top: padding,\n            bottom: padding,\n            left: padding,\n            right: padding\n        };\n    }\n    // Make sure all the required properties are set\n    assert(Number.isFinite(padding.top) &&\n        Number.isFinite(padding.bottom) &&\n        Number.isFinite(padding.left) &&\n        Number.isFinite(padding.right));\n    return padding;\n}\n//# sourceMappingURL=fit-bounds.js.map","/* eslint-disable camelcase */\nimport { vec2 } from '@math.gl/core';\nimport { worldToLngLat } from \"./web-mercator-utils.js\";\nimport { transformVector } from \"./math-utils.js\";\nconst DEGREES_TO_RADIANS = Math.PI / 180;\n/*\n * Returns the quad at the intersection of the frustum and the given z plane\n * @param {WebMercatorViewport} viewport\n * @param {Number} z - elevation in meters\n */\nexport function getBounds(viewport, z = 0) {\n    // eslint-disable-next-line @typescript-eslint/unbound-method\n    const { width, height, unproject } = viewport;\n    const unprojectOps = { targetZ: z };\n    const bottomLeft = unproject([0, height], unprojectOps);\n    const bottomRight = unproject([width, height], unprojectOps);\n    let topLeft;\n    let topRight;\n    const halfFov = viewport.fovy\n        ? 0.5 * viewport.fovy * DEGREES_TO_RADIANS\n        : Math.atan(0.5 / viewport.altitude);\n    const angleToGround = (90 - viewport.pitch) * DEGREES_TO_RADIANS;\n    // The top plane is parallel to the ground if halfFov == angleToGround\n    if (halfFov > angleToGround - 0.01) {\n        // intersect with the far plane\n        topLeft = unprojectOnFarPlane(viewport, 0, z);\n        topRight = unprojectOnFarPlane(viewport, width, z);\n    }\n    else {\n        // intersect with the top plane\n        topLeft = unproject([0, 0], unprojectOps);\n        topRight = unproject([width, 0], unprojectOps);\n    }\n    return [bottomLeft, bottomRight, topRight, topLeft];\n}\n/*\n * Find a point on the far clipping plane of the viewport\n * @param {WebMercatorViewport} viewport\n * @param {Number} x - projected x in screen space\n * @param {Number} targetZ - the elevation of the point in meters\n */\nfunction unprojectOnFarPlane(viewport, x, targetZ) {\n    const { pixelUnprojectionMatrix } = viewport;\n    const coord0 = transformVector(pixelUnprojectionMatrix, [x, 0, 1, 1]);\n    const coord1 = transformVector(pixelUnprojectionMatrix, [x, viewport.height, 1, 1]);\n    const z = targetZ * viewport.distanceScales.unitsPerMeter[2];\n    const t = (z - coord0[2]) / (coord1[2] - coord0[2]);\n    const coord = vec2.lerp([], coord0, coord1, t);\n    const result = worldToLngLat(coord);\n    result.push(targetZ);\n    return result;\n}\n//# sourceMappingURL=get-bounds.js.map","import { worldToLngLat } from \"./web-mercator-utils.js\";\nimport { mod, log2 } from \"./math-utils.js\";\n// defined by mapbox-gl\nconst TILE_SIZE = 512;\n/**\n * Apply mathematical constraints to viewport props\n * @param props\n */\n// eslint-disable-next-line complexity\nexport function normalizeViewportProps(props) {\n    const { width, height, pitch = 0 } = props;\n    let { longitude, latitude, zoom, bearing = 0 } = props;\n    // Normalize degrees\n    if (longitude < -180 || longitude > 180) {\n        longitude = mod(longitude + 180, 360) - 180;\n    }\n    if (bearing < -180 || bearing > 180) {\n        bearing = mod(bearing + 180, 360) - 180;\n    }\n    // Constrain zoom and shift center at low zoom levels\n    const minZoom = log2(height / TILE_SIZE);\n    if (zoom <= minZoom) {\n        zoom = minZoom;\n        latitude = 0;\n    }\n    else {\n        // Eliminate white space above and below the map\n        const halfHeightPixels = height / 2 / Math.pow(2, zoom);\n        const minLatitude = worldToLngLat([0, halfHeightPixels])[1];\n        if (latitude < minLatitude) {\n            latitude = minLatitude;\n        }\n        else {\n            const maxLatitude = worldToLngLat([0, TILE_SIZE - halfHeightPixels])[1];\n            if (latitude > maxLatitude) {\n                latitude = maxLatitude;\n            }\n        }\n    }\n    return { width, height, longitude, latitude, zoom, pitch, bearing };\n}\n//# sourceMappingURL=normalize-viewport-props.js.map","// math.gl\n// SPDX-License-Identifier: MIT\n// Copyright (c) vis.gl contributors\n/**\n * Check is an array is a typed array\n * @param value value to be tested\n * @returns input with type narrowed to TypedArray, or null\n */\nexport function isTypedArray(value) {\n    return ArrayBuffer.isView(value) && !(value instanceof DataView);\n}\n/**\n * Check is an array is an array of numbers)\n * @param value value to be tested\n * @returns input with type narrowed to NumberArray, or null\n */\nexport function isNumberArray(value) {\n    if (Array.isArray(value)) {\n        return value.length === 0 || typeof value[0] === 'number';\n    }\n    return false;\n}\n/**\n * Check is an array is a numeric array (typed array or array of numbers)\n * @param value value to be tested\n * @returns input with type narrowed to NumericArray, or null\n */\nexport function isNumericArray(value) {\n    return isTypedArray(value) || isNumberArray(value);\n}\n//# sourceMappingURL=is-array.js.map"],"names":["assert","condition","message","isBrowser","matches","window_","process_","navigator_","isElectron","mockUserAgent","userAgent","getBrowser","navigator","VERSION","getStorage","type","storage","x","LocalStorage","id","defaultConfig","configuration","serialized","serializedConfiguration","formatTime","ms","formatted","leftPad","string","length","padLength","COLOR","BACKGROUND_INCREMENT","getColor","color","addColor","background","autobind","obj","predefined","proto","propNames","object","key","value","name","getHiResTimestamp","timestamp","window","process","timeParts","originalConsole","DEFAULT_LOG_CONFIGURATION","noop","cache","ONCE","Log","newLevel","newPriority","enabled","level","setting","oldUsage","newUsage","logLevel","table","columns","getTableHeader","opts","options","normalizeArguments","collapsed","func","normalizeLogLevel","method","args","tag","decorateMessage","resolvedLevel","messageType","time","title","version","createLog","log","mergeLoaderOptions","baseOptions","newOptions","mergeOptionsRecursively","newValue","NPM_TAG","getVersion","isMobile","WorkerJob","jobName","workerThread","resolve","reject","payload","error","NodeWorker","workerURLCache","getLoadableWorkerURL","props","workerURL","getLoadableWorkerURLFromURL","getLoadableWorkerURLFromSource","url","workerSource","buildScriptSource","blob","workerUrl","getTransferList","recursive","transfers","transfersSet","isTransferable","NOOP","WorkerThread","source","data","transferList","event","worker","code","WorkerPool","onMessage","job","onError","startPromise","onStart","queuedJob","DEFAULT_PROPS","WorkerFarm","workerPool","getWorkerURL","workerOptions","workerFile","versionTag","validateWorkerVersion","coreVersion","workerVersion","canParseWithWorker","loader","parseWithWorker","context","parseOnMainThread","input","result","compareArrayBuffers","arrayBuffer1","arrayBuffer2","byteLength","array1","array2","concatenateArrayBuffers","sources","concatenateArrayBuffersFromArray","sourceArrays","source2","typedArray","offset","sourceArray","concatenateArrayBuffersAsync","asyncIterator","arrayBuffers","chunk","Stat","samples","Stats","stat","fn","stats","pathPrefix","fileAliases","resolvePath","filename","alias","replacement","isBuffer","toArrayBuffer","text","slashIndex","dirname","isBoolean","isFunction","isObject","isPureObject","isIterable","isAsyncIterable","isResponse","isBlob","isReadableDOMStream","isReadableNodeStream","isReadableStream","FetchError","info","DATA_URL_PATTERN","MIME_TYPE_PATTERN","compareMIMETypes","mimeType1","mimeType2","parseMIMEType","mimeString","parseMIMETypeFromURL","QUERY_STRING_PATTERN","extractQueryString","stripQueryString","shortenUrlForDisplay","urlEnd","getResourceUrl","resource","getResourceMIMEType","response","contentTypeHeader","noQueryUrl","getResourceContentLength","makeResponse","headers","contentLength","initialDataUrl","getInitialDataUrl","checkResponse","getResponseError","shortUrl","contentType","blobSlice","reader","slice","arrayBufferToBase64","buffer","binary","bytes","i","isNodePath","isRequestURL","isDataURL","fetchFile","urlOrData","fetchOptions","probeLog","NullLog","ConsoleLog","DEFAULT_LOADER_OPTIONS","REMOVED_LOADER_OPTIONS","getGlobalLoaderState","loaders","getGlobalLoaderOptions","state","normalizeOptions","validateOptions","normalizeOptionsInternal","validateOptionsObject","idOptions","loaderOptions","deprecatedOptions","defaultOptions","loaderName","prefix","isSubOptions","isBaseUriOption","isWorkerUrlOption","suggestion","findSimilarOption","optionKey","lowerCaseOptionKey","bestSuggestion","lowerCaseKey","mergedOptions","addUrlOptions","mergeNestedFields","isLoaderObject","normalizeLoader","getGlobalLoaderRegistry","registerLoaders","loaderRegistry","normalizedLoader","registeredLoader","getRegisteredLoaders","EXT_PATTERN","selectLoader","validHTTPResponse","selectLoaderSync","getNoValidLoaderMessage","candidateLoaders","normalizeLoaders","selectLoaderInternal","testUrl","reason","findLoaderByMIMEType","findLoaderByUrl","findLoaderByInitialBytes","getFirstCharacters","path.filename","firstCharacters","match","extension","findLoaderByExtension","loaderExtension","mimeType","testDataAgainstText","testDataAgainstBinary","test","byteOffset","testBinary","magic","getMagicString","arrayBuffer","dataView","DEFAULT_CHUNK_SIZE","makeStringIterator","chunkSize","textEncoder","chunkLength","makeArrayBufferIterator","chunkByteLength","makeBlobIterator","end","makeStreamIterator","stream","makeBrowserStreamIterator","makeNodeStreamIterator","nextBatchPromise","currentBatchPromise","done","makeIterator","ERR_DATA","getArrayBufferOrStringFromDataSync","getArrayBufferOrStringFromData","isArrayBuffer","getFetchFunction","globalOptions","getLoaderContext","parentContext","newContext","baseUrl","path.dirname","getLoadersFromContext","contextLoaders","parse","parseWithLoader","ok","redirected","status","statusText","loaderWithParser","load","resolvedLoaders","resolvedOptions","fetch","parseImageNode","IMAGE_SUPPORTED","IMAGE_BITMAP_SUPPORTED","NODE_IMAGE_SUPPORTED","DATA_SUPPORTED","isImageTypeSupported","getDefaultImageType","getImageType","image","format","getImageTypeOrNull","getImageData","canvas","SVG_DATA_URL_PATTERN","SVG_URL_PATTERN","isSVG","getBlobOrSVGDataUrl","xmlText","getBlob","parseToImage","blobOrDataUrl","URL","objectUrl","loadToImage","EMPTY_OBJECT","imagebitmapOptionsSupported","parseToImageBitmap","imagebitmapOptions","safeCreateImageBitmap","isEmptyObject","getISOBMFFMediaType","checkString","decodeMajorBrand","getUTF8String","array","start","stringToBytes","character","header","headerBytes","BIG_ENDIAN","LITTLE_ENDIAN","getBinaryImageMetadata","binaryData","toDataView","getPngMetadata","getJpegMetadata","getGifMetadata","getBmpMetadata","getISOBMFFMetadata","mediaType","tableMarkers","sofMarkers","getJpegMarkers","marker","parseToNodeImage","parseImage","imageType","loadType","getLoadableImageType","EXTENSIONS","MIME_TYPES","DEFAULT_IMAGE_LOADER_OPTIONS","ImageLoader","DEFAULT_CONFIG","config","formatValue","precision","round","isArray","clamp","min","max","map","lerp","a","b","t","ai","equals","epsilon","oldEpsilon","duplicateArray","val","MathArray","targetArray","targetObject","arrayOrObject","target","endValue","vector","minVector","maxVector","vectors","scale","scalar","valid","validateVector","v","checkNumber","checkVector","callerName","Vector","mathArray","dist","product","EPSILON","ARRAY_TYPE","create","out","glMatrix.ARRAY_TYPE","add","negate","ax","ay","transformMat4","m","y","vec","stride","count","arg","l","vec2_transformMat4AsVector","w","vec3_transformMat4AsVector","z","vec3_transformMat2","subtract","squaredLength","dot","cross","az","bx","by","bz","transformMat3","transformQuat","q","qx","qy","qz","qw","uvx","uvy","uvz","uuvx","uuvy","uuvz","w2","rotateX","rad","p","r","rotateY","rotateZ","angle","mag","cosine","sub","len","sqrLen","ORIGIN","ZERO","Vector3","vec3_angle","vec3_cross","radians","origin","vec3_rotateX","vec3_rotateY","vec3_rotateZ","matrix4","vec3_transformMat4","matrix3","vec3_transformMat3","matrix2","quaternion","vec3_transformQuat","Matrix","row","col","columnIndex","firstIndex","columnVector","identity","transpose","a01","a02","a03","a12","a13","a23","invert","a00","a10","a11","a20","a21","a22","a30","a31","a32","a33","b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","det","determinant","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","multiply","translate","rotate","axis","c","s","b12","b20","b21","b22","glMatrix.EPSILON","fromQuat","x2","y2","z2","xx","yx","yy","zx","zy","zz","wx","wy","wz","frustum","left","right","bottom","top","near","far","rl","tb","nf","perspectiveNO","fovy","aspect","f","perspective","orthoNO","lr","bt","ortho","lookAt","eye","center","up","x0","x1","y0","y1","z0","z1","eyex","eyey","eyez","upx","upy","upz","centerx","centery","centerz","INDICES","DEFAULT_FOVY","DEFAULT_ASPECT","DEFAULT_NEAR","DEFAULT_FAR","IDENTITY_MATRIX","Matrix4","getIdentityMatrix","getZeroMatrix","m00","m10","m20","m30","m01","m11","m21","m31","m02","m12","m22","m32","m03","m13","m23","m33","mat4_fromQuat","view","computeInfinitePerspectiveOffCenter","mat4_frustum","mat4_lookAt","mat4_ortho","focalDistance","checkRadians","halfY","mat4_perspective","mat4_determinant","scaleResult","inverseScale0","inverseScale1","inverseScale2","mat4_transpose","mat4_invert","mat4_multiply","mat4_rotateX","mat4_rotateY","mat4_rotateZ","angleXYZ","mat4_rotate","factor","mat4_scale","mat4_translate","vec4_transformMat4","vec2_transformMat4","IDENTITY","possiblyDegrees","column0Row0","column1Row1","column2Row0","column2Row1","column2Row2","column2Row3","column3Row2","createMat4","transformVector","matrix","vec4.transformMat4","vec4.scale","mod","divisor","modulus","ieLog2","log2","PI","PI_4","DEGREES_TO_RADIANS","RADIANS_TO_DEGREES","TILE_SIZE","EARTH_CIRCUMFERENCE","MAX_LATITUDE","DEFAULT_ALTITUDE","scaleToZoom","lngLatToWorld","lngLat","lng","lat","lambda2","phi2","worldToLngLat","xy","getMeterZoom","latitude","latCosine","unitsPerMeter","getDistanceScales","longitude","highPrecision","worldSize","unitsPerDegreeX","unitsPerDegreeY","altUnitsPerMeter","latCosine2","unitsPerDegreeY2","altUnitsPerDegree2","altUnitsPerMeter2","addMetersToLngLat","lngLatZ","xyz","unitsPerMeter2","worldspace","newLngLat","newZ","getViewMatrix","height","pitch","bearing","altitude","vm","mat4.translate","mat4.rotateX","mat4.rotateZ","relativeScale","mat4.scale","vec3.negate","getProjectionParameters","width","nearZMultiplier","farZMultiplier","altitudeToFovy","fovRadians","pitchRadians","fovyToAltitude","cameraToSeaLevelDistance","fovAboveCenter","topHalfSurfaceDistance","furthestDistance","horizonDistance","farZ","worldToPixels","pixelProjectionMatrix","pixelsToWorld","pixelUnprojectionMatrix","targetZ","coord0","coord1","vec2.lerp","fitBounds","bounds","minExtent","maxZoom","west","south","east","north","padding","getPaddingObject","nw","se","size","targetSize","scaleX","scaleY","offsetX","offsetY","centerLngLat","zoom","getBounds","viewport","unproject","unprojectOps","bottomLeft","bottomRight","topLeft","topRight","halfFov","angleToGround","unprojectOnFarPlane","coord","normalizeViewportProps","minZoom","halfHeightPixels","minLatitude","maxLatitude","isTypedArray","isNumberArray","isNumericArray"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91]}