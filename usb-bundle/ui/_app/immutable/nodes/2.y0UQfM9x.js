import{p as Pe,e as H,B as $e,C as Ka,g as Ze,k as b,q as v,l as z,r as c,D as _o,v as Mt,y as U,F as Et,G as nr,d as n,a as Ce,c as Q,f as y,s as St,b as yo,H as zn,I as ca,t as Mn,J as kt,K as _r,L as br,h as t,i as ce,j as D,n as de,M as Bt,R as bo,N as Rt,w as M,O as To,P as xo,S as ar,T as it,U as Bn,V as wo,W as Ro,m as l,X as $a,Y as Gn,Z as nt,_ as Un,z as G,$ as Nt,a0 as Ao,a1 as hr,a2 as wa,a3 as Po,a4 as yt,a5 as Co,x as ke,a6 as Lo,a7 as Eo,a8 as Ra,a9 as ko,aa as Io,ab as So,ac as jn,ad as Oo,ae as Fo,af as No,ag as Ge,ah as Do,ai as zo,aj as Ea,ak as dn,al as cn,am as Mo,an as Hn,ao as Bo,ap as Wt,aq as Rr,ar as Yr,as as Xa,at as Go,o as sa,au as un,av as Uo,aw as jo,ax as Ho,ay as Vn,az as gr,aA as ra,aB as Vo,aC as Wo,aD as Yo,aE as qo,aF as Zo,aG as Ko,aH as ka,aI as $o,aJ as Ja,aK as Aa,aL as Xo,aM as Jo,aN as Qo,aO as ei,aP as ga,aQ as Wn,aR as ti,aS as Yn,aT as qn,aU as Pa,aV as ha,aW as ri,aX as ai,aY as ni,aZ as oi,a_ as ii,a$ as si,b0 as li,b1 as di,b2 as Qa,b3 as Ia,b4 as Sa,b5 as Oa,b6 as ci,b7 as ui,b8 as vi,b9 as fi,ba as mi}from"../chunks/A3C7eEUQ.js";import{m as bt,k as Vr,t as gi,c as hi,n as pi,w as vn,q as _i,r as yi,u as bi,v as Ti,R as xi}from"../chunks/5G_0pg9y.js";import{t as wi,g as Ri,r as Zn,p as Ua,c as pa,a as Ai,l as Pi,s as Fa,o as Ci,i as Li}from"../chunks/DM5NLTr-.js";import{M as Ei,I as ki}from"../chunks/C0X4VmSt.js";const Ii={light:{background:"#f8f4f0",water:"#99ddff",rail:"#a8a8a8",pedestrian:"#e8e7eb",ferryRoute:"rgba(102, 102, 255, 0.5)",sport:"#d0f4be",sportOutline:"#b3e998",building:"#ded7d3",buildingOutline:"#cfc8c4",landuseComplex:"#f0e6d1",landuseCommercial:"hsla(0, 60%, 87%, 0.23)",landuseIndustrial:"#e0e2eb",landuseResidential:"#ece7e4",landuseRetail:"hsla(0, 60%, 87%, 0.23)",landuseConstruction:"#aaa69d",landusePark:"#b8ebad",landuseNatureLight:"#ddecd7",landuseNatureHeavy:"#a3e39c",landuseCemetery:"#e0e4dd",landuseBeach:"#fffcd3",indoorCorridor:"#fdfcfa",indoor:"#d4edff",indoorOutline:"#808080",indoorText:"#333333",publicTransport:"rgba(218,140,140,0.3)",footway:"#fff",steps:"#ff4524",elevatorOutline:"#808080",elevator:"#bcf1ba",roadBackResidential:"#ffffff",roadBackNonResidential:"#ffffff",motorway:"#ffb366",motorwayLink:"#f7e06e",primarySecondary:"#fffbf8",linkTertiary:"#ffffff",residential:"#ffffff",road:"#ffffff",townText:"#333333",townTextHalo:"white",text:"#333333",textHalo:"white",citiesText:"#111111",citiesTextHalo:"white",shield:"shield"},dark:{background:"#292929",water:"#1f2830",rail:"#808080",pedestrian:"#292929",ferryRoute:"rgba(58, 77, 139, 0.5)",sport:"#272525",sportOutline:"#272525",building:"#1F1F1F",buildingOutline:"#1A1A1A",landuseComplex:"#292929",landuseCommercial:"#292929",landuseIndustrial:"#353538",landuseResidential:"#292929",landuseRetail:"#292929",landuseConstruction:"red",landusePark:"#18221f",landuseNatureLight:"#1e2322",landuseNatureHeavy:"#1a2020",landuseCemetery:"#202423",landuseBeach:"#4c4b3e",indoorCorridor:"#494949",indoor:"#1a1a1a",indoorOutline:"#0d0d0d",indoorText:"#eeeeee",publicTransport:"rgba(89, 45, 45, 0.405)",footway:"#3D3D3D",steps:"#70504b",elevatorOutline:"#808080",elevator:"#3b423b",roadBackResidential:"#414141",roadBackNonResidential:"#414141",motorway:"#414141",motorwayLink:"#414141",primarySecondary:"#414141",linkTertiary:"#414141",residential:"#414141",road:"#414141",text:"#9a9a9a",textHalo:"#151515",townText:"#bebebe",townTextHalo:"#1A1A1A",citiesText:"#bebebe",citiesTextHalo:"#1A1A1A",shield:"shield-dark"}};function Si(i){const{origin:e,pathname:a}=new URL(i);return e+a.slice(0,a.lastIndexOf("/")+1)}function Na(i,e){return Si(i)+e}const Oi=(i,e,a,o)=>{const r=Ii[i];return{version:8,sources:{osm:{type:"vector",tiles:[Na(o,"tiles/{z}/{x}/{y}.mvt")],maxzoom:20,attribution:""}},glyphs:Na(o,"tiles/glyphs/{fontstack}/{range}.pbf"),sprite:Na(a,"sprite_sdf"),layers:[{id:"background",type:"background",paint:{"background-color":r.background}},{id:"coastline",type:"fill",source:"osm","source-layer":"coastline",paint:{"fill-color":r.water}},{id:"landuse_park",type:"fill",source:"osm","source-layer":"landuse",filter:["==",["get","landuse"],"park"],paint:{"fill-color":r.landusePark}},{id:"landuse",type:"fill",source:"osm","source-layer":"landuse",filter:["!in","landuse","park","public_transport"],paint:{"fill-color":["match",["get","landuse"],"complex",r.landuseComplex,"commercial",r.landuseCommercial,"industrial",r.landuseIndustrial,"residential",r.landuseResidential,"retail",r.landuseRetail,"construction",r.landuseConstruction,"nature_light",r.landuseNatureLight,"nature_heavy",r.landuseNatureHeavy,"cemetery",r.landuseCemetery,"beach",r.landuseBeach,"magenta"]}},{id:"water",type:"fill",source:"osm","source-layer":"water",paint:{"fill-color":r.water}},{id:"sport",type:"fill",source:"osm","source-layer":"sport",paint:{"fill-color":r.sport,"fill-outline-color":r.sportOutline}},{id:"pedestrian",type:"fill",source:"osm","source-layer":"pedestrian",paint:{"fill-color":r.pedestrian}},{id:"waterway",type:"line",source:"osm","source-layer":"waterway",paint:{"line-color":r.water}},{id:"building",type:"fill",source:"osm","source-layer":"building",paint:{"fill-color":r.building,"fill-outline-color":r.buildingOutline,"fill-opacity":["interpolate",["linear"],["zoom"],14,0,16,.8]}},{id:"indoor-corridor",type:"fill",source:"osm","source-layer":"indoor",filter:["all",["==","indoor","corridor"],["==","level",e]],paint:{"fill-color":r.indoorCorridor,"fill-opacity":.8}},{id:"indoor",type:"fill",source:"osm","source-layer":"indoor",filter:["all",["!in","indoor","corridor","wall","elevator"],["==","level",e]],paint:{"fill-color":r.indoor,"fill-opacity":.8}},{id:"indoor-outline",type:"line",source:"osm","source-layer":"indoor",filter:["all",["!in","indoor","corridor","wall","elevator"],["==","level",e]],minzoom:18,paint:{"line-color":r.indoorOutline,"line-width":2}},{id:"indoor-names",type:"symbol",source:"osm","source-layer":"indoor",minzoom:18,filter:["any",["!has","level"],["==","level",e]],layout:{"symbol-placement":"point","text-field":["get","name"],"text-font":["Noto Sans Regular"],"text-size":12},paint:{"text-color":r.indoorText}},{id:"landuse-public-transport",type:"fill",source:"osm","source-layer":"landuse",filter:["all",["==","landuse","public_transport"],["any",["!has","level"],["==","level",e]]],paint:{"fill-color":r.publicTransport}},{id:"footway",type:"line",source:"osm","source-layer":"road",filter:["all",["in","highway","footway","track","cycleway","path","unclassified","service"],e===0?["any",["!has","level"],["==","level",e]]:["==","level",e]],layout:{"line-cap":"round"},minzoom:14,paint:{"line-dasharray":[.75,1.5],"line-color":r.footway,"line-opacity":.5,"line-width":["let","base",.4,["interpolate",["linear"],["zoom"],5,["+",["*",["var","base"],.1],1],9,["+",["*",["var","base"],.4],1],12,["+",["*",["var","base"],1],1],16,["+",["*",["var","base"],4],1],20,["+",["*",["var","base"],8],1]]]}},{id:"stairs-ground",type:"line",source:"osm","source-layer":"road",minzoom:18,filter:["all",["==","highway","steps"],e===0?["any",["!has","from_level"],["any",["==","from_level",e],["==","to_level",e]]]:["any",["==","from_level",e],["==","to_level",e]]],paint:{"line-color":"#ddddddff","line-width":["interpolate",["exponential",2],["zoom"],10,["*",4,["^",2,-6]],24,["*",4,["^",2,8]]]}},{id:"stairs-steps",type:"line",source:"osm","source-layer":"road",minzoom:18,filter:["all",["==","highway","steps"],e===0?["any",["!has","from_level"],["any",["==","from_level",e],["==","to_level",e]]]:["any",["==","from_level",e],["==","to_level",e]]],paint:{"line-color":"#bfbfbf","line-dasharray":["literal",[.01,.1]],"line-width":["interpolate",["exponential",2],["zoom"],10,["*",4,["^",2,-6]],24,["*",4,["^",2,8]]]}},{id:"stairs-rail",type:"line",source:"osm","source-layer":"road",minzoom:18,filter:["all",["==","highway","steps"],e===0?["any",["!has","from_level"],["any",["==","from_level",e],["==","to_level",e]]]:["any",["==","from_level",e],["==","to_level",e]]],paint:{"line-color":"#808080","line-width":["interpolate",["exponential",2],["zoom"],10,["*",.25,["^",2,-6]],24,["*",.25,["^",2,8]]],"line-gap-width":["interpolate",["exponential",2],["zoom"],10,["*",4,["^",2,-6]],24,["*",4,["^",2,8]]]}},{id:"indoor-elevator-outline",type:"circle",source:"osm","source-layer":"indoor",minzoom:18,filter:["all",["==","indoor","elevator"],["<=","from_level",e],[">=","to_level",e]],paint:{"circle-color":r.elevatorOutline,"circle-radius":16}},{id:"indoor-elevator",type:"circle",source:"osm","source-layer":"indoor",minzoom:18,filter:["all",["==","indoor","elevator"],["<=","from_level",e],[">=","to_level",e]],paint:{"circle-color":r.elevator,"circle-radius":14}},{id:"indoor-elevator-icon",type:"symbol",source:"osm","source-layer":"indoor",minzoom:18,filter:["all",["==","indoor","elevator"],["<=","from_level",e],[">=","to_level",e]],layout:{"icon-image":"elevator","icon-size":.9}},{id:"road_back_residential",type:"line",source:"osm","source-layer":"road",filter:["==","highway","residential"],layout:{"line-cap":"round"},paint:{"line-color":r.roadBackResidential,"line-width":["interpolate",["linear"],["zoom"],5,0,9,.5,12,1,16,4,20,20],"line-opacity":["interpolate",["linear"],["zoom"],12,.4,15,1]}},{id:"road_back_non_residential",type:"line",source:"osm","source-layer":"road",filter:["!in","highway","footway","track","steps","cycleway","path","unclassified","residential","service"],layout:{"line-cap":"round"},paint:{"line-color":r.roadBackNonResidential,"line-width":["let","base",["match",["get","highway"],"motorway",4,["trunk","motorway_link"],3.5,["primary","secondary","aeroway","trunk_link"],3,["primary_link","secondary_link","tertiary","tertiary_link"],1.75,0],["interpolate",["linear"],["zoom"],5,["+",["*",["var","base"],.1],1],9,["+",["*",["var","base"],.4],1],12,["+",["*",["var","base"],1],1],16,["+",["*",["var","base"],4],1],20,["+",["*",["var","base"],8],1]]]}},{id:"road",type:"line",source:"osm","source-layer":"road",layout:{"line-cap":"round"},filter:["all",["has","ref"],["any",["==",["get","highway"],"motorway"],["==",["get","highway"],"trunk"],["==",["get","highway"],"secondary"],[">",["zoom"],11]]],paint:{"line-color":["match",["get","highway"],"motorway",r.motorway,["trunk","motorway_link"],r.motorwayLink,["primary","secondary","aeroway","trunk_link"],r.primarySecondary,["primary_link","secondary_link","tertiary","tertiary_link"],r.linkTertiary,"residential",r.residential,r.road],"line-width":["let","base",["match",["get","highway"],"motorway",3.5,["trunk","motorway_link"],3,["primary","secondary","aeroway","trunk_link"],2.5,["primary_link","secondary_link","tertiary","tertiary_link"],1.75,"residential",1.5,.75],["interpolate",["linear"],["zoom"],5,["*",["var","base"],.5],9,["*",["var","base"],1],12,["*",["var","base"],2],16,["*",["var","base"],2.5],20,["*",["var","base"],3]]]}},{id:"ferry_routes",type:"line",source:"osm","source-layer":"ferry",paint:{"line-width":1.5,"line-dasharray":[2,3],"line-color":r.ferryRoute}},{id:"rail_detail",type:"line",source:"osm","source-layer":"rail",filter:["==","rail","detail"],paint:{"line-color":r.rail}},{id:"rail_secondary",type:"line",source:"osm","source-layer":"rail",filter:["all",["==","rail","secondary"],["any",["!has","level"],["==","level",e]]],paint:{"line-color":r.rail,"line-width":1.15}},{id:"rail_primary",type:"line",source:"osm","source-layer":"rail",filter:["all",["==","rail","primary"],["any",["!has","level"],["==","level",e]]],paint:{"line-color":r.rail,"line-width":1.3}},{id:"road-ref-shield",type:"symbol",source:"osm","source-layer":"road",minzoom:6,filter:["all",["has","ref"],["any",["==",["get","highway"],"motorway"],["==",["get","highway"],"trunk"],["==",["get","highway"],"secondary"],[">",["zoom"],11]]],layout:{"symbol-placement":"line","text-field":["get","ref"],"text-font":["Noto Sans Regular"],"text-size":["case",["==",["get","highway"],"motorway"],11,10],"text-justify":"center","text-rotation-alignment":"viewport","text-pitch-alignment":"viewport","icon-image":r.shield,"icon-text-fit":"both","icon-text-fit-padding":[.5,4,.5,4],"icon-rotation-alignment":"viewport","icon-pitch-alignment":"viewport"},paint:{"text-color":r.text}},{id:"road-name-text",type:"symbol",source:"osm","source-layer":"road",minzoom:14,layout:{"symbol-placement":"line","text-field":["get","name"],"text-font":["Noto Sans Regular"],"text-size":9},paint:{"text-halo-width":11,"text-halo-color":r.textHalo,"text-color":r.text}},{id:"towns",type:"symbol",source:"osm","source-layer":"cities",filter:["!=",["get","place"],"city"],layout:{"text-field":["get","name"],"text-font":["Noto Sans Regular"],"text-size":12},paint:{"text-halo-width":1,"text-halo-color":r.textHalo,"text-color":r.text}},{id:"cities",type:"symbol",source:"osm","source-layer":"cities",filter:["==",["get","place"],"city"],layout:{"symbol-sort-key":["-",["coalesce",["get","population"],0]],"text-field":["get","name"],"text-font":["Noto Sans Bold"],"text-size":["interpolate",["linear"],["zoom"],6,12,9,16]},paint:{"text-halo-width":2,"text-halo-color":"white","text-color":"hsl(0, 0%, 20%)"}}]}};function fn(i){const a=document.createElement("canvas");a.width=32,a.height=32;const o=a.getContext("2d"),r=1,s=31,d=r+2,m=s-2,g=r+1,f=s-1,T=new Path2D;return T.moveTo(d,r),T.lineTo(m,r),T.bezierCurveTo(f,g,f,g,s,d),T.lineTo(s,m),T.bezierCurveTo(f,f,f,f,m,s),T.lineTo(d,s),T.bezierCurveTo(g,f,g,f,r,m),T.lineTo(r,d),T.bezierCurveTo(g,g,g,g,d,r),T.closePath(),o.fillStyle=i.fill,o.fill(T),o.strokeStyle=i.stroke,o.stroke(T),[o.getImageData(0,0,32,32),{content:[d,d,m,m],stretchX:[[d,m]],stretchY:[[d,m]]}]}var Fi=b("<div><!></div>");function Ni(i,e){Pe(e,!0);let a=H(e,"map",15),o=H(e,"zoom",15),r=H(e,"bounds",15),s=H(e,"center",15),d=null,m=e.style,g=$e({map:void 0});Ka("map",g);const f=()=>{e.style!=m&&(!g.map&&d?T(d):g.map&&g.map.setStyle(e.style||null),m=e.style)},T=L=>{if(!e.style)return;let E;try{E=new bt.Map({container:L,zoom:o(),bounds:r(),center:s(),style:e.style,pitchWithRotate:!1,fadeDuration:0,transformRequest:e.transformRequest,attributionControl:e.attribution===!1||e.attribution===void 0?e.attribution:{customAttribution:e.attribution}}),E.addImage("shield",...fn({fill:"hsl(0, 0%, 98%)",stroke:"hsl(0, 0%, 75%)"})),E.addImage("shield-dark",...fn({fill:"hsl(0, 0%, 16%)",stroke:"hsl(0, 0%, 30%)"}));const p=new bt.ScaleControl({maxWidth:100,unit:"metric"});E.addControl(p,yo&&window.innerWidth<768?"top-left":"bottom-left"),E.on("load",()=>{a(E),g.map=E,r(E.getBounds()),E.on("moveend",()=>{o(E.getZoom()),s(E.getCenter()),r(E.getBounds())})})}catch(p){console.log(p)}return{destroy(){E?.remove(),g.map=void 0}}};Ze(f);var _=Fi(),u=v(_);{var h=L=>{var E=Q(),p=y(E);St(p,()=>e.children),n(L,E)};z(u,L=>{e.children&&L(h)})}c(_),_o(_,L=>T?.(L)),Mt(_,L=>d=L,()=>d),U(()=>Et(_,1,nr(e.class))),n(i,_),Ce()}const Kn=i=>{const e=[];for(let a=0;a<i.legs.length;a++)if(i.legs[a].interlineWithPreviousLeg){const o=e[e.length-1],r=i.legs[a];o.intermediateStops.push({...o.to,switchTo:r}),o.to=r.to,o.duration+=r.duration,o.endTime=r.endTime,o.scheduledEndTime=r.scheduledEndTime,o.realTime||=r.realTime,o.intermediateStops.push(...r.intermediateStops),o.legGeometry={points:Vr.encode([...Vr.decode(o.legGeometry.points),...Vr.decode(r.legGeometry.points)]),precision:o.legGeometry.precision,length:o.legGeometry.length+r.legGeometry.length}}else e.push(i.legs[a]);i.legs=e},mn=(i,e)=>{const a=o=>{o.legs[0].from.name==="START"&&(o.legs[0].from.name=i.label),o.legs[o.legs.length-1].to.name==="END"&&(o.legs[o.legs.length-1].to.name=e.label),Kn(o)};return o=>{if(o.error)throw{error:o.error.error,status:o.response?.status};return o.data.itineraries.forEach(a),o.data.direct.forEach(a),o.data}},Di={ticket:"Билет",ticketOptions:"Опции за билет",includedInTicket:"Включено в билета",journeyDetails:"Детайли за пътуването",transfers:"прекачвания",walk:"Пеша",bike:"Велосипед",cargoBike:"Товарен велосипед",scooterStanding:"тротинетка",scooterSeated:"тротинетка",car:"Автомобил",taxi:"Такси",moped:"Скутер",unknownVehicleType:"Неизвестен тип превозно средство",electricAssist:"Електрическа помощ",electric:"Електрически",combustion:"Двигател с вътрешно горене",combustionDiesel:"Дизел",hybrid:"Хибрид",plugInHybrid:"Зареждаем хибрид",hydrogenFuelCell:"Водородна горивна клетка",from:"От",to:"До",viaStop:"Междинна спирка",viaStops:"Междинни спирки",addViaStop:"Добави междинна спирка",removeViaStop:"Премахни междинната спирка",viaStayDuration:"Минимален престой",position:"местоположение",arrival:"Пристигане",departure:"Заминаване",duration:"Продължителност",arrivals:"Пристигания",later:"по-късно",earlier:"по-рано",connections:"Връзки",departures:"Заминавания",switchToArrivals:"Превключи към пристигания",switchToDepartures:"Превключи към заминавания",track:"Коловоз",platform:"Перон",trackAbr:"Кол.",platformAbr:"Перон",arrivalOnTrack:"Пристигане на коловоз",tripIntermediateStops:i=>{switch(i){case 0:return"Без междинни спирки";case 1:return"1 междинна спирка";default:return`${i} междинни спирки`}},sharingProvider:"Оператор",sharingProviders:"Оператори",returnOnlyAtStations:"Превозното средство трябва да се върне на станция.",roundtripStationReturnConstraint:"Превозното средство трябва да се върне на началната станция.",rentalStation:"Станция",rentalGeofencingZone:"Зона",noItinerariesFound:"Не са намерени маршрути.",advancedSearchOptions:"Разширени настройки",selectTransitModes:"Изберете видове транспорт",defaultSelectedModes:"Всички видове транспорт",defaultSelectedProviders:"Всички превозвачи",selectElevationCosts:"Избягвай стръмни наклони.",wheelchair:"инвалидна количка",useRoutedTransfers:"Използвай посочените прекачвания",bikeRental:"наемане на велосипед",requireBikeTransport:"Превоз на велосипед",requireCarTransport:"Превоз на автомобил",considerRentalReturnConstraints:"Върни наетите превозни средства в рамките на пътуването",default:"По подразбиране",timetableSources:"Източници на разписания",tripCancelled:"Пътуването е отменено",stopCancelled:"Спирката е отменена",inOutDisallowed:"Качване/слизане не е позволено",inDisallowed:"Качването не е позволено",outDisallowed:"Слизането не е позволено",unscheduledTrip:"извънреден курс",alertsAvailable:"налични известия",dataExpiredSince:"Данните са остарели, последно валидни на",FLEX:"По заявка",WALK:"Пеша",BIKE:"Велосипед",RENTAL:"Нает",CAR:"Автомобил",CAR_DROPOFF:"Слизане от автомобила",CAR_PARKING:"Паркинг (P+R)",TRANSIT:"Градски транспорт",TRAM:"Трамвай",SUBWAY:"Метро",FERRY:"Ферибот",AIRPLANE:"Самолет",SUBURBAN:"Градска железница",BUS:"Автобус",COACH:"Междуградски автобус",RAIL:"Влак",HIGHSPEED_RAIL:"Високоскоростен влак",LONG_DISTANCE:"Междуградски влак",NIGHT_RAIL:"Нощен влак",REGIONAL_FAST_RAIL:"Бърз регионален влак",REGIONAL_RAIL:"Регионален влак",OTHER:"Други",routingSegments:{maxTransfers:"Макс. прекачвания",maxTravelTime:"Макс. време за пътуване",firstMile:"Първи километър",lastMile:"Последен километър",direct:"Директна връзка",maxPreTransitTime:"Максимално време преди транзит",maxPostTransitTime:"Максимално време след транзит",maxDirectTime:"Максимално време без транзит"},elevationCosts:{NONE:"Без наклон",LOW:"Лек наклон",HIGH:"Голям наклон"},isochrones:{title:"Достъпен периметър",displayLevel:"Ниво на показване",maxComputeLevel:"Макс. ниво на изчисление",canvasRects:"Правоъгълници (слой)",canvasCircles:"Кръгове (слой)",geojsonCircles:"Кръгове (геометрия)",styling:"Стил",noData:"Няма данни",requestFailed:"Заявката е неуспешна"},alerts:{validFrom:"Валидно от",until:"до",information:"Информация",more:"още"},RENTAL_BICYCLE:"Споделен велосипед",RENTAL_CARGO_BICYCLE:"Споделен товарен велосипед",RENTAL_CAR:"Нает автомобил",RENTAL_MOPED:"Споделен скутер",RENTAL_SCOOTER_STANDING:"Споделена тротинетка",RENTAL_SCOOTER_SEATED:"Споделена седяща тротинетка",RENTAL_OTHER:"Друго споделено превозно средство",incline:"Наклон",CABLE_CAR:"Въжен лифт",FUNICULAR:"Фуникулер",AERIAL_LIFT:"Въздушен лифт",toll:"Внимание! Платен път.",accessRestriction:"забранен достъп",continuesAs:"Продължава като",rent:"Наем",copyToClipboard:"Копирай в клипборда",rideThroughAllowed:"Минаване е позволено",rideThroughNotAllowed:"Минаване не е позволено",rideEndAllowed:"Паркиране е позволено",rideEndNotAllowed:"Паркиране не е позволено"},$n={ticket:"Ticket",ticketOptions:"Ticket Options",includedInTicket:"Included in ticket",journeyDetails:"Journey Details",transfers:"transfers",walk:"Walk",bike:"Bike",cargoBike:"Cargo bike",scooterStanding:"Standing kick scooter",scooterSeated:"Seated kick scooter",car:"Car",taxi:"Taxi",moped:"Moped",unknownVehicleType:"Unknown vehicle type",electricAssist:"Electric motor assist",electric:"Electric",combustion:"Combustion",combustionDiesel:"Diesel",hybrid:"Hybrid",plugInHybrid:"Plug-in hybrid",hydrogenFuelCell:"Hydrogen fuel cell",from:"From",to:"To",viaStop:"Via stop",viaStops:"Via stops",addViaStop:"Add via stop",removeViaStop:"Remove via stop",viaStayDuration:"Minimum stay",position:"Position",arrival:"Arrival",departure:"Departure",connections:"Connections",duration:"Duration",arrivals:"Arrivals",later:"later",earlier:"earlier",departures:"Departures",switchToArrivals:"Switch to arrivals",switchToDepartures:"Switch to departures",track:"Platform",platform:"Platform",trackAbr:"Pl.",platformAbr:"Pl.",arrivalOnTrack:"Arrival on track",tripIntermediateStops:i=>{switch(i){case 0:return"No intermediate stops";case 1:return"1 intermediate stop";default:return`${i} intermediate stops`}},sharingProvider:"Provider",sharingProviders:"Providers",returnOnlyAtStations:"The vehicle must be returned at a station.",roundtripStationReturnConstraint:"The vehicle must be returned to the departure station.",rentalStation:"Station",rentalGeofencingZone:"Zone",noItinerariesFound:"No itineraries found.",advancedSearchOptions:"Options",selectTransitModes:"Select transit modes",defaultSelectedModes:"All transit modes",defaultSelectedProviders:"All providers",selectElevationCosts:"Avoid steep incline.",useRoutedTransfers:"Use routed transfers",wheelchair:"Accessible transfers",bikeRental:"Allow usage of sharing vehicles",requireBikeTransport:"Bike carriage",requireCarTransport:"Car carriage",considerRentalReturnConstraints:"Return rental vehicles within journey",default:"Default",timetableSources:"Timetable sources",tripCancelled:"Trip cancelled",stopCancelled:"Stop cancelled",inOutDisallowed:"Entry/exit not possible",inDisallowed:"Entry not possible",outDisallowed:"Exit not possible",unscheduledTrip:"Additional service",alertsAvailable:"Service alerts present",dataExpiredSince:"Warning: Expired data, last valid",FLEX:"On-Demand",WALK:"Walking",BIKE:"Bike",RENTAL:"Sharing",CAR:"Car",CAR_PARKING:"Car Parking",CAR_DROPOFF:"Drop-off (car)",TRANSIT:"Transit",TRAM:"Tram",SUBWAY:"Subway",FERRY:"Ferry",AIRPLANE:"Airplane",SUBURBAN:"Suburban Rail",BUS:"Bus",COACH:"Long Distance Bus / Coach",RAIL:"Train",HIGHSPEED_RAIL:"High Speed Rail",LONG_DISTANCE:"Intercity Rail",NIGHT_RAIL:"Night Rail",REGIONAL_FAST_RAIL:"Fast Rail",REGIONAL_RAIL:"Regional Rail",OTHER:"Other",RENTAL_BICYCLE:"Shared bike",RENTAL_CARGO_BICYCLE:"Shared cargo bike",RENTAL_CAR:"Shared car",RENTAL_MOPED:"Shared moped",RENTAL_SCOOTER_STANDING:"Shared standing scooter",RENTAL_SCOOTER_SEATED:"Shared seated scooter",RENTAL_OTHER:"Other shared vehicle",CABLE_CAR:"Cable car",FUNICULAR:"Funicular",AERIAL_LIFT:"Aerial lift",routingSegments:{maxTransfers:"Max. transfers",maxTravelTime:"Max. travel time",firstMile:"First mile",lastMile:"Last mile",direct:"Direct connection",maxPreTransitTime:"Max. pre-transit time",maxPostTransitTime:"Max. post-transit time",maxDirectTime:"Max. direct time"},elevationCosts:{NONE:"No detours",LOW:"Small detours",HIGH:"Large detours"},isochrones:{title:"Isochrones",displayLevel:"Display level",maxComputeLevel:"Max. computation level",canvasRects:"Rects (Overlay)",canvasCircles:"Circles (Overlay)",geojsonCircles:"Circles (Geometry)",styling:"Isochrones styling",noData:"No data",requestFailed:"Request failed"},alerts:{validFrom:"Valid from",until:"until",information:"Information",more:"more"},incline:"Incline",toll:"Warning! A fee must be paid to use this route.",accessRestriction:"No access",continuesAs:"Continues as",rent:"Rent",copyToClipboard:"Copy to clipboard",rideThroughAllowed:"Riding through allowed",rideThroughNotAllowed:"Riding through not allowed",rideEndAllowed:"Parking allowed",rideEndNotAllowed:"Parking only at stations"},zi={ticket:"Fahrschein",ticketOptions:"Fahrscheinoptionen",includedInTicket:"Im Fahrschein enthalten",journeyDetails:"Verbindungsdetails",transfers:"Umstiege",walk:"Fußweg",bike:"Fahrrad",cargoBike:"Lastenfahrrad",scooterStanding:"Stehroller",scooterSeated:"Sitzroller",car:"Auto",taxi:"Taxi",moped:"Moped",unknownVehicleType:"Unbekannter Fahrzeugtyp",electricAssist:"Elektromotorunterstützung",electric:"Elektrisch",combustion:"Benzin",combustionDiesel:"Diesel",hybrid:"Hybrid",plugInHybrid:"Plug-in Hybrid",hydrogenFuelCell:"Wasserstoff-Brennstoffzelle",from:"Von",to:"Nach",viaStop:"Zwischenhalt",viaStops:"Zwischenhalte",addViaStop:"Zwischenhalt hinzufügen",removeViaStop:"Zwischenhalt entfernen",viaStayDuration:"Mindestaufenthalt",position:"Position",arrival:"Ankunft",departure:"Abfahrt",duration:"Dauer",arrivals:"Ankünfte",connections:"Verbindungen",departures:"Abfahrten",later:"später",earlier:"früher",track:"Gleis",platform:"Steig",trackAbr:"Gl.",platformAbr:"Stg.",arrivalOnTrack:"Ankunft auf Gleis",switchToArrivals:"Wechsel zu Ankünften",switchToDepartures:"Wechsel zu Abfahrten",tripIntermediateStops:i=>{switch(i){case 0:return"Fahrt ohne Zwischenhalt";case 1:return"Fahrt eine Station";default:return`Fahrt ${i} Stationen`}},sharingProvider:"Anbieter",sharingProviders:"Anbieter",returnOnlyAtStations:"Das Fahrzeug muss an einer Station zurückgegeben werden.",roundtripStationReturnConstraint:"Das Fahrzeug muss wieder an der Abfahrtsstation abgestellt werden.",rentalStation:"Station",rentalGeofencingZone:"Zone",noItinerariesFound:"Keine Verbindungen gefunden.",advancedSearchOptions:"Optionen",selectTransitModes:"Öffentliche Verkehrsmittel auswählen",defaultSelectedModes:"Alle Verkehrsmittel",defaultSelectedProviders:"Alle Anbieter",selectElevationCosts:"Steile Steigungen vermeiden.",useRoutedTransfers:"Geroutete Umstiege verwenden",wheelchair:"Barrierefreie Umstiege",bikeRental:"Sharing-Fahrzeuge berücksichtigen",requireBikeTransport:"Fahrradmitnahme",requireCarTransport:"Automitnahme",considerRentalReturnConstraints:"Leihfahrzeuge innerhalb der Reise zurückgeben",default:"Vorgabe",timetableSources:"Fahrplandatenquellen",tripCancelled:"Fahrt entfällt",stopCancelled:"Halt entfällt",inOutDisallowed:"Ein-/Ausstieg nicht möglich",inDisallowed:"Einstieg nicht möglich",outDisallowed:"Ausstieg nicht möglich",unscheduledTrip:"Zusätzliche Fahrt",alertsAvailable:"Meldungen liegen vor",dataExpiredSince:"Achtung: Veraltete Daten, zuletzt gültig am",FLEX:"Bedarfsverkehr",WALK:"Zu Fuß",BIKE:"Fahrrad",RENTAL:"Sharing",CAR:"Auto",CAR_DROPOFF:"Absetzen (Auto)",CAR_PARKING:"P+R Park & Ride",TRANSIT:"ÖPV",TRAM:"Tram",SUBWAY:"U-Bahn",FERRY:"Fähre",AIRPLANE:"Flugzeug",SUBURBAN:"S-Bahn",BUS:"Bus",COACH:"Reisebus",RAIL:"Zug",HIGHSPEED_RAIL:"Hochgeschwindigkeitszug",LONG_DISTANCE:"Intercityzug",NIGHT_RAIL:"Nachtzug",REGIONAL_FAST_RAIL:"Schnellzug",REGIONAL_RAIL:"Regionalzug",OTHER:"Andere",routingSegments:{maxTransfers:"Max. Umstiege",maxTravelTime:"Max. Reisezeit",firstMile:"Erste Meile",lastMile:"Letzte Meile",direct:"Direktverbindung",maxPreTransitTime:"Max. Vorlaufzeit",maxPostTransitTime:"Max. Nachlaufzeit",maxDirectTime:"Max. Direktzeit"},elevationCosts:{NONE:"Keine Umwege",LOW:"Kleine Umwege",HIGH:"Große Umwege"},isochrones:{title:"Isochronen",displayLevel:"Darstellungsebene",maxComputeLevel:"Max. Berechnungsebene",canvasRects:"Rechtecke (Overlay)",canvasCircles:"Kreise (Overlay)",geojsonCircles:"Kreise (Geometrie)",styling:"Darstellung der Isochronen",noData:"Keine Daten",requestFailed:"Anfrage fehlgeschlagen"},alerts:{validFrom:"Gültig von",until:"bis",information:"Informationen",more:"mehr"},RENTAL_BICYCLE:"Bikesharing",RENTAL_CARGO_BICYCLE:"Lastenrad Sharing",RENTAL_CAR:"Car Sharing",RENTAL_MOPED:"Moped Sharing",RENTAL_SCOOTER_STANDING:"Scooter Sharing",RENTAL_SCOOTER_SEATED:"Sitzroller Sharing",RENTAL_OTHER:"Anderes sharing Fahrzeug",incline:"Steigung",CABLE_CAR:"Seilbahn",FUNICULAR:"Standseilbahn",AERIAL_LIFT:"Luftseilbahn",toll:"Achtung! Mautpflichtige Straße.",accessRestriction:"Kein Zugang",continuesAs:"Weiter als",rent:"Ausleihen",copyToClipboard:"In die Zwischenablage kopieren",rideThroughAllowed:"Durchfahrt erlaubt",rideThroughNotAllowed:"Durchfahrt verboten",rideEndAllowed:"Parken erlaubt",rideEndNotAllowed:"Parken nur an Stationen"},Mi={ticket:"Billet",ticketOptions:"Options de billet",includedInTicket:"Inclus dans le billet",journeyDetails:"Détails du voyage",walk:"à pied",bike:"Vélo",cargoBike:"Vélo Cargo",scooterStanding:"Trottinette",scooterSeated:"Trottinette avec siège",car:"Voiture",taxi:"Taxi",moped:"Mobylette",unknownVehicleType:"Type de véhicule inconnu",electricAssist:"Assistance moteur électrique",electric:"Électrique",combustion:"Combustion",combustionDiesel:"Diesel",hybrid:"Hybride",plugInHybrid:"Hybride rechargeable",hydrogenFuelCell:"Pile à combustible hydrogène",from:"De",to:"À",viaStop:"Arrêt intermédiaire",viaStops:"Arrêts intermédiaires",addViaStop:"Ajouter un arrêt intermédiaire",removeViaStop:"Supprimer l'arrêt intermédiaire",viaStayDuration:"Durée minimale d'arrêt",position:"Position",arrival:"Arrivée",departure:"Départ",duration:"Durée",arrivals:"Arrivées",later:"plus tard",earlier:"plus tôt",departures:"Départs",connections:"Itinéraires",switchToArrivals:"Afficher les arrivées",switchToDepartures:"Afficher les départs",track:"Voie",platform:"Quai",trackAbr:"V.",platformAbr:"Q.",arrivalOnTrack:"Arrivée sur la voie",tripIntermediateStops:i=>{switch(i){case 0:return"Aucun arrêt intermédiaire";case 1:return"1 arrêt intermédiaire";default:return`${i} arrêts intermédiaires`}},sharingProvider:"Fournisseur",sharingProviders:"Fournisseurs",transfers:"correspondances",returnOnlyAtStations:"Le véhicule doit être retourné à une station.",roundtripStationReturnConstraint:"Le véhicule doit être retourné à la station de départ.",rentalStation:"Station",rentalGeofencingZone:"Zone",noItinerariesFound:"Aucun itinéraire trouvé.",advancedSearchOptions:"Options",selectTransitModes:"Sélectionner les modes de transport en commun",defaultSelectedModes:"Tous les transports en commun",defaultSelectedProviders:"Tous les fournisseurs",selectElevationCosts:"Évitez les pentes abruptes.",wheelchair:"Correspondances accessibles",useRoutedTransfers:"Utiliser les correspondances routées",bikeRental:"Utiliser véhicules partagés",requireBikeTransport:"Transport vélo",requireCarTransport:"Transport voiture",considerRentalReturnConstraints:"Retourner les véhicules partagés pendant le voyage",default:"Faire défaut",timetableSources:"Sources des horaires",tripCancelled:"Voyage annulé",stopCancelled:"Arrêt supprimé",inOutDisallowed:"Impossible de monter/descendre",inDisallowed:"Impossible de monter",outDisallowed:"Impossible de descendre",unscheduledTrip:"Voyage supplémentaire",alertsAvailable:"Annonces disponibles",dataExpiredSince:"Attention : Données expirées, valides jusqu’au",FLEX:"Transport à la demande",WALK:"À pied",BIKE:"Vélo",RENTAL:"Loué",CAR:"Voiture",CAR_PARKING:"Garage voiture",CAR_DROPOFF:"Dépose (voiture)",TRANSIT:"Transports en commun",TRAM:"Tram",SUBWAY:"Métro",FERRY:"Ferry",AIRPLANE:"Avion",SUBURBAN:"RER",BUS:"Bus",COACH:"Autocar",RAIL:"Train",HIGHSPEED_RAIL:"Train à grande vitesse",LONG_DISTANCE:"Train intercité",NIGHT_RAIL:"Train de nuit",REGIONAL_FAST_RAIL:"Train express",REGIONAL_RAIL:"Train régional",OTHER:"Autres",routingSegments:{maxTransfers:"Max. de correspondances",maxTravelTime:"Temps de trajet max.",firstMile:"Premier kilomètre",lastMile:"Dernier kilomètre",direct:"Connexion directe",maxPreTransitTime:"Durée max. avant transit",maxPostTransitTime:"Durée max. après transit",maxDirectTime:"Durée max. directe"},elevationCosts:{NONE:"Pas de détours",LOW:"Petits détours",HIGH:"Grands détours"},isochrones:{title:"Isochrones",displayLevel:"Couche de présentation",maxComputeLevel:"Niveau de calcul max.",canvasRects:"Rectes (Superposer)",canvasCircles:"Cercles (Superposer)",geojsonCircles:"Circles (Géométrie)",styling:"Style pour Isochrone",noData:"Pas de données",requestFailed:"Échec de la demande"},alerts:{validFrom:"Valable du",until:"au",information:"Informations",more:"de plus"},RENTAL_BICYCLE:"Vélo partagé",RENTAL_CARGO_BICYCLE:"Vélo cargo partagé",RENTAL_CAR:"Voiture partagée",RENTAL_MOPED:"Mobylette partagée",RENTAL_SCOOTER_STANDING:"Trottinette debout partagée",RENTAL_SCOOTER_SEATED:"Trottinette assise partagée",RENTAL_OTHER:"Autre véhicule partagé",incline:"Pente",CABLE_CAR:"Téléphérique",FUNICULAR:"Funiculaire",AERIAL_LIFT:"Remontée mécanique",toll:"Attention ! Route à péage.",accessRestriction:"Accès restreint",continuesAs:"Continue comme",rent:"Louer",copyToClipboard:"Copier dans le presse-papiers",rideThroughAllowed:"Passage autorisé",rideThroughNotAllowed:"Passage non autorisé",rideEndAllowed:"Stationnement autorisé",rideEndNotAllowed:"Stationnement uniquement aux stations"},Bi={ticket:"Bilet",ticketOptions:"Opcje biletu",includedInTicket:"Zawarte w ramach biletu",journeyDetails:"Szczegóły podróży",transfers:"przesiadki",walk:"Pieszo",bike:"Rower",cargoBike:"Rower cargo",scooterStanding:"Hulajnoga stojąca",scooterSeated:"Hulajnoga z siedziskiem",car:"Samochód",taxi:"Taksówka",moped:"Skuter",unknownVehicleType:"Nieznany typ pojazdu",electricAssist:"Wspomaganie elektryczne",electric:"Elektryczny",combustion:"Spalinowy",combustionDiesel:"Diesel",hybrid:"Hybrydowy",plugInHybrid:"Hybryda plug-in",hydrogenFuelCell:"Ogniwo paliwowe na wodór",from:"Z",to:"Do",viaStop:"Przystanek pośredni",viaStops:"Przystanki pośrednie",addViaStop:"Dodaj przystanek pośredni",removeViaStop:"Usuń przystanek pośredni",viaStayDuration:"Minimalny postój",position:"Pozycja",arrival:"Przyjazd",departure:"Odjazd",duration:"Czas trwania",arrivals:"Przyjazdy",later:"później",earlier:"wcześniej",departures:"Odjazdy",connections:"Połączenia",switchToArrivals:"Przełącz na przyjazdy",switchToDepartures:"Przełącz na odjazdy",track:"Tor",platform:"Peron",trackAbr:"T.",platformAbr:"Pr.",arrivalOnTrack:"Przyjazd na tor",tripIntermediateStops:i=>i==0?"Brak przystanków pośrednich":i==1?"1 przystanek pośredni":i%10>1&&i%10<5&&i!=12&&i!=13&&i!=14?`${i} przystanki pośrednie`:`${i} przystanków pośrednich`,sharingProvider:"Dostawca danych",sharingProviders:"Dostawcy danych",returnOnlyAtStations:"Pojazd musi zostać zwrócony na stacji.",roundtripStationReturnConstraint:"Pojazd musi zostać zwrócony do stacji początkowej.",rentalStation:"Stacja",rentalGeofencingZone:"Strefa",noItinerariesFound:"Nie znaleziono połączeń.",advancedSearchOptions:"Opcje",selectTransitModes:"Wybierz środki transportu",defaultSelectedModes:"Wszystkie środki transportu",defaultSelectedProviders:"Wszyscy dostawcy",selectElevationCosts:"Unikaj stromych nachyleń.",wheelchair:"Bezbarierowe przesiadki",useRoutedTransfers:"Wyznacz trasy dla przesiadek",bikeRental:"Użyj pojazdów współdzielonych",requireBikeTransport:"Przewóz roweru",requireCarTransport:"Przewóz samochodu",considerRentalReturnConstraints:"Zwróć pojazd współdzielony podczas podróży",default:"Domyślne",timetableSources:"Źródła danych rozkładowych",tripCancelled:"Kurs odwołany",stopCancelled:"Przystanek nieobsługiwany",inOutDisallowed:"Zabronione wejście i wyjście",inDisallowed:"Zabronione wejście",outDisallowed:"Zabronione wyjście",unscheduledTrip:"Kurs dodatkowy",alertsAvailable:"Istnieją ogłoszenia",dataExpiredSince:"Uwaga: Dane nieaktualne, ostatnio ważne",FLEX:"Transport na żądanie",WALK:"Pieszo",BIKE:"Rower",RENTAL:"Współdzielenie pojazdów",CAR:"Samochód",CAR_PARKING:"Samochód (użyj parkingów)",CAR_DROPOFF:"Samochód (tylko zatrzymanie)",TRANSIT:"Transport publiczny",TRAM:"Tramwaj",SUBWAY:"Metro",FERRY:"Prom",AIRPLANE:"Samolot",SUBURBAN:"Kolej miejska",BUS:"Autobus",COACH:"Autokar dalekobieżny",RAIL:"Kolej",HIGHSPEED_RAIL:"Kolej dużych prędkości",LONG_DISTANCE:"Kolej dalekobieżna",NIGHT_RAIL:"Nocne pociągi",REGIONAL_FAST_RAIL:"Pociąg pospieszny",REGIONAL_RAIL:"Kolej regionalna",OTHER:"Inne",routingSegments:{maxTransfers:"Maks. ilość przesiadek",maxTravelTime:"Maks. czas podróży",firstMile:"Początek podróży",lastMile:"Osiągnięcie celu",direct:"Połączenie bezpośrednie",maxPreTransitTime:"Maks. czas dotarcia",maxPostTransitTime:"Maks. czas dotarcia",maxDirectTime:"Maks. czas dotarcia"},elevationCosts:{NONE:"Bez odchyleń od trasy",LOW:"Małe odchylenia od trasy",HIGH:"Duże odchylenia od trasy"},isochrones:{title:"Izochrony",displayLevel:"Poziom wyświetlania",maxComputeLevel:"Maks. poziom wyliczenia",canvasRects:"Kwadraty (warstwa)",canvasCircles:"Okręgi (warstwa)",geojsonCircles:"Okręgi (geometria)",styling:"Styl izochron",noData:"Brak danych",requestFailed:"Błąd zapytania"},alerts:{validFrom:"Ważne od",until:"do",information:"Informacje",more:"więcej"},RENTAL_BICYCLE:"Rower współdzielony",RENTAL_CARGO_BICYCLE:"Rower cargo współdzielony",RENTAL_CAR:"Samochód współdzielony",RENTAL_MOPED:"Skuter współdzielony",RENTAL_SCOOTER_STANDING:"Hulajnoga stojąca współdzielona",RENTAL_SCOOTER_SEATED:"Hulajnoga z siedziskiem współdzielona",RENTAL_OTHER:"Inny pojazd współdzielony",incline:"Nachylenie",CABLE_CAR:"Kolej linowa",FUNICULAR:"Kolej linowo-terenowa",AERIAL_LIFT:"Wyciąg krzesełkowy",toll:"Uwaga! Za przejazd tą trasą pobierana jest opłata.",accessRestriction:"Ograniczony dostęp",continuesAs:"Kontynuuje jako",rent:"Wypożycz",copyToClipboard:"Kopiuj do schowka",rideThroughAllowed:"Przejazd dozwolony",rideThroughNotAllowed:"Przejazd niedozwolony",rideEndAllowed:"Parkowanie dozwolone",rideEndNotAllowed:"Parkowanie tylko na stacjach"},Gi={ticket:"Jízdenka",ticketOptions:"Možnosti jízdenky",includedInTicket:"Zahrnuté v jízdence",journeyDetails:"Detail cesty",transfers:"přestupy",walk:"Pěšky",bike:"Kolo",cargoBike:"Nákladní kolo",scooterStanding:"Koloběžka",scooterSeated:"Koloběžka se sedačkou",car:"Auto",taxi:"Taxi",moped:"Skútr",unknownVehicleType:"Neznámý typ vozidla",electricAssist:"Elektrická podpora",electric:"Elektrické",combustion:"Spalovací",combustionDiesel:"Diesel",hybrid:"Hybridní",plugInHybrid:"Plug-in hybrid",hydrogenFuelCell:"Vodíkový palivový článek",from:"Z",to:"Do",viaStop:"Mezizastávka",viaStops:"Mezizastávky",addViaStop:"Přidat mezizastávku",removeViaStop:"Odebrat mezizastávku",viaStayDuration:"Minimální pobyt",position:"Pozice",arrival:"Příjezd",departure:"Odjezd",duration:"Čas cesty",arrivals:"Příjezdy",later:"později",earlier:"dřive",departures:"Odjezdy",connections:"Spoje",switchToArrivals:"Přepni na příjezdy",switchToDepartures:"Přepni na odjezdy",track:"Kolej",platform:"Nástupiště",platformAbr:"Nást.",trackAbr:"K.",arrivalOnTrack:"Příjezd na kolej",tripIntermediateStops:i=>i==0?"Bez mezizastávek":i==1?"1 mezizastávka":i%10>1&&i%10<5&&i!=12&&i!=13&&i!=14?`${i} mezizastávky`:`${i} mezizastávek`,sharingProvider:"Poskytovatel dat",sharingProviders:"Poskytovatelé dat",returnOnlyAtStations:"Vozidlo musí být vráceno na stanici.",roundtripStationReturnConstraint:"Pojezd musí být vrácen k počáteční stanice",rentalStation:"Stanice",rentalGeofencingZone:"Zóna",noItinerariesFound:"Spojení nebylo nalezeno.",advancedSearchOptions:"Možnosti",selectTransitModes:"Vyber dopravní prostředky",defaultSelectedModes:"Všechny dopravní prostředky",defaultSelectedProviders:"Všichni poskytovatelé",selectElevationCosts:"Bez prudkého stoupání.",wheelchair:"Bezbariérové přestupy",useRoutedTransfers:"Počítej trasu pro přestupy",bikeRental:"Povol použití sdílených vozidel",requireBikeTransport:"Přeprava kola",requireCarTransport:"Přeprava auta",considerRentalReturnConstraints:"Vrať sdílené vozidla během cesty",default:"default",timetableSources:"Zdroje dát JŘ",tripCancelled:"Spoj odřeknut",stopCancelled:"Zastávka bez obsluhy",inOutDisallowed:"Vstup/výstup není povolen",inDisallowed:"Vstup není povolen",outDisallowed:"Výstup není povolen",unscheduledTrip:"Doplňkový spoj",alertsAvailable:"Oznámení o provozu",dataExpiredSince:"Pozor: Zastaralá data, platná naposledy",FLEX:"Poptávková doprava",WALK:"Chůze",BIKE:"Kolo",RENTAL:"Sdílené prostředky",CAR:"Auto",CAR_PARKING:"Auto (využití parkovíšť)",CAR_DROPOFF:"Auto (pouze zastavení)",TRANSIT:"Hromadná doprava",TRAM:"Tramvaj",SUBWAY:"Metro",FERRY:"Přívoz",AIRPLANE:"Letadlo",SUBURBAN:"Městská železnice",BUS:"Autobus",COACH:"Dálkový autokar",RAIL:"Železnice",HIGHSPEED_RAIL:"Vysokorychlostní železnice",LONG_DISTANCE:"Dálková železnice",NIGHT_RAIL:"Noční vlaky",REGIONAL_FAST_RAIL:"Zrychlená železnice",REGIONAL_RAIL:"Regionální železnice",OTHER:"Jiné",routingSegments:{maxTransfers:"Max. počet přestupů",maxTravelTime:"Max. čas cesty",firstMile:"Přesun k první zastávce",lastMile:"Přesun od poslední zastávky",direct:"Přímé spojení",maxPreTransitTime:"Max. čas přesunu",maxPostTransitTime:"Max. čas přesunu",maxDirectTime:"Max. čas přesunu"},elevationCosts:{NONE:"Bez odklonů",LOW:"Malé odklony",HIGH:"Velké odklony"},isochrones:{title:"Izochrony",displayLevel:"Úroveň ukazování",maxComputeLevel:"Max. úroveň vypočítání",canvasRects:"Čtverce",canvasCircles:"Okruhy (zjednodušená projekce)",geojsonCircles:"Okruhy (pokročilá projekce)",styling:"Styl izochron",noData:"Žádné data",requestFailed:"Chyba žádosti"},alerts:{validFrom:"Platí od",until:"do",information:"Informace",more:"více"},RENTAL_BICYCLE:"Sdílené kolo",RENTAL_CARGO_BICYCLE:"Sdílené nákladní kolo",RENTAL_CAR:"Sdílené auto",RENTAL_MOPED:"Sdílený skútr",RENTAL_SCOOTER_STANDING:"Sdílená koloběžka",RENTAL_SCOOTER_SEATED:"Sdílená koloběžka se sedačkou",RENTAL_OTHER:"Jiné sdílené vozidla",incline:"Sklon",CABLE_CAR:"Lanová dráha",FUNICULAR:"Lanová dráha",AERIAL_LIFT:"Lanová dráha",toll:"Pozor! Průjezd tuto trasou je placený.",accessRestriction:"Omezený dostup",continuesAs:"Pokračuje jako",rent:"Půjčit si",copyToClipboard:"Kopírovat do schránky",rideThroughAllowed:"Průjezd povolen",rideThroughNotAllowed:"Průjezd zakázán",rideEndAllowed:"Parkování povoleno",rideEndNotAllowed:"Parkování pouze na stanicích"},ja=new Map(Object.entries({bg:Di,pl:Bi,en:$n,de:zi,fr:Mi,cs:Gi})),ua=new URLSearchParams(window.location.search).get("language"),Ha=(ua&&ja.get(ua??"")?ua:navigator.languages.find(i=>ja.has(i.slice(0,2)))??"en")?.slice(0,2),Kt=ua??Ha,W=Ha?ja.get(Ha):$n;function Ye(...i){return gi(hi(i))}const _a=new URLSearchParams(window.location.search),Qt=(i,e)=>{if(_a){const a=_a.get(i);if(a!=null)return a.split(",").filter(o=>o.length)}return e||[]},Zr=(i,e)=>{_a?.has(e)&&(i[e]=_a.get(e))},ya=async(i,e,a=!1)=>{Zr(i,"debug"),Zr(i,"dark"),Zr(i,"light"),Zr(i,"motis"),Zr(i,"language");const o=new URLSearchParams(i),r=a?zn:ca;try{r("?"+o.toString(),e)}catch(s){console.log(s),await Mn(),r("?"+o.toString(),e)}},qr=(i,e,a,o=!1,r=!1)=>{ya({stopArriveBy:o,stopId:e,time:a.toISOString()},{stopArriveBy:o,selectedStop:{name:i,stopId:e,time:a},selectedItinerary:r?void 0:kt.state.selectedItinerary,tripId:r?void 0:kt.state.tripId,activeTab:"departures"},r)},aa=async(i,e=!1)=>{const{data:a,error:o}=await wi({query:{tripId:i,joinInterlinedLegs:!1,language:[Kt]}});if(o){console.log(o),alert(String(o.error?.toString()??o));return}Kn(a),ya({tripId:i},{selectedItinerary:a,tripId:i,selectedStop:e?void 0:kt.state.selectedStop,activeTab:"connections"},e)};var Ui=b("<div><!></div>");function tr(i,e){Pe(e,!0);let a=null,o=ce(!1);class r{onAdd(u){return a}onRemove(u){a?.parentNode?.removeChild(a)}getDefaultPosition}let s=new r,d=_r("map");Ze(()=>{d.map&&a&&e.position!=null&&(d.map.addControl(s,e.position),D(o,!0))}),br(()=>d.map?.removeControl(s));var m=Ui();let g;var f=v(m);{var T=_=>{var u=Q(),h=y(u);St(h,()=>e.children),n(_,u)};z(f,_=>{e.children&&_(T)})}c(m),Mt(m,_=>a=_,()=>a),U(_=>g=Et(m,1,_,null,g,{hidden:!t(o)&&e.position!=null}),[()=>nr(Ye("clear-both pointer-events-auto pt-2 md:pt-4 px-2 md:px-4 max-w-full",e.class))]),n(i,m),Ce()}function en(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=H(e,"class",7),r=H(e,"value",15),s=Rt(e,["$$slots","$$events","$$legacy","ref","class","value"]);var d={get class(){return o()},set class(f){o(f)}},m=Q(),g=y(m);{let f=M(()=>Ye("grid gap-1",o()));de(g,()=>bo,(T,_)=>{_(T,Bt({get class(){return t(f)}},()=>s,{get value(){return r()},set value(u){r(u)},get ref(){return a()},set ref(u){a(u)}}))})}return n(i,m),Ce(d)}var ji=b('<div class="flex items-center justify-center"><!></div>');function na(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class"]);var r=Q(),s=y(r);{const d=(g,f)=>{let T=()=>f?.().checked;var _=ji(),u=v(_);{var h=L=>{xo(L,{class:"fill-primary size-3.5"})};z(u,L=>{T()&&L(h)})}c(_),n(g,_)};let m=M(()=>Ye("border-primary text-primary focus-visible:ring-ring aspect-square size-4 rounded-full border shadow focus:outline-none focus-visible:ring-1 disabled:cursor-not-allowed disabled:opacity-50",e.class));de(s,()=>To,(g,f)=>{f(g,Bt({get class(){return t(m)}},()=>o,{get ref(){return a()},set ref(T){a(T)},children:d,$$slots:{default:!0}}))})}n(i,r),Ce()}const Va=pi({base:"focus-visible:ring-ring inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border-input bg-background hover:bg-accent hover:text-accent-foreground border shadow-sm",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",child:""},size:{default:"px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}});var Hi=b("<a><!></a>"),Vi=b("<button><!></button>");function at(i,e){Pe(e,!0);let a=H(e,"variant",3,"default"),o=H(e,"size",3,"default"),r=H(e,"ref",15,null),s=H(e,"href",3,void 0),d=H(e,"type",3,"button"),m=Rt(e,["$$slots","$$events","$$legacy","class","variant","size","ref","href","type","children"]);var g=Q(),f=y(g);{var T=u=>{var h=Hi();ar(h,E=>({class:E,href:s(),...m}),[()=>Ye(Va({variant:a(),size:o()}),e.class)]);var L=v(h);St(L,()=>e.children??it),c(h),Mt(h,E=>r(E),()=>r()),n(u,h)},_=u=>{var h=Vi();ar(h,E=>({class:E,type:d(),...m}),[()=>Ye(Va({variant:a(),size:o()}),e.class)]);var L=v(h);St(L,()=>e.children??it),c(h),Mt(h,E=>r(E),()=>r()),n(u,h)};z(f,u=>{s()?u(T):u(_,!1)})}n(i,g),Ce()}function oa(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class"]);var r=Q(),s=y(r);{let d=M(()=>Ye("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e.class));de(s,()=>Bn,(m,g)=>{g(m,Bt({get class(){return t(d)}},()=>o,{get ref(){return a()},set ref(f){a(f)}}))})}n(i,r),Ce()}const Wi=/^([+-]?\d+(\.\d+)?)\s*,\s*([+-]?\d+(\.\d+)?)\s*,\s*([+-]?\d+(\.\d+)?)$/,Yi=/^([+-]?\d+(\.\d+)?)\s*,\s*([+-]?\d+(\.\d+)?)$/,Xn=i=>{if(!i)return;const e=i.match(Wi);if(e)return Ft([Number(e[3]),Number(e[1])],Number(e[5]));const a=i.match(Yi);if(a)return Ft([Number(a[3]),Number(a[1])])};function Ft(i,e){const{lat:a,lng:o}=bt.LngLat.convert(i),r=e==null?`${a},${o}`:`${a},${o},${e}`;return{label:r,match:{lat:a,lon:o,level:e,id:"",areas:[],type:"PLACE",name:r,tokens:[],score:0}}}const la=(i,e)=>{if(!i||i.trim()==="")return{label:"",match:void 0};const a=Xn(i);return a?(e&&(a.label=e,a.match.name=e),a):{label:e||"",match:{lat:0,lon:0,level:0,id:i,areas:[],type:"STOP",name:e||"",tokens:[],score:0}}},Ir=i=>{switch(i.mode){case"WALK":return["walk","hsl(var(--foreground) / 1)","hsl(var(--background) / 1)"];case"BIKE":return["bike","hsl(var(--foreground) / 1)","hsl(var(--background) / 1)"];case"RENTAL":switch(i.rental?.formFactor){case"BICYCLE":return["bike","#075985","white"];case"CARGO_BICYCLE":return["cargo_bike","#075985","white"];case"CAR":return["car","#4c4947","white"];case"MOPED":return["moped","#075985","white"];case"SCOOTER_SEATED":return["seated_scooter","#075985","white"];case"SCOOTER_STANDING":return["scooter","#075985","white"];case"OTHER":default:return["other","#075985","white"]}case"CAR":case"CAR_PARKING":return["car","#4c4947","white"];case"FLEX":case"ODM":return["taxi","#fdb813","white"];case"TRANSIT":case"BUS":return["bus","#ff9800","white"];case"COACH":return["bus","#9ccc65","black"];case"TRAM":return["tram","#ebe717","white"];case"SUBURBAN":return["sbahn","#4caf50","white"];case"SUBWAY":return["ubahn","#3f51b5","white"];case"FERRY":return["ship","#00acc1","white"];case"AIRPLANE":return["plane","#90a4ae","white"];case"HIGHSPEED_RAIL":return["train","#9c27b0","white"];case"LONG_DISTANCE":return["train","#e91e63","white"];case"NIGHT_RAIL":return["train","#1a237e","white"];case"REGIONAL_FAST_RAIL":case"REGIONAL_RAIL":case"RAIL":return["train","#f44336","white"];case"FUNICULAR":return["funicular","#795548","white"];case"CABLE_CAR":return["tram","#795548","white"];case"AERIAL_LIFT":return["aerial_lift","#795548","white"]}return["train","#000000","white"]},Ar=i=>{const[e,a,o]=Ir(i);return i.routeColor?[`#${i.routeColor}`,`#${i.routeTextColor}`]:[a,o]},gn=i=>`border-color: ${Ar(i)[0]}`,Ca=i=>{const[e,a]=Ar(i);return`background-color: ${e}; color: ${a}; fill: ${a}`},hn=(i,e=it)=>{const a=M(()=>Ir({mode:e()})[0]),o=M(()=>Ir({mode:e()})[1]);var r=qi(),s=v(r),d=v(s);c(s),c(r),U(()=>{hr(r,`background-color: ${t(o)??""}; fill: white;`),wa(d,"xlink:href",`#${t(a)}`)}),n(i,r)};var qi=b('<div class="rounded-full flex items-center justify-center p-1"><svg class="relative size-4 rounded-full"><use></use></svg></div>'),Zi=b('<img class="size-5"/>'),Ki=b('<div class="mt-1 ml-4 flex flex-row gap-1.5 items-center"></div>'),$i=b('<div class="flex items-center grow"><!> <div class="flex flex-col ml-4"><span class="font-semibold text-nowrap text-ellipsis overflow-hidden"> </span> <span class="text-muted-foreground text-nowrap text-ellipsis overflow-hidden"> </span></div></div> <!>',1),Xi=b("<!> <!>",1);function ia(i,e){Pe(e,!0);let a=H(e,"items",31,()=>$e([])),o=H(e,"selected",15),r=H(e,"onChange",3,()=>{}),s=ce(""),d=ce("");const m=E=>{if(E){const p=E.areas.find(O=>O.matched),F=E.areas.find(O=>O.default);p?.name.match(/^[0-9]*$/)&&(p.name+=" "+F?.name);let x=(p??F)?.name;x==E.name&&(x=E.areas[0].name);const S=new Set;E.areas.forEach((O,A)=>{(O.matched||O.unique||O.default)&&S.add(A)});const w=Array.from(S);return w.sort((O,A)=>A-O),w.map(O=>E.areas[O].name).join(", ")}return""},g=E=>{const p=m(E);return p?E.name+", "+p:E.name},f=async()=>{const E=Xn(t(s));if(E){o(E),a([]),r()(o());return}const p=e.place?bt.LngLat.convert(e.place):void 0,F=p?{place:`${p.lat},${p.lng}`}:{},{data:x,error:S}=await Ri({query:{...F,text:t(s),language:[Kt],mode:e.transitModes,type:e.type}});if(S){console.error("TYPEAHEAD ERROR: ",S);return}a(x.map(O=>({label:g(O),match:O})));const w=new Set;a(a().filter(O=>{const A=O.match?.type+O.label;return w.has(A)?!1:(w.add(A),!0)}))},T=E=>{const p=JSON.parse(E);return{match:p,label:g(p)}};Ze(()=>{o()&&(D(d,JSON.stringify(o().match),!0),D(s,o().label,!0))});let _=ce(null);Ze(()=>{t(_)&&t(s)&&(t(_).value=t(s))});let u;Ze(()=>{t(s)&&(clearTimeout(u),u=setTimeout(()=>{f()},150))});var h=Q(),L=y(h);de(L,()=>wo,(E,p)=>{p(E,{type:"single",allowDeselect:!1,get value(){return t(d)},onValueChange:F=>{F&&(o(T(F)),D(s,o().label,!0),r()(o()))},children:(F,x)=>{var S=Xi(),w=y(S);de(w,()=>Ro,(J,P)=>{P(J,{get placeholder(){return e.placeholder},get name(){return e.name},class:"flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",autocomplete:"off",oninput:C=>D(s,C.currentTarget.value,!0),get"aria-label"(){return e.placeholder},get"data-combobox-input"(){return t(s)},get ref(){return t(_)},set ref(C){D(_,C,!0)}})});var O=l(w,2);{var A=J=>{var P=Q(),C=y(P);de(C,()=>$a,(N,I)=>{I(N,{children:(X,re)=>{var j=Q(),B=y(j);de(B,()=>Gn,(te,$)=>{$(te,{align:"start",class:"absolute top-2 w-[var(--bits-combobox-anchor-width)] z-10 overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md outline-none",children:(Y,ne)=>{var ge=Q(),fe=y(ge);nt(fe,17,a,Re=>Re.match,(Re,he)=>{var Ie=Q(),Le=y(Ie);{let ze=M(()=>JSON.stringify(t(he).match));de(Le,()=>Un,(Ve,ee)=>{ee(Ve,{class:"flex w-full cursor-default select-none rounded-sm py-4 pl-4 pr-2 text-sm outline-none data-[disabled]:pointer-events-none data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground data-[disabled]:opacity-50",get value(){return t(ze)},get label(){return t(he).label},children:(q,De)=>{var xe=$i(),Se=y(xe),Ae=v(Se);{var Oe=ye=>{hn(ye,()=>t(he).match.modes?.length?t(he).match.modes[0]:"BUS")},Z=ye=>{var pe=Q(),Fe=y(pe);{var Ne=ue=>{Ao(ue,{class:"size-5"})},Ke=ue=>{var me=Q(),Ue=y(me);{var st=xt=>{var We=Q(),ct=y(We);{var Ct=ot=>{Po(ot,{class:"size-5"})},wt=ot=>{var pt=Zi();U(()=>{yt(pt,"src",`icons/${t(he).match?.category}.svg`),yt(pt,"alt",t(he).match?.category)}),n(ot,pt)};z(ct,ot=>{!t(he).match?.category||t(he).match?.category=="none"?ot(Ct):ot(wt,!1)})}n(xt,We)};z(Ue,xt=>{t(he).match?.type=="PLACE"&&xt(st)},!0)}n(ue,me)};z(Fe,ue=>{t(he).match?.type=="ADDRESS"?ue(Ne):ue(Ke,!1)},!0)}n(ye,pe)};z(Ae,ye=>{t(he).match?.type=="STOP"?ye(Oe):ye(Z,!1)})}var le=l(Ae,2),_e=v(le),ve=v(_e,!0);c(_e);var se=l(_e,2),we=v(se,!0);c(se),c(le),c(Se);var Ee=l(Se,2);{var be=ye=>{var pe=Ki();nt(pe,21,()=>t(he).match.modes,Nt,(Fe,Ne)=>{hn(Fe,()=>t(Ne))}),c(pe),n(ye,pe)};z(Ee,ye=>{t(he).match?.type=="STOP"&&ye(be)})}U(ye=>{G(ve,t(he).match?.name),G(we,ye)},[()=>m(t(he).match)]),n(q,xe)},$$slots:{default:!0}})})}n(Re,Ie)}),n(Y,ge)},$$slots:{default:!0}})}),n(X,j)},$$slots:{default:!0}})}),n(J,P)};z(O,J=>{a().length!==0&&J(A)})}n(F,S)},$$slots:{default:!0}})}),n(i,h),Ce()}var Ji=b('<span class="absolute right-2 flex size-3.5 items-center justify-center"><!></span> <!>',1);function Pr(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","value","label","children"]);var r=Q(),s=y(r);{const d=(g,f)=>{let T=()=>f?.().selected,_=()=>f?.().highlighted;var u=Ji(),h=y(u),L=v(h);{var E=S=>{Co(S,{class:"size-4"})};z(L,S=>{T()&&S(E)})}c(h);var p=l(h,2);{var F=S=>{var w=Q(),O=y(w);St(O,()=>e.children,()=>({selected:T(),highlighted:_()})),n(S,w)},x=S=>{var w=ke();U(()=>G(w,e.label||e.value)),n(S,w)};z(p,S=>{e.children?S(F):S(x,!1)})}n(g,u)};let m=M(()=>Ye("data-[highlighted]:bg-accent data-[highlighted]:text-accent-foreground relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e.class));de(s,()=>Un,(g,f)=>{f(g,Bt({get value(){return e.value},get class(){return t(m)}},()=>o,{get ref(){return a()},set ref(T){a(T)},children:d,$$slots:{default:!0}}))})}n(i,r),Ce()}var Qi=b("<!> <!> <!>",1);function Cr(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=H(e,"sideOffset",3,4),r=Rt(e,["$$slots","$$events","$$legacy","ref","class","sideOffset","portalProps","children"]);var s=Q(),d=y(s);de(d,()=>$a,(m,g)=>{g(m,Bt(()=>e.portalProps,{children:(f,T)=>{var _=Q(),u=y(_);{let h=M(()=>Ye("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 bg-popover text-popover-foreground relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e.class));de(u,()=>Gn,(L,E)=>{E(L,Bt({get sideOffset(){return o()},get class(){return t(h)}},()=>r,{get ref(){return a()},set ref(p){a(p)},children:(p,F)=>{var x=Qi(),S=y(x);de(S,()=>rs,(A,J)=>{J(A,{})});var w=l(S,2);{let A=M(()=>Ye("h-[var(--bits-select-anchor-height)] w-full min-w-[var(--bits-select-anchor-width)] p-1"));de(w,()=>Lo,(J,P)=>{P(J,{get class(){return t(A)},children:(C,N)=>{var I=Q(),X=y(I);St(X,()=>e.children??it),n(C,I)},$$slots:{default:!0}})})}var O=l(w,2);de(O,()=>ts,(A,J)=>{J(A,{})}),n(p,x)},$$slots:{default:!0}}))})}n(f,_)},$$slots:{default:!0}}))}),n(i,s),Ce()}var es=b("<!> <!>",1);function Lr(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Q(),s=y(r);{let d=M(()=>Ye("border-input ring-offset-background data-[placeholder]:text-muted-foreground focus:ring-ring flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border bg-transparent px-3 py-2 text-sm shadow-sm focus:outline-none focus:ring-1 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e.class));de(s,()=>Eo,(m,g)=>{g(m,Bt({get class(){return t(d)}},()=>o,{get ref(){return a()},set ref(f){a(f)},children:(f,T)=>{var _=es(),u=y(_);St(u,()=>e.children??it);var h=l(u,2);Ra(h,{class:"size-4 opacity-50"}),n(f,_)},$$slots:{default:!0}}))})}n(i,r),Ce()}function da(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=H(e,"orientation",3,"horizontal"),r=Rt(e,["$$slots","$$events","$$legacy","ref","class","orientation"]);var s=Q(),d=y(s);{let m=M(()=>Ye("bg-border shrink-0",o()==="horizontal"?"h-[1px] w-full":"min-h-full w-[1px]",e.class));de(d,()=>ko,(g,f)=>{f(g,Bt({get class(){return t(m)},get orientation(){return o()}},()=>r,{get ref(){return a()},set ref(T){a(T)}}))})}n(i,s),Ce()}function ts(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class"]);var r=Q(),s=y(r);{let d=M(()=>Ye("flex cursor-default items-center justify-center py-1",e.class));de(s,()=>Io,(m,g)=>{g(m,Bt({get class(){return t(d)}},()=>o,{get ref(){return a()},set ref(f){a(f)},children:(f,T)=>{Ra(f,{class:"size-4"})},$$slots:{default:!0}}))})}n(i,r),Ce()}function rs(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class"]);var r=Q(),s=y(r);{let d=M(()=>Ye("flex cursor-default items-center justify-center py-1",e.class));de(s,()=>So,(m,g)=>{g(m,Bt({get class(){return t(d)}},()=>o,{get ref(){return a()},set ref(f){a(f)},children:(f,T)=>{jn(f,{class:"size-4"})},$$slots:{default:!0}}))})}n(i,r),Ce()}const Er=Oo;var as=b('<div class="flex items-center space-x-3 my-2"><!> <!></div>');function Qr(i,e){Pe(e,!0);let a=H(e,"checked",15,!1);var o=as(),r=v(o);{let d=M(()=>Ye("peer inline-flex h-[21px] min-h-[21px] w-[45px] shrink-0 cursor-pointer items-center rounded-full px-[3px] transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-foreground focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-foreground data-[state=unchecked]:bg-border data-[state=unchecked]:shadow-mini-inset dark:data-[state=checked]:bg-foreground",e.class));de(r,()=>No,(m,g)=>{g(m,{get id(){return e.id},get disabled(){return e.disabled},get class(){return t(d)},get onCheckedChange(){return e.onCheckedChange},get checked(){return a()},set checked(f){a(f)},children:(f,T)=>{var _=Q(),u=y(_);de(u,()=>Fo,(h,L)=>{L(h,{class:"pointer-events-none block size-[15px] shrink-0 rounded-full bg-background transition-transform data-[state=checked]:translate-x-6 data-[state=unchecked]:translate-x-0 data-[state=unchecked]:shadow-mini dark:border dark:border-background/30 dark:bg-foreground dark:shadow-popover dark:data-[state=unchecked]:border"})}),n(f,_)},$$slots:{default:!0}})})}var s=l(r,2);de(s,()=>Bn,(d,m)=>{m(d,{get for(){return e.id},class:"text-sm font-medium",children:(g,f)=>{Ge();var T=ke();U(()=>G(T,e.label)),n(g,T)},$$slots:{default:!0}})}),c(o),n(i,o),Ce()}const Pt={time:void 0,fromPlace:void 0,toPlace:void 0,via:void 0,viaMinimumStay:void 0,arriveBy:!1,timetableView:!0,withFares:!1,searchWindow:900,pedestrianProfile:"FOOT",transitModes:["TRANSIT"],preTransitModes:["WALK"],postTransitModes:["WALK"],directModes:["WALK"],preTransitRentalFormFactors:[],postTransitRentalFormFactors:[],directRentalFormFactors:[],preTransitRentalProviderGroups:[],postTransitRentalProviderGroups:[],directRentalProviderGroups:[],preTransitRentalPropulsionTypes:[],postTransitRentalPropulsionTypes:[],directRentalPropulsionTypes:[],ignorePreTransitRentalReturnConstraints:!1,ignorePostTransitRentalReturnConstraints:!1,ignoreDirectRentalReturnConstraints:!1,requireBikeTransport:!1,requireCarTransport:!1,elevationCosts:"NONE",useRoutedTransfers:!1,joinInterlinedLegs:!0,maxMatchingDistance:25,maxTransfers:14,maxTravelTime:1800,maxPreTransitTime:900,maxPostTransitTime:900,maxDirectTime:1800,fastestDirectFactor:1,additionalTransferTime:0,transferTimeFactor:1,numItineraries:5,circleResolution:void 0,maxItineraries:void 0,passengers:1,luggage:0,slowDirect:!1,isochronesDisplayLevel:"GEOMETRY_CIRCLES",isochronesColor:"#ffff00",isochronesOpacity:250,algorithm:"PONG"},ns=i=>{const e={...i};return Object.keys(e).forEach(a=>{if(a in Pt){const o=e[a],r=Pt[a];JSON.stringify(o)===JSON.stringify(r)&&delete e[a]}else console.warn(`Unknown query parameter: ${a}`)}),e},pn=i=>{let e=Math.floor(i/60),a=Math.ceil(i-e*60);return a===60&&(e+=1,a=0),[e!==0?e+" h":"",a!==0||e===0?a+" min":""].join(" ").trim()},rr=i=>{let e=Math.floor(i/3600),a=Math.ceil((i-e*3600)/60);return a===60&&(e+=1,a=0),[e!==0?e+" h":"",a!==0||e===0?a+" min":""].join(" ").trim()},os=i=>{if(!i)return"";const e=Math.floor(i/1e3),a=e>5?0:Math.ceil(i-e*1e3);return[e!==0?e+" km":"",a!==0?a+" m":""].join(" ").trim()},va=["WALK","BIKE","CAR","FLEX","CAR_DROPOFF","CAR_PARKING","RENTAL_BICYCLE","RENTAL_CARGO_BICYCLE","RENTAL_CAR","RENTAL_MOPED","RENTAL_SCOOTER_STANDING","RENTAL_SCOOTER_SEATED","RENTAL_OTHER"],Da=(i,e)=>i.filter(a=>va.includes(a)).map(a=>a).concat(e.map(a=>`RENTAL_${a}`)),fa=i=>i.filter(e=>e.startsWith("RENTAL_")).map(e=>e.replace("RENTAL_","")),Kr=i=>{const e=i.some(o=>o.startsWith("RENTAL_"))?["RENTAL"]:[];return[...i.filter(o=>!o.startsWith("RENTAL_")),...e].map(o=>o)},ba=["AIRPLANE","HIGHSPEED_RAIL","LONG_DISTANCE","NIGHT_RAIL","COACH","REGIONAL_FAST_RAIL","REGIONAL_RAIL","SUBURBAN","SUBWAY","TRAM","BUS","FERRY","ODM","FUNICULAR","AERIAL_LIFT","OTHER"];var is=b('<div class="w-full text-right pr-4"> </div>'),ss=b('<div class="w-full text-right pr-2"> </div>'),ls=b("<!> <!>",1);function Wa(i,e){Pe(e,!0);let a=H(e,"value",15),o=H(e,"labelFormatter",3,g=>g.toString());var r=Q(),s=y(r),d=()=>a().toString(),m=g=>a(parseInt(g));de(s,()=>Er,(g,f)=>{f(g,{type:"single",get value(){return d()},set value(T){m(T)},get items(){return e.possibleValues},children:(T,_)=>{var u=ls(),h=y(u);de(h,()=>Lr,(E,p)=>{p(E,{class:"flex items-center w-full overflow-hidden","aria-label":"max travel time",children:(F,x)=>{var S=is(),w=v(S,!0);c(S),U(O=>G(w,O),[()=>o()(a())]),n(F,S)},$$slots:{default:!0}})});var L=l(h,2);de(L,()=>Cr,(E,p)=>{p(E,{align:"end",children:(F,x)=>{var S=Q(),w=y(S);nt(w,19,()=>e.possibleValues,(O,A)=>A+O.value,(O,A)=>{var J=Q(),P=y(J);de(P,()=>Pr,(C,N)=>{N(C,{get value(){return t(A).value},get label(){return t(A).label},children:(I,X)=>{var re=ss(),j=v(re,!0);c(re),U(()=>G(j,t(A).label)),n(I,re)},$$slots:{default:!0}})}),n(O,J)}),n(F,S)},$$slots:{default:!0}})}),n(T,u)},$$slots:{default:!0}})}),n(i,r),Ce()}const _n="BICYCLE",ds=["station","vehicle","cluster"],cs="icons/rental/",or={BICYCLE:{svg:"bike",station:"bike_station",vehicle:"floating_bike",cluster:"floating_bike_cluster",label:W.bike},CARGO_BICYCLE:{svg:"cargo_bike",station:"cargo_bike_station",vehicle:"floating_cargo_bike",cluster:"floating_cargo_bike_cluster",label:W.cargoBike},CAR:{svg:"car",station:"car_station",vehicle:"floating_car",cluster:"floating_car_cluster",label:W.car},MOPED:{svg:"moped",station:"moped_station",vehicle:"floating_moped",cluster:"floating_moped_cluster",label:W.moped},SCOOTER_SEATED:{svg:"seated_scooter",station:"seated_scooter_station",vehicle:"floating_seated_scooter",cluster:"floating_seated_scooter_cluster",label:W.scooterSeated},SCOOTER_STANDING:{svg:"scooter",station:"scooter_station",vehicle:"floating_scooter",cluster:"floating_scooter_cluster",label:W.scooterStanding},OTHER:{svg:"other",station:"other_station",vehicle:"floating_other",cluster:"floating_other_cluster",label:W.unknownVehicleType}},Jn={ELECTRIC:{component:cn,title:W.electric},ELECTRIC_ASSIST:{component:cn,title:W.electricAssist},HYBRID:{component:dn,title:W.hybrid},PLUG_IN_HYBRID:{component:dn,title:W.plugInHybrid},COMBUSTION:{component:Ea,title:W.combustion},COMBUSTION_DIESEL:{component:Ea,title:W.combustionDiesel},HYDROGEN_FUEL_CELL:{component:Ea,title:W.hydrogenFuelCell},HUMAN:null},Qn={ANY_STATION:{component:zo,title:W.returnOnlyAtStations},ROUNDTRIP_STATION:{component:Do,title:W.roundtripStationReturnConstraint},NONE:null},eo=(i,e)=>or[i][e],us=(i,e)=>`${cs}${eo(i,e)}.svg`,vs={station:{width:43,height:44},vehicle:{width:27,height:27},cluster:{width:35,height:36}},fs=i=>vs[i];async function ms(i,e,a){const o=await fetch(i);if(!o.ok)throw new Error(`Failed to load icon: ${o.status} ${o.statusText}`);const r=await o.text(),d=new DOMParser().parseFromString(r,"image/svg+xml");if(d.getElementsByTagName("parsererror").length>0)throw new Error("Invalid SVG content");const m=d.documentElement;if(!(m instanceof SVGSVGElement))throw new Error("Provided file is not an SVG");const g=m;g.getAttribute("xmlns")||g.setAttribute("xmlns","http://www.w3.org/2000/svg");const f=g.getAttribute("style"),T=`color: ${e}`,_=f?`${f};${T}`:T;g.setAttribute("style",_),g.setAttribute("color",e),g.setAttribute("width",`${a.width}`),g.setAttribute("height",`${a.height}`);const h=new XMLSerializer().serializeToString(d),L=new Blob([h],{type:"image/svg+xml;charset=utf-8"});if(typeof createImageBitmap=="function")try{return await createImageBitmap(L)}catch{}return await new Promise((E,p)=>{const F=URL.createObjectURL(L),x=new Image;x.crossOrigin="anonymous",x.decoding="async",x.onload=()=>{URL.revokeObjectURL(F),a&&(x.width=a.width,x.height=a.height),E(x)},x.onerror=()=>{URL.revokeObjectURL(F),p(new Error("Failed to load generated image"))},x.src=F})}const tn=i=>["interpolate",["linear"],["zoom"],14,i*.6,18,i],za=tn(1),gs=tn(12),hs=tn(10),ps=i=>["interpolate",["linear"],["zoom"],14,["literal",[i[0]*.8,i[1]*.9]],18,["literal",i]],yn=ps([.8,-1.25]),lr="#2563eb";var _s=b("<span> </span>"),ys=b("<!> <!>",1),bs=b("<!> <!>",1),Ts=b("<span> </span>"),xs=Hn('<svg class="h-4 w-4 fill-current" aria-hidden="true" focusable="false"><use></use></svg>'),ws=b('<div class="flex items-center gap-1"></div>'),Rs=b('<div class="flex w-full items-center justify-between gap-2"><span class="truncate"> </span> <!></div>'),As=b("<!> <!>",1),Ps=b('<div class="grid grid-cols-[1fr_2fr_1fr] items-center gap-2"><div class="text-sm"> </div> <!> <!> <div> </div> <div><!></div> <div><!></div></div>');function Ma(i,e){Pe(e,!0);let a=H(e,"modes",15),o=H(e,"maxTransitTime",15),r=H(e,"ignoreRentalReturnConstraints",15),s=H(e,"providerGroups",15);const d=e.possibleModes.map(j=>({value:j,label:W[j]})),m=Mo(()=>({queryKey:["rentalProviderGroups"],queryFn:async()=>{const{data:j,error:B}=await Zn({query:{withProviders:!1}});if(B)throw B;return j},staleTime:0})),g=M(()=>(m.data?.providerGroups||[]).map(j=>({id:j.id,name:j.name,color:j.color??lr,formFactors:j.formFactors})).sort((j,B)=>j.name.localeCompare(B.name))),f=M(()=>fa(a())),T=M(()=>t(f).length===0?t(g):t(g).filter(j=>j.formFactors.some(B=>t(f).includes(B)))),_=j=>j.some(B=>B.startsWith("RENTAL_")),u=M(()=>_(a()));Ze(()=>{if(!t(T).length)return;const j=Array.from(new Set(s()));if(j.length!==s().length){s(j);return}const B=new Set(t(T).map($=>$.id)),te=j.filter($=>B.has($));if(te.length!==j.length){s(te);return}te.length&&te.length===B.size&&s([])});const h=M(()=>d.filter(j=>a()?.includes(j.value)).map(j=>j.label).join(", ")),L=M(()=>{const j=t(T).filter(B=>s().includes(B.id)).map(B=>B.name);return j.length?j.join(", "):W.defaultSelectedProviders});var E=Ps(),p=v(E),F=v(p,!0);c(p);var x=l(p,2);de(x,()=>Er,(j,B)=>{B(j,{get disabled(){return e.disabled},type:"multiple",get value(){return a()},set value(te){a(te)},children:(te,$)=>{var Y=ys(),ne=y(Y);de(ne,()=>Lr,(fe,Re)=>{Re(fe,{class:"flex items-center w-full overflow-hidden",get"aria-label"(){return e.label},children:(he,Ie)=>{var Le=_s(),ze=v(Le,!0);c(Le),U(()=>G(ze,t(h))),n(he,Le)},$$slots:{default:!0}})});var ge=l(ne,2);de(ge,()=>Cr,(fe,Re)=>{Re(fe,{sideOffset:10,children:(he,Ie)=>{var Le=Q(),ze=y(Le);nt(ze,19,()=>e.possibleModes,(Ve,ee)=>ee+Ve,(Ve,ee)=>{var q=Q(),De=y(q);de(De,()=>Pr,(xe,Se)=>{Se(xe,{get value(){return t(ee)},get label(){return W[t(ee)]},children:(Ae,Oe)=>{Ge();var Z=ke();U(()=>G(Z,W[t(ee)])),n(Ae,Z)},$$slots:{default:!0}})}),n(Ve,q)}),n(he,Le)},$$slots:{default:!0}})}),n(te,Y)},$$slots:{default:!0}})});var S=l(x,2),w=()=>o().toString(),O=j=>o(parseInt(j));de(S,()=>Er,(j,B)=>{B(j,{get disabled(){return e.disabled},type:"single",get value(){return w()},set value(te){O(te)},children:(te,$)=>{var Y=bs(),ne=y(Y);de(ne,()=>Lr,(fe,Re)=>{Re(fe,{class:"flex items-center w-full overflow-hidden",get"aria-label"(){return W.routingSegments.maxPreTransitTime},children:(he,Ie)=>{Ge();var Le=ke();U(ze=>G(Le,ze),[()=>rr(o())]),n(he,Le)},$$slots:{default:!0}})});var ge=l(ne,2);de(ge,()=>Cr,(fe,Re)=>{Re(fe,{sideOffset:10,children:(he,Ie)=>{var Le=Q(),ze=y(Le);nt(ze,16,()=>e.possibleMaxTransitTime,Ve=>Ve,(Ve,ee)=>{var q=Q(),De=y(q);{let xe=M(()=>`${ee}`),Se=M(()=>rr(ee));de(De,()=>Pr,(Ae,Oe)=>{Oe(Ae,{get value(){return t(xe)},get label(){return t(Se)},children:(Z,le)=>{Ge();var _e=ke();U(ve=>G(_e,ve),[()=>rr(ee)]),n(Z,_e)},$$slots:{default:!0}})})}n(Ve,q)}),n(he,Le)},$$slots:{default:!0}})}),n(te,Y)},$$slots:{default:!0}})});var A=l(S,2),J=v(A,!0);c(A);var P=l(A,2),C=v(P);de(C,()=>Er,(j,B)=>{B(j,{get disabled(){return e.disabled},type:"multiple",get value(){return s()},set value(te){s(te)},children:(te,$)=>{var Y=As(),ne=y(Y);de(ne,()=>Lr,(fe,Re)=>{Re(fe,{class:"flex items-center w-full overflow-hidden",get"aria-label"(){return W.sharingProviders},children:(he,Ie)=>{var Le=Ts(),ze=v(Le,!0);c(Le),U(()=>G(ze,t(L))),n(he,Le)},$$slots:{default:!0}})});var ge=l(ne,2);de(ge,()=>Cr,(fe,Re)=>{Re(fe,{sideOffset:10,class:"max-w-[100svw]",children:(he,Ie)=>{var Le=Q(),ze=y(Le);nt(ze,17,()=>t(T),Ve=>Ve.id,(Ve,ee)=>{var q=Q(),De=y(q);de(De,()=>Pr,(xe,Se)=>{Se(xe,{get value(){return t(ee).id},get label(){return t(ee).name},children:(Ae,Oe)=>{var Z=Rs(),le=v(Z),_e=v(le,!0);c(le);var ve=l(le,2);{var se=we=>{var Ee=ws();nt(Ee,20,()=>Array.from(new Set(t(ee).formFactors.map(be=>or[be].svg))).sort(),be=>be,(be,ye)=>{var pe=xs(),Fe=v(pe);c(pe),U(()=>yt(Fe,"href",`#${ye}`)),n(be,pe)}),c(Ee),U(()=>hr(Ee,`color: ${t(ee).color}`)),n(we,Ee)};z(ve,we=>{t(ee).formFactors.length&&we(se)})}c(Z),U(()=>G(_e,t(ee).name)),n(Ae,Z)},$$slots:{default:!0}})}),n(Ve,q)}),n(he,Le)},$$slots:{default:!0}})}),n(te,Y)},$$slots:{default:!0}})}),c(P);var N=l(P,2),I=v(N),X=()=>!r(),re=j=>r(!j);Qr(I,{get disabled(){return e.disabled},get checked(){return X()},set checked(j){re(j)},get label(){return W.considerRentalReturnConstraints},id:"ignorePreTransitRentalReturnConstraints"}),c(N),c(E),U((j,B,te)=>{G(F,e.label),Et(A,1,j),G(J,W.sharingProviders),Et(P,1,B),Et(N,1,te)},[()=>nr(Ye("text-sm",t(u)||"hidden")),()=>nr(Ye("col-span-2 col-start-2",t(u)||"hidden")),()=>nr(Ye("col-span-2 col-start-2",t(u)||"hidden"))]),n(i,E),Ce()}var Cs=b("<!> ",1),Ls=b("<!> <!>",1);function Es(i,e){Pe(e,!0);let a=H(e,"transitModes",15);const o=ba.map(m=>({value:m,label:W[m]})),r=M(()=>a().length==ba.length||a().includes("TRANSIT")?W.defaultSelectedModes:o.filter(m=>a()?.includes(m.value)).map(m=>m.label).join(", "));var s=Q(),d=y(s);de(d,()=>Er,(m,g)=>{g(m,{type:"multiple",get value(){return a()},set value(f){a(f)},children:(f,T)=>{var _=Ls(),u=y(_);de(u,()=>Lr,(L,E)=>{E(L,{class:"flex items-center w-full overflow-hidden",get"aria-label"(){return W.selectTransitModes},children:(p,F)=>{var x=Cs(),S=y(x);Bo(S,{class:"mr-[9px] size-6 text-muted-foreground shrink-0"});var w=l(S);U(()=>G(w,` ${t(r)??""}`)),n(p,x)},$$slots:{default:!0}})});var h=l(u,2);de(h,()=>Cr,(L,E)=>{E(L,{sideOffset:10,children:(p,F)=>{var x=Q(),S=y(x);nt(S,19,()=>o,(w,O)=>O+w.value,(w,O)=>{var A=Q(),J=y(A);de(J,()=>Pr,(P,C)=>{C(P,{get value(){return t(O).value},get label(){return t(O).label},children:(N,I)=>{Ge();var X=ke();U(()=>G(X,t(O).label)),n(N,X)},$$slots:{default:!0}})}),n(w,A)}),n(p,x)},$$slots:{default:!0}})}),n(f,_)},$$slots:{default:!0}})}),n(i,s),Ce()}const Ta=i=>{const e=[];let a=1;for(;a<=i/60;)e.push(a*60),a<5?a+=4:a<30?a+=5:a<60?a+=10:a<120?a+=30:a+=60;return e[e.length-1]!==i&&e.push(i),e};var ks=b('<div class="flex gap-2 items-start"><div class="grow flex flex-col gap-1"><div class="flex gap-2"><div class="grow"><!></div> <div class="w-24"><!></div></div></div> <!></div>'),Is=b('<div class="space-y-2"><div class="flex items-center justify-between"><div class="text-sm"> </div> <!></div> <div class="space-y-2"></div></div>');function Ss(i,e){Pe(e,!0);let a=H(e,"via",15),o=H(e,"viaMinimumStay",15),r=H(e,"viaLabels",15);const s=M(()=>[0,...Ta(7200)]),d=M(()=>t(s).map(p=>({value:(p/60).toString(),label:pn(p/60)})));let m=ce($e(a()?.map((p,F)=>({match:a()[F],stay:o()?.[F]??0}))??[]));const g=()=>{t(m).push({stay:0,match:{label:"",match:void 0}})},f=p=>{D(m,t(m).filter((F,x)=>x!==p),!0)};Ze(()=>{const p=t(m).filter(A=>A.match?.match?.id).map(A=>Wt(A)),F=Wt(a()),x=p.length>0?p.map(A=>A.match):void 0;JSON.stringify(x)!=JSON.stringify(F)&&a(x);const S=Wt(o()),w=p.length>0?p.map(A=>A.stay):void 0;JSON.stringify(w)!=JSON.stringify(S)&&o(w);const O={};p.forEach((A,J)=>{O[`viaLabel${J}`]=A.match.label}),Object.keys(r()).forEach(A=>{A in O||delete r()[A]}),Object.keys(O).forEach(A=>{r()[A]!==O[A]&&r(r()[A]=O[A],!0)})});var T=Is(),_=v(T),u=v(_),h=v(u,!0);c(u);var L=l(u,2);{let p=M(()=>t(m).length>=2);at(L,{variant:"outline",onclick:g,get disabled(){return t(p)},children:(F,x)=>{Ge();var S=ke();U(()=>G(S,W.addViaStop)),n(F,S)},$$slots:{default:!0}})}c(_);var E=l(_,2);nt(E,21,()=>t(m),Nt,(p,F,x)=>{var S=ks(),w=v(S),O=v(w),A=v(O),J=v(A);ia(J,{get placeholder(){return W.viaStop},name:`via-${x}`,type:"STOP",get selected(){return t(m)[x].match},set selected(I){t(m)[x].match=I}}),c(A);var P=l(A,2),C=v(P);Wa(C,{get possibleValues(){return t(d)},get labelFormatter(){return pn},get value(){return t(m)[x].stay},set value(I){t(m)[x].stay=I}}),c(P),c(O),c(w);var N=l(w,2);at(N,{variant:"ghost",size:"icon",onclick:()=>f(x),get"aria-label"(){return W.removeViaStop},children:(I,X)=>{Rr(I,{class:"size-4"})},$$slots:{default:!0}}),c(S),n(p,S)}),c(E),c(T),U(()=>G(h,W.viaStops)),n(i,T),Ce()}var Os=b(" <!>",1),Fs=b('<div class="text-sm"> </div> <!>',1),Ns=b("<!> <!>",1),Ds=b('<div class="w-full space-y-4"><!> <div class="space-y-2"><!> <!> <!> <!> <!> <div><div class="text-sm"> </div> <!> <!></div> <!> <!> <!></div> <div class="grid grid-cols-2 items-center"><div class="text-sm"> </div> <!></div> <!></div>'),zs=b("<!> <!>",1);function to(i,e){Pe(e,!0);let a=H(e,"useRoutedTransfers",15),o=H(e,"wheelchair",15),r=H(e,"requireBikeTransport",15),s=H(e,"requireCarTransport",15),d=H(e,"transitModes",15),m=H(e,"maxTransfers",15),g=H(e,"maxTravelTime",15,void 0),f=H(e,"possibleMaxTravelTimes",19,()=>[]),T=H(e,"preTransitModes",15),_=H(e,"postTransitModes",15),u=H(e,"directModes",15,void 0),h=H(e,"maxPreTransitTime",15),L=H(e,"maxPostTransitTime",15),E=H(e,"maxDirectTime",15,void 0),p=H(e,"elevationCosts",15),F=H(e,"ignorePreTransitRentalReturnConstraints",15),x=H(e,"ignorePostTransitRentalReturnConstraints",15),S=H(e,"ignoreDirectRentalReturnConstraints",15),w=H(e,"preTransitProviderGroups",15),O=H(e,"postTransitProviderGroups",15),A=H(e,"directProviderGroups",15),J=H(e,"via",15),P=H(e,"viaMinimumStay",15),C=H(e,"viaLabels",15);const N=[...Array(Pt.maxTransfers+1).keys()].map(he=>({value:he.toString(),label:he.toString()})),I=M(()=>Ta(e.serverConfig?.maxDirectTimeLimit??3600)),X=M(()=>Ta(e.serverConfig?.maxPrePostTransitTimeLimit??3600));function re(he){return function(Ie){Ie&&(T([he]),_([he]),u([he]))}}d().includes("TRANSIT")&&d([...ba]),r()&&re("BIKE")(!0),s()&&re("CAR")(!0);const j=[{value:"NONE",label:W.elevationCosts.NONE},{value:"LOW",label:W.elevationCosts.LOW},{value:"HIGH",label:W.elevationCosts.HIGH}];let B=ce(!1),te=M(()=>e.serverConfig?.hasElevation&&(r()||T().includes("BIKE")||_().includes("BIKE")||u()?.includes("BIKE"))),$=M(()=>e.serverConfig?.hasStreetRouting),Y=M(()=>e.serverConfig?.hasRoutedTransfers);var ne=zs(),ge=y(ne);at(ge,{variant:"ghost",onclick:()=>D(B,!t(B)),children:(he,Ie)=>{Ge();var Le=Os(),ze=y(Le),Ve=l(ze);{var ee=De=>{jn(De,{class:"size-[18px]"})},q=De=>{Ra(De,{class:"size-[18px]"})};z(Ve,De=>{t(B)?De(ee):De(q,!1)})}U(()=>G(ze,`${W.advancedSearchOptions??""} `)),n(he,Le)},$$slots:{default:!0}});var fe=l(ge,2);{var Re=he=>{var Ie=Ds(),Le=v(Ie);Es(Le,{get transitModes(){return d()},set transitModes(ue){d(ue)}});var ze=l(Le,2),Ve=v(ze);{let ue=M(()=>!t(Y));Qr(Ve,{get disabled(){return t(ue)},get label(){return W.useRoutedTransfers},id:"useRoutedTransfers",onCheckedChange:me=>{o()&&!me&&o(!1)},get checked(){return a()},set checked(me){a(me)}})}var ee=l(Ve,2);{let ue=M(()=>!t(Y));Qr(ee,{get disabled(){return t(ue)},get label(){return W.wheelchair},id:"wheelchair",onCheckedChange:me=>{me&&!a()&&a(!0)},get checked(){return o()},set checked(me){o(me)}})}var q=l(ee,2);{let ue=M(()=>re("BIKE"));Qr(q,{get label(){return W.requireBikeTransport},get onCheckedChange(){return t(ue)},id:"requireBikeTransport",get checked(){return r()},set checked(me){r(me)}})}var De=l(q,2);{let ue=M(()=>!t(Y));Qr(De,{get disabled(){return t(ue)},get label(){return W.requireCarTransport},id:"requireCarTransport",onCheckedChange:me=>{me&&!a()&&t(Y)&&a(!0),re("CAR")(me)},get checked(){return s()},set checked(me){s(me)}})}var xe=l(De,2);Ss(xe,{get via(){return J()},set via(ue){J(ue)},get viaMinimumStay(){return P()},set viaMinimumStay(ue){P(ue)},get viaLabels(){return C()},set viaLabels(ue){C(ue)}});var Se=l(xe,2),Ae=v(Se),Oe=v(Ae,!0);c(Ae);var Z=l(Ae,2);Wa(Z,{get possibleValues(){return N},get value(){return m()},set value(ue){m(ue)}});var le=l(Z,2);{var _e=ue=>{var me=Fs(),Ue=y(me),st=v(Ue,!0);c(Ue);var xt=l(Ue,2);Wa(xt,{get possibleValues(){return f()},get labelFormatter(){return rr},get value(){return g()},set value(We){g(We)}}),U(()=>G(st,W.routingSegments.maxTravelTime)),n(ue,me)};z(le,ue=>{g()!==void 0&&ue(_e)})}c(Se);var ve=l(Se,2);{let ue=M(()=>!t($));Ma(ve,{get label(){return W.routingSegments.firstMile},get disabled(){return t(ue)},get possibleModes(){return va},get possibleMaxTransitTime(){return t(X)},get modes(){return T()},set modes(me){T(me)},get maxTransitTime(){return h()},set maxTransitTime(me){h(me)},get ignoreRentalReturnConstraints(){return F()},set ignoreRentalReturnConstraints(me){F(me)},get providerGroups(){return w()},set providerGroups(me){w(me)}})}var se=l(ve,2);{let ue=M(()=>!t($));Ma(se,{get label(){return W.routingSegments.lastMile},get disabled(){return t(ue)},get possibleModes(){return va},get possibleMaxTransitTime(){return t(X)},get modes(){return _()},set modes(me){_(me)},get maxTransitTime(){return L()},set maxTransitTime(me){L(me)},get ignoreRentalReturnConstraints(){return x()},set ignoreRentalReturnConstraints(me){x(me)},get providerGroups(){return O()},set providerGroups(me){O(me)}})}var we=l(se,2);{var Ee=ue=>{{let me=M(()=>!t($));Ma(ue,{get label(){return W.routingSegments.direct},get disabled(){return t(me)},get possibleModes(){return va},get possibleMaxTransitTime(){return t(I)},get modes(){return u()},set modes(Ue){u(Ue)},get maxTransitTime(){return E()},set maxTransitTime(Ue){E(Ue)},get ignoreRentalReturnConstraints(){return S()},set ignoreRentalReturnConstraints(Ue){S(Ue)},get providerGroups(){return A()},set providerGroups(Ue){A(Ue)}})}};z(we,ue=>{u()!==void 0&&E()!==void 0&&S()!==void 0&&ue(Ee)})}c(ze);var be=l(ze,2),ye=v(be),pe=v(ye,!0);c(ye);var Fe=l(ye,2);{let ue=M(()=>!t(te)||!t($));de(Fe,()=>Er,(me,Ue)=>{Ue(me,{get disabled(){return t(ue)},type:"single",get value(){return p()},set value(st){p(st)},children:(st,xt)=>{var We=Ns(),ct=y(We);de(ct,()=>Lr,(wt,ot)=>{ot(wt,{get"aria-label"(){return W.selectElevationCosts},children:(pt,Dt)=>{Ge();var Ht=ke();U(()=>G(Ht,W.elevationCosts[p()])),n(pt,Ht)},$$slots:{default:!0}})});var Ct=l(ct,2);de(Ct,()=>Cr,(wt,ot)=>{ot(wt,{sideOffset:10,children:(pt,Dt)=>{var Ht=Q(),Ut=y(Ht);nt(Ut,19,()=>j,(Gt,jt)=>jt+Gt.value,(Gt,jt)=>{var Yt=Q(),$t=y(Yt);de($t,()=>Pr,(Vt,qt)=>{qt(Vt,{get value(){return t(jt).value},get label(){return t(jt).label},children:(Zt,R)=>{Ge();var k=ke();U(()=>G(k,t(jt).label)),n(Zt,k)},$$slots:{default:!0}})}),n(Gt,Yt)}),n(pt,Ht)},$$slots:{default:!0}})}),n(st,We)},$$slots:{default:!0}})})}c(be);var Ne=l(be,2);{var Ke=ue=>{var me=Q(),Ue=y(me);St(Ue,()=>e.additionalComponents),n(ue,me)};z(Ne,ue=>{e.additionalComponents&&ue(Ke)})}c(Ie),U(()=>{Et(Se,1,`grid ${g()===void 0?"grid-cols-2":"grid-cols-4"} items-center gap-2`),G(Oe,W.routingSegments.maxTransfers),G(pe,W.selectElevationCosts)}),n(he,Ie)};z(fe,he=>{t(B)&&he(Re)})}n(i,ne),Ce()}var Ms=b('<input type="datetime-local"/>');function xa(i,e){Pe(e,!0);let a=H(e,"value",15),o;Ze(()=>{if(o!==void 0){a().setSeconds(0,0);const s=new Date(a().getTime()-a().getTimezoneOffset()*6e4).toISOString().slice(0,-1);o.value=s}});var r=Ms();r.__change=s=>{const d=s.target.value,m=new Date(`${d}Z`);isNaN(m.getTime())||a(new Date(m.getTime()+m.getTimezoneOffset()*6e4))},Mt(r,s=>o=s,()=>o),U(s=>Et(r,1,s),[()=>nr(Ye("flex h-9 rounded-md border border-input bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e.class))]),n(i,r),Ce()}Yr(["change"]);var Bs=b("<!> <span> </span>",1),Gs=b("<!> <span> </span>",1),Us=b("<!> <!>",1),js=b('<div id="searchmask-container" class="flex flex-col space-y-4 p-4 relative"><!> <!> <!> <!> <div class="flex flex-row gap-2 flex-wrap"><!> <!> <!></div></div>');function Hs(i,e){Pe(e,!0);let a=H(e,"from",15),o=H(e,"to",15),r=H(e,"time",15),s=H(e,"arriveBy",15),d=H(e,"pedestrianProfile",15),m=H(e,"useRoutedTransfers",15),g=H(e,"maxTransfers",15),f=H(e,"requireCarTransport",15),T=H(e,"requireBikeTransport",15),_=H(e,"transitModes",15),u=H(e,"preTransitModes",15),h=H(e,"postTransitModes",15),L=H(e,"directModes",15),E=H(e,"elevationCosts",15),p=H(e,"maxPreTransitTime",15),F=H(e,"maxPostTransitTime",15),x=H(e,"maxDirectTime",15),S=H(e,"ignorePreTransitRentalReturnConstraints",15),w=H(e,"ignorePostTransitRentalReturnConstraints",15),O=H(e,"ignoreDirectRentalReturnConstraints",15),A=H(e,"preTransitProviderGroups",15),J=H(e,"postTransitProviderGroups",15),P=H(e,"directProviderGroups",15),C=H(e,"via",15),N=H(e,"viaMinimumStay",15),I=H(e,"viaLabels",15),X=ce($e([])),re=ce($e([]));const j=()=>{navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(B,q=>console.log(q),{enableHighAccuracy:!0})},B=q=>{a(Ft({lat:q.coords.latitude,lon:q.coords.longitude},0))};var te=js(),$=v(te);ia($,{get place(){return e.geocodingBiasPlace},name:"from",get placeholder(){return W.from},get transitModes(){return _()},get selected(){return a()},set selected(q){a(q)},get items(){return t(X)},set items(q){D(X,q,!0)}});var Y=l($,2);ia(Y,{get place(){return e.geocodingBiasPlace},name:"to",get placeholder(){return W.to},get transitModes(){return _()},get selected(){return o()},set selected(q){o(q)},get items(){return t(re)},set items(q){D(re,q,!0)}});var ne=l(Y,2);at(ne,{variant:"ghost",class:"absolute z-10 right-4 top-0",size:"icon",onclick:()=>j(),children:(q,De)=>{Xa(q,{class:"w-5 h-5"})},$$slots:{default:!0}});var ge=l(ne,2);at(ge,{class:"absolute z-10 right-14 top-6",variant:"outline",size:"icon",onclick:()=>{const q=o();o(a()),a(q);const De=t(re);D(re,t(X),!0),D(X,De,!0)},children:(q,De)=>{Go(q,{class:"w-5 h-5"})},$$slots:{default:!0}});var fe=l(ge,2),Re=v(fe);xa(Re,{get value(){return r()},set value(q){r(q)}});var he=l(Re,2),Ie=()=>s()?"arrival":"departure",Le=q=>s(q==="arrival");de(he,()=>en,(q,De)=>{De(q,{class:"flex",get value(){return Ie()},set value(xe){Le(xe)},children:(xe,Se)=>{var Ae=Us(),Oe=y(Ae);oa(Oe,{for:"departure",class:"flex items-center rounded-md border-2 border-muted bg-popover p-1 px-2 hover:bg-accent hover:text-accent-foreground [&:has([data-state=checked])]:border-blue-600 hover:cursor-pointer",children:(le,_e)=>{var ve=Bs(),se=y(ve);de(se,()=>na,(be,ye)=>{ye(be,{value:"departure",id:"departure",class:"sr-only",get"aria-label"(){return W.departure}})});var we=l(se,2),Ee=v(we,!0);c(we),U(()=>G(Ee,W.departure)),n(le,ve)},$$slots:{default:!0}});var Z=l(Oe,2);oa(Z,{for:"arrival",class:"flex items-center rounded-md border-2 border-muted bg-popover p-1 px-2 hover:bg-accent hover:text-accent-foreground [&:has([data-state=checked])]:border-blue-600 hover:cursor-pointer",children:(le,_e)=>{var ve=Gs(),se=y(ve);de(se,()=>na,(be,ye)=>{ye(be,{value:"arrival",id:"arrival",class:"sr-only",get"aria-label"(){return W.arrival}})});var we=l(se,2),Ee=v(we,!0);c(we),U(()=>G(Ee,W.arrival)),n(le,ve)},$$slots:{default:!0}}),n(xe,Ae)},$$slots:{default:!0}})});var ze=l(he,2),Ve=()=>d()==="WHEELCHAIR",ee=q=>d(q?"WHEELCHAIR":"FOOT");to(ze,{get serverConfig(){return e.serverConfig},get wheelchair(){return Ve()},set wheelchair(q){ee(q)},maxTravelTime:void 0,get useRoutedTransfers(){return m()},set useRoutedTransfers(q){m(q)},get requireCarTransport(){return f()},set requireCarTransport(q){f(q)},get maxTransfers(){return g()},set maxTransfers(q){g(q)},get requireBikeTransport(){return T()},set requireBikeTransport(q){T(q)},get transitModes(){return _()},set transitModes(q){_(q)},get preTransitModes(){return u()},set preTransitModes(q){u(q)},get postTransitModes(){return h()},set postTransitModes(q){h(q)},get directModes(){return L()},set directModes(q){L(q)},get maxPreTransitTime(){return p()},set maxPreTransitTime(q){p(q)},get maxPostTransitTime(){return F()},set maxPostTransitTime(q){F(q)},get maxDirectTime(){return x()},set maxDirectTime(q){x(q)},get elevationCosts(){return E()},set elevationCosts(q){E(q)},get ignorePreTransitRentalReturnConstraints(){return S()},set ignorePreTransitRentalReturnConstraints(q){S(q)},get ignorePostTransitRentalReturnConstraints(){return w()},set ignorePostTransitRentalReturnConstraints(q){w(q)},get ignoreDirectRentalReturnConstraints(){return O()},set ignoreDirectRentalReturnConstraints(q){O(q)},get preTransitProviderGroups(){return A()},set preTransitProviderGroups(q){A(q)},get postTransitProviderGroups(){return J()},set postTransitProviderGroups(q){J(q)},get directProviderGroups(){return P()},set directProviderGroups(q){P(q)},get via(){return C()},set via(q){C(q)},get viaMinimumStay(){return N()},set viaMinimumStay(q){N(q)},get viaLabels(){return I()},set viaLabels(q){I(q)}}),c(fe),c(te),n(i,te),Ce()}const ro=i=>{const e=()=>{kt.state.scrollY=i.scrollTop,zn("",kt.state)},a=o=>{requestAnimationFrame(()=>{i.scrollTop=o.state?.["sveltekit:states"]?.scrollY??0})};return i.addEventListener("scrollend",e),window.addEventListener("popstate",a),()=>{i.removeEventListener("scrollend",e),window.removeEventListener("popstate",a)}},Vs=i=>{kt.state.scrollY==null&&(i.scrollTop=0)};var Ws=b("<div><!></div>");function dr(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","children"]);sa(()=>{if(!(window.innerWidth<768)&&a().classList.contains("scrollable"))return ro(a())});var r=Ws();ar(r,d=>({class:d,...o}),[()=>Ye("bg-card text-card-foreground rounded-xl border shadow max-w-full",e.class)]);var s=v(r);St(s,()=>e.children??it),c(r),Mt(r,d=>a(d),()=>a()),n(i,r),Ce()}var Ys=b("<div><!></div>");function qs(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Ys();ar(r,d=>({class:d,...o}),[()=>Ye("p-6",e.class)]);var s=v(r);St(s,()=>e.children??it),c(r),Mt(r,d=>a(d),()=>a()),n(i,r),Ce()}var Zs=b('<div class="p-4 my-4 mx-auto min-w-96 max-w-fit flex flex-col items-center gap-5 rounded-lg border border-destructive/20"><div class="flex items-center gap-4 mx-auto"><!> <h2 class="text-xl font-semibold text-destructive"> </h2></div> <p class="text-lg text-muted-foreground max-w-[40ch] break-words"> </p></div>');function kr(i,e){const a=u=>{switch(u){case 200:return"OK";case 400:return"Bad Request";case 404:return"Not Found";case 500:return"Internal Server Error";case 422:return"Unprocessable Entity";default:return"Unknown"}};let r=$e((u=>{switch(u){case 200:return Ho;case 400:return jo;case 404:return un;case 422:case 500:return Uo;default:return un}})(e.status??404));var s=Zs(),d=v(s),m=v(d);de(m,()=>r,(u,h)=>{h(u,{class:"h-7 w-7 text-destructive"})});var g=l(m,2),f=v(g);c(g),c(d);var T=l(d,2),_=v(T,!0);c(T),c(s),U(u=>{G(f,`${e.status??""}
			${u??""}`),G(_,e.message)},[()=>a(e.status??404)]),n(i,s)}const cr=(i,e)=>i.toLocaleTimeString(Kt,{hour:"numeric",minute:"numeric",timeZone:e,hour12:!1}),Ks=(i,e)=>i.toLocaleDateString(Kt,{day:"numeric",month:"numeric",year:"numeric",timeZone:e}),bn=(i,e)=>i.toLocaleDateString(Kt,{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric",timeZone:e}),$s=(i,e)=>{const a=new Intl.DateTimeFormat(Kt,{timeZone:e,timeZoneName:"shortOffset"}).formatToParts(i).find(r=>r.type==="timeZoneName").value;return new Intl.DateTimeFormat(Kt,{timeZoneName:"shortOffset"}).formatToParts(i).find(r=>r.type==="timeZoneName").value==a?void 0:a};var Xs=b('<div> </div> <div class="text-xs font-normal"> </div>',1),Js=b('<div class="text-xs font-normal"> </div>'),Qs=b("<span> </span> <!>",1),el=b("<div><!></div>");function Wr(i,e){Pe(e,!0);const a=M(()=>new Date(e.timestamp)),o=M(()=>new Date(e.scheduledTimestamp)),r=M(()=>(t(a).getTime()-t(o).getTime())/6e4),s=M(()=>e.isRealtime&&t(r)>3),d=M(()=>e.isRealtime&&t(r)<=3),m=M(()=>e.isRealtime&&t(r)<=-1),g=M(()=>e.arriveBy?t(s):t(s)||t(m)),f=M(()=>e.arriveBy?t(d):t(d)&&!t(m)),T=M(()=>t(o)instanceof Date&&!isNaN(t(o).getTime())),_=M(()=>t(T)?new Intl.DateTimeFormat(Kt,{timeZone:e.timeZone,timeZoneName:"shortOffset"}).formatToParts(t(o)).find(x=>x.type==="timeZoneName").value:void 0),u=M(()=>()=>t(T)?new Intl.DateTimeFormat(Kt,{timeZoneName:"shortOffset"}).formatToParts(t(o)).find(x=>x.type==="timeZoneName").value==t(_):!1);function h(x){return e.variant==="realtime"?"":e.queriedTime===void 0?x.toLocaleDateString(Kt,{timeZone:e.timeZone}):new Date(e.queriedTime).toLocaleDateString()===x.toLocaleDateString()?"":`(${x.toLocaleString(Kt,{weekday:"short",timeZone:e.timeZone})})`}var L=el(),E=v(L);{var p=x=>{var S=Xs(),w=y(S),O=v(w);c(w);var A=l(w,2),J=v(A,!0);c(A),U((P,C,N)=>{G(O,`${P??""}
			${C??""}`),G(J,N)},[()=>cr(t(o),e.timeZone),()=>h(t(o)),()=>t(u)()?"":t(_)]),n(x,S)},F=x=>{var S=Q(),w=y(S);{var O=A=>{var J=Qs(),P=y(J);let C;var N=v(P);c(P);var I=l(P,2);{var X=re=>{var j=Js(),B=v(j,!0);c(j),U(te=>G(B,te),[()=>t(u)()?"":t(_)]),n(re,j)};z(I,re=>{e.variant==="realtime-show-always"&&!t(u)()&&re(X)})}U((re,j)=>{C=Et(P,1,"",null,C,{"text-destructive":t(g),"text-green-600":t(f)}),G(N,`${re??""}
			${j??""}`)},[()=>cr(t(a),e.timeZone),()=>h(t(a))]),n(A,J)};z(w,A=>{(e.variant==="realtime-show-always"||e.variant==="realtime"&&e.isRealtime)&&A(O)},!0)}n(x,S)};z(E,x=>{e.variant=="schedule"?x(p):x(F,!1)})}c(L),U(x=>{Et(L,1,x),yt(L,"title",t(_))},[()=>nr(Ye("text-nowrap flex flex-col",e.class))]),n(i,L),Ce()}var tl=Hn('<svg class="relative mr-1 w-4 h-4 rounded-full"><use></use></svg>'),rl=b('<div class="flex items-center py-1 px-2 rounded-lg font-bold text-sm h-8 text-nowrap"><!> </div>');function al(i,e){Pe(e,!0);const a=Rt(e,["$$slots","$$events","$$legacy","d"]),o=[...new Map(e.d.legs.map(s=>[JSON.stringify(Ir(s)),Ir(s)])).values()],r=e.d.legs.find(s=>s.mode!=="WALK")??e.d.legs[0];at(i,Bt({variant:"child"},()=>a,{children:(s,d)=>{var m=rl(),g=v(m);nt(g,17,()=>o,Nt,(T,_)=>{var u=M(()=>Vn(t(_),3));let h=()=>t(u)[0];var L=tl(),E=v(L);c(L),U(()=>wa(E,"xlink:href",`#${h()}`)),n(T,L)});var f=l(g);c(m),U((T,_)=>{hr(m,T),G(f,` ${_??""}`)},[()=>Ca(r),()=>rr(e.d.duration)]),n(s,m)},$$slots:{default:!0}})),Ce()}const nl=(i,e=it)=>{var a=ol(),o=v(a),r=v(o);c(o);var s=l(o,2);{var d=g=>{var f=ke();U(()=>G(f,e().displayName)),n(g,f)},m=g=>{var f=ke();U(T=>G(f,T),[()=>rr(e().duration)]),n(g,f)};z(s,g=>{e().displayName?g(d):g(m,!1)})}c(a),U((g,f)=>{hr(a,g),wa(r,"xlink:href",f)},[()=>Ca(e()),()=>`#${Ir(e())[0]}`]),n(i,a)};var ol=b('<div class="flex items-center py-1 px-2 rounded-lg font-bold text-sm h-8 text-nowrap"><svg class="relative mr-1 w-4 h-4 rounded-full"><use></use></svg> <!></div>'),il=b('<div class="my-4 flex flex-wrap gap-x-3 gap-y-3"></div>'),sl=b('<div class="w-full flex justify-between items-center space-x-4"><div class="border-t w-full h-0"></div> <button class="px-2 py-1 bg-blue-600 hover:!bg-blue-700 text-white font-bold text-sm border rounded-lg text-nowrap"> </button> <div class="border-t w-full h-0"></div></div>'),ll=b('<div class="text-base flex justify-around items-start space-x-1 w-full"><div class="overflow-hidden basis-1/4 h-full flex flex-col"><div class="text-xs font-bold uppercase text-slate-400"> </div> <!></div> <!> <div class="overflow-hidden basis-1/4 h-full flex flex-col"><div class="text-xs font-bold uppercase text-slate-400"> </div> <!></div> <!> <div class="overflow-hidden basis-1/4 h-full flex flex-col"><div class="text-xs font-bold uppercase text-slate-400"> </div> <div class="text-center text-nowrap"> </div></div> <!> <div class="overflow-hidden basis-1/4 h-full flex flex-col"><div class="text-xs font-bold uppercase text-slate-400"> </div> <div class="text-center text-nowrap"> </div></div></div> <!> <div class="mt-4 flex flex-wrap gap-x-3 gap-y-3"></div>',1),dl=b("<button><!></button>"),cl=b('<div class="w-full flex justify-between items-center space-x-4"><div class="border-t w-full h-0"></div> <button class="px-2 py-1 bg-blue-600 hover:!bg-blue-700 text-white text-sm font-bold border rounded-lg text-nowrap"> </button> <div class="border-t w-full h-0"></div></div>'),ul=b("<!> <!> <!>",1),vl=b('<div class="flex items-center justify-center w-full"><!></div>'),fl=b('<div class="flex flex-col space-y-6 px-4 py-8"></div>'),ml=b("<!> <!>",1),gl=b('<div class="flex items-center justify-center w-full"><!></div>');function hl(i,e){Pe(e,!0);const a=d=>d.then(m=>{if(m.error)throw{error:m.error.error,status:m.response.status};return m});var o=Q(),r=y(o);{var s=d=>{var m=Q(),g=y(m);gr(g,()=>e.baseResponse,f=>{var T=gl(),_=v(T);ra(_,{class:"animate-spin w-12 h-12 m-20"}),c(T),n(f,T)},(f,T)=>{var _=ml(),u=y(_);{var h=F=>{var x=il();nt(x,21,()=>t(T).direct,Nt,(S,w)=>{al(S,{get d(){return t(w)},onclick:()=>{e.selectItinerary(t(w))}})}),c(x),n(F,x)};z(u,F=>{t(T).direct.length!==0&&F(h)})}var L=l(u,2);{var E=F=>{var x=fl();nt(x,21,()=>e.routingResponses,Nt,(S,w,O,A)=>{var J=Q(),P=y(J);gr(P,()=>t(w),C=>{var N=vl(),I=v(N);ra(I,{class:"animate-spin w-12 h-12 m-20"}),c(N),n(C,N)},(C,N)=>{var I=ul(),X=y(I);{var re=$=>{var Y=sl(),ne=l(v(Y),2);ne.__click=()=>{e.routingResponses.splice(0,0,a(Ua({query:{...e.baseQuery.query,pageCursor:t(N).previousPageCursor}})).then(e.updateStartDest))};var ge=v(ne,!0);c(ne),Ge(2),c(Y),U(()=>G(ge,W.earlier)),n($,Y)};z(X,$=>{O===0&&e.baseQuery&&$(re)})}var j=l(X,2);nt(j,17,()=>t(N).itineraries,Nt,($,Y)=>{var ne=dl();ne.__click=()=>{e.selectItinerary(t(Y))};var ge=v(ne);dr(ge,{class:"p-4",children:(fe,Re)=>{var he=ll(),Ie=y(he),Le=v(Ie),ze=v(Le),Ve=v(ze,!0);c(ze);var ee=l(ze,2);{let ue=M(()=>e.baseQuery?.query.time);Wr(ee,{get isRealtime(){return t(Y).legs[0].realTime},get timestamp(){return t(Y).startTime},get scheduledTimestamp(){return t(Y).legs[0].scheduledStartTime},variant:"realtime-show-always",get queriedTime(){return t(ue)},get timeZone(){return t(Y).legs[0].from.tz}})}c(Le);var q=l(Le,2);da(q,{orientation:"vertical"});var De=l(q,2),xe=v(De),Se=v(xe,!0);c(xe);var Ae=l(xe,2);Wr(Ae,{get isRealtime(){return t(Y).legs[t(Y).legs.length-1].realTime},get timestamp(){return t(Y).endTime},get scheduledTimestamp(){return t(Y).legs[t(Y).legs.length-1].scheduledEndTime},variant:"realtime-show-always",get queriedTime(){return t(Y).startTime},get timeZone(){return t(Y).legs[t(Y).legs.length-1].to.tz}}),c(De);var Oe=l(De,2);da(Oe,{orientation:"vertical"});var Z=l(Oe,2),le=v(Z),_e=v(le,!0);c(le);var ve=l(le,2),se=v(ve,!0);c(ve),c(Z);var we=l(Z,2);da(we,{orientation:"vertical"});var Ee=l(we,2),be=v(Ee),ye=v(be,!0);c(be);var pe=l(be,2),Fe=v(pe,!0);c(pe),c(Ee),c(Ie);var Ne=l(Ie,2);da(Ne,{class:"my-2"});var Ke=l(Ne,2);nt(Ke,21,()=>t(Y).legs.filter((ue,me)=>me==0&&ue.duration>1||me==t(Y).legs.length-1&&ue.duration>1||ue.displayName||ue.mode!="WALK"),Nt,(ue,me,Ue,st)=>{nl(ue,()=>t(me))}),c(Ke),U(ue=>{G(Ve,W.departure),G(Se,W.arrival),G(_e,W.transfers),G(se,t(Y).transfers),G(ye,W.duration),G(Fe,ue)},[()=>rr(t(Y).duration)]),n(fe,he)},$$slots:{default:!0}}),c(ne),n($,ne)});var B=l(j,2);{var te=$=>{var Y=cl(),ne=l(v(Y),2);ne.__click=()=>{e.routingResponses.push(a(Ua({query:{...e.baseQuery.query,pageCursor:t(N).nextPageCursor}})).then(e.updateStartDest))};var ge=v(ne,!0);c(ne),Ge(2),c(Y),U(()=>G(ge,W.later)),n($,Y)};z(B,$=>{O===e.routingResponses.length-1&&e.baseQuery&&$(te)})}n(C,I)},(C,N)=>{{let I=M(()=>t(N).error??t(N)),X=M(()=>t(N).status??404);kr(C,{get message(){return t(I)},get status(){return t(X)}})}}),n(S,J)}),c(x),n(F,x)},p=F=>{var x=Q(),S=y(x);{var w=O=>{kr(O,{get message(){return W.noItinerariesFound},status:200})};z(S,O=>{t(T).direct.length===0&&O(w)},!0)}n(F,x)};z(L,F=>{t(T).itineraries.length!==0?F(E):F(p,!1)})}n(f,_)},(f,T)=>{{let _=M(()=>t(T).error??t(T)),u=M(()=>t(T).status??404);kr(f,{get message(){return t(_)},get status(){return t(u)}})}}),n(d,m)};z(r,d=>{e.baseResponse&&d(s)})}n(i,o),Ce()}Yr(["click"]);var pl=b('<button><svg class="relative mr-2 min-w-6 min-h-6 max-w-6 max-h-6 rounded-full"><use></use></svg> <div class="text-center"> </div></button>');function Ya(i,e){Pe(e,!0);const a=M(()=>Ir(e.l)[0]);var o=pl();o.__click=()=>{e.l.tripId?e.onClickTrip(e.l.tripId):console.log("tripId missing",e.l)};var r=v(o),s=v(r);c(r);var d=l(r,2),m=v(d,!0);c(d),c(o),U((g,f)=>{Et(o,1,g),hr(o,f),wa(s,"xlink:href",`#${t(a)}`),G(m,e.l.displayName)},[()=>nr(Ye("flex items-center text-nowrap rounded-full pl-2 pr-1 h-8 font-bold",e.class,e.l.displayName?"pr-3":void 0)),()=>Ca(e.l)]),n(i,o),Ce()}Yr(["click"]);var _l=b("<div><!></div>");function yl(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=_l();ar(r,d=>({class:d,...o}),[()=>Ye("flex flex-col space-y-1.5 text-center sm:text-left",e.class)]);var s=v(r);St(s,()=>e.children??it),c(r),Mt(r,d=>a(d),()=>a()),n(i,r),Ce()}function bl(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class"]);var r=Q(),s=y(r);{let d=M(()=>Ye("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0  fixed inset-0 z-50 bg-black/80",e.class));de(s,()=>Vo,(m,g)=>{g(m,Bt({get class(){return t(d)}},()=>o,{get ref(){return a()},set ref(f){a(f)}}))})}n(i,r),Ce()}var Tl=b('<!> <span class="sr-only">Close</span>',1),xl=b("<!> <!>",1),wl=b("<!> <!>",1);function Rl(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children"]);var r=Q(),s=y(r);de(s,()=>Ll,(d,m)=>{m(d,Bt(()=>e.portalProps,{children:(g,f)=>{var T=wl(),_=y(T);de(_,()=>bl,(h,L)=>{L(h,{})});var u=l(_,2);{let h=M(()=>Ye("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border p-6 shadow-lg duration-200 sm:rounded-lg",e.class));de(u,()=>Wo,(L,E)=>{E(L,Bt({get class(){return t(h)}},()=>o,{get ref(){return a()},set ref(p){a(p)},children:(p,F)=>{var x=xl(),S=y(x);St(S,()=>e.children??it);var w=l(S,2);de(w,()=>Yo,(O,A)=>{A(O,{class:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute right-4 top-4 rounded-sm opacity-70 transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none",children:(J,P)=>{var C=Tl(),N=y(C);Rr(N,{class:"size-4"}),Ge(2),n(J,C)},$$slots:{default:!0}})}),n(p,x)},$$slots:{default:!0}}))})}n(g,T)},$$slots:{default:!0}}))}),n(i,r),Ce()}function Al(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class"]);var r=Q(),s=y(r);{let d=M(()=>Ye("text-muted-foreground text-sm",e.class));de(s,()=>qo,(m,g)=>{g(m,Bt({get class(){return t(d)}},()=>o,{get ref(){return a()},set ref(f){a(f)}}))})}n(i,r),Ce()}const Pl=Ko,Cl=Zo,Ll=$a;var El=b('<span class="text-muted-foreground font-normal"> </span>'),kl=b('<div><div class="flex flex-col gap-1 overflow-hidden"><div class="font-bold flex gap-2 items-center text-blue-700 dark:text-blue-500"><!> <!></div> <span class="font-normal text-muted-foreground overflow-hidden text-ellipsis w-full"> </span></div> <!></div>'),Il=b('<p><strong> </strong> <strong> </strong> <span class="text-xs font-normal"> </span></p>'),Sl=b("<p> </p>"),Ol=b("<p> </p>"),Fl=b('<div class="last:mb-0 text-justify"><h3 class="font-bold text-blue-700 dark:text-blue-500 mb-1 flex items-center gap-2"><!> </h3> <!> <!> <!></div>'),Nl=b("<!> <!>",1);function rn(i,e){Pe(e,!0);const a=H(e,"alerts",19,()=>[]),o=H(e,"variant",3,"icon");var r=Q(),s=y(r);{var d=m=>{var g=Q(),f=y(g);de(f,()=>Pl,(T,_)=>{_(T,{children:(u,h)=>{var L=Nl(),E=y(L);{let F=M(()=>o()=="full"?"pt-2":"ml-2");de(E,()=>Cl,(x,S)=>{S(x,{get class(){return`max-w-full pr-4  ${t(F)??""}`},children:(w,O)=>{var A=Q(),J=y(A);{var P=N=>{var I=kl(),X=v(I),re=v(X),j=v(re);ka(j,{});var B=l(j),te=l(B);{var $=fe=>{var Re=El(),he=v(Re);c(Re),U(()=>G(he,`+${a().length-1}
									${W.alerts.more??""}`)),n(fe,Re)};z(te,fe=>{a().length>1&&fe($)})}c(re);var Y=l(re,2),ne=v(Y,!0);c(Y),c(X);var ge=l(X,2);$o(ge,{class:"size-4"}),c(I),U(fe=>{Et(I,1,fe),G(B,` ${W.alerts.information??""} `),G(ne,a()[0].descriptionText||a()[0].headerText)},[()=>nr(Ye(Va({variant:"outline"}),"max-w-full flex items-center bg-blue-50 dark:bg-blue-950 shadow-none"))]),n(N,I)},C=N=>{ka(N,{})};z(J,N=>{o()==="full"?N(P):N(C,!1)})}n(w,A)},$$slots:{default:!0}})})}var p=l(E,2);de(p,()=>Rl,(F,x)=>{x(F,{children:(S,w)=>{var O=Q(),A=y(O);de(A,()=>yl,(J,P)=>{P(J,{children:(C,N)=>{var I=Q(),X=y(I);de(X,()=>Al,(re,j)=>{j(re,{class:"space-y-4",children:(B,te)=>{var $=Q(),Y=y($);nt(Y,17,a,Nt,(ne,ge)=>{var fe=Fl(),Re=v(fe),he=v(Re);ka(he,{class:"size-5"});var Ie=l(he,1,!0);c(Re);var Le=l(Re,2);{var ze=xe=>{var Se=Q(),Ae=y(Se);nt(Ae,17,()=>t(ge).impactPeriod,Nt,(Oe,Z)=>{const le=M(()=>new Date(t(Z).start??0)),_e=M(()=>new Date(t(Z).end??0));var ve=Il(),se=v(ve),we=v(se);c(se);var Ee=l(se),be=l(Ee),ye=v(be,!0);c(be);var pe=l(be),Fe=l(pe),Ne=v(Fe,!0);c(Fe),c(ve),U((Ke,ue,me)=>{G(we,`${W.alerts.validFrom??""}:`),G(Ee,` ${Ke??""} `),G(ye,W.alerts.until),G(pe,` ${ue??""} `),G(Ne,me)},[()=>bn(t(le),e.tz),()=>bn(t(_e),e.tz),()=>$s(t(le),e.tz)]),n(Oe,ve)}),n(xe,Se)};z(Le,xe=>{t(ge).impactPeriod&&xe(ze)})}var Ve=l(Le,2);{var ee=xe=>{var Se=Sl(),Ae=v(Se,!0);c(Se),U(()=>G(Ae,t(ge).causeDetail)),n(xe,Se)};z(Ve,xe=>{t(ge).causeDetail&&xe(ee)})}var q=l(Ve,2);{var De=xe=>{var Se=Ol(),Ae=v(Se,!0);c(Se),U(()=>G(Ae,t(ge).descriptionText)),n(xe,Se)};z(q,xe=>{t(ge).descriptionText&&xe(De)})}c(fe),U(()=>G(Ie,t(ge).headerText)),n(ne,fe)}),n(B,$)},$$slots:{default:!0}})}),n(C,I)},$$slots:{default:!0}})}),n(S,O)},$$slots:{default:!0}})}),n(u,L)},$$slots:{default:!0}})}),n(m,g)};z(s,m=>{a().length>0&&m(d)})}n(i,r),Ce()}const Dl=i=>{switch(i.mode){case"WALK":return W.walk;case"BIKE":return W.bike;case"RENTAL":switch(i.rental?.formFactor){case"BICYCLE":return W.bike;case"CARGO_BICYCLE":return W.cargoBike;case"CAR":return W.car;case"MOPED":return W.moped;case"SCOOTER_SEATED":return W.scooterSeated;case"SCOOTER_STANDING":return W.scooterStanding;case"OTHER":default:return W.unknownVehicleType}case"CAR":case"CAR_PARKING":return W.car;case"ODM":return W.taxi;case"FLEX":return"Flex";default:return`${i.mode}`}},ao=i=>{switch(i){case"BUS":case"FERRY":case"TRAM":case"COACH":case"AIRPLANE":case"AERIAL_LIFT":return"Platform";default:return"Track"}},Gr=(i,e=it,a=it,o=it,r=it,s=it,d=it,m=it)=>{const g=M(()=>d()==0||d()==1),f=M(()=>d()==0?"":"font-semibold");var T=Hl(),_=v(T),u=v(_);Wr(u,{variant:"schedule",class:"w-14 md:w-16",get queriedTime(){return e()},get timeZone(){return r().tz},get isRealtime(){return o()},get timestamp(){return e()},get scheduledTimestamp(){return a()},get arriveBy(){return t(g)}});var h=l(u,2);Wr(h,{variant:"realtime",class:"w-14 md:w-16",get timeZone(){return r().tz},get isRealtime(){return o()},get timestamp(){return e()},get scheduledTimestamp(){return a()},get arriveBy(){return t(g)}}),c(_);var L=l(_,2),E=v(L);{var p=x=>{const S=M(()=>r().pickupType=="NOT_ALLOWED"&&d()!=1),w=M(()=>r().dropoffType=="NOT_ALLOWED"&&d()!=-1);var O=Ul(),A=y(O),J=v(A),P=v(J);at(P,{get class(){return`text-[length:inherit] leading-none justify-normal text-wrap p-0 text-left ${t(f)??""}`},variant:"link",onclick:()=>qr(r().name,r().stopId,new Date(e())),children:(Y,ne)=>{Ge();var ge=ke();U(()=>G(ge,r().name)),n(Y,ge)},$$slots:{default:!0}});var C=l(P,2);{var N=Y=>{rn(Y,{get alerts(){return r().alerts},get tz(){return r().tz},variant:"icon"})};z(C,Y=>{d()!=0&&Y(N)})}c(J);var I=l(J,2);{var X=Y=>{var ne=Ml(),ge=v(ne);c(ne),U(fe=>G(ge,`${fe??""}
							${r().track??""}`),[()=>ao(s())=="Track"?W.trackAbr:W.platformAbr]),n(Y,ne)};z(I,Y=>{r().track&&!m()&&Y(X)})}c(A);var re=l(A,2),j=v(re);{var B=Y=>{const ne=M(()=>r().switchTo);var ge=Bl(),fe=v(ge),Re=l(fe);Ja(Re,{class:"mx-1 size-4"});var he=l(Re);c(ge),U(()=>{G(fe,`${W.continuesAs??""}
							${t(ne).displayName??""} `),G(he,` ${t(ne).headsign??""}`)}),n(Y,ge)};z(j,Y=>{r().switchTo&&Y(B)})}var te=l(j,2);{var $=Y=>{var ne=Gl(),ge=v(ne);Aa(ge,{class:"stroke-destructive size-4"});var fe=l(ge,2),Re=v(fe,!0);c(fe),c(ne),U(()=>G(Re,t(S)&&t(w)?W.inOutDisallowed:t(S)?W.inDisallowed:W.outDisallowed)),n(Y,ne)};z(te,Y=>{(t(S)||t(w))&&Y($)})}c(re),n(x,O)},F=x=>{var S=jl(),w=v(S,!0);c(S),U(()=>G(w,r().name||r().flex)),n(x,S)};z(E,x=>{r().stopId?x(p):x(F,!1)})}c(L),c(T),U(()=>Et(T,1,`flex items-baseline justify-between w-full ${t(f)??""}`)),n(i,T)},zl=(i,e=it)=>{const a=M(()=>e().steps?.filter(w=>w.elevationUp||w.elevationDown)),o=M(()=>e().steps?.filter(w=>w.toll)),r=M(()=>e().steps?.filter(w=>w.accessRestriction));var s=$l(),d=v(s),m=v(d);c(d);var g=l(d,2);{var f=w=>{var O=Vl(),A=v(O),J=l(A),P=v(J,!0);c(J),c(O),U(()=>{G(A,`${W.sharingProvider??""}: `),yt(J,"href",e().rental.url),G(P,e().rental.systemName)}),n(w,O)};z(g,w=>{e().rental&&e().rental.systemName&&w(f)})}var T=l(g,2);{var _=w=>{var O=Wl(),A=v(O,!0);c(O),U(()=>G(A,W.roundtripStationReturnConstraint)),n(w,O)};z(T,w=>{e().rental?.returnConstraint=="ROUNDTRIP_STATION"&&w(_)})}var u=l(T,2);{var h=w=>{var O=Yl(),A=v(O);at(A,{class:"font-bold",variant:"outline",get href(){return e().rental.rentalUriWeb},target:"_blank",children:(J,P)=>{Ge();var C=ke();U(()=>G(C,W.rent)),n(J,C)},$$slots:{default:!0}}),c(O),n(w,O)};z(u,w=>{e().rental?.rentalUriWeb&&w(h)})}var L=l(u,2);{var E=w=>{var O=ql(),A=v(O),J=l(A),P=v(J);Xo(P,{class:"size-4"});var C=l(P);c(J);var N=l(J,2),I=v(N);Jo(I,{class:"size-4"});var X=l(I);c(N),c(O),U((re,j)=>{G(A,`${W.incline??""} `),G(C,` ${re??""} m`),G(X,` ${j??""} m`)},[()=>t(a).reduce((re,j)=>re+j.elevationUp,0),()=>t(a).reduce((re,j)=>re+j.elevationDown,0)]),n(w,O)};z(L,w=>{t(a)&&t(a).length>0&&w(E)})}var p=l(L,2);{var F=w=>{var O=Zl(),A=v(O);Qo(A,{class:"size-4"});var J=l(A);c(O),U(()=>G(J,` ${W.toll??""}`)),n(w,O)};z(p,w=>{t(o)&&t(o).length>0&&w(F)})}var x=l(p,2);{var S=w=>{var O=Kl(),A=v(O);Aa(A,{class:"size-4"});var J=l(A);c(O),U(P=>G(J,` ${W.accessRestriction??""}
				(${P??""})`),[()=>t(r).map(P=>P.accessRestriction).filter((P,C,N)=>N.indexOf(P)===C).join(", ")]),n(w,O)};z(x,w=>{t(r)&&t(r).length>0&&w(S)})}c(s),U((w,O,A)=>G(m,`${w??""}
			${O??""}
			${A??""}`),[()=>rr(e().duration),()=>Dl(e()),()=>os(e().distance)]),n(i,s)},Tn=(i,e=it)=>{Ge();var a=td(),o=y(a),r=l(o);{var s=g=>{var f=Ql(),T=l(y(f));{var _=h=>{var L=Xl();let E;var p=v(L,!0);c(L),U(()=>{E=Et(L,1,"underline",null,E,{italic:e().riderCategory.isDefaultFareCategory}),yt(L,"href",e().riderCategory.eligibilityUrl),G(p,e().riderCategory.riderCategoryName)}),n(h,L)},u=h=>{var L=Jl();let E;var p=v(L,!0);c(L),U(()=>{E=Et(L,1,"",null,E,{italic:e().riderCategory.isDefaultFareCategory}),G(p,e().riderCategory.riderCategoryName)}),n(h,L)};z(T,h=>{e().riderCategory.eligibilityUrl?h(_):h(u,!1)})}n(g,f)};z(r,g=>{e().riderCategory&&g(s)})}var d=l(r,2);{var m=g=>{var f=ed(),T=l(y(f));{var _=h=>{var L=ke();U(()=>G(L,e().media.fareMediaName)),n(h,L)},u=h=>{var L=ke();U(()=>G(L,e().media.fareMediaType)),n(h,L)};z(T,h=>{e().media.fareMediaName?h(_):h(u,!1)})}n(g,f)};z(d,g=>{e().media&&g(m)})}U(g=>G(o,`${e().name??""}
	${g??""} `),[()=>new Intl.NumberFormat(Kt,{style:"currency",currency:e().currency}).format(e().amount)]),n(i,a)};var Ml=b('<span class="text-nowrap px-2 border rounded-xl ml-1 mr-4"> </span>'),Bl=b('<div class="flex items-center text-sm mt-1"> <!> </div>'),Gl=b('<div class="flex items-center text-destructive text-sm mt-1"><!> <span class="ml-1 leading-none"> </span></div>'),Ul=b('<div class="flex items-center justify-between"><div class="flex flex-row items-center justify-center"><!> <!></div> <!></div> <div><!> <!></div>',1),jl=b("<span> </span>"),Hl=b('<div><div class="flex justify-between"><!> <!></div> <div class="w-full"><!></div></div>'),Vl=b('<span class="ml-6"> <a target="_blank" class="hover:underline"> </a></span>'),Wl=b('<span class="ml-6"> </span>'),Yl=b('<span class="ml-6"><!></span>'),ql=b('<div class="ml-6 flex items-center gap-2 text-xs"> <div class="flex items-center"><!> </div> <div class="flex items-center"><!> </div></div>'),Zl=b('<div class="ml-6 flex items-center gap-2 text-sm text-orange-500"><!> </div>'),Kl=b('<div class="ml-6 flex items-center gap-2 text-sm text-orange-500"><!> </div>'),$l=b('<div class="py-12 flex flex-col gap-y-4 text-muted-foreground"><span class="ml-6"> </span> <!> <!> <!> <!> <!> <!></div>'),Xl=b("<a> </a>"),Jl=b("<span> </span>"),Ql=b("for <!>",1),ed=b("as <!>",1),td=b(" <!> <!>",1),rd=b('<div class="mb-1"> </div>'),ad=b("<li><!></li>"),nd=b("<!> <ul></ul>",1),od=b('<div class="pl-1 md:pl-4 my-8 text-xs font-bold"><!></div>'),id=b('<div class="mb-1"> </div>'),sd=b("<li><!></li>"),ld=b('<br/> <span class="text-xs font-bold text-foreground text-left"><!> <ul></ul></span>',1),dd=b('<div class="border-t h-0 grow shrink"></div> <div class="text-sm text-muted-foreground leading-none px-2 text-center"><!> <!> <!></div>',1),cd=b("<br/> ",1),ud=b(" <!>",1),vd=b('<div class="mt-2 flex items-center text-destructive leading-none"> </div>'),fd=b('<div class="mt-2 flex items-center text-destructive leading-none"><!> <span class="ml-1 font-bold"> </span></div>'),md=b('<div class="mt-2 flex items-center text-green-600 leading-none"><span class="ml-1"> </span></div>'),gd=b('<div class="py-10 pl-4 md:pl-4 flex items-center text-muted-foreground"> </div> <!>',1),hd=b('<!> <details class="[&amp;_.collapsible]:open:-rotate-180 my-2"><summary class="py-10 pl-4 md:pl-4 flex items-center text-muted-foreground"><svg class="collapsible rotate-0 transform transition-all duration-300" fill="none" height="20" width="20" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"><polyline points="6 9 12 15 18 9"></polyline></svg> <span class="ml-2 cursor-pointer"> </span></summary> <div class="grid gap-2 items-start content-start pb-2"></div></details>',1),pd=b('<div class="pb-2"></div>'),_d=b('<div class="w-full flex justify-between items-center space-x-1"><!> <!> <div class="border-t h-0 grow shrink"></div></div> <div class="pt-4 pb-2 pl-4 sm:pl-6 border-l-4 left-4 relative"><!> <div class="flex items-center"><!> <span class="ml-1"><!></span></div> <!> <!> <!> <!> <!> <!> <!></div>',1),yd=b('<div class="mt-2 flex items-center leading-none"><span class="ml-1 text-sm"> </span></div>'),bd=b('<!> <div class="pt-2 pb-2 pl-4 sm:pl-6 border-l-4 left-4 relative"><!> <!> <!> <!></div>',1),Td=b('<div class="text-lg max-w-full"><!> <div class="relative pl-4 md:pl-6 left-5"><div class="absolute left-[-9px] w-[15px] h-[15px] rounded-full"></div> <div class="relative top-[-6px] mb-[-6px]"><!></div></div></div>');function xd(i,e){Pe(e,!0);const a=(_,u=it,h=it)=>{var L=Q(),E=y(L);{var p=F=>{const x=M(()=>e.itinerary.fareTransfers[h().fareTransferIndex]),S=M(()=>t(x).rule=="AB"||t(x).rule=="A_AB"&&h().effectiveFareLegIndex!==0);var w=Q(),O=y(w);{var A=J=>{var P=od(),C=v(P);{var N=X=>{var re=ke();U(()=>G(re,W.includedInTicket)),n(X,re)},I=X=>{const re=M(()=>t(x).effectiveFareLegProducts[h().effectiveFareLegIndex]);var j=nd(),B=y(j);{var te=ne=>{var ge=rd(),fe=v(ge);c(ge),U(()=>G(fe,`${W.ticketOptions??""}:`)),n(ne,ge)};z(B,ne=>{t(re).length>1&&ne(te)})}var $=l(B,2);let Y;nt($,21,()=>t(re),Nt,(ne,ge)=>{var fe=Q(),Re=y(fe);nt(Re,17,()=>t(ge),Nt,(he,Ie)=>{var Le=ad(),ze=v(Le);Tn(ze,()=>t(Ie)),c(Le),n(he,Le)}),n(ne,fe)}),c($),U(()=>Y=Et($,1,"",null,Y,{"list-disc":t(re).length>1,"list-outside":t(re).length>1})),n(X,j)};z(C,X=>{t(S)||u()&&u().fareTransferIndex===h().fareTransferIndex&&u().effectiveFareLegIndex===h().effectiveFareLegIndex?X(N):X(I,!1)})}c(P),n(J,P)};z(O,J=>{(t(S)||t(x).effectiveFareLegProducts[h().effectiveFareLegIndex].length>0)&&J(A)})}n(F,w)};z(E,F=>{e.itinerary.fareTransfers!=null&&h().fareTransferIndex!=null&&h().effectiveFareLegIndex!=null&&F(p)})}n(_,L)},o=_=>_.duration!==0||_.displayName,r=M(()=>e.itinerary.legs.findLast(o));var s=Td(),d=v(s);nt(d,17,()=>e.itinerary.legs,Nt,(_,u,h)=>{const L=M(()=>h==e.itinerary.legs.length-1),E=M(()=>h==e.itinerary.legs.length-2),p=M(()=>h==0?void 0:e.itinerary.legs[h-1]),F=M(()=>t(L)?void 0:e.itinerary.legs[h+1]),x=M(()=>e.itinerary.legs.slice(0,h).find(J=>J.tripId));var S=Q(),w=y(S);{var O=J=>{var P=_d(),C=y(P),N=v(C);Ya(N,{get onClickTrip(){return aa},get l(){return t(u)}});var I=l(N,2);{var X=Z=>{var le=dd(),_e=l(y(le),2),ve=v(_e);{var se=pe=>{var Fe=ke();U(Ne=>G(Fe,`${Ne??""} ${W.walk??""}`),[()=>rr(t(p).duration)]),n(pe,Fe)};z(ve,pe=>{t(p).duration&&pe(se)})}var we=l(ve,2);{var Ee=pe=>{var Fe=ke();U(Ne=>G(Fe,`(${Ne??""} m)`),[()=>Math.round(t(p).distance)]),n(pe,Fe)};z(we,pe=>{t(p).distance&&pe(Ee)})}var be=l(we,2);{var ye=pe=>{const Fe=M(()=>e.itinerary.fareTransfers[t(x).fareTransferIndex].transferProducts);var Ne=Q(),Ke=y(Ne);{var ue=me=>{var Ue=ld(),st=l(y(Ue),2),xt=v(st);{var We=wt=>{var ot=id(),pt=v(ot);c(ot),U(()=>G(pt,`${W.ticketOptions??""}:`)),n(wt,ot)};z(xt,wt=>{t(Fe).length>1&&wt(We)})}var ct=l(xt,2);let Ct;nt(ct,21,()=>t(Fe),Nt,(wt,ot)=>{var pt=sd(),Dt=v(pt);Tn(Dt,()=>t(ot)),c(pt),n(wt,pt)}),c(ct),c(st),U(()=>Ct=Et(ct,1,"",null,Ct,{"list-disc":t(Fe).length>1,"list-outside":t(Fe).length>1})),n(me,Ue)};z(Ke,me=>{t(x).effectiveFareLegIndex===0&&t(u).effectiveFareLegIndex===1&&me(ue)})}n(pe,Ne)};z(be,pe=>{t(x)?.fareTransferIndex!=null&&e.itinerary.fareTransfers&&e.itinerary.fareTransfers[t(x).fareTransferIndex].transferProducts&&pe(ye)})}c(_e),n(Z,le)};z(I,Z=>{t(p)&&(t(p).from.track||o(t(p)))&&(h!=1||t(p).displayName)&&Z(X)})}Ge(2),c(C);var re=l(C,2),j=v(re);Gr(j,()=>t(u).startTime,()=>t(u).scheduledStartTime,()=>t(u).realTime,()=>t(u).from,()=>t(u).mode,()=>-1);var B=l(j,2),te=v(B);Ja(te,{class:"stroke-muted-foreground size-4"});var $=l(te,2),Y=v($);{var ne=Z=>{at(Z,{class:"text-[length:inherit] text-muted-foreground leading-none justify-normal text-wrap text-left ",variant:"link",onclick:()=>qr(t(u).tripTo.name,t(u).tripTo.stopId,new Date(t(u).tripTo.arrival),!0),children:(le,_e)=>{Ge();var ve=ud(),se=y(ve),we=l(se);{var Ee=be=>{var ye=cd(),pe=l(y(ye));U(()=>G(pe,`(${t(u).tripTo.name??""})`)),n(be,ye)};z(we,be=>{(!t(u).headsign||!t(u).tripTo.name.startsWith(t(u).headsign))&&be(Ee)})}U(()=>G(se,`${t(u).headsign??""} `)),n(le,ve)},$$slots:{default:!0}})},ge=Z=>{var le=ke();U(()=>G(le,t(u).headsign)),n(Z,le)};z(Y,Z=>{t(u).tripTo?Z(ne):Z(ge,!1)})}c($),c(B);var fe=l(B,2);{let Z=M(()=>t(u).from.tz||t(u).to.tz);rn(fe,{get alerts(){return t(u).alerts},get tz(){return t(Z)},variant:"full"})}var Re=l(fe,2);{var he=Z=>{var le=vd(),_e=v(le);c(le),U(ve=>G(_e,`${W.dataExpiredSince??""}
						${ve??""}`),[()=>Ks(new Date(t(u).loopedCalendarSince),t(u).from.tz)]),n(Z,le)};z(Re,Z=>{t(u).loopedCalendarSince&&Z(he)})}var Ie=l(Re,2);{var Le=Z=>{var le=fd(),_e=v(le);Aa(_e,{class:"stroke-destructive size-4"});var ve=l(_e,2),se=v(ve,!0);c(ve),c(le),U(()=>G(se,W.tripCancelled)),n(Z,le)};z(Ie,Z=>{t(u).cancelled&&Z(Le)})}var ze=l(Ie,2);{var Ve=Z=>{var le=md(),_e=v(le),ve=v(_e,!0);c(_e),c(le),U(()=>G(ve,W.unscheduledTrip)),n(Z,le)};z(ze,Z=>{t(u).scheduled||Z(Ve)})}var ee=l(ze,2);{var q=Z=>{var le=gd(),_e=y(le),ve=v(_e);c(_e);var se=l(_e,2);a(se,()=>t(x),()=>t(u)),U((we,Ee)=>G(ve,`${we??""} (${Ee??""})`),[()=>W.tripIntermediateStops(0),()=>rr(t(u).duration)]),n(Z,le)},De=Z=>{var le=hd(),_e=y(le);a(_e,()=>t(x),()=>t(u));var ve=l(_e,2),se=v(ve),we=l(v(se),2),Ee=v(we);c(we),c(se);var be=l(se,2);nt(be,21,()=>t(u).intermediateStops,Nt,(ye,pe,Fe,Ne)=>{Gr(ye,()=>t(pe).arrival,()=>t(pe).scheduledArrival,()=>t(u).realTime,()=>t(pe),()=>t(u).mode,()=>0)}),c(be),c(ve),U((ye,pe)=>G(Ee,`${ye??""}
								(${pe??""})`),[()=>W.tripIntermediateStops(t(u).intermediateStops?.length??0),()=>rr(t(u).duration)]),n(Z,le)};z(ee,Z=>{t(u).intermediateStops?.length===0?Z(q):Z(De,!1)})}var xe=l(ee,2);{var Se=Z=>{Gr(Z,()=>t(u).endTime,()=>t(u).scheduledEndTime,()=>t(u).realTime,()=>t(u).to,()=>t(u).mode,()=>1)};z(xe,Z=>{!t(L)&&!(t(E)&&!o(t(F)))&&Z(Se)})}var Ae=l(xe,2);{var Oe=Z=>{var le=pd();n(Z,le)};z(Ae,Z=>{(t(L)||t(E)&&!o(t(F)))&&Z(Oe)})}c(re),U(Z=>hr(re,Z),[()=>gn(t(u))]),n(J,P)},A=J=>{var P=Q(),C=y(P);{var N=I=>{var X=bd(),re=y(X);Ya(re,{get onClickTrip(){return aa},get l(){return t(u)}});var j=l(re,2),B=v(j);Gr(B,()=>t(u).startTime,()=>t(u).scheduledStartTime,()=>t(u).realTime,()=>t(u).from,()=>t(u).mode,()=>-1,()=>!0);var te=l(B,2);{var $=fe=>{var Re=yd(),he=v(Re),Ie=v(he);c(he),c(Re),U((Le,ze)=>G(Ie,`${Le??""} -
							${ze??""}`),[()=>cr(new Date(t(u).from.flexStartPickupDropOffWindow),t(u).from.tz),()=>cr(new Date(t(u).from.flexEndPickupDropOffWindow),t(u).from.tz)]),n(fe,Re)};z(te,fe=>{t(u).mode=="FLEX"&&fe($)})}var Y=l(te,2);zl(Y,()=>t(u));var ne=l(Y,2);{var ge=fe=>{Gr(fe,()=>t(u).endTime,()=>t(u).scheduledEndTime,()=>t(u).realTime,()=>t(u).to,()=>t(u).mode,()=>1,()=>!0)};z(ne,fe=>{t(L)||fe(ge)})}c(j),U(fe=>hr(j,fe),[()=>gn(t(u))]),n(I,X)};z(C,I=>{!(t(L)&&!o(t(u)))&&(h==0&&o(t(u))||!t(F)||!t(F).displayName||t(u).mode!="WALK"||t(p)&&(t(p).mode=="BIKE"||t(u).mode=="WALK"&&t(p).mode=="CAR"||t(p).mode=="RENTAL"))&&I(N)},!0)}n(J,P)};z(w,J=>{t(u).displayName?J(O):J(A,!1)})}n(_,S)});var m=l(d,2),g=v(m),f=l(g,2),T=v(f);Gr(T,()=>t(r).endTime,()=>t(r).scheduledEndTime,()=>t(r).realTime,()=>t(r).to,()=>t(r).mode,()=>1),c(f),c(m),c(s),U(_=>hr(g,_),[()=>Ca(t(r))]),n(i,s),Ce()}function It(i,e){Pe(e,!0);let a=H(e,"beforeLayerId",3,"road-ref-shield");const o=new WeakMap,r=P=>{let C=o.get(P);return C||(C={moves:new Map,frame:null},o.set(P,C)),C};function s(P){e.onclick&&e.onclick(P,h.map)}function d(P){e.onmousemove&&e.onmousemove(P,h.map)}function m(P){e.onmouseenter&&e.onmouseenter(P,h.map)}function g(P){e.onmouseleave&&e.onmouseleave(P,h.map)}const f=P=>{const C=o.get(P);if(C){for(const[N,I]of Array.from(C.moves.entries())){if(!P.getLayer(N)){C.moves.delete(N);continue}P.getLayer(I)&&(P.moveLayer(N,I),C.moves.delete(N))}C.moves.size===0&&(C.frame!==null&&cancelAnimationFrame(C.frame),o.delete(P))}},T=(P,C,N)=>{if(!N||N===C)return;const I=r(P);I.moves.set(C,N),I.frame===null&&(I.frame=requestAnimationFrame(()=>{I.frame=null,f(P)}))},_=(P,C)=>{if(!P)return;const N=o.get(P);N&&(N.moves.delete(C),N.moves.size===0&&(N.frame!==null&&cancelAnimationFrame(N.frame),o.delete(P)))};let u=$e({id:e.id});Ka("layer",u);let h=_r("map"),L=_r("source"),E=!1,p=Wt(e.filter),F=Wt(e.layout),x=Wt(e.paint),S=a(),w=()=>{const P=h.map,C=P?.getLayer(e.id);if(!L.id){C&&(u.id=null,P?.removeLayer(e.id)),_(P,e.id);return}if(C&&e.filter==p&&e.layout==F&&e.paint==x){P&&f(P);return}if(!C){const N=a()&&P?.getLayer(a())?a():void 0;P.addLayer({source:L.id,id:e.id,type:e.type,filter:e.filter,layout:e.layout,paint:e.paint},N),p=Wt(e.filter),F=Wt(e.layout),x=Wt(e.paint),S=a(),u.id=e.id,a()&&!N&&T(P,e.id,a()),f(P);return}p!=e.filter&&(p=Wt(e.filter),P.setFilter(e.id,e.filter)),S!==a()&&(S=a(),a()&&P?.getLayer(a())?P.moveLayer(e.id,a()):a()&&T(P,e.id,a())),P&&f(P)};Ze(()=>{h.map&&L.id&&(E||(e.onclick&&h.map.on("click",e.id,s),e.onmousemove&&h.map.on("mousemove",e.id,d),e.onmouseenter&&h.map.on("mouseenter",e.id,m),e.onmouseleave&&h.map.on("mouseleave",e.id,g),h.map.on("styledata",w),w(),E=!0),f(h.map))}),br(()=>{const P=h.map?.getLayer(e.id);h.map?.off("styledata",w),e.onclick&&h.map?.off("click",e.id,s),e.onmousemove&&h.map?.off("mousemove",e.id,d),e.onmouseenter&&h.map?.off("mouseenter",e.id,m),e.onmouseleave&&h.map?.off("mouseleave",e.id,g),P&&h.map?.removeLayer(e.id),_(h.map,e.id)});var O=Q(),A=y(O);{var J=P=>{var C=Q(),N=y(C);St(N,()=>e.children),n(P,C)};z(A,P=>{e.children&&P(J)})}n(i,O),Ce()}function ur(i,e){Pe(e,!0);let a=H(e,"lineMetrics",3,!1),o=_r("map"),r=$e({id:null});Ka("source",r);const s=()=>{if(!o.map||e.data==null)return;const f=o.map.getSource(e.id);f?f.setData(e.data):o.map.addSource(e.id,{type:"geojson",lineMetrics:a(),data:e.data,...e.options??{}}),r.id=e.id};let d=!1;Ze(()=>{o.map&&e.id&&e.data&&(s(),d||(o.map.on("styledata",s),r.id=e.id,d=!0))}),br(()=>{d&&(o.map?.off("styledata",s),r.id=null,o.map.getSource(e.id)&&o.map?.removeSource(e.id))});var m=Q(),g=y(m);St(g,()=>e.children),n(i,m),Ce()}const ht=["coalesce",["get","level"],0],Sr=["coalesce",["ceil",["to-number",["get","fromLevel"]]],0],Or=["coalesce",["ceil",["to-number",["get","toLevel"]]],0],Fr=["coalesce",["floor",["to-number",["get","fromLevel"]]],0],Nr=["coalesce",["floor",["to-number",["get","toLevel"]]],0],xn=["any",["all",["==",Sr,ht],["==",Or,ht]],["all",["==",Fr,ht],["==",Nr,ht]]],wd=["any",["all",["<",Sr,ht],["<",Or,ht]],["all",["<",Fr,ht],["<",Nr,ht]]],wn=["any",["all",[">",Sr,ht],[">",Or,ht]],["all",[">",Fr,ht],[">",Nr,ht]]],Rn=["all",["any",["==",Sr,ht],["==",Fr,ht]],["any",[">",Or,ht],[">",Nr,ht]]],An=["all",["any",[">",Sr,ht],[">",Fr,ht]],["any",["==",Or,ht],["==",Nr,ht]]],Pn=["all",["any",["==",Sr,ht],["==",Fr,ht]],["any",["<",Or,ht],["<",Nr,ht]]],Cn=["all",["any",["<",Sr,ht],["<",Fr,ht]],["any",["==",Or,ht],["==",Nr,ht]]],$r="#42a5f5",Xr="#0077c2",Jr="#aaaaaa",Ur="#555555",wr=7,jr=wr+2,Ln=[{id:"indoor-routing-path-current-outline",type:"line",filter:xn,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":Xr,"line-width":jr}},{id:"indoor-routing-lower-path-down-outline",type:"line",filter:Pn,layout:{"line-join":"round"},paint:{"line-width":jr,"line-gradient":["interpolate",["linear"],["line-progress"],0,Xr,1,Ur]}},{id:"indoor-routing-lower-path-down",type:"line",filter:Pn,layout:{"line-join":"round"},paint:{"line-width":wr,"line-gradient":["interpolate",["linear"],["line-progress"],0,$r,1,Jr]}},{id:"indoor-routing-lower-path-up-outline",type:"line",filter:Cn,layout:{"line-join":"round"},paint:{"line-width":jr,"line-gradient":["interpolate",["linear"],["line-progress"],0,Ur,1,Xr]}},{id:"indoor-routing-lower-path-up",type:"line",filter:Cn,layout:{"line-join":"round"},paint:{"line-width":wr,"line-gradient":["interpolate",["linear"],["line-progress"],0,Jr,1,$r]}},{id:"indoor-routing-upper-path-down-outline",type:"line",filter:An,layout:{"line-join":"round"},paint:{"line-width":jr,"line-gradient":["interpolate",["linear"],["line-progress"],0,Ur,1,Xr]}},{id:"indoor-routing-upper-path-up-outline",type:"line",filter:Rn,layout:{"line-join":"round"},paint:{"line-width":jr,"line-gradient":["interpolate",["linear"],["line-progress"],0,Xr,1,Ur]}},{id:"indoor-routing-path-concealed-below-outline",type:"line",filter:wd,layout:{"line-join":"round"},paint:{"line-color":Ur,"line-width":2,"line-gap-width":6,"line-dasharray":["literal",[2,2]]}},{id:"indoor-routing-path-above-outline",type:"line",filter:wn,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":Ur,"line-width":jr}},{id:"indoor-routing-path-current",type:"line",filter:xn,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":$r,"line-width":wr}},{id:"indoor-routing-upper-path-down",type:"line",filter:An,layout:{"line-join":"round","line-cap":"round"},paint:{"line-width":wr,"line-gradient":["interpolate",["linear"],["line-progress"],0,Jr,1,$r]}},{id:"indoor-routing-upper-path-up",type:"line",filter:Rn,layout:{"line-join":"round","line-cap":"round"},paint:{"line-width":wr,"line-gradient":["interpolate",["linear"],["line-progress"],0,$r,1,Jr]}},{id:"indoor-routing-path-above",type:"line",filter:wn,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":Jr,"line-width":wr}}];var Rd=b("<!> <!> <!>",1),Ad=b("<!> <!>",1);function En(i,e){Pe(e,!0);const a=6;function o(_){return _=="WALK"||_=="BIKE"||_=="CAR"}function r(_){switch(_){case"CAR":return"#bf75ff";default:return"#42a5f5"}}function s(_){return{type:"FeatureCollection",features:_.legs.flatMap(u=>{if(u.steps){const h=o(u.mode)?r(u.mode):`${Ar(u)[0]}`,L=vn(h).darken(.2).toHex();return u.steps.map(E=>({type:"Feature",properties:{color:h,outlineColor:L,fromLevel:E.fromLevel,toLevel:E.toLevel,level:e.level,way:E.osmWay},geometry:{type:"LineString",coordinates:Vr.decode(E.polyline.points,a).map(([p,F])=>[F,p])}}))}else{const h=`${Ar(u)[0]}`;return{type:"Feature",properties:{outlineColor:vn(h).darken(.2).toHex(),color:h},geometry:{type:"LineString",coordinates:Vr.decode(u.legGeometry.points,a).map(([E,p])=>[p,E])}}}})}}const d=M(()=>s(e.itinerary));var m={PRECISION:a},g=Ad(),f=y(g);ur(f,{get id(){return`route-${e.id??""}`},get data(){return t(d)},children:(_,u)=>{var h=Rd(),L=y(h);nt(L,17,()=>Ln,F=>F.id,(F,x)=>{var S=Q(),w=y(S);{var O=A=>{{let J=M(()=>["all",["has","fromLevel"],t(x).filter]);It(A,{get id(){return t(x).id},get type(){return t(x).type},get layout(){return t(x).layout},get filter(){return t(J)},get paint(){return t(x).paint}})}};z(w,A=>{!("line-gradient"in t(x).paint)&&e.selected&&A(O)})}n(F,S)});var E=l(L,2);{let F=M(()=>e.selectItinerary?S=>{e.selectItinerary()}:void 0),x=M(()=>({"line-color":e.selected?["get","color"]:e.theme=="dark"?"#777":"#bbb","line-width":7.5,"line-opacity":1}));It(E,{get id(){return`path-${e.id??""}`},type:"line",layout:{"line-join":"round","line-cap":"round"},filter:["!",["has","fromLevel"]],get onclick(){return t(F)},get paint(){return t(x)}})}var p=l(E,2);{let F=M(()=>({"line-color":e.selected?["get","outlineColor"]:e.theme=="dark"?"#444":"#999","line-width":1.5,"line-gap-width":7.5,"line-opacity":1}));It(p,{get id(){return`path-outline-${e.id??""}`},type:"line",layout:{"line-join":"round","line-cap":"round"},filter:["!",["has","fromLevel"]],get paint(){return t(F)}})}n(_,h)},$$slots:{default:!0}});var T=l(f,2);return ur(T,{get id(){return`route-${e.id??""}-metrics`},get data(){return t(d)},lineMetrics:!0,children:(_,u)=>{var h=Q(),L=y(h);nt(L,17,()=>Ln,E=>E.id,(E,p)=>{var F=Q(),x=y(F);{var S=w=>{It(w,{get id(){return`${t(p).id??""}-metrics`},get type(){return t(p).type},get layout(){return t(p).layout},get filter(){return t(p).filter},get paint(){return t(p).paint}})};z(x,w=>{"line-gradient"in t(p).paint&&e.selected&&w(S)})}n(E,F)}),n(_,h)},$$slots:{default:!0}}),n(i,g),Ce(m)}var Pd=b('<div class="relative w-full overflow-auto"><table><!></table></div>');function qa(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Pd(),s=v(r);ar(s,m=>({class:m,...o}),[()=>Ye("w-full caption-bottom text-sm",e.class)]);var d=v(s);St(d,()=>e.children??it),c(s),Mt(s,m=>a(m),()=>a()),c(r),n(i,r),Ce()}var Cd=b("<tbody><!></tbody>");function Za(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Cd();ar(r,d=>({class:d,...o}),[()=>Ye("[&_tr:last-child]:border-0",e.class)]);var s=v(r);St(s,()=>e.children??it),c(r),Mt(r,d=>a(d),()=>a()),n(i,r),Ce()}var Ld=b("<td><!></td>");function er(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Ld();ar(r,d=>({class:d,...o}),[()=>Ye("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e.class)]);var s=v(r);St(s,()=>e.children??it),c(r),Mt(r,d=>a(d),()=>a()),n(i,r),Ce()}var Ed=b("<th><!></th>");function sr(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Ed();ar(r,d=>({class:d,...o}),[()=>Ye("text-muted-foreground h-10 px-2 text-left align-middle font-medium [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e.class)]);var s=v(r);St(s,()=>e.children??it),c(r),Mt(r,d=>a(d),()=>a()),n(i,r),Ce()}var kd=b("<thead><!></thead>");function kn(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=kd();ar(r,d=>({class:d,...o}),[()=>Ye("[&_tr]:border-b",e.class)]);var s=v(r);St(s,()=>e.children??it),c(r),Mt(r,d=>a(d),()=>a()),n(i,r),Ce()}var Id=b("<tr><!></tr>");function ea(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Id();ar(r,d=>({class:d,...o}),[()=>Ye("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e.class)]);var s=v(r);St(s,()=>e.children??it),c(r),Mt(r,d=>a(d),()=>a()),n(i,r),Ce()}function Hr(i,e){Pe(e,!0);let a=_r("map"),o=H(e,"location",15),r=H(e,"marker",15),s=!1;Ze(()=>{a.map&&o().match&&(s||(r(new bt.Marker({draggable:e.draggable,color:e.color}).setLngLat(o().match).addTo(a.map)),r().on("dragend",()=>{if(r()&&o().match){let d=Ft(r().getLngLat(),e.level??0);o(d),o(o().label=d.label,!0)}}),s=!0))}),Ze(()=>{r()&&o()&&o().match&&o().match.lat&&o().match.lon&&r().setLngLat(o().match)}),br(()=>{r()&&(r().remove(),r(void 0))}),Ce()}var Sd=b("<div><!></div>");function pr(i,e){Pe(e,!0);let a=_r("map"),o=_r("layer"),r=ce(void 0),s=ce(void 0),d=ce(void 0),m=ce(void 0);const g=()=>{t(s)&&(t(s).remove(),D(s,void 0))},f=p=>{a.map&&(t(s)&&t(s).remove(),D(s,new bt.Popup({anchor:"top-left",closeButton:!1}),!0),t(s).setLngLat(p.lngLat),t(s).addTo(a.map),D(d,p),D(m,p.features))},T=()=>{a.map&&(a.map.getCanvas().style.cursor="pointer")},_=()=>{a.map&&(a.map.getCanvas().style.cursor="")};let u=!1;Ze(()=>{a.map&&(u||(o?(a.map.on(e.trigger,o.id,f),a.map.on("mouseenter",o.id,T),a.map.on("mouseleave",o.id,_)):a.map.on(e.trigger,f)),u=!0)}),Ze(()=>{t(s)&&t(r)&&t(s).setDOMContent(t(r))}),br(()=>{t(s)&&(t(s).remove(),D(s,void 0)),a.map&&u&&(o?(a.map.off(e.trigger,o.id,f),a.map.off("mouseenter",o.id,T),a.map.off("mouseleave",o.id,_)):a.map.off(e.trigger,f))});var h=Q(),L=y(h);{var E=p=>{var F=Sd(),x=v(F);{var S=w=>{var O=Q(),A=y(O);St(A,()=>e.children,()=>t(d),()=>g,()=>t(m)),n(w,O)};z(x,w=>{e.children&&w(S)})}c(F),Mt(F,w=>D(r,w),()=>t(r)),U(()=>Et(F,1,nr(e.class))),n(p,F)};z(L,p=>{t(s)&&t(d)&&p(E)})}n(i,h),Ce()}const xr=(i,e=it,a=it,o=it)=>{qa(i,{children:(r,s)=>{Za(r,{children:(d,m)=>{var g=Q(),f=y(g);nt(f,17,()=>Object.entries(o()[0].properties),Nt,(T,_)=>{var u=M(()=>Vn(t(_),2));let h=()=>t(u)[0],L=()=>t(u)[1];ea(T,{children:(E,p)=>{var F=Nd(),x=y(F);er(x,{children:(w,O)=>{Ge();var A=ke();U(()=>G(A,h())),n(w,A)},$$slots:{default:!0}});var S=l(x,2);er(S,{children:(w,O)=>{var A=Q(),J=y(A);{var P=N=>{var I=Od(),X=v(I,!0);c(I),U(()=>{yt(I,"href",`https://www.openstreetmap.org/node/${L()??""}`),G(X,L())}),n(N,I)},C=N=>{var I=Q(),X=y(I);{var re=B=>{var te=Fd(),$=v(te,!0);c(te),U(()=>{yt(te,"href",`https://www.openstreetmap.org/way/${L()??""}`),G($,L())}),n(B,te)},j=B=>{var te=ke();U(()=>G(te,L())),n(B,te)};z(X,B=>{h()==="osm_way_id"?B(re):B(j,!1)},!0)}n(N,I)};z(J,N=>{h()==="osm_node_id"?N(P):N(C,!1)})}n(w,A)},$$slots:{default:!0}}),n(E,F)},$$slots:{default:!0}})}),n(d,g)},$$slots:{default:!0}})},$$slots:{default:!0}})};var Od=b('<a class="underline bold text-blue-400" target="_blank"> </a>'),Fd=b('<a class="underline bold text-blue-400" target="_blank"> </a>'),Nd=b("<!> <!>",1),Dd=b("<!> <!> <!>",1),zd=b("<!> <!> <!>",1),Md=b("<!> <!>",1),Bd=b('<!> <div class="flex justify-between gap-4"><!> <!> <!></div>',1),Gd=b('<div class="w-full flex justify-between bg-muted items-center"><h2 class="text-lg ml-2 font-bold"> <span class="ml-2 text-sm text-muted-foreground"> </span></h2> <!></div> <!>',1),Ud=b("<!> <!>",1),jd=b("<!> <!>",1),Hd=b("<!> <!> <!> <!> <!>",1),Vd=b(' <br/> <span class="text-xs text-muted-foreground font-mono"> </span>',1),Wd=b("<!> <!>",1),Yd=b("<!> <!>",1),qd=b("<!> <!> <!> <!> <!>",1),Zd=b("<!> <!>",1),Kd=b('<div class="w-full flex justify-between items-center shadow-md pl-1 mb-1"><h2 class="ml-2 text-base font-semibold"> <span class="text-xs text-muted-foreground font-mono"> </span> <span class="text-sm text-muted-foreground"> </span></h2> <!></div> <!>',1),$d=b("<!> <!>",1),Xd=b("<!> <!> <!> <!>",1),Jd=b("<!> <!>",1),Qd=b("<!> <!> <!>",1),ec=b("<!> <!>",1),tc=b("<!> <!> <!> <!> <!> <!> <!> <!>",1),rc=b("<!>  <!> <!>",1);function ac(i,e){Pe(e,!0);const a=pa.getConfig().baseUrl,o=async($,Y)=>await(await fetch(`${a}${$}`,{method:"POST",mode:"cors",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"},body:JSON.stringify(Y)})).json(),r=async $=>await(await fetch(`${a}${$}`,{method:"GET",mode:"cors",headers:{"Access-Control-Allow-Origin":"*","Content-Type":"application/json"}})).json(),s=$=>({lat:$.match.lat,lng:$.match.lon,level:$.match.level??0}),d=async $=>await o("/api/route",$),m=async $=>await o("/api/matches",$.toArray().flat()),g=async $=>{const Y=$.getSouthWest(),ne=$.getNorthEast();return await r(`/api/debug/flex?min=${Y.lat},${Y.lng}&max=${ne.lat},${ne.lng}`)},f=async $=>await o("/api/elevators",$.toArray().flat()),T=async $=>(console.log(JSON.stringify($)),await o("/api/update_elevator",$)),_=async($,Y)=>await o("/api/graph",{level:Y,waypoints:$.toArray().flat()});let u=ce(!1),h=ce(void 0),L=M(()=>t(h)&&e.bounds&&t(u)?Ai({query:{id:t(h)}}).then($=>$.data):void 0),E=M(()=>e.bounds&&t(u)&&e.zoom>15?m(bt.LngLatBounds.convert(e.bounds)):void 0),p=M(()=>e.bounds&&t(u)?g(bt.LngLatBounds.convert(e.bounds)):void 0);const F=$=>({...$,outOfService:JSON.parse($.outOfService).map(([Y,ne])=>[new Date(Y),new Date(ne)])});let x=ce(null),S=ce(null);Ze(()=>{t(u)&&e.bounds&&e.zoom>15?(_(bt.LngLatBounds.convert(e.bounds),e.level).then($=>{D(x,$,!0)}),f(bt.LngLatBounds.convert(e.bounds)).then($=>{D(S,$,!0)})):D(x,null)});let w=ce(void 0),O=ce(void 0),A=ce(void 0),J=M(()=>t(O)?.match?.lat&&t(O)?.match.lon&&t(A)?.match?.lat&&t(A)?.match.lon&&t(w)?d({start:s(t(O)),destination:s(t(A)),profile:t(w),direction:"forward"}):void 0),P=ce(null),C=ce(null);var N={getGraph:_},I=rc(),X=y(I);{let $=M(()=>t(u)?"default":"outline");at(X,{size:"icon",get variant(){return t($)},onclick:()=>{D(u,!t(u))},children:(Y,ne)=>{ei(Y,{size:"icon",class:"h-[1.2rem] w-[1.2rem]"})},$$slots:{default:!0}})}var re=l(X,2);{var j=$=>{tr($,{position:"bottom-right",children:(Y,ne)=>{var ge=Q(),fe=y(ge);de(fe,()=>dr,(Re,he)=>{he(Re,{class:"min-w-[550px] mb-4",children:(Ie,Le)=>{var ze=Gd(),Ve=y(ze),ee=v(Ve),q=v(ee),De=l(q),xe=v(De,!0);c(De),c(ee);var Se=l(ee,2);at(Se,{variant:"ghost",onclick:()=>D(C,null),children:(Oe,Z)=>{Rr(Oe,{})},$$slots:{default:!0}}),c(Ve);var Ae=l(Ve,2);de(Ae,()=>qs,(Oe,Z)=>{Z(Oe,{class:"flex flex-col gap-6",children:(le,_e)=>{var ve=Bd(),se=y(ve);qa(se,{children:(pe,Fe)=>{var Ne=Md(),Ke=y(Ne);kn(Ke,{children:(me,Ue)=>{ea(me,{children:(st,xt)=>{var We=Dd(),ct=y(We);sr(ct,{class:"font-semibold",children:(ot,pt)=>{Ge();var Dt=ke("Not available from");n(ot,Dt)},$$slots:{default:!0}});var Ct=l(ct,2);sr(Ct,{class:"font-semibold",children:(ot,pt)=>{Ge();var Dt=ke("to");n(ot,Dt)},$$slots:{default:!0}});var wt=l(Ct,2);sr(wt,{}),n(st,We)},$$slots:{default:!0}})},$$slots:{default:!0}});var ue=l(Ke,2);Za(ue,{children:(me,Ue)=>{var st=Q(),xt=y(st);{var We=ct=>{var Ct=Q(),wt=y(Ct);nt(wt,17,()=>t(C).outOfService,Nt,(ot,pt,Dt)=>{ea(ot,{children:(Ht,Ut)=>{var Gt=zd(),jt=y(Gt);er(jt,{children:(Vt,qt)=>{xa(Vt,{get value(){return t(C).outOfService[Dt][0]},set value(Zt){t(C).outOfService[Dt][0]=Zt}})},$$slots:{default:!0}});var Yt=l(jt,2);er(Yt,{children:(Vt,qt)=>{xa(Vt,{get value(){return t(C).outOfService[Dt][1]},set value(Zt){t(C).outOfService[Dt][1]=Zt}})},$$slots:{default:!0}});var $t=l(Yt,2);er($t,{children:(Vt,qt)=>{at(Vt,{variant:"outline",onclick:()=>t(C).outOfService.splice(Dt,1),children:(Zt,R)=>{Rr(Zt,{})},$$slots:{default:!0}})},$$slots:{default:!0}}),n(Ht,Gt)},$$slots:{default:!0}})}),n(ct,Ct)};z(xt,ct=>{t(C).outOfService&&ct(We)})}n(me,st)},$$slots:{default:!0}}),n(pe,Ne)},$$slots:{default:!0}});var we=l(se,2),Ee=v(we);at(Ee,{variant:"outline",onclick:()=>t(C).outOfService.push([new Date,new Date]),children:(pe,Fe)=>{Ge();var Ne=ke("Add Maintainance");n(pe,Ne)},$$slots:{default:!0}});var be=l(Ee,2);at(be,{class:"w-48",variant:"outline",onclick:()=>{D(P,T(t(C)),!0)},children:(pe,Fe)=>{var Ne=Q(),Ke=y(Ne);{var ue=Ue=>{var st=Q(),xt=y(st);gr(xt,()=>t(P),We=>{ra(We,{class:"animate-spin w-4 h-4"})},(We,ct)=>{var Ct=ke("Update");n(We,Ct)}),n(Ue,st)},me=Ue=>{var st=ke("Update");n(Ue,st)};z(Ke,Ue=>{t(P)!=null?Ue(ue):Ue(me,!1)})}n(pe,Ne)},$$slots:{default:!0}});var ye=l(be,2);at(ye,{onclick:()=>{D(P,T({id:t(C).id,status:t(C).status==="ACTIVE"?"INACTIVE":"ACTIVE"}),!0)},children:(pe,Fe)=>{var Ne=Q(),Ke=y(Ne);{var ue=Ue=>{var st=ke("DEACTIVATE");n(Ue,st)},me=Ue=>{var st=ke("ACTIVATE");n(Ue,st)};z(Ke,Ue=>{t(C).status==="ACTIVE"?Ue(ue):Ue(me,!1)})}n(pe,Ne)},$$slots:{default:!0}}),c(we),n(le,ve)},$$slots:{default:!0}})}),U(()=>{G(q,`Fahrstuhl ${t(C).desc??""} `),G(xe,t(C).id)}),n(Ie,ze)},$$slots:{default:!0}})}),n(Y,ge)},$$slots:{default:!0}})};z(re,$=>{t(C)&&$(j)})}var B=l(re,2);{var te=$=>{var Y=tc(),ne=y(Y);{var ge=Z=>{var le=Q(),_e=y(le);gr(_e,()=>t(L),null,(ve,se)=>{var we=Q(),Ee=y(we);{var be=ye=>{tr(ye,{position:"bottom-right",children:(pe,Fe)=>{var Ne=Q(),Ke=y(Ne);de(Ke,()=>dr,(ue,me)=>{me(ue,{class:"w-[600px] h-[500px] overflow-y-auto bg-background rounded-lg",children:(Ue,st)=>{var xt=Kd(),We=y(xt),ct=v(We),Ct=v(ct),wt=l(Ct),ot=v(wt,!0);c(wt);var pt=l(wt,2),Dt=v(pt);c(pt),c(ct);var Ht=l(ct,2);at(Ht,{variant:"ghost",onclick:()=>{D(h,void 0)},children:(Gt,jt)=>{Rr(Gt,{})},$$slots:{default:!0}}),c(We);var Ut=l(We,2);qa(Ut,{children:(Gt,jt)=>{var Yt=Zd(),$t=y(Yt);kn($t,{children:(qt,Zt)=>{ea(qt,{children:(R,k)=>{var K=Hd(),V=y(K);sr(V,{class:"text-center",children:(lt,Be)=>{Ge();var et=ke("Station");n(lt,et)},$$slots:{default:!0}});var oe=l(V,2);sr(oe,{class:"text-center",children:(lt,Be)=>{Ge();var et=ke("Default");n(lt,et)},$$slots:{default:!0}});var ae=l(oe,2);{var Te=lt=>{var Be=Ud(),et=y(Be);sr(et,{class:"text-center",children:(Xe,At)=>{Ge();var qe=ke("Foot");n(Xe,qe)},$$slots:{default:!0}});var ft=l(et,2);sr(ft,{class:"text-center",children:(Xe,At)=>{Ge();var qe=ke("Foot Routed");n(Xe,qe)},$$slots:{default:!0}}),n(lt,Be)};z(ae,lt=>{t(se).hasFootTransfers&&lt(Te)})}var Me=l(ae,2);{var je=lt=>{var Be=jd(),et=y(Be);sr(et,{class:"text-center",children:(Xe,At)=>{Ge();var qe=ke("Wheelchair");n(Xe,qe)},$$slots:{default:!0}});var ft=l(et,2);sr(ft,{class:"text-center",children:(Xe,At)=>{Ge();var qe=ke("Wheelchair Routed");n(Xe,qe)},$$slots:{default:!0}}),n(lt,Be)};z(Me,lt=>{t(se).hasWheelchairTransfers&&lt(je)})}var dt=l(Me,2);{var zt=lt=>{sr(lt,{class:"text-center",children:(Be,et)=>{Ge();var ft=ke("Car");n(Be,ft)},$$slots:{default:!0}})};z(dt,lt=>{t(se).hasCarTransfers&&lt(zt)})}n(R,K)},$$slots:{default:!0}})},$$slots:{default:!0}});var Vt=l($t,2);Za(Vt,{children:(qt,Zt)=>{var R=Q(),k=y(R);nt(k,17,()=>t(se).transfers,Nt,(K,V)=>{ea(K,{children:(oe,ae)=>{var Te=qd(),Me=y(Te);er(Me,{children:(Xe,At)=>{Ge();var qe=Vd(),ut=y(qe),He=l(ut,3),tt=v(He,!0);c(He),U(()=>{G(ut,`${t(V).to.name??""} `),G(tt,t(V).to.stopId)}),n(Xe,qe)},$$slots:{default:!0}});var je=l(Me,2);er(je,{children:(Xe,At)=>{var qe=Q(),ut=y(qe);{var He=tt=>{at(tt,{variant:"outline",onclick:()=>{D(O,Ft(t(se).place,t(se).place.level)),D(A,Ft(t(V).to,t(V).to.level)),D(w,"foot")},children:(rt,mt)=>{Ge();var vt=ke();U(()=>G(vt,t(V).default)),n(rt,vt)},$$slots:{default:!0}})};z(ut,tt=>{t(V).default!==void 0&&tt(He)})}n(Xe,qe)},$$slots:{default:!0}});var dt=l(je,2);{var zt=Xe=>{var At=Wd(),qe=y(At);er(qe,{children:(He,tt)=>{var rt=Q(),mt=y(rt);{var vt=Je=>{at(Je,{variant:"outline",onclick:()=>{D(O,Ft(t(se).place,t(se).place.level)),D(A,Ft(t(V).to,t(V).to.level)),D(w,"foot")},children:(gt,Ot)=>{Ge();var Qe=ke();U(()=>G(Qe,t(V).foot)),n(gt,Qe)},$$slots:{default:!0}})};z(mt,Je=>{t(V).foot!==void 0&&Je(vt)})}n(He,rt)},$$slots:{default:!0}});var ut=l(qe,2);er(ut,{children:(He,tt)=>{var rt=Q(),mt=y(rt);{var vt=Je=>{at(Je,{variant:"outline",onclick:()=>{D(O,Ft(t(se).place,t(se).place.level)),D(A,Ft(t(V).to,t(V).to.level)),D(w,"foot")},children:(gt,Ot)=>{Ge();var Qe=ke();U(()=>G(Qe,t(V).footRouted)),n(gt,Qe)},$$slots:{default:!0}})};z(mt,Je=>{t(V).footRouted!==void 0&&Je(vt)})}n(He,rt)},$$slots:{default:!0}}),n(Xe,At)};z(dt,Xe=>{t(se).hasFootTransfers&&Xe(zt)})}var lt=l(dt,2);{var Be=Xe=>{var At=Yd(),qe=y(At);er(qe,{children:(He,tt)=>{var rt=Q(),mt=y(rt);{var vt=Je=>{{let gt=M(()=>t(V).wheelchairUsesElevator?"text-red-500":"text-green-500");at(Je,{get class(){return t(gt)},variant:"outline",onclick:()=>{D(O,Ft(t(se).place,t(se).place.level)),D(A,Ft(t(V).to,t(V).to.level)),D(w,"wheelchair")},children:(Ot,Qe)=>{Ge();var _t=ke();U(()=>G(_t,t(V).wheelchair)),n(Ot,_t)},$$slots:{default:!0}})}};z(mt,Je=>{t(V).wheelchair!==void 0&&Je(vt)})}n(He,rt)},$$slots:{default:!0}});var ut=l(qe,2);er(ut,{children:(He,tt)=>{var rt=Q(),mt=y(rt);{var vt=Je=>{{let gt=M(()=>t(V).wheelchairUsesElevator?"text-red-500":"text-green-500");at(Je,{get class(){return t(gt)},variant:"outline",onclick:()=>{D(O,Ft(t(se).place,t(se).place.level)),D(A,Ft(t(V).to,t(V).to.level)),D(w,"wheelchair")},children:(Ot,Qe)=>{Ge();var _t=ke();U(()=>G(_t,t(V).wheelchairRouted)),n(Ot,_t)},$$slots:{default:!0}})}};z(mt,Je=>{t(V).wheelchairRouted!==void 0&&Je(vt)})}n(He,rt)},$$slots:{default:!0}}),n(Xe,At)};z(lt,Xe=>{t(se).hasWheelchairTransfers&&Xe(Be)})}var et=l(lt,2);{var ft=Xe=>{er(Xe,{children:(At,qe)=>{var ut=Q(),He=y(ut);{var tt=rt=>{at(rt,{variant:"outline",onclick:()=>{D(O,Ft(t(se).place,t(se).place.level)),D(A,Ft(t(V).to,t(V).to.level)),D(w,"car")},children:(mt,vt)=>{Ge();var Je=ke();U(()=>G(Je,t(V).car)),n(mt,Je)},$$slots:{default:!0}})};z(He,rt=>{t(V).car!==void 0&&rt(tt)})}n(At,ut)},$$slots:{default:!0}})};z(et,Xe=>{t(se).hasCarTransfers&&Xe(ft)})}n(oe,Te)},$$slots:{default:!0}})}),n(qt,R)},$$slots:{default:!0}}),n(Gt,Yt)},$$slots:{default:!0}}),U(()=>{G(Ct,`${t(se).place.name??""}
								${t(se).place.track??""} `),G(ot,t(se).place.stopId),G(Dt,`Level: ${t(se).place.level??""}`)}),n(Ue,xt)},$$slots:{default:!0}})}),n(pe,Ne)},$$slots:{default:!0}})};z(Ee,ye=>{t(se)&&ye(be)})}n(ve,we)}),n(Z,le)};z(ne,Z=>{t(L)&&Z(ge)})}var fe=l(ne,2);{var Re=Z=>{var le=Q(),_e=y(le);gr(_e,()=>t(E),null,(ve,se)=>{ur(ve,{id:"matches",get data(){return t(se)},children:(we,Ee)=>{var be=$d(),ye=y(be);It(ye,{onclick:Fe=>{const Ne=Fe.features[0].properties;D(h,Ne.id,!0)},id:"matches",type:"circle",filter:["all",["==","$type","Point"]],layout:{},paint:{"circle-color":["match",["get","type"],"location","#34ebde","#fa921b"],"circle-radius":5},children:(Fe,Ne)=>{pr(Fe,{trigger:"click",get children(){return xr}})},$$slots:{default:!0}});var pe=l(ye,2);It(pe,{id:"match",type:"line",filter:["all",["==","type","match"]],layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#00ff00","line-width":3},children:(Fe,Ne)=>{pr(Fe,{trigger:"click",get children(){return xr}})},$$slots:{default:!0}}),n(we,be)},$$slots:{default:!0}})}),n(Z,le)};z(fe,Z=>{t(E)&&Z(Re)})}var he=l(fe,2);{var Ie=Z=>{var le=Q(),_e=y(le);gr(_e,()=>t(p),null,(ve,se)=>{ur(ve,{id:"flex",get data(){return t(se)},children:(we,Ee)=>{var be=Xd(),ye=y(be);It(ye,{onclick:Ke=>{const ue=Ke.features[0].properties;D(h,ue.id,!0)},id:"flex-location-groups",type:"circle",filter:["all",["==","$type","Point"]],layout:{},paint:{"circle-color":"#00ff00","circle-radius":5},children:(Ke,ue)=>{pr(Ke,{trigger:"click",get children(){return xr}})},$$slots:{default:!0}});var pe=l(ye,2);It(pe,{id:"flex-areas",type:"fill",layout:{},filter:["literal",!0],paint:{"fill-color":"#088","fill-opacity":.4,"fill-outline-color":"#000"}});var Fe=l(pe,2);It(Fe,{id:"flex-areas-outline",type:"line",layout:{},filter:["literal",!0],paint:{"line-color":"#000","line-width":2}});var Ne=l(Fe,2);It(Ne,{id:"flex-areas-labels",type:"symbol",layout:{"symbol-placement":"point","text-field":["get","name"],"text-font":["Noto Sans Regular"],"text-size":16},filter:["literal",!0],paint:{"text-halo-width":12,"text-halo-color":"#fff","text-color":"#f00"}}),n(we,be)},$$slots:{default:!0}})}),n(Z,le)};z(he,Z=>{t(p)&&Z(Ie)})}var Le=l(he,2);{var ze=Z=>{var le=Q(),_e=y(le);gr(_e,()=>t(J),null,(ve,se)=>{var we=Q(),Ee=y(we);{var be=ye=>{ur(ye,{id:"route",get data(){return t(se)},children:(pe,Fe)=>{var Ne=Jd(),Ke=y(Ne);{let me=M(()=>["any",["!has","level"],["==","level",e.level]]);It(Ke,{id:"path-outline",type:"line",layout:{"line-join":"round","line-cap":"round"},get filter(){return t(me)},paint:{"line-color":"#cfa900","line-width":7.5,"line-opacity":.8}})}var ue=l(Ke,2);{let me=M(()=>["any",["!has","level"],["==","level",e.level]]);It(ue,{id:"path",type:"line",layout:{"line-join":"round","line-cap":"round"},get filter(){return t(me)},paint:{"line-color":"#fccf03","line-width":5,"line-opacity":.8}})}n(pe,Ne)},$$slots:{default:!0}})};z(Ee,ye=>{t(se).type=="FeatureCollection"&&ye(be)})}n(ve,we)}),n(Z,le)};z(Le,Z=>{t(J)&&Z(ze)})}var Ve=l(Le,2);{var ee=Z=>{ur(Z,{id:"graph",get data(){return t(x)},children:(le,_e)=>{var ve=Qd(),se=y(ve);{let be=M(()=>["all",["==","type","geometry"],["any",["!has","level"],["==","level",e.level]]]);It(se,{id:"graph-geometry",type:"line",get filter(){return t(be)},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#e55e5e","line-width":3,"line-opacity":1},children:(ye,pe)=>{pr(ye,{trigger:"click",get children(){return xr}})},$$slots:{default:!0}})}var we=l(se,2);{let be=M(()=>["all",["==","type","edge"],["any",["!has","level"],["==","level",e.level]]]);It(we,{id:"graph-edge",type:"line",get filter(){return t(be)},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#a300d9","line-width":3},children:(ye,pe)=>{pr(ye,{trigger:"click",get children(){return xr}})},$$slots:{default:!0}})}var Ee=l(we,2);It(Ee,{id:"graph-node",type:"circle",filter:["all",["==","$type","Point"]],layout:{},paint:{"circle-color":["match",["get","label"],"unreachable","#ff1150","#11ffaf"],"circle-radius":5},children:(be,ye)=>{pr(be,{trigger:"click",get children(){return xr}})},$$slots:{default:!0}}),n(le,ve)},$$slots:{default:!0}})};z(Ve,Z=>{t(x)!=null&&Z(ee)})}var q=l(Ve,2);{var De=Z=>{ur(Z,{id:"elevators",get data(){return t(S)},children:(le,_e)=>{var ve=ec(),se=y(ve);It(se,{id:"elevators",type:"circle",filter:["all",["==","$type","Point"]],layout:{},paint:{"circle-color":["match",["get","status"],"ACTIVE","#ffff00","#ff00ff"],"circle-radius":8},onclick:Ee=>{D(C,F(Ee.features[0].properties),!0)}});var we=l(se,2);It(we,{id:"elevators-match",type:"line",filter:["all",["==","type","match"]],layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#00ff00","line-width":3},children:(Ee,be)=>{pr(Ee,{trigger:"click",get children(){return xr}})},$$slots:{default:!0}}),n(le,ve)},$$slots:{default:!0}})};z(q,Z=>{t(S)&&Z(De)})}var xe=l(q,2);{var Se=Z=>{Hr(Z,{color:"magenta",draggable:!1,get location(){return t(O)}})};z(xe,Z=>{t(O)&&Z(Se)})}var Ae=l(xe,2);{var Oe=Z=>{Hr(Z,{color:"yellow",draggable:!1,get location(){return t(A)}})};z(Ae,Z=>{t(A)&&Z(Oe)})}n($,Y)};z(B,$=>{t(u)&&$(te)})}return n(i,I),Ce(N)}function yr(i){const e=bt.LngLat.convert(i);return`${e.lat},${e.lng}`}const ma=17;var nc=b("<!> ",1);function oc(i,e){Pe(e,!0);let a=H(e,"level",15),o=ce("level-0"),r=ce($e([]));Ze(()=>{a(Number(t(o).substring(6)))}),Ze(()=>{if(e.bounds&&e.zoom&&e.zoom>ma){const g=bt.LngLatBounds.convert(e.bounds),f=yr(g.getNorthWest()),T=yr(g.getSouthEast());Pi({query:{min:f,max:T}}).then(_=>{D(r,_.data?.filter(u=>Number.isInteger(u)).map(u=>String(u))??[],!0)})}else D(r,[],!0),a(0)});var s=Q(),d=y(s);{var m=g=>{tr(g,{position:"top-right",class:"mb-5",children:(f,T)=>{en(f,{class:"flex flex-col items-end space-y-1",get value(){return t(o)},set value(_){D(o,_,!0)},children:(_,u)=>{var h=Q(),L=y(h);nt(L,16,()=>t(r),E=>E,(E,p)=>{{let F=M(()=>`level-${p}`);oa(E,{get for(){return t(F)},class:"inline-flex items-center justify-center font-bold rounded-md border-2 border-muted bg-popover h-9 w-9 hover:bg-accent hover:text-accent-foreground [&:has([data-state=checked])]:border-blue-600 hover:cursor-pointer",children:(x,S)=>{var w=nc(),O=y(w);{let J=M(()=>`level-${p}`),P=M(()=>`level-${p}`),C=M(()=>`level-${p}`);na(O,{get value(){return t(J)},get id(){return t(P)},class:"sr-only",get"aria-label"(){return t(C)}})}var A=l(O);U(()=>G(A,` ${p??""}`)),n(x,w)},$$slots:{default:!0}})}}),n(_,h)},$$slots:{default:!0}})},$$slots:{default:!0}})};z(d,g=>{t(r).length>1&&g(m)})}n(i,s),Ce()}var ic=b(`<div><div class="mx-auto my-5 relative before:content-[''] before:absolute before:inset-[-20px] before:inset-x-[-50vw] flex items-center justify-center"><div><!></div> <div></div></div> <div><!></div></div>`);function sc(i,e){Pe(e,!0);let a=H(e,"ref",15,null),o=H(e,"showMap",15),r=Rt(e,["$$slots","$$events","$$legacy","ref","showMap","class","children"]),s=ce(!0);const d=.7,m=0;let g=0,f=0,T=!1,_=!1,u;sa(()=>ro(u)),Ze(()=>Vs(u));const h=I=>{for(;I&&I!==document.documentElement;){const re=window.getComputedStyle(I).overflowY;if(re!=="visible"&&re!=="hidden"&&I.scrollHeight>I.clientHeight)return I;I=I.parentElement}return null},L=I=>{const X=_?null:I.target,re=X?h(X):null;g=I.touches[0].clientY,T=t(s)&&re?re.scrollTop===0:!0},E=I=>{if(!T)return;f=I.touches[0].clientY;const X=f-g,re=t(s)?0:window.innerHeight*d;t(s)&&X<0||!t(s)&&X>0||(o(!0),a(a().style.transition="none",!0),a(a().style.transform=`translateY(${re+X}px)`,!0))},p=I=>{if(!T)return;T=!1,a(a().style.transition="",!0);const X=I.changedTouches[0].clientY-g;(70<X||X==0&&_)&&t(s)?(a(a().style.transform=`translateY(${window.innerHeight*d}px)`,!0),D(s,!1)):(X<-70||X==0&&_)&&!t(s)?(a(a().style.transform=`translateY(${m}px)`,!0),D(s,!0)):a(a().style.transform=`translateY(${t(s)?m:window.innerHeight*d}px)`,!0),_=!1};var F=ic();ar(F,I=>({class:I,...r,ontouchstart:L,ontouchmove:E,ontouchend:p}),[()=>Ye("bg-card text-card-foreground rounded-xl pb-5 h-full border shadow max-w-full transition-transform duration-200 ease-out",e.class)]);var x=v(F);x.__touchstart=I=>{_=!0,o(!0),L(I)};var S=v(x);let w;var O=v(S);Ra(O,{class:"size-12 text-gray-300 scale-x-150",strokeWidth:3.5}),c(S);var A=l(S,2);let J;c(x);var P=l(x,2);let C;var N=v(P);St(N,()=>e.children??it),c(P),Mt(P,I=>u=I,()=>u),c(F),Mt(F,I=>a(I),()=>a()),U(()=>{w=Et(S,1,"absolute transition-all duration-200",null,w,{"opacity-0":!t(s),"opacity-100":t(s)}),J=Et(A,1,"w-14 h-2 bg-gray-300 rounded-full transition-all duration-200",null,J,{"opacity-0":t(s),"opacity-100":!t(s)}),C=Et(P,1,"",null,C,{"overflow-auto":t(s)})}),n(i,F),Ce()}Yr(["touchstart"]);var lc=b('<div class="col-span-full w-full flex justify-between items-center space-x-4"><div class="border-t w-full h-0"></div> <button class="px-2 py-1 bg-blue-600 hover:!bg-blue-700 text-white font-bold text-sm border rounded-lg text-nowrap"> </button> <div class="border-t w-full h-0"></div></div>'),dc=b('<span class="mt-1 text-nowrap px-1 border text-xs rounded-xl"> </span>'),cc=b('<div class="flex items-center text-destructive text-sm"><!> <span class="ml-1 leading-none"> </span></div>'),uc=b('<div><div class="flex col justify-between"><!> <div class="mx-4"><!> <!></div></div></div> <div class="w-full"><div class="flex items-start justify-between text-base"><div class="flex items-start gap-1"><!> <!></div> <!> <!></div> <!></div> <div class="border col-span-full"></div>',1),vc=b('<div class="col-span-full w-full flex items-center justify-center"><!></div>'),fc=b('<div class="col-span-full w-full flex justify-between items-center space-x-4"><div class="border-t w-full h-0"></div> <button class="px-2 py-1 bg-blue-600 hover:!bg-blue-700 text-white text-sm font-bold border rounded-lg text-nowrap"> </button> <div class="border-t w-full h-0"></div></div>'),mc=b("<!> <!> <!> <!>",1),gc=b('<div class="col-span-full w-full flex items-center justify-center"><!></div>'),hc=b('<div class="flex items-center justify-center"><!></div>'),pc=b('<div class="gap-y-3 mb-1 text-base grid grid-cols-[auto_1fr] items-start content-start"><div class="col-span-full w-full flex items-center justify-center"><!></div> <!></div>');function _c(i,e){Pe(e,!0);let a=H(e,"stopNameFromResponse",15),o=H(e,"stop",15),r=M(()=>({stopId:e.stopId,time:e.time.toISOString(),arriveBy:e.arriveBy,n:10,exactRadius:!1,radius:200,language:[Kt]})),s=ce($e([]));Ze(()=>{D(s,[d(Fa({query:t(r)}))],!0)});const d=_=>_.then(u=>{if(u.error)throw console.log(u.error),{error:u.error.error,status:u.response.status};a(u.data?.place?.name||"");let h=u.data?.place;return o(Ft(bt.LngLat.convert([h.lon,h.lat]))),e.stopMarker?.setLngLat(o().match),u.data});var m=pc(),g=v(m),f=v(g);at(f,{class:"font-bold",variant:"outline",onclick:()=>{qr(e.stopName,e.stopId,e.time,!e.arriveBy)},children:(_,u)=>{var h=Q(),L=y(h);{var E=F=>{var x=ke();U(()=>G(x,W.switchToDepartures)),n(F,x)},p=F=>{var x=ke();U(()=>G(x,W.switchToArrivals)),n(F,x)};z(L,F=>{e.arriveBy?F(E):F(p,!1)})}n(_,h)},$$slots:{default:!0}}),c(g);var T=l(g,2);nt(T,17,()=>t(s),Nt,(_,u,h)=>{var L=Q(),E=y(L);gr(E,()=>t(u),p=>{var F=hc(),x=v(F);ra(x,{class:"animate-spin w-12 h-12 m-20"}),c(F),n(p,F)},(p,F)=>{var x=mc(),S=y(x);{var w=N=>{var I=lc(),X=l(v(I),2);X.__click=()=>{t(s).splice(0,0,d(Fa({query:{...t(r),pageCursor:t(F).previousPageCursor}})))};var re=v(X,!0);c(X),Ge(2),c(I),U(()=>G(re,W.earlier)),n(N,I)};z(S,N=>{h===0&&t(F).previousPageCursor.length&&N(w)})}var O=l(S,2);nt(O,17,()=>t(F).stopTimes,Nt,(N,I)=>{const X=M(()=>e.arriveBy?t(I).place.arrival:t(I).place.departure),re=M(()=>e.arriveBy?t(I).place.scheduledArrival:t(I).place.scheduledDeparture);var j=uc(),B=y(j),te=v(B),$=v(te);Ya($,{class:"max-w-30 text-ellipsis overflow-hidden",get l(){return t(I)},get onClickTrip(){return aa}});var Y=l($,2),ne=v(Y);{let Ae=M(()=>e.time.toISOString());Wr(ne,{variant:"schedule",get timeZone(){return t(I).place.tz},get isRealtime(){return t(I).realTime},get timestamp(){return t(X)},get scheduledTimestamp(){return t(re)},get queriedTime(){return t(Ae)},get arriveBy(){return e.arriveBy}})}var ge=l(ne,2);Wr(ge,{variant:"realtime",get timeZone(){return t(I).place.tz},get isRealtime(){return t(I).realTime},get timestamp(){return t(X)},get scheduledTimestamp(){return t(re)},get arriveBy(){return e.arriveBy}}),c(Y),c(te),c(B);var fe=l(B,2),Re=v(fe),he=v(Re),Ie=v(he);Ja(Ie,{class:"mt-1 shrink-0 stroke-muted-foreground h-4 w-4"});var Le=l(Ie),ze=l(Le);{var Ve=Ae=>{var Oe=ke();U(()=>G(Oe,`(${t(I).tripTo.name??""})`)),n(Ae,Oe)};z(ze,Ae=>{(!t(I).headsign||!t(I).tripTo.name.startsWith(t(I).headsign))&&Ae(Ve)})}c(he);var ee=l(he,2);{var q=Ae=>{var Oe=dc(),Z=v(Oe);c(Oe),U(le=>G(Z,`${le??""}
								${t(I).place.track??""}`),[()=>ao(t(I).mode)=="Track"?W.trackAbr:W.platformAbr]),n(Ae,Oe)};z(ee,Ae=>{t(I).place.track&&Ae(q)})}var De=l(ee,2);rn(De,{get tz(){return t(I).place.tz},get alerts(){return t(I).place.alerts}}),c(Re);var xe=l(Re,2);{var Se=Ae=>{var Oe=cc(),Z=v(Oe);Aa(Z,{class:"stroke-destructive h-4 w-4"});var le=l(Z,2),_e=v(le,!0);c(le),c(Oe),U(()=>G(_e,t(I).tripCancelled?W.tripCancelled:t(I).cancelled?W.stopCancelled:e.arriveBy?W.outDisallowed:W.inDisallowed)),n(Ae,Oe)};z(xe,Ae=>{t(I).pickupDropoffType=="NOT_ALLOWED"&&Ae(Se)})}c(fe),Ge(2),U(()=>G(Le,` ${t(I).headsign??""} `)),n(N,j)});var A=l(O,2);{var J=N=>{var I=vc(),X=v(I);kr(X,{get message(){return W.noItinerariesFound},status:404}),c(I),n(N,I)};z(A,N=>{t(F).stopTimes.length||N(J)})}var P=l(A,2);{var C=N=>{var I=fc(),X=l(v(I),2);X.__click=()=>{t(s).push(d(Fa({query:{...t(r),pageCursor:t(F).nextPageCursor}})))};var re=v(X,!0);c(X),Ge(2),c(I),U(()=>G(re,W.later)),n(N,I)};z(P,N=>{h===t(s).length-1&&t(F).nextPageCursor.length&&N(C)})}n(p,x)},(p,F)=>{var x=gc(),S=v(x);kr(S,{get message(){return t(F).error},get status(){return t(F).status}}),c(x),n(p,x)}),n(_,L)}),c(m),n(i,m),Ce()}Yr(["click"]);function Ba(i,e){const a=ga(e,["children","$$slots","$$events","$$legacy"]),o=ga(a,["class","value"]);Pe(e,!1);let r=H(e,"class",8,void 0),s=H(e,"value",8);Wn();{let d=qn(()=>(ha(Ye),ha(r()),Pa(()=>Ye("ring-offset-background focus-visible:ring-ring mt-2 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2",r()))));ti(i,Bt({get class(){return t(d)},get value(){return s()}},()=>o,{children:(m,g)=>{var f=Q(),T=y(f);Yn(T,e,"default",{}),n(m,f)},$$slots:{default:!0}}))}Ce()}function yc(i,e){const a=ga(e,["children","$$slots","$$events","$$legacy"]),o=ga(a,["class"]);Pe(e,!1);let r=H(e,"class",8,void 0);Wn();{let s=qn(()=>(ha(Ye),ha(r()),Pa(()=>Ye("bg-muted text-muted-foreground inline-flex h-10 items-center justify-center rounded-md p-1",r()))));ri(i,Bt({get class(){return t(s)}},()=>o,{children:(d,m)=>{var g=Q(),f=y(g);Yn(f,e,"default",{}),n(d,g)},$$slots:{default:!0}}))}Ce()}function Ga(i,e){Pe(e,!0),H(e,"ref",11,null);let a=H(e,"class",7),o=Rt(e,["$$slots","$$events","$$legacy","ref","class","value"]);var r={get class(){return a()},set class(m){a(m)}},s=Q(),d=y(s);{let m=M(()=>Ye("ring-offset-background focus-visible:ring-ring data-[state=active]:bg-background data-[state=active]:text-foreground inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm",a()));de(d,()=>ai,(g,f)=>{f(g,Bt({get class(){return t(m)},get value(){return e.value}},()=>o))})}return n(i,s),Ce(r)}const bc=ni;var Tc=b('<div id="searchmask-container" class="flex flex-col space-y-4 p-4 relative"><!></div>');function xc(i,e){Pe(e,!0);let a=ce(void 0),o=ce($e([]));var r=Tc(),s=v(r);ia(s,{name:"from",get placeholder(){return W.from},type:"STOP",onChange:d=>{d.match&&qr(d.label,d.match.id,e.time)},get selected(){return t(a)},set selected(d){D(a,d,!0)},get items(){return t(o)},set items(d){D(o,d,!0)}}),c(r),n(i,r),Ce()}const In=["NONE","OVERLAY_RECTS","OVERLAY_CIRCLES","GEOMETRY_CIRCLES"],no=(i,e)=>In.indexOf(i)<In.indexOf(e),wc=(i,e)=>no(i,e)?i:e,Sn=i=>i=="OVERLAY_RECTS"||i=="OVERLAY_CIRCLES";function Rc(i){return new Worker(""+new URL("../workers/IsochronesWorker-BHXDd_GU.js",import.meta.url).href,{name:i?.name})}function Ac(i,e){Pe(e,!0);let a=H(e,"options",15);const o={type:"LineString",coordinates:[]};let r=ce(void 0),s=ce("NONE");const d=M(()=>e.streetModes.includes("BIKE")?.0038:e.wheelchair?8e-4:.0012),m=M(()=>bt.LngLatBounds.convert(e.bounds??[[0,0],[1,1]])),g=M(()=>[[t(m)._sw.lng,t(m)._ne.lat],[t(m)._ne.lng,t(m)._ne.lat],[t(m)._ne.lng,t(m)._sw.lat],[t(m)._sw.lng,t(m)._sw.lat]]);let f=[],T=0,_=0,u=0;sa(()=>{T=e.maxAllTime,_=t(d)}),Ze(()=>{if(!e.map||!e.active||t(r)!==void 0)return;const L="isochrones-canvas",E="isochrones-circles";let p=document.createElement("canvas");if(p===void 0){console.log("Canvas not supported");return}let F=p.transferControlToOffscreen();e.map.addSource(L,{type:"canvas",canvas:p,coordinates:t(g)}),e.map.addLayer({id:L,type:"raster",source:L,paint:{"raster-opacity":a().opacity/1e3}});const x=e.map.getSource(L);e.map.addSource(E,{type:"geojson",data:o}),e.map.addLayer({id:E,type:"fill",source:E,paint:{"fill-color":a().color,"fill-opacity":a().opacity/1e3}});const S=e.map.getSource(E),w=new Rc;w.onmessage=O=>{const A=O.data.method;switch(A){case"update-display-level":{const J=O.data.index;if(J<u){console.log(`Got stale index from worker (Got ${J}, expected ${u})`);return}const P=O.data.level;P=="GEOMETRY_CIRCLES"&&t(r)&&t(r).circlesSource.setData(O.data.geometry??o),no(t(s),P)&&D(s,P,!0)}break;default:console.log(`Unknown method '${A}'`)}},w.postMessage({method:"set-canvas",canvas:F},[F]),D(r,{worker:w,canvasLayer:L,circlesLayer:E,canvasSource:x,circlesSource:S},!0)}),Ze(()=>{!e.active||a().status=="FAILED"||t(r)===void 0||(((f.length!=0||e.isochronesData.length!=0)&&f!=e.isochronesData||T!=e.maxAllTime||_!=t(d))&&(t(r).worker.postMessage({method:"update-data",index:++u,data:Wt(e.isochronesData),kilometersPerSecond:Wt(t(d)),maxSeconds:Wt(e.maxAllTime),circleResolution:e.circleResolution}),f=e.isochronesData,T=e.maxAllTime,_=t(d),D(s,"NONE"),t(r).circlesSource.setData(o)),t(r).worker.postMessage({method:"set-max-display-level",displayLevel:a().displayLevel}))}),Ze(()=>{!e.map||t(r)===void 0||(e.map.setLayoutProperty(t(r).canvasLayer,"visibility",e.active&&Sn(t(h))?"visible":"none"),e.map.setLayoutProperty(t(r).circlesLayer,"visibility",e.active&&t(h)=="GEOMETRY_CIRCLES"?"visible":"none"))}),Ze(()=>{!e.map||t(r)===void 0||(e.map.setPaintProperty(t(r).canvasLayer,"raster-opacity",a().opacity/1e3),e.map.setPaintProperty(t(r).circlesLayer,"fill-opacity",a().opacity/1e3))}),Ze(()=>{!e.map||t(r)===void 0||e.map.setPaintProperty(t(r).circlesLayer,"fill-color",a().color)});let h=M(()=>{if(!e.map||!e.active||t(r)===void 0)return"NONE";const L=wc(a().displayLevel,t(s));if(Sn(L)){t(r).canvasSource.setCoordinates(t(g));const E=e.map._containerDimensions();t(r).worker.postMessage({method:"render-canvas",level:L,boundingBox:Wt(t(m)),dimensions:E,color:a().color})}return L});Ze(()=>{a(a().status=e.isochronesData.length==0?"EMPTY":t(h)=="NONE"||t(h)==a().displayLevel?"DONE":"WORKING",!0)}),Ce()}var Pc=b('<div class="flex items-center justify-center w-full"><!></div>'),Cc=b("<div><!> <!> <!></div>");function Lc(i,e){Pe(e,!0);var a=Cc(),o=v(a);{var r=f=>{var T=Pc(),_=v(T);ra(_,{class:"animate-spin w-12 h-12 m-4"}),c(T),n(f,T)};z(o,f=>{e.options.status=="WORKING"&&f(r)})}var s=l(o,2);{var d=f=>{kr(f,{get message(){return W.isochrones.noData},status:404})};z(s,f=>{e.options.status=="EMPTY"&&f(d)})}var m=l(s,2);{var g=f=>{kr(f,{get message(){return e.options.errorMessage},get status(){return e.options.errorCode}})};z(m,f=>{e.options.status=="FAILED"&&f(g)})}c(a),n(i,a),Ce()}var Ec=b("<!> <!>",1),kc=b('<span class="bg-dark-10 relative h-2 w-full grow cursor-pointer overflow-hidden rounded-full"><!></span> <!>',1),Ic=b('<div class="grid grid-cols-[2fr_2fr_1fr] items-center gap-2"><!> <!> <input class="flex right-0 align-right" type="color"/></div>'),Sc=b("<!> <span> </span>",1),Oc=b("<!> <span> </span>",1),Fc=b("<!> <!>",1),Nc=b('<div id="isochrones-searchmask-container" class="flex flex-col space-y-4 p-4 relative"><!> <!> <div class="flex flex-row gap-2 flex-wrap"><!> <!> <!></div></div>');function Dc(i,e){Pe(e,!0);const a=ee=>{var q=Ic(),De=v(q);de(De,()=>Er,(Ae,Oe)=>{Oe(Ae,{type:"single",get value(){return w().displayLevel},set value(Z){w(w().displayLevel=Z,!0)},children:(Z,le)=>{var _e=Ec(),ve=y(_e);de(ve,()=>Lr,(we,Ee)=>{Ee(we,{class:"overflow-hidden",get"aria-label"(){return W.isochrones.displayLevel},children:(be,ye)=>{Ge();var pe=ke();U(Fe=>G(pe,Fe),[()=>N.get(w().displayLevel)]),n(be,pe)},$$slots:{default:!0}})});var se=l(ve,2);de(se,()=>Cr,(we,Ee)=>{Ee(we,{sideOffset:10,children:(be,ye)=>{var pe=Q(),Fe=y(pe);nt(Fe,19,()=>I,(Ne,Ke)=>Ke+Ne.value,(Ne,Ke)=>{var ue=Q(),me=y(ue);de(me,()=>Pr,(Ue,st)=>{st(Ue,{get value(){return t(Ke).value},get label(){return t(Ke).label},children:(xt,We)=>{Ge();var ct=ke();U(()=>G(ct,t(Ke).label)),n(xt,ct)},$$slots:{default:!0}})}),n(Ne,ue)}),n(be,pe)},$$slots:{default:!0}})}),n(Z,_e)},$$slots:{default:!0}})});var xe=l(De,2);de(xe,()=>si,(Ae,Oe)=>{Oe(Ae,{type:"single",min:0,max:1e3,class:"relative flex w-full touch-none select-none items-center",get value(){return w().opacity},set value(Z){w(w().opacity=Z,!0)},children:(Z,le)=>{var _e=kc(),ve=y(_e),se=v(ve);de(se,()=>oi,(Ee,be)=>{be(Ee,{class:"bg-foreground absolute h-full"})}),c(ve);var we=l(ve,2);de(we,()=>ii,(Ee,be)=>{be(Ee,{index:0,class:"border-border-input bg-background hover:border-dark-40 focus-visible:ring-foreground dark:bg-foreground dark:shadow-card focus-visible:outline-hidden block size-[25px] cursor-pointer rounded-full border shadow-sm transition-colors focus-visible:ring-2 focus-visible:ring-offset-2 active:scale-[0.98] disabled:pointer-events-none disabled:opacity-50"})}),n(Z,_e)},$$slots:{default:!0}})});var Se=l(xe,2);li(Se),c(q),di(Se,()=>w().color,Ae=>w(w().color=Ae,!0)),n(ee,q)};let o=H(e,"one",15),r=H(e,"maxTravelTime",15),s=H(e,"time",15),d=H(e,"useRoutedTransfers",15),m=H(e,"pedestrianProfile",15),g=H(e,"requireBikeTransport",15),f=H(e,"requireCarTransport",15),T=H(e,"transitModes",15),_=H(e,"maxTransfers",15),u=H(e,"preTransitModes",15),h=H(e,"postTransitModes",15),L=H(e,"maxPreTransitTime",15),E=H(e,"maxPostTransitTime",15),p=H(e,"arriveBy",15),F=H(e,"elevationCosts",15),x=H(e,"ignorePreTransitRentalReturnConstraints",15),S=H(e,"ignorePostTransitRentalReturnConstraints",15),w=H(e,"options",15),O=H(e,"preTransitProviderGroups",15),A=H(e,"postTransitProviderGroups",15),J=H(e,"directProviderGroups",15);const P=ee=>ee*60,C=M(()=>Ta(P(Math.min(e.serverConfig?.maxOneToAllTravelTimeLimit??240,360))).map(ee=>({value:ee.toString(),label:rr(ee)}))),N=new Map([["OVERLAY_RECTS",W.isochrones.canvasRects],["OVERLAY_CIRCLES",W.isochrones.canvasCircles],["GEOMETRY_CIRCLES",W.isochrones.geojsonCircles]]),I=[...[...N.entries()].map(([ee,q])=>({value:ee,label:q}))];let X=ce($e([])),re=p()?"arrival":"departure";const j=()=>{navigator&&navigator.geolocation&&navigator.geolocation.getCurrentPosition(te,ee=>console.log(ee),{enableHighAccuracy:!0})},B=ee=>{if(ee!=re){const q=u();u(h()),h(q);const De=L();L(E()),E(De);const xe=O();O(A()),A(xe),re=ee}},te=ee=>{o(Ft({lat:ee.coords.latitude,lon:ee.coords.longitude},0))};var $=Nc(),Y=v($);ia(Y,{get place(){return e.geocodingBiasPlace},name:"one",get placeholder(){return W.position},get selected(){return o()},set selected(ee){o(ee)},get items(){return t(X)},set items(ee){D(X,ee,!0)}});var ne=l(Y,2);at(ne,{variant:"ghost",class:"absolute z-10 right-4 top-0",size:"icon",onclick:()=>j(),children:(ee,q)=>{Xa(ee,{class:"w-5 h-5"})},$$slots:{default:!0}});var ge=l(ne,2),fe=v(ge);xa(fe,{get value(){return s()},set value(ee){s(ee)}});var Re=l(fe,2),he=()=>p()?"arrival":"departure",Ie=ee=>p(ee==="arrival");de(Re,()=>en,(ee,q)=>{q(ee,{class:"flex",get value(){return he()},set value(De){Ie(De)},onValueChange:B,children:(De,xe)=>{var Se=Fc(),Ae=y(Se);oa(Ae,{for:"isochrones-departure",class:"flex items-center rounded-md border-2 border-muted bg-popover p-1 px-2 hover:bg-accent hover:text-accent-foreground [&:has([data-state=checked])]:border-blue-600 hover:cursor-pointer",children:(Z,le)=>{var _e=Sc(),ve=y(_e);de(ve,()=>na,(Ee,be)=>{be(Ee,{value:"departure",id:"isochrones-departure",class:"sr-only",get"aria-label"(){return W.departure}})});var se=l(ve,2),we=v(se,!0);c(se),U(()=>G(we,W.departure)),n(Z,_e)},$$slots:{default:!0}});var Oe=l(Ae,2);oa(Oe,{for:"isochrones-arrival",class:"flex items-center rounded-md border-2 border-muted bg-popover p-1 px-2 hover:bg-accent hover:text-accent-foreground [&:has([data-state=checked])]:border-blue-600 hover:cursor-pointer",children:(Z,le)=>{var _e=Oc(),ve=y(_e);de(ve,()=>na,(Ee,be)=>{be(Ee,{value:"arrival",id:"isochrones-arrival",class:"sr-only",get"aria-label"(){return W.arrival}})});var se=l(ve,2),we=v(se,!0);c(se),U(()=>G(we,W.arrival)),n(Z,_e)},$$slots:{default:!0}}),n(De,Se)},$$slots:{default:!0}})});var Le=l(Re,2),ze=()=>m()==="WHEELCHAIR",Ve=ee=>m(ee?"WHEELCHAIR":"FOOT");to(Le,{get serverConfig(){return e.serverConfig},get wheelchair(){return ze()},set wheelchair(ee){Ve(ee)},get possibleMaxTravelTimes(){return t(C)},directModes:void 0,maxDirectTime:void 0,ignoreDirectRentalReturnConstraints:void 0,get additionalComponents(){return a},via:void 0,viaMinimumStay:void 0,viaLabels:{},get useRoutedTransfers(){return d()},set useRoutedTransfers(ee){d(ee)},get requireCarTransport(){return f()},set requireCarTransport(ee){f(ee)},get requireBikeTransport(){return g()},set requireBikeTransport(ee){g(ee)},get transitModes(){return T()},set transitModes(ee){T(ee)},get maxTransfers(){return _()},set maxTransfers(ee){_(ee)},get maxTravelTime(){return r()},set maxTravelTime(ee){r(ee)},get preTransitModes(){return u()},set preTransitModes(ee){u(ee)},get postTransitModes(){return h()},set postTransitModes(ee){h(ee)},get maxPreTransitTime(){return L()},set maxPreTransitTime(ee){L(ee)},get maxPostTransitTime(){return E()},set maxPostTransitTime(ee){E(ee)},get elevationCosts(){return F()},set elevationCosts(ee){F(ee)},get ignorePreTransitRentalReturnConstraints(){return x()},set ignorePreTransitRentalReturnConstraints(ee){x(ee)},get ignorePostTransitRentalReturnConstraints(){return S()},set ignorePostTransitRentalReturnConstraints(ee){S(ee)},get preTransitProviderGroups(){return O()},set preTransitProviderGroups(ee){O(ee)},get postTransitProviderGroups(){return A()},set postTransitProviderGroups(ee){A(ee)},get directProviderGroups(){return J()},set directProviderGroups(ee){J(ee)}}),c(ge),c($),n(i,$),Ce()}var zc=b("<div> </div>"),Mc=b('<a target="_blank" class="text-blue-600 dark:text-blue-300 hover:underline"> </a>'),Bc=b('<span class="inline-flex h-4 w-4 items-center justify-center text-muted-foreground" role="img"><!></span>'),Gc=b('<span class="inline-flex h-4 w-4 items-center justify-center text-muted-foreground" role="img"><!></span>'),Uc=b('<tr class="border-b border-border last:border-0"><td class="w-8 pr-2 align-middle"> </td><td class="w-6 pr-2 align-middle"><svg class="h-4 w-4 fill-current" aria-hidden="true" focusable="false"><title> </title><use></use></svg></td><td class="w-6 pr-2 align-middle"><!></td><td class="truncate align-middle max-w-64"> </td><td class="w-8 pl-2 align-middle text-right"><!></td></tr>'),jc=b('<table class="w-full text-xs"><tbody></tbody></table>'),Hc=b('<div class="pt-2 border-t border-border text-xs text-muted-foreground space-y-1 max-h-96 max-w-96 overflow-auto pr-2 relative"><!> <pre class="whitespace-pre-wrap pr-8"> </pre></div>'),Vc=b('<div class="space-y-3 text-sm leading-tight text-foreground max-w-96 w-fit"><div class="space-y-1"><div class="font-semibold"> </div> <!> <div> <!></div></div> <!> <!> <!></div>');function Wc(i,e){Pe(e,!0);let a=H(e,"showActions",3,!1),o=H(e,"debug",3,!1),r=M(()=>({station:e.station,provider:{...e.provider,vehicleTypes:e.provider.vehicleTypes.filter(P=>Object.hasOwn(e.station.vehicleTypesAvailable,P.id)||Object.hasOwn(e.station.vehicleDocksAvailable,P.id)),totalVehicleTypes:e.provider.vehicleTypes.length}}));async function s(){await navigator.clipboard.writeText(JSON.stringify(t(r),null,2))}const d=M(()=>Object.entries(e.station.vehicleTypesAvailable).map(([P,C])=>{const N=e.provider.vehicleTypes.find(X=>X.id===P),I=N.name||or[N.formFactor].label;return{id:P,available:C,formFactor:N.formFactor,name:I,propulsionIcon:Jn[N.propulsionType],returnIcon:Qn[N.returnConstraint]}}).sort((P,C)=>C.available!==P.available?C.available-P.available:P.name.localeCompare(C.name)));var m=Vc(),g=v(m),f=v(g),T=v(f,!0);c(f);var _=l(f,2);{var u=P=>{var C=zc(),N=v(C,!0);c(C),U(()=>G(N,e.station.address)),n(P,C)};z(_,P=>{e.station.address&&P(u)})}var h=l(_,2),L=v(h),E=l(L);{var p=P=>{var C=Mc(),N=v(C,!0);c(C),U(()=>{yt(C,"href",e.provider.url),G(N,e.provider.name)}),n(P,C)},F=P=>{var C=ke();U(()=>G(C,e.provider.name)),n(P,C)};z(E,P=>{e.provider.url?P(p):P(F,!1)})}c(h),c(g);var x=l(g,2);{var S=P=>{var C=jc(),N=v(C);nt(N,21,()=>t(d),I=>I.id,(I,X)=>{var re=Uc(),j=v(re),B=v(j);c(j);var te=l(j),$=v(te),Y=v($),ne=v(Y,!0);c(Y);var ge=l(Y);c($),c(te);var fe=l(te),Re=v(fe);{var he=q=>{const De=M(()=>t(X).propulsionIcon.component);var xe=Bc(),Se=v(xe);de(Se,()=>t(De),(Ae,Oe)=>{Oe(Ae,{class:"h-4 w-4","aria-hidden":"true"})}),c(xe),U(()=>{yt(xe,"title",t(X).propulsionIcon.title),yt(xe,"aria-label",t(X).propulsionIcon.title)}),n(q,xe)};z(Re,q=>{t(X).propulsionIcon&&q(he)})}c(fe);var Ie=l(fe),Le=v(Ie,!0);c(Ie);var ze=l(Ie),Ve=v(ze);{var ee=q=>{const De=M(()=>t(X).returnIcon.component);var xe=Gc(),Se=v(xe);de(Se,()=>t(De),(Ae,Oe)=>{Oe(Ae,{class:"h-4 w-4","aria-hidden":"true"})}),c(xe),U(()=>{yt(xe,"title",t(X).returnIcon.title),yt(xe,"aria-label",t(X).returnIcon.title)}),n(q,xe)};z(Ve,q=>{t(X).returnIcon&&q(ee)})}c(ze),c(re),U(()=>{G(B,`${t(X).available??""}x`),G(ne,or[t(X).formFactor].label),yt(ge,"href",`#${or[t(X).formFactor].svg}`),yt(Ie,"title",t(X).name),yt(Ie,"aria-label",t(X).name),G(Le,t(X).name)}),n(I,re)}),c(N),c(C),n(P,C)};z(x,P=>{t(d).length&&P(S)})}var w=l(x,2);{var O=P=>{at(P,{class:"font-bold",variant:"outline",get href(){return e.station.rentalUriWeb},target:"_blank",children:(C,N)=>{Ge();var I=ke();U(()=>G(I,W.rent)),n(C,I)},$$slots:{default:!0}})};z(w,P=>{a()&&e.station.rentalUriWeb&&P(O)})}var A=l(w,2);{var J=P=>{var C=Hc(),N=v(C);at(N,{class:"absolute top-2 right-2 z-10",variant:"ghost",size:"icon",onclick:s,type:"button",get title(){return W.copyToClipboard},get"aria-label"(){return W.copyToClipboard},children:(re,j)=>{Qa(re,{})},$$slots:{default:!0}});var I=l(N,2),X=v(I,!0);c(I),c(C),U(re=>G(X,re),[()=>JSON.stringify(t(r),null,2)]),n(P,C)};z(A,P=>{o()&&P(J)})}c(m),U(()=>{G(T,e.station.name),G(L,`${W.sharingProvider??""}: `)}),n(i,m),Ce()}var Yc=b('<span class="inline-flex h-4 w-4 items-center justify-center text-muted-foreground" role="img"><!></span>'),qc=b('<a target="_blank" class="text-blue-600 dark:text-blue-300 hover:underline"> </a>'),Zc=b('<div class="flex gap-2"><span class="inline-flex h-4 w-4 items-center justify-center text-muted-foreground flex-none" role="img"><!></span> <span> </span></div>'),Kc=b('<div class="pt-2 border-t border-border text-xs text-muted-foreground space-y-1 max-h-96 max-w-96 overflow-auto pr-2 relative"><!> <pre class="whitespace-pre-wrap pr-8"> </pre></div>'),$c=b('<div class="space-y-3 text-sm leading-tight text-foreground max-w-80"><div class="flex gap-2"><svg class="h-4 w-4 fill-current flex-none" aria-hidden="true" focusable="false"><title> </title><use></use></svg> <!> <span> </span></div> <div> <!></div> <!> <!> <!></div>');function Xc(i,e){Pe(e,!0);let a=H(e,"showActions",3,!1),o=H(e,"debug",3,!1),r=M(()=>e.provider.vehicleTypes.find(j=>j.id==e.vehicle.typeId)),s=M(()=>Jn[e.vehicle.propulsionType]),d=M(()=>Qn[e.vehicle.returnConstraint]),m=M(()=>({vehicle:e.vehicle,provider:{...e.provider,vehicleTypes:e.provider.vehicleTypes.filter(j=>j.id==e.vehicle.typeId),totalVehicleTypes:e.provider.vehicleTypes.length}}));async function g(){await navigator.clipboard.writeText(JSON.stringify(t(m),null,2))}var f=$c(),T=v(f),_=v(T),u=v(_),h=v(u,!0);c(u);var L=l(u);c(_);var E=l(_,2);{var p=j=>{var B=Yc(),te=v(B);de(te,()=>t(s).component,($,Y)=>{Y($,{class:"h-4 w-4","aria-hidden":"true"})}),c(B),U(()=>{yt(B,"title",t(s).title),yt(B,"aria-label",t(s).title)}),n(j,B)};z(E,j=>{t(s)&&j(p)})}var F=l(E,2),x=v(F,!0);c(F),c(T);var S=l(T,2),w=v(S),O=l(w);{var A=j=>{var B=qc(),te=v(B,!0);c(B),U(()=>{yt(B,"href",e.provider.url),G(te,e.provider.name)}),n(j,B)},J=j=>{var B=ke();U(()=>G(B,e.provider.name)),n(j,B)};z(O,j=>{e.provider.url?j(A):j(J,!1)})}c(S);var P=l(S,2);{var C=j=>{var B=Zc(),te=v(B),$=v(te);de($,()=>t(d).component,(ge,fe)=>{fe(ge,{class:"h-4 w-4","aria-hidden":"true"})}),c(te);var Y=l(te,2),ne=v(Y,!0);c(Y),c(B),U(()=>{yt(te,"title",t(d).title),yt(te,"aria-label",t(d).title),G(ne,t(d).title)}),n(j,B)};z(P,j=>{t(d)&&j(C)})}var N=l(P,2);{var I=j=>{at(j,{class:"font-bold",variant:"outline",get href(){return e.vehicle.rentalUriWeb},target:"_blank",children:(B,te)=>{Ge();var $=ke();U(()=>G($,W.rent)),n(B,$)},$$slots:{default:!0}})};z(N,j=>{a()&&e.vehicle.rentalUriWeb&&j(I)})}var X=l(N,2);{var re=j=>{var B=Kc(),te=v(B);at(te,{class:"absolute top-2 right-2 z-10",variant:"ghost",size:"icon",onclick:g,type:"button",get title(){return W.copyToClipboard},get"aria-label"(){return W.copyToClipboard},children:(ne,ge)=>{Qa(ne,{})},$$slots:{default:!0}});var $=l(te,2),Y=v($,!0);c($),c(B),U(ne=>G(Y,ne),[()=>JSON.stringify(t(m),null,2)]),n(j,B)};z(X,j=>{o()&&j(re)})}c(f),U(()=>{G(h,or[e.vehicle.formFactor].label),yt(L,"href",`#${or[e.vehicle.formFactor].svg}`),G(x,t(r)?.name||or[e.vehicle.formFactor].label),G(w,`${W.sharingProvider??""}: `)}),n(i,f),Ce()}var Jc=b('<div class="font-semibold"> </div>'),Qc=b('<div class="font-semibold"> </div>'),eu=b('<div class="font-semibold"> </div>'),tu=b('<div class="font-semibold"> </div>'),ru=b('<a target="_blank" class="text-blue-600 dark:text-blue-300 hover:underline"> </a>'),au=b("<div> </div>"),nu=b('<div class="pt-2 border-t border-border text-xs text-muted-foreground space-y-1 max-h-96 max-w-96 overflow-auto pr-2 relative"><!> <pre class="whitespace-pre-wrap pr-8"> </pre></div>'),ou=b('<div class="space-y-3 text-sm leading-tight text-foreground"><div class="space-y-1"><!> <div> <!></div></div> <div class="space-y-1"><div> </div> <!></div> <!></div>');function iu(i,e){Pe(e,!0);let a=H(e,"allZonesAtPoint",19,()=>[]),o=H(e,"zoneData",19,()=>[]),r=H(e,"stationData",19,()=>[]),s=H(e,"debug",3,!1),d=M(()=>({...e.zone?{zone:{...e.zone,area:"..."}}:{},...e.station?{station:{...e.station,stationArea:"..."}}:{},provider:e.provider,allZonesAtPoint:a().map(C=>({z:C.properties.z,zoneIndex:C.properties.zoneIndex,stationIndex:C.properties.stationIndex,rideThroughAllowed:C.properties.rideThroughAllowed,rideEndAllowed:C.properties.rideEndAllowed,stationArea:C.properties.stationArea,zone:(()=>{if(C.properties.zoneIndex===void 0)return null;const N=o()[C.properties.zoneIndex];return N?{...N,area:"..."}:null})(),station:(()=>{if(C.properties.stationIndex===void 0)return null;const N=r()[C.properties.stationIndex];return N?{...N,stationArea:"..."}:null})()}))}));async function m(){await navigator.clipboard.writeText(JSON.stringify(t(d),null,2))}var g=ou(),f=v(g),T=v(f);{var _=C=>{var N=Q(),I=y(N);{var X=j=>{var B=Jc(),te=v(B);c(B),U(()=>G(te,`${W.rentalGeofencingZone??""}: ${e.zone.name??""}`)),n(j,B)},re=j=>{var B=Qc(),te=v(B,!0);c(B),U(()=>G(te,W.rentalGeofencingZone)),n(j,B)};z(I,j=>{e.zone.name?j(X):j(re,!1)})}n(C,N)},u=C=>{var N=Q(),I=y(N);{var X=re=>{var j=Q(),B=y(j);{var te=Y=>{var ne=eu(),ge=v(ne);c(ne),U(()=>G(ge,`${W.rentalStation??""}: ${e.station.name??""}`)),n(Y,ne)},$=Y=>{var ne=tu(),ge=v(ne,!0);c(ne),U(()=>G(ge,W.rentalStation)),n(Y,ne)};z(B,Y=>{e.station.name?Y(te):Y($,!1)})}n(re,j)};z(I,re=>{e.station&&re(X)},!0)}n(C,N)};z(T,C=>{e.zone?C(_):C(u,!1)})}var h=l(T,2),L=v(h),E=l(L);{var p=C=>{var N=ru(),I=v(N,!0);c(N),U(()=>{yt(N,"href",e.provider.url),G(I,e.provider.name)}),n(C,N)},F=C=>{var N=ke();U(()=>G(N,e.provider.name)),n(C,N)};z(E,C=>{e.provider.url?C(p):C(F,!1)})}c(h),c(f);var x=l(f,2),S=v(x),w=v(S,!0);c(S);var O=l(S,2);{var A=C=>{var N=au(),I=v(N,!0);c(N),U(()=>G(I,e.rideEndAllowed?W.rideEndAllowed:W.rideEndNotAllowed)),n(C,N)};z(O,C=>{e.rideThroughAllowed&&C(A)})}c(x);var J=l(x,2);{var P=C=>{var N=nu(),I=v(N);at(I,{class:"absolute top-2 right-2 z-10",variant:"ghost",size:"icon",onclick:m,type:"button",get title(){return W.copyToClipboard},get"aria-label"(){return W.copyToClipboard},children:(j,B)=>{Qa(j,{})},$$slots:{default:!0}});var X=l(I,2),re=v(X,!0);c(X),c(N),U(j=>G(re,j),[()=>JSON.stringify(t(d),null,2)]),n(C,N)};z(J,C=>{s()&&C(P)})}c(g),U(()=>{G(L,`${W.sharingProvider??""}: `),G(w,e.rideThroughAllowed?W.rideThroughAllowed:W.rideThroughNotAllowed)}),n(i,g),Ce()}const su=.4,lu=6,On=.1,ta=2,du=ta*Float32Array.BYTES_PER_ELEMENT,oo=4,cu=oo*Float32Array.BYTES_PER_ELEMENT,uu=`#version 300 es
precision highp float;
in vec2 a_pos;
in vec4 a_color;
out vec4 v_color;
uniform vec4 u_zone_base;
uniform vec4 u_zone_scale_x;
uniform vec4 u_zone_scale_y;
void main() {
	v_color = a_color;
	gl_Position = u_zone_base + a_pos.x * u_zone_scale_x + a_pos.y * u_zone_scale_y;
}
`,vu=`#version 300 es
precision mediump float;
in vec4 v_color;
out vec4 fragColor;
void main() {
	fragColor = v_color;
}
`,fu=new Float32Array([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),mu=`
attribute vec2 a_pos;
attribute vec2 a_tex_coord;
varying vec2 v_tex_coord;
void main() {
	v_tex_coord = a_tex_coord;
	gl_Position = vec4(a_pos, 0.0, 1.0);
}
`,gu=`
precision highp float;
uniform sampler2D u_texture;
uniform float u_opacity_primary;
uniform float u_opacity_secondary;
uniform float u_stripe_width;
varying vec2 v_tex_coord;
void main() {
	vec4 color = texture2D(u_texture, v_tex_coord);
	if (color.a == 0.0) {
		discard;
	}
	float diagonal = gl_FragCoord.x + gl_FragCoord.y;
	float stripeIndex = mod(floor(diagonal / u_stripe_width), 2.0);
	float opacity = mix(u_opacity_primary, u_opacity_secondary, stripeIndex);
	gl_FragColor = vec4(color.rgb, color.a * opacity);
}
`,hu=new Float32Array([.13333333,.77254902,.36862745,1]),pu=new Float32Array([.9372549,.26666667,.26666667,1]),_u=new Float32Array([1,.84313725,0,1]),yu=new Float32Array([.25882354,.52156866,.95686275,1]),bu=i=>i.stationArea?yu:i.rideEndAllowed?hu:i.rideThroughAllowed?_u:pu,Tu=i=>new Float32Array([(i>>16&255)/255,(i>>8&255)/255,(i&255)/255,1]),xu=i=>i[0]<<16|i[1]<<8|i[2],Fn=(i,e,a,o,r,s)=>{const d=i.project(s),m=d.x*o,g=d.y*r,f=m/e*2-1,T=1-g/a*2;return new Float32Array([f,T,0,1])},wu=(i,e,a,o,r,s,d)=>{const m=new bt.MercatorCoordinate(s[0],s[1]).toLngLat(),g=new bt.MercatorCoordinate(s[0]+d[0],s[1]+d[1]).toLngLat(),f=Fn(i,e,a,o,r,m),T=Fn(i,e,a,o,r,g),_=new Float32Array([T[0]-f[0],0,0,0]),u=new Float32Array([0,T[1]-f[1],0,0]);return{base:f,scaleX:_,scaleY:u}},Ru=i=>Array.isArray(i)?new bt.Point(i[0],i[1]):i;class Au{id;type="custom";renderingMode="2d";opacity;gl=null;map=null;screenProgram=null;framebuffer=null;texture=null;pickingFramebuffer=null;pickingTexture=null;quadBuffer=null;features=[];geometryDirty=!0;width=0;height=0;pickingWidth=0;pickingHeight=0;fillProgram=null;pickingLookup=new Map;pickingPixel=new Uint8Array(4);positionBuffer=null;colorBuffer=null;pickingColorBuffer=null;vertexCount=0;globalOrigin=new Float32Array([0,0]);globalExtent=new Float32Array([1,1]);screenPositionLocation=-1;screenTexCoordLocation=-1;screenTextureLocation=null;screenOpacityPrimaryLocation=null;screenOpacitySecondaryLocation=null;screenStripeWidthLocation=null;constructor(e){this.id=e.id,this.opacity=e.opacity??su}setOpacity(e){this.opacity!==e&&(this.opacity=e,this.map?.triggerRepaint())}setFeatures(e){this.features=e,this.geometryDirty=!0,this.updateGeometry(),this.map?.triggerRepaint()}onAdd(e,a){this.map=e,this.gl=a,this.initialize(a),this.updateGeometry()}onRemove(e,a){this.cleanup(a)}cleanup(e){!e&&this.gl&&(e=this.gl),e&&(this.deleteGeometryBuffers(e),this.framebuffer&&(e.deleteFramebuffer(this.framebuffer),this.framebuffer=null),this.texture&&(e.deleteTexture(this.texture),this.texture=null),this.pickingFramebuffer&&(e.deleteFramebuffer(this.pickingFramebuffer),this.pickingFramebuffer=null),this.pickingTexture&&(e.deleteTexture(this.pickingTexture),this.pickingTexture=null),this.quadBuffer&&(e.deleteBuffer(this.quadBuffer),this.quadBuffer=null),this.fillProgram&&(e.deleteProgram(this.fillProgram.program),this.fillProgram=null),this.pickingLookup.clear(),this.screenProgram&&(e.deleteProgram(this.screenProgram),this.screenProgram=null),this.geometryDirty=!0,this.width=0,this.height=0,this.pickingWidth=0,this.pickingHeight=0,this.gl=null,this.map=null)}prerender(e,a){if(!this.map||this.vertexCount===0||!this.positionBuffer||!this.colorBuffer||!this.pickingColorBuffer)return;const o=this.map,r=e.drawingBufferWidth,s=e.drawingBufferHeight;if(r===0||s===0)return;const d=this.ensureFillProgram(e);if(!d||d.positionLocation<0||d.colorLocation<0)return;const g=o.getCanvas().getBoundingClientRect(),f=g.width,T=g.height;if(f===0||T===0)return;const _=r/f,u=s/T,h=wu(o,r,s,_,u,this.globalOrigin,this.globalExtent);if(this.ensureFramebuffer(e,r,s),this.ensurePickingFramebuffer(e,r,s),!this.framebuffer||!this.texture||!this.pickingFramebuffer||!this.pickingTexture)return;const L=e.getParameter(e.FRAMEBUFFER_BINDING),E=e.getParameter(e.VIEWPORT),p=e.isEnabled(e.BLEND),F=e.isEnabled(e.DEPTH_TEST),x=e.isEnabled(e.STENCIL_TEST),S=e.isEnabled(e.CULL_FACE);e.disable(e.BLEND),e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.CULL_FACE);const w=(O,A)=>{e.bindFramebuffer(e.FRAMEBUFFER,O),e.viewport(0,0,r,s),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.useProgram(d.program),e.uniform4fv(d.baseLocation,h.base),e.uniform4fv(d.scaleXLocation,h.scaleX),e.uniform4fv(d.scaleYLocation,h.scaleY),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.enableVertexAttribArray(d.positionLocation),e.vertexAttribPointer(d.positionLocation,ta,e.FLOAT,!1,du,0),e.bindBuffer(e.ARRAY_BUFFER,A),e.enableVertexAttribArray(d.colorLocation),e.vertexAttribPointer(d.colorLocation,oo,e.FLOAT,!1,cu,0),e.drawArrays(e.TRIANGLES,0,this.vertexCount),e.disableVertexAttribArray(d.positionLocation),e.disableVertexAttribArray(d.colorLocation),e.bindBuffer(e.ARRAY_BUFFER,null)};w(this.framebuffer,this.colorBuffer),w(this.pickingFramebuffer,this.pickingColorBuffer),e.bindFramebuffer(e.FRAMEBUFFER,L),e.viewport(E[0],E[1],E[2],E[3]),p&&e.enable(e.BLEND),F&&e.enable(e.DEPTH_TEST),x&&e.enable(e.STENCIL_TEST),S&&e.enable(e.CULL_FACE)}render(e,a){if(!this.screenProgram||!this.texture||!this.quadBuffer||this.vertexCount===0)return;e.useProgram(this.screenProgram);const o=e.getParameter(e.BLEND_SRC_RGB),r=e.getParameter(e.BLEND_DST_RGB),s=e.getParameter(e.BLEND_SRC_ALPHA),d=e.getParameter(e.BLEND_DST_ALPHA),m=e.getParameter(e.BLEND_EQUATION_RGB),g=e.getParameter(e.BLEND_EQUATION_ALPHA);e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enableVertexAttribArray(this.screenPositionLocation),e.enableVertexAttribArray(this.screenTexCoordLocation),e.bindBuffer(e.ARRAY_BUFFER,this.quadBuffer),e.vertexAttribPointer(this.screenPositionLocation,2,e.FLOAT,!1,16,0),e.vertexAttribPointer(this.screenTexCoordLocation,2,e.FLOAT,!1,16,8),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texture),e.uniform1i(this.screenTextureLocation,0);const f=Math.max(this.opacity-On,0),T=Math.min(this.opacity+On,1);e.uniform1f(this.screenOpacityPrimaryLocation,f),e.uniform1f(this.screenOpacitySecondaryLocation,T),e.uniform1f(this.screenStripeWidthLocation,lu),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.bindTexture(e.TEXTURE_2D,null),e.bindBuffer(e.ARRAY_BUFFER,null),e.disableVertexAttribArray(this.screenPositionLocation),e.disableVertexAttribArray(this.screenTexCoordLocation),e.blendFuncSeparate(o,r,s,d),e.blendEquationSeparate(m,g)}initialize(e){if(this.screenProgram=this.createProgram(e,mu,gu),!this.screenProgram)throw new Error("Failed to initialize zone fill shaders");if(this.screenPositionLocation=e.getAttribLocation(this.screenProgram,"a_pos"),this.screenTexCoordLocation=e.getAttribLocation(this.screenProgram,"a_tex_coord"),this.screenTextureLocation=e.getUniformLocation(this.screenProgram,"u_texture"),this.screenOpacityPrimaryLocation=e.getUniformLocation(this.screenProgram,"u_opacity_primary"),this.screenOpacitySecondaryLocation=e.getUniformLocation(this.screenProgram,"u_opacity_secondary"),this.screenStripeWidthLocation=e.getUniformLocation(this.screenProgram,"u_stripe_width"),this.quadBuffer=e.createBuffer(),!this.quadBuffer)throw new Error("Failed to allocate quad buffer");e.bindBuffer(e.ARRAY_BUFFER,this.quadBuffer),e.bufferData(e.ARRAY_BUFFER,fu,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null)}ensureFramebuffer(e,a,o){if(this.framebuffer&&this.texture&&this.width===a&&this.height===o||(this.width=a,this.height=o,this.framebuffer||(this.framebuffer=e.createFramebuffer()),this.texture||(this.texture=e.createTexture()),!this.framebuffer||!this.texture))return;e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a,o,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture,0);const r=e.checkFramebufferStatus(e.FRAMEBUFFER);r!==e.FRAMEBUFFER_COMPLETE&&console.error("[ZoneFillLayer] Incomplete framebuffer:",r),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null)}ensurePickingFramebuffer(e,a,o){if(this.pickingFramebuffer&&this.pickingTexture&&this.pickingWidth===a&&this.pickingHeight===o||(this.pickingFramebuffer||(this.pickingFramebuffer=e.createFramebuffer()),this.pickingTexture||(this.pickingTexture=e.createTexture()),!this.pickingFramebuffer||!this.pickingTexture))return;e.bindTexture(e.TEXTURE_2D,this.pickingTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,a,o,0,e.RGBA,e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,this.pickingFramebuffer),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.pickingTexture,0);const r=e.checkFramebufferStatus(e.FRAMEBUFFER);r!==e.FRAMEBUFFER_COMPLETE&&console.error("[ZoneFillLayer] Incomplete picking framebuffer:",r),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindTexture(e.TEXTURE_2D,null),this.pickingWidth=a,this.pickingHeight=o}ensureFillProgram(e){if(this.fillProgram)return this.fillProgram;const a=this.createProgram(e,uu,vu);if(!a)return null;const o={program:a,positionLocation:e.getAttribLocation(a,"a_pos"),colorLocation:e.getAttribLocation(a,"a_color"),baseLocation:e.getUniformLocation(a,"u_zone_base"),scaleXLocation:e.getUniformLocation(a,"u_zone_scale_x"),scaleYLocation:e.getUniformLocation(a,"u_zone_scale_y")};return this.fillProgram=o,o}createProgram(e,a,o){const r=this.compileShader(e,e.VERTEX_SHADER,a),s=this.compileShader(e,e.FRAGMENT_SHADER,o);if(!r||!s)return null;const d=e.createProgram();return d?(e.attachShader(d,r),e.attachShader(d,s),e.linkProgram(d),e.getProgramParameter(d,e.LINK_STATUS)?(e.deleteShader(r),e.deleteShader(s),d):(console.error("Failed to link shader program",e.getProgramInfoLog(d)),e.deleteProgram(d),null)):null}compileShader(e,a,o){const r=e.createShader(a);return r?(e.shaderSource(r,o),e.compileShader(r),e.getShaderParameter(r,e.COMPILE_STATUS)?r:(console.error("Failed to compile shader",e.getShaderInfoLog(r)),e.deleteShader(r),null)):null}updateGeometry(){const e=this.gl;if(!e||!this.geometryDirty)return;this.deleteGeometryBuffers(e),this.pickingLookup.clear();const a=[...this.features].sort((x,S)=>x.properties.z-S.properties.z),o=[],r=[],s=[];let d=0,m=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,T=Number.NEGATIVE_INFINITY,_=0;for(const x of a){const S=this.buildZoneGeometry(x);if(!S)continue;const w=S.vertices.length/ta;if(w===0)continue;o.push(S),d+=w,m=Math.min(m,S.minX),g=Math.min(g,S.minY),f=Math.max(f,S.maxX),T=Math.max(T,S.maxY);const O=_+1;_+=1;const A=bu(x.properties),J=Tu(O);this.pickingLookup.set(O,x);for(let P=0;P<w;++P)r.push(A[0],A[1],A[2],A[3]),s.push(J[0],J[1],J[2],J[3])}const u=f-m,h=T-g;if(d===0||m===Number.POSITIVE_INFINITY||g===Number.POSITIVE_INFINITY||f===Number.NEGATIVE_INFINITY||T===Number.NEGATIVE_INFINITY||u===0||h===0){this.vertexCount=0,this.geometryDirty=!1;return}this.globalOrigin=new Float32Array([m,g]),this.globalExtent=new Float32Array([u,h]);const L=new Float32Array(d*ta);let E=0;for(const x of o)for(let S=0;S<x.vertices.length;S+=ta){const w=x.vertices[S],O=x.vertices[S+1];L[E++]=(w-m)/u,L[E++]=(O-g)/h}const p=new Float32Array(r),F=new Float32Array(s);if(this.positionBuffer=e.createBuffer(),this.colorBuffer=e.createBuffer(),this.pickingColorBuffer=e.createBuffer(),!this.positionBuffer||!this.colorBuffer||!this.pickingColorBuffer){console.error("[ZoneFillLayer] Failed to allocate geometry buffers"),this.deleteGeometryBuffers(e),this.geometryDirty=!1;return}e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),e.bufferData(e.ARRAY_BUFFER,L,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.colorBuffer),e.bufferData(e.ARRAY_BUFFER,p,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,this.pickingColorBuffer),e.bufferData(e.ARRAY_BUFFER,F,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.vertexCount=d,this.geometryDirty=!1}deleteGeometryBuffers(e){this.positionBuffer&&(e.deleteBuffer(this.positionBuffer),this.positionBuffer=null),this.colorBuffer&&(e.deleteBuffer(this.colorBuffer),this.colorBuffer=null),this.pickingColorBuffer&&(e.deleteBuffer(this.pickingColorBuffer),this.pickingColorBuffer=null),this.vertexCount=0,this.globalOrigin=new Float32Array([0,0]),this.globalExtent=new Float32Array([1,1])}pickFeatureAt(e){if(!this.map||!this.gl||!this.pickingFramebuffer||!this.pickingTexture)return null;const a=Ru(e),o=this.map.getCanvas(),r=o.getBoundingClientRect();if(r.width===0||r.height===0)return null;const s=o.width/r.width,d=o.height/r.height,m=Math.floor(a.x*s),g=Math.floor(o.height-a.y*d-1),f=this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING);this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,this.pickingFramebuffer),this.gl.readPixels(m,g,1,1,this.gl.RGBA,this.gl.UNSIGNED_BYTE,this.pickingPixel),this.gl.bindFramebuffer(this.gl.FRAMEBUFFER,f);const T=xu(this.pickingPixel);return T===0?null:this.pickingLookup.get(T)??null}buildZoneGeometry(e){const a=[];let o=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,d=Number.NEGATIVE_INFINITY;const m=g=>{if(!g.length)return;const f=g.map(h=>h.map(([L,E])=>{const p=bt.MercatorCoordinate.fromLngLat([L,E]);return o=Math.min(o,p.x),r=Math.min(r,p.y),s=Math.max(s,p.x),d=Math.max(d,p.y),[p.x,p.y]})),T=_i(f),_=yi(T.vertices,T.holes,T.dimensions),u=T.dimensions;for(const h of _){const L=h*u;a.push(T.vertices[L],T.vertices[L+1])}};for(const g of e.geometry.coordinates)m(g);return a.length===0?null:{vertices:a,minX:o,minY:r,maxX:s,maxY:d}}}function Pu(i,e){Pe(e,!0);let o=H(e,"opacity",3,.4);const r=_r("map");let s=ce(null),d=null,m=null,g=o();const f=()=>(t(s)||D(s,new Au({id:e.id,opacity:o()}),!0),t(s)),T=()=>{t(s)&&(t(s).cleanup(),D(s,null),m=null)},_=(p,F)=>(p.getStyle()?.layers??[]).findIndex(w=>w.id===F),u=p=>{!p||!d||(p.off("styledata",d),p.off("idle",d),d=null)},h=p=>{const F=t(s);if(F){if(p&&p.getLayer(e.id))try{p.removeLayer(e.id)}catch(x){console.error("[ZoneLayer] failed to remove layer",x)}F.setFeatures([]),T()}};Ze(()=>{const p=r.map;if(!p||e.features.length===0){u(p),h(p),m=null;return}const F=f();g!==o()&&(F.setOpacity(o()),g=o()),e.features!==m&&(m=e.features,F.setFeatures(e.features));const x=()=>{if(!e.beforeLayerId||e.beforeLayerId===e.id||!p.getLayer(e.id)||!p.getLayer(e.beforeLayerId))return;const A=_(p,e.id),J=_(p,e.beforeLayerId);A===-1||J===-1||A>=J&&p.moveLayer(e.id,e.beforeLayerId)},S=()=>{if(!p.getLayer(e.id))try{const A=e.beforeLayerId&&p.getLayer(e.beforeLayerId)?e.beforeLayerId:void 0;A?p.addLayer(F,A):p.addLayer(F)}catch(A){console.error("[ZoneLayer] failed to add layer",A)}x()},w=()=>{if(!p.isStyleLoaded()){if(!d){const A=()=>{d&&(p.off("styledata",A),p.off("idle",A),d=null,w())};d=A,p.on("styledata",A),p.on("idle",A)}return}S()},O=()=>{w(),x()};return w(),p.on("styledata",O),()=>{p.off("styledata",O),u(p)}}),br(()=>{const p=r.map;u(p),h(p),T(),g=o()});function L(p){return t(s)?.pickFeatureAt(p)??null}var E={pick:L};return Ce(E)}var Cu=b("<!> <!>",1),Lu=b('<button type="button"><span class="truncate"> </span> <span class="flex items-center gap-1 text-xs font-medium"><svg class="h-4 w-4 fill-current" aria-hidden="true" focusable="false"><use></use></svg></span></button>'),Eu=b('<div class="flex flex-col items-end space-y-2"></div>'),ku=b("<!> <!> <!> <!>",1);function Iu(i,e){Pe(e,!0);let a=ce(null),o=H(e,"debug",3,!1);const r=11,s=.5,d="rentals-stations",m="rentals-stations-icons",g="rentals-vehicles",f=50,T="rentals-zones",_=Object.keys(or),u=(R,k,K)=>`${eo(R,k)}-${K}`;let h=ce(null),L=ce(null),E=0,p=ce(null),F=ce(!1),x=0,S=new Ia;const w=_.map(R=>{const k=R.toLowerCase();return{formFactor:R,sourceId:`${g}-${k}`,clusterLayerId:`${g}-${k}-cluster`,pointLayerId:`${g}-${k}-point`}}),O=R=>R.flatMap(k=>k.formFactors.map(K=>({providerGroupId:k.id,providerGroupName:k.name,formFactor:K,color:k.color||lr}))).sort((k,K)=>k.providerGroupName.localeCompare(K.providerGroupName,void 0,{sensitivity:"base"})||k.formFactor.localeCompare(K.formFactor,void 0,{sensitivity:"base"}));let A=M(()=>t(h)?O(t(h).providerGroups):[]),J=M(()=>new Map((t(h)?.providerGroups??[]).map(R=>[R.id,R.color||lr]))),P=M(()=>new Map((t(h)?.providers??[]).map(R=>[R.id,R.color||t(J).get(R.groupId)||lr]))),C=M(()=>t(h)?Object.fromEntries(t(h).providers.map(R=>[R.id,Object.fromEntries(R.vehicleTypes.map(k=>[k.id,k.formFactor]))])):{});const N=(R,k)=>R?.providerGroupId===k?.providerGroupId&&R?.formFactor===k?.formFactor,I=R=>{D(p,N(t(p),R)?null:R,!0)},X=(R,k,K)=>Math.min(K,Math.max(k,R)),re=R=>{const k=R.getSouthWest(),K=R.getNorthEast(),V=(K.lng-k.lng)*s,oe=(K.lat-k.lat)*s;return new bt.LngLatBounds([X(k.lng-V,-180,180),X(k.lat-oe,-90,90)],[X(K.lng+V,-180,180),X(K.lat+oe,-90,90)])},j=(R,k)=>!!R&&R.contains(k.getSouthWest())&&R.contains(k.getNorthEast()),B=async R=>{const k=re(R),K=yr(k.getNorthWest()),V=yr(k.getSouthEast()),oe=++E;console.debug("[Rentals] requesting rentals",{min:V,max:K});const{data:ae,error:Te}=await Zn({query:{max:K,min:V}});if(oe!==E)return;if(Te){console.error("[Rentals] rentals request failed",Te);return}D(h,ae,!0),D(L,k,!0);const Me=ae;console.debug("[Rentals] received rentals",{providers:Me.providers.length,stations:Me.stations.length,vehicles:Me.vehicles.length,zones:Me.zones.length})},te=R=>{const k=new Map,K=new Map,V=new Map(R.providerGroups.map(ae=>[ae.id,ae.color||lr])),oe=(ae,Te)=>{let Me=k.get(ae);Me||(Me=new Set,k.set(ae,Me)),Me.add(Te)};for(const ae of R.providers){const Te=ae.color||V.get(ae.groupId)||lr;K.set(ae.id,Te);for(const Me of ae.formFactors)oe(Te,Me)}for(const ae of R.stations){const Te=K.get(ae.providerId)||V.get(ae.providerGroupId)||lr;ae.formFactors.length===0&&oe(Te,_n);for(const Me of ae.formFactors)oe(Te,Me)}for(const ae of R.vehicles){const Te=K.get(ae.providerId)||V.get(ae.providerGroupId)||lr;oe(Te,ae.formFactor)}return k},$=(R,k,K)=>{if(!K)return R.numVehiclesAvailable;const V=k[R.providerId];return V?Object.entries(R.vehicleTypesAvailable).reduce((oe,[ae,Te])=>V[ae]===K.formFactor?oe+Te:oe,0):R.numVehiclesAvailable};let Y=M(()=>{if(!t(h)||!t(F))return{type:"FeatureCollection",features:[]};const R=t(p);return{type:"FeatureCollection",features:(R?t(h).stations.filter(K=>K.providerGroupId===R.providerGroupId&&K.formFactors.includes(R.formFactor)):[]).map(K=>{const V=t(P).get(K.providerId)||t(J).get(K.providerGroupId)||lr,oe=R?R.formFactor:K.formFactors[0]??_n;return{type:"Feature",geometry:{type:"Point",coordinates:[K.lon,K.lat]},properties:{icon:u(oe,"station",V),available:$(K,t(C),R),providerId:K.providerId,stationId:K.id,color:V}}})}}),ne=M(()=>{const R=_.reduce((V,oe)=>(V[oe]={type:"FeatureCollection",features:[]},V),{});if(!t(h)||!t(F))return R;const k=t(p);return(k?t(h).vehicles.filter(V=>V.providerGroupId===k.providerGroupId&&V.formFactor===k.formFactor):[]).filter(V=>!V.stationId).forEach(V=>{const oe=R[V.formFactor],ae=t(P).get(V.providerId)||t(J).get(V.providerGroupId)||lr;oe.features.push({type:"Feature",geometry:{type:"Point",coordinates:[V.lon,V.lat]},properties:{icon:u(V.formFactor,"vehicle",ae),clusterIcon:u(V.formFactor,"cluster",ae),providerId:V.providerId,vehicleId:V.id,color:ae}})}),R});const ge=R=>({type:"MultiPolygon",coordinates:R.map(k=>k.map(K=>Vr.decode(K.points,K.precision).map(([V,oe])=>[oe,V])))}),fe=(R,k,K)=>R.rules.find(V=>V.vehicleTypeIdxs.length?V.vehicleTypeIdxs.some(oe=>k.vehicleTypes[oe]?.formFactor===K):!0);let Re=M(()=>{const R=t(h),k=t(p);if(!R||!k)return{type:"FeatureCollection",features:[]};const K=[];let V=0;R.zones.forEach((ae,Te)=>{if(ae.providerGroupId!==k.providerGroupId)return;const Me=R.providers.find(dt=>dt.id===ae.providerId);if(!Me)return;const je=fe(ae,Me,k.formFactor);je&&(K.push({type:"Feature",geometry:ge(ae.area),properties:{zoneIndex:Te,providerId:ae.providerId,z:ae.z,rideEndAllowed:je.rideEndAllowed&&!je.stationParking,rideThroughAllowed:je.rideThroughAllowed,stationArea:!1}}),ae.z>V&&(V=ae.z))});const oe=V+1;return R.stations.forEach((ae,Te)=>{!ae.stationArea||ae.providerGroupId!==k.providerGroupId||!ae.formFactors.includes(k.formFactor)||K.push({type:"Feature",geometry:ge(ae.stationArea),properties:{stationIndex:Te,providerId:ae.providerId,z:oe,rideEndAllowed:!0,rideThroughAllowed:!0,stationArea:!0}})}),K.sort((ae,Te)=>Te.properties.z-ae.properties.z),{type:"FeatureCollection",features:K}}),he=M(()=>{const R=t(h),k=new xi;return R&&o()&&k.load(t(Re).features.map(K=>{const V=K.properties.zoneIndex!==void 0?R.zones[K.properties.zoneIndex].bbox:R.stations[K.properties.stationIndex].bbox;return{minX:V[0],minY:V[1],maxX:V[2],maxY:V[3],feature:K}})),k});const Ie=(R,k)=>`${R}::${k}`;let Le=M(()=>new Map(t(h)?.providers.map(R=>[R.id,R])??[])),ze=M(()=>new Map(t(h)?.stations.map(R=>[Ie(R.providerId,R.id),R])??[])),Ve=M(()=>new Map(t(h)?.vehicles.map(R=>[Ie(R.providerId,R.id),R])??[]));const ee=R=>{const k=Ie(R.providerId,R.stationId);return{key:k,provider:t(Le).get(R.providerId),station:t(ze).get(k)}},q=R=>{const k=Ie(R.providerId,R.vehicleId);return{key:k,provider:t(Le).get(R.providerId),vehicle:t(Ve).get(k)}},De=R=>{const k=R.zoneIndex!==void 0?t(h)?.zones[R.zoneIndex]:void 0,K=R.stationIndex!==void 0?t(h)?.stations[R.stationIndex]:void 0;return{key:R.zoneIndex!==void 0?`zone-${R.zoneIndex}`:`station-${R.stationIndex}`,provider:t(Le).get(R.providerId),zone:k,station:K,rideThroughAllowed:R.rideThroughAllowed,rideEndAllowed:R.rideEndAllowed,stationArea:R.stationArea}},xe=(R,k,K)=>{const V=document.createElement("div"),oe=Sa(Wc,{target:V,props:{provider:R,station:k,showActions:K,debug:o()}});return{element:V,destroy:()=>{Oa(oe)}}},Se=(R,k,K)=>{const V=document.createElement("div"),oe=Sa(Xc,{target:V,props:{provider:R,vehicle:k,showActions:K,debug:o()}});return{element:V,destroy:()=>{Oa(oe)}}},Ae=(R,k,K,V,oe,ae)=>{const Te=document.createElement("div"),Me=Sa(iu,{target:Te,props:{provider:R,zone:k,station:K,rideThroughAllowed:V,rideEndAllowed:oe,debug:o(),allZonesAtPoint:ae,zoneData:t(h)?.zones??[],stationData:t(h)?.stations??[]}});return{element:Te,destroy:()=>{Oa(Me)}}};let Oe=null,Z=null,le=null,_e=null,ve=null,se=null,we=null;const Ee=()=>(Oe||(Oe=new bt.Popup({closeButton:!1,closeOnClick:!1,offset:12,maxWidth:"none"}),Oe.on("close",()=>{se?.(),se=null,le=null})),Oe),be=()=>(Z||(Z=new bt.Popup({closeButton:!0,closeOnClick:!0,offset:12,maxWidth:"none"}),Z.on("close",()=>{we?.(),we=null,_e=null})),Z),ye=()=>{se?.(),se=null,Oe&&Oe.remove(),le=null},pe=()=>{we?.(),we=null,Z&&Z.remove(),_e=null},Fe=()=>{ve&&(ve.style.cursor="",ve=null)},Ne=(R,k,K,V)=>{const oe=Ee();if(le!==K){se?.();const{element:ae,destroy:Te}=V();se=Te,oe.setDOMContent(ae),le=K}oe.setLngLat(k),oe.isOpen()||oe.addTo(R)},Ke=(R,k,K,V)=>{const oe=be();we?.();const{element:ae,destroy:Te}=V();we=Te,oe.setDOMContent(ae),oe.setLngLat(k),oe.isOpen()||oe.addTo(R),_e=K},ue=(R,k)=>(K,V)=>{const oe=K.features?.[0];if(!V||!oe){ye(),Fe();return}const ae=R(oe.properties),Te=ae.station||ae.vehicle;if(!Te||!ae.provider){ye(),Fe();return}if(ve=V.getCanvas(),ve.style.cursor="pointer",_e===ae.key){ye();return}Ne(V,K.lngLat,ae.key,()=>k(ae.provider,Te))},me=()=>(R,k)=>{Fe(),ye()},Ue=(R,k)=>(K,V)=>{const oe=K.features?.[0];if(!V||!oe){pe();return}const ae=R(oe.properties),Te=ae.station||ae.vehicle;if(!Te||!ae.provider){pe();return}ye(),pe(),Ke(V,K.lngLat,ae.key,()=>k(ae.provider,Te))},st=ue(ee,(R,k)=>xe(R,k,!0)),xt=me(),We=Ue(ee,(R,k)=>xe(R,k,!0)),ct=async(R,k)=>{const K=R.features?.[0],V=K?.properties?.cluster_id,oe=K?.source;if(!k||!K||typeof V!="number"||!oe)return;const ae=k.getSource(oe);if(!ae)return;ye(),pe(),k.getCanvas().style.cursor="";const Te=await ae.getClusterExpansionZoom(V);k.easeTo({center:K.geometry.coordinates,zoom:Te})},Ct=(R,k)=>{k.getCanvas().style.cursor="pointer"},wt=(R,k)=>{k.getCanvas().style.cursor=""},ot=ue(q,(R,k)=>Se(R,k,!0)),pt=me(),Dt=Ue(q,(R,k)=>Se(R,k,!0)),Ht=(R,k,K)=>{if(!k)return;const V=[m,...w.map(je=>je.pointLayerId),...w.map(je=>je.clusterLayerId)];if(k.queryRenderedFeatures(R.point,{layers:V}).length>0)return;const ae=K.pick(R.point);if(!ae){pe();return}const Te=De(ae.properties);if(!Te.zone&&!Te.station||!Te.provider){pe();return}const Me=t(he).search({minX:R.lngLat.lng,minY:R.lngLat.lat,maxX:R.lngLat.lng,maxY:R.lngLat.lat}).map(je=>je.feature).filter(je=>bi(Ti([R.lngLat.lng,R.lngLat.lat]),je)).sort((je,dt)=>dt.properties.z-je.properties.z);ye(),pe(),Ke(k,R.lngLat,Te.key,()=>Ae(Te.provider,Te.zone,Te.station,Te.rideThroughAllowed,Te.rideEndAllowed,Me))};Ze(()=>{if(!e.map||!e.bounds||e.zoom<=r){e.zoom<=r&&(D(h,null),D(L,null),E+=1);return}const R=bt.LngLatBounds.convert(e.bounds);j(t(L),R)||B(R)}),Ze(()=>{t(p)&&!t(A).some(R=>N(R,t(p)))&&D(p,null)});const Ut=R=>{if(!(!R||S.size===0)){for(const k of S)R.hasImage(k)&&R.removeImage(k);S=new Ia}};Ze(()=>{const R=e.map,k=t(h);if(!R){D(F,!1),x+=1,Ut(R);return}if(!k){D(F,!1),x+=1,Ut(R);return}const V=te(k);if(V.size===0){x+=1,Ut(R),D(F,!0);return}const oe=++x;D(F,!1);const ae=new Set,Te=[];V.forEach((Me,je)=>{Me.forEach(dt=>{ds.forEach(zt=>{const lt=fs(zt),Be=u(dt,zt,je);ae.add(Be),R.hasImage(Be)||Te.push((async()=>{try{const et=await ms(us(dt,zt),je,lt);if(oe!==x||!R)return;if(!R.hasImage(Be))try{R.addImage(Be,et)}catch(ft){console.error(`[Rentals] failed to register icon ${Be}`,ft)}}catch(et){console.error(`[Rentals] failed to prepare icon ${Be}`,et)}})())})})}),(async()=>{if(await Promise.allSettled(Te),oe!==x||!R)return;const Me=Array.from(S);for(const dt of Me)!ae.has(dt)&&R.hasImage(dt)&&R.removeImage(dt);const je=new Ia;ae.forEach(dt=>{R.hasImage(dt)&&je.add(dt)}),S=je,D(F,ae.size===je.size)})()}),Ze(()=>{const R=e.map,k=t(a),K=t(Re).features.length>0;if(!R||!k||!K)return;const V=oe=>{Ht(oe,R,k)};return R.on("click",V),()=>{R.off("click",V)}}),Ze(()=>{if(!t(h)){ye(),pe(),Fe();return}le&&!t(ze).has(le)&&!t(Ve).has(le)&&ye(),_e&&!t(ze).has(_e)&&!t(Ve).has(_e)&&pe()}),br(()=>{E+=1,ye(),pe(),Fe(),Ut(e.map),Oe=null,Z=null});var Gt=ku(),jt=y(Gt);{var Yt=R=>{const k=M(()=>w[0]?.pointLayerId??m);{let K=M(()=>e.theme==="dark"?.3:.4);Mt(Pu(R,{id:T,get features(){return t(Re).features},get beforeLayerId(){return t(k)},get opacity(){return t(K)}}),V=>D(a,V,!0),()=>t(a))}};z(jt,R=>{t(Re).features.length>0&&R(Yt)})}var $t=l(jt,2);ur($t,{id:d,get data(){return t(Y)},children:(R,k)=>{{let K=M(()=>({"icon-image":["get","icon"],"icon-size":za,"icon-allow-overlap":!1,"icon-ignore-placement":!0,"text-field":["to-string",["get","available"]],"text-allow-overlap":!1,"text-ignore-placement":!0,"text-anchor":"center","text-offset":yn,"text-size":gs,"text-font":["Noto Sans Regular"]}));It(R,{id:m,beforeLayerId:"",type:"symbol",filter:!0,get layout(){return t(K)},get onmousemove(){return st},get onmouseleave(){return xt},get onclick(){return We},paint:{"text-color":"#000"}})}},$$slots:{default:!0}});var Vt=l($t,2);nt(Vt,17,()=>w,R=>R.sourceId,(R,k)=>{ur(R,{get id(){return t(k).sourceId},get data(){return t(ne)[t(k).formFactor]},options:{cluster:!0,clusterRadius:f,clusterProperties:{color:["coalesce",["get","color"]],icon:["coalesce",["get","icon"]],clusterIcon:["coalesce",["get","clusterIcon"]]}},children:(K,V)=>{var oe=Cu(),ae=y(oe);{let Me=M(()=>({"icon-image":["get","clusterIcon"],"icon-size":za,"icon-allow-overlap":!0,"icon-ignore-placement":!0,"text-field":["to-string",["get","point_count"]],"text-allow-overlap":!0,"text-ignore-placement":!0,"text-anchor":"center","text-offset":yn,"text-size":hs,"text-font":["Noto Sans Regular"]}));It(ae,{get id(){return t(k).clusterLayerId},beforeLayerId:m,type:"symbol",filter:["has","point_count"],get layout(){return t(Me)},paint:{"text-color":"#000"},onclick:ct,onmouseenter:Ct,onmouseleave:wt})}var Te=l(ae,2);{let Me=M(()=>({"icon-image":["get","icon"],"icon-size":za,"icon-allow-overlap":!0,"icon-ignore-placement":!0}));It(Te,{get id(){return t(k).pointLayerId},get beforeLayerId(){return t(k).clusterLayerId},type:"symbol",filter:["!",["has","point_count"]],get layout(){return t(Me)},paint:{},get onmousemove(){return ot},get onmouseleave(){return pt},get onclick(){return Dt}})}n(K,oe)},$$slots:{default:!0}})});var qt=l(Vt,2);{var Zt=R=>{tr(R,{position:"top-right",class:"mb-5",children:(k,K)=>{var V=Eu();nt(V,21,()=>t(A),oe=>`${oe.providerGroupId}::${oe.formFactor}`,(oe,ae)=>{const Te=M(()=>N(t(p),t(ae)));var Me=Lu();Me.__click=()=>I(t(ae));var je=v(Me),dt=v(je,!0);c(je);var zt=l(je,2),lt=v(zt),Be=v(lt);c(lt),c(zt),c(Me),U(et=>{yt(Me,"title",`${t(ae).providerGroupName} (${or[t(ae).formFactor].label})`),Et(Me,1,et),yt(Me,"aria-pressed",t(Te)),G(dt,t(ae).providerGroupName),hr(lt,`color: ${t(ae).color}`),yt(Be,"href",`#${or[t(ae).formFactor].svg}`)},[()=>nr(Ye("inline-flex max-w-72 items-center gap-2 rounded-md border-2 px-3 py-1.5 text-sm font-semibold transition-colors focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-500",t(Te)?"border-blue-600 bg-accent text-accent-foreground":"border-muted bg-popover text-foreground hover:bg-accent hover:text-accent-foreground"))]),n(oe,Me)}),c(V),n(k,V)},$$slots:{default:!0}})};z(qt,R=>{t(A).length>0&&R(Zt)})}n(i,Gt),Ce()}Yr(["click"]);var Su=b("<!> <!>",1);function Ou(i,e){Pe(e,!0);function a(r){return{type:"FeatureCollection",features:r.filter(s=>s.mode!=="WALK"&&s.mode!=="BIKE"&&s.mode!=="CAR").flatMap(s=>{const d=[{type:"Feature",geometry:{type:"Point",coordinates:[s.from.lon,s.from.lat]},properties:{stopId:s.from.stopId,name:s.from.name,time:s.from.arrival??s.from.departure,color:Ar(s)[0]}},{type:"Feature",geometry:{type:"Point",coordinates:[s.to.lon,s.to.lat]},properties:{stopId:s.to.stopId,name:s.to.name,time:s.to.arrival,color:Ar(s)[0]}}],m=s.intermediateStops?s.intermediateStops.map(g=>({type:"Feature",geometry:{type:"Point",coordinates:[g.lon,g.lat]},properties:{stopId:g.stopId,name:g.name,time:g.arrival,color:Ar(s)[0]}})):[];return[...d,...m]})}}const o=M(()=>a(e.itinerary.legs));ur(i,{id:"stops",get data(){return t(o)},children:(r,s)=>{var d=Su(),m=y(d);It(m,{id:"stops",type:"circle",layout:{},filter:["all"],paint:{"circle-radius":5,"circle-color":"white","circle-stroke-width":4,"circle-stroke-color":["get","color"]},onclick:f=>{const T=f.features?.[0];T?.properties?.stopId&&(console.log("Clicked Stop:",T.properties.name),qr(T.properties.name,T.properties.stopId,new Date(T.properties.time)))},onmousemove:(f,T)=>T.getCanvas().style.cursor="pointer",onmouseleave:(f,T)=>T.getCanvas().style.cursor=""});var g=l(m,2);{let f=M(()=>({"text-halo-width":2,"text-halo-color":["interpolate-hcl",["linear"],.6,0,["get","color"],1,e.theme=="dark"?"#000":"#fff"],"text-color":e.theme=="dark"?"#fff":"#000"}));It(g,{id:"intermediate-stops-name",type:"symbol",layout:{"text-field":["get","name"],"text-font":["Noto Sans Regular"],"text-size":12,"text-offset":[0,1],"text-anchor":"top"},filter:!0,get paint(){return t(f)}})}n(r,d)},$$slots:{default:!0}}),Ce()}function Fu(i){const e=.03125*i,a=(i-i/2)/2+e,o=i-2*a,r=i/2,s=o/3.5,d=document.createElement("canvas");d.width=i,d.height=i;const m=d.getContext("2d",{alpha:!0});return m&&(m.beginPath(),m.arc(a+s,r,s,1/2*Math.PI,3/2*Math.PI,!1),m.bezierCurveTo(a+s+s,r-s,i-a,r,i-a,r),m.bezierCurveTo(i-a,r,a+s+s,r+s,a+s,r+s),m.closePath(),m.fillStyle="rgba(255, 0, 0, 0.7)",m.fill(),m.lineWidth=e,m.strokeStyle="rgba(120, 120, 120, 1.0)",m.stroke()),d}function Nn(i){return"#"+(1<<24|i[0]<<16|i[1]<<8|i[2]).toString(16).slice(1)}const Dn=(i,e)=>(i=i/6e4,i<=-30?[255,0,255,255]:i<=-6?[138,82,254,255]:i<=3?[69,194,74,255]:i<=5?[255,237,0,255]:i<=10?[255,102,0,255]:i<=15?[255,48,71,255]:[163,0,10,255]);function Nu(i,e){Pe(e,!0);let a=ce($e(new Date(Date.now()))),o=M(()=>new Date(t(a).getTime()+18e4)),r=M(()=>e.colorMode==="none"),s=M(()=>{if(!e.bounds||!e.zoom)return null;const B=bt.LngLatBounds.convert(e.bounds),te=yr(B.getNorthWest());return{min:yr(B.getSouthEast()),max:te,startTime:t(a).toISOString(),endTime:t(o).toISOString(),zoom:e.zoom}}),d=!1;const m=12e3,g=new Float64Array(m*2),f=new Float32Array(m),T=new Uint8Array(m*3),_={length:m,positions:g,colors:T,angles:f},u=new bt.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});let h=ce(null),L=ce(null);const E=({index:B,coordinate:te})=>{if(B==null||B===-1||!te){D(L,null),D(h,null),u.remove(),e.map&&(e.map.getCanvas().style.cursor="");return}B!==t(L)&&D(N,void 0),D(h,te,!0),D(L,B,!0),I.has(B)&&D(N,I.get(B),!0)},p=({index:B})=>{B!==-1&&t(N)&&aa(t(N).id)},F=B=>{if(!B||!e.map||!t(h))return;e.map.getCanvas().style.cursor="pointer";const te=B.realtime?`<strong>${B.displayName}</strong><br>
           <span style="color: ${Nn(Dn(B.departureDelay))}">${cr(new Date(B.departure),B.tz)}</span>
           <span ${B.departureDelay!=0?'class="line-through"':""}>${cr(new Date(B.scheduledDeparture),B.tz)}</span> ${B.from}<br>
           <span style="color: ${Nn(Dn(B.arrivalDelay))}">${cr(new Date(B.arrival),B.tz)}</span>
           <span ${B.arrivalDelay!=0?'class="line-through"':""}>${cr(new Date(B.scheduledArrival),B.tz)}</span> ${B.to}`:`<strong>${B.displayName}</strong><br>
           ${cr(new Date(B.departure),B.tz)} ${B.from}<br>
           ${cr(new Date(B.arrival),B.tz)} ${B.to}`;u.setLngLat(t(h)).setHTML(te).addTo(e.map)},x=Fu(128),S={marker:{x:0,y:0,width:128,height:128,anchorY:64,anchorX:64,mask:!0}},w=()=>{if(!(!_.positions||_.positions.byteLength===0))return new ki({id:"trips-layer",data:{length:_.length,attributes:{getPosition:{value:_.positions,size:2},getAngle:{value:_.angles,size:1},getColor:{value:_.colors,size:3,normalized:!0}}},beforeId:"road-name-text",iconAtlas:x,iconMapping:S,pickable:e.colorMode!="none",sizeScale:5,getSize:10,getIcon:B=>"marker",colorFormat:"RGB",visible:e.colorMode!=="none",useDevicePixels:!1,parameters:{depthTest:!1}})};let O;const A=()=>{!_.positions||_.positions.length===0||C.postMessage({type:"update",colorMode:e.colorMode,positions:_.positions,index:t(L)!==null&&!I.has(t(L))?t(L):-1,angles:_.angles,colors:_.colors,length:_.length},[_.positions.buffer,_.angles.buffer,_.colors.buffer])};Ze(()=>{!t(s)||d||t(r)||Pa(()=>{d=!0,C.postMessage({type:"fetch",query:t(s)})})}),Ze(()=>{t(L)&&t(h)&&t(N)&&F(t(N))}),setInterval(()=>{t(s)&&e.colorMode!=="none"&&D(a,new Date,!0)},6e4);let J=ce(void 0),P,C,N=ce(void 0);const I=new ci;sa(()=>{C=new Worker(new URL(""+new URL("../workers/tripsWorker-imnPui7O.js",import.meta.url).href,import.meta.url),{type:"module"}),C.postMessage({type:"init",baseUrl:pa.getConfig().baseUrl}),C.onmessage=B=>{if(B.data.type=="fetch-complete")I.clear(),D(J,B.data.status,!0),d=!1;else{const{positions:te,angles:$,length:Y,colors:ne,metadata:ge}=B.data;_.positions=new Float64Array(te.buffer),_.angles=new Float32Array($.buffer),_.colors=new Uint8Array(ne.buffer),_.length=Y,t(L)!==null?B.data.metadata?(I.set(t(L),ge),D(N,B.data.metadata,!0)):D(N,I.get(t(L)),!0):D(N,void 0)}P.setProps({layers:[w()]}),t(r)?cancelAnimationFrame(O):O=requestAnimationFrame(A)},P=new Ei({interleaved:!0,onHover:E,onClick:p})}),Ze(()=>{!e.map||!P||e.map.addControl(P)}),br(()=>{O&&cancelAnimationFrame(O),P&&e.map?.removeControl(P),C.terminate(),u.remove()});var X=Q(),re=y(X);{var j=B=>{tr(B,{position:"bottom-left",children:(te,$)=>{Ge();var Y=ke();U(()=>G(Y,`trips response status: ${t(J)??""}`)),n(te,Y)},$$slots:{default:!0}})};z(re,B=>{t(J)&&t(J)!==200&&B(j)})}n(i,X),Ce()}var Du=b("<!> <!>",1),zu=b("<!> <!> <!>",1),Mu=b("<!> <!> <!> <!>",1),Bu=b("<!> <!>",1),Gu=b('<div class="w-full flex justify-between items-center shadow-md pl-1 mb-1"><h2 class="ml-2 text-base font-semibold"> </h2> <!></div> <div><!></div>',1),Uu=b("<!> <!>",1),ju=b("<!> <!>",1),Hu=b('<div class="w-full flex justify-between items-center shadow-md pl-1 mb-1"><h2 class="ml-2 text-base font-semibold"><!> </h2> <!></div> <div class="p-2 md:p-4 overflow-y-auto overflow-x-hidden min-h-0 md:max-h-[60vh]"><!></div>',1),Vu=b("<!> <!> <!> <!> <!>",1),Wu=b('<div class="maplibregl-ctrl-top-left flex flex-col max-h-[97vh]"><!></div>'),Yu=b('| <a target="_blank"> </a>',1),qu=b("<!> <!>",1),Zu=b("<!> <!>",1),Ku=b("<!> <!> <!> <!> <!> <!> <!> <!>",1),$u=b('<!> <!> <!> <div><div class="maplibregl-ctrl maplibregl-ctrl-attrib"><div class="maplibregl-ctrl-attrib-inner">&copy; <a href="http://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> <!></div></div></div> <!>',1);function tv(i,e){Pe(e,!0);const a=(k,K=it,V=it)=>{var oe=Q(),ae=y(oe);{var Te=je=>{var dt=Du(),zt=y(dt);at(zt,{variant:"outline",onclick:()=>{D(te,Ft(K().lngLat,t(w)>ma?t(S):void 0),!0),t(X)?.setLngLat(t(te).match),V()()},children:(Be,et)=>{Ge();var ft=ke("From");n(Be,ft)},$$slots:{default:!0}});var lt=l(zt,2);at(lt,{variant:"outline",onclick:()=>{D($,Ft(K().lngLat,t(w)>ma?t(S):void 0),!0),t(re)?.setLngLat(t($).match),V()()},children:(Be,et)=>{Ge();var ft=ke("To");n(Be,ft)},$$slots:{default:!0}}),n(je,dt)},Me=je=>{var dt=Q(),zt=y(dt);{var lt=Be=>{at(Be,{variant:"outline",onclick:()=>{D(Y,Ft(K().lngLat,t(w)>ma?t(S):void 0),!0),t(j)?.setLngLat(t(Y).match),V()()},children:(et,ft)=>{Ge();var Xe=ke();U(()=>G(Xe,W.position)),n(et,Xe)},$$slots:{default:!0}})};z(zt,Be=>{t(f)=="isochrones"&&Be(lt)},!0)}n(je,dt)};z(ae,je=>{t(f)=="connections"?je(Te):je(Me,!1)})}n(k,oe)},o=k=>{var K=Vu(),V=y(K);tr(V,{children:(Be,et)=>{var ft=Q(),Xe=y(ft),At=()=>t(f),qe=ut=>{D(f,ut),ca("",{activeTab:ut})};de(Xe,()=>bc,(ut,He)=>{He(ut,{get value(){return At()},set value(tt){qe(tt)},class:"max-w-full w-[520px] overflow-y-auto",children:(tt,rt)=>{var mt=Mu(),vt=y(mt);de(vt,()=>yc,(Qe,_t)=>{_t(Qe,{class:"grid grid-cols-3",children:(Xt,vr)=>{var Jt=zu(),Tr=y(Jt);de(Tr,()=>Ga,(Tt,ir)=>{ir(Tt,{value:"connections",children:(fr,Dr)=>{Ge();var mr=ke();U(()=>G(mr,W.connections)),n(fr,mr)},$$slots:{default:!0}})});var ie=l(Tr,2);de(ie,()=>Ga,(Tt,ir)=>{ir(Tt,{value:"departures",children:(fr,Dr)=>{Ge();var mr=ke();U(()=>G(mr,W.departures)),n(fr,mr)},$$slots:{default:!0}})});var Lt=l(ie,2);de(Lt,()=>Ga,(Tt,ir)=>{ir(Tt,{value:"isochrones",children:(fr,Dr)=>{Ge();var mr=ke();U(()=>G(mr,W.isochrones.title)),n(fr,mr)},$$slots:{default:!0}})}),n(Xt,Jt)},$$slots:{default:!0}})});var Je=l(vt,2);de(Je,()=>Ba,(Qe,_t)=>{_t(Qe,{value:"connections",children:(Xt,vr)=>{dr(Xt,{class:"overflow-y-auto overflow-x-hidden bg-background rounded-lg",children:(Jt,Tr)=>{Hs(Jt,{get geocodingBiasPlace(){return t(x)},get serverConfig(){return t(E)},get from(){return t(te)},set from(ie){D(te,ie,!0)},get to(){return t($)},set to(ie){D($,ie,!0)},get time(){return t(Ie)},set time(ie){D(Ie,ie,!0)},get arriveBy(){return t(q)},set arriveBy(ie){D(q,ie,!0)},get useRoutedTransfers(){return t(xe)},set useRoutedTransfers(ie){D(xe,ie,!0)},get maxTransfers(){return t(ye)},set maxTransfers(ie){D(ye,ie,!0)},get pedestrianProfile(){return t(Se)},set pedestrianProfile(ie){D(Se,ie,!0)},get requireCarTransport(){return t(Oe)},set requireCarTransport(ie){D(Oe,ie,!0)},get requireBikeTransport(){return t(Ae)},set requireBikeTransport(ie){D(Ae,ie,!0)},get transitModes(){return t(Z)},set transitModes(ie){D(Z,ie,!0)},get preTransitModes(){return t(le)},set preTransitModes(ie){D(le,ie,!0)},get postTransitModes(){return t(_e)},set postTransitModes(ie){D(_e,ie,!0)},get directModes(){return t(ve)},set directModes(ie){D(ve,ie,!0)},get elevationCosts(){return t(be)},set elevationCosts(ie){D(be,ie,!0)},get maxPreTransitTime(){return t(Fe)},set maxPreTransitTime(ie){D(Fe,ie)},get maxPostTransitTime(){return t(Ne)},set maxPostTransitTime(ie){D(Ne,ie)},get maxDirectTime(){return t(Ke)},set maxDirectTime(ie){D(Ke,ie)},get ignorePreTransitRentalReturnConstraints(){return t(ue)},set ignorePreTransitRentalReturnConstraints(ie){D(ue,ie,!0)},get ignorePostTransitRentalReturnConstraints(){return t(me)},set ignorePostTransitRentalReturnConstraints(ie){D(me,ie,!0)},get ignoreDirectRentalReturnConstraints(){return t(Ue)},set ignoreDirectRentalReturnConstraints(ie){D(Ue,ie,!0)},get preTransitProviderGroups(){return t(se)},set preTransitProviderGroups(ie){D(se,ie,!0)},get postTransitProviderGroups(){return t(we)},set postTransitProviderGroups(ie){D(we,ie,!0)},get directProviderGroups(){return t(Ee)},set directProviderGroups(ie){D(Ee,ie,!0)},get via(){return t(Re)},set via(ie){D(Re,ie,!0)},get viaMinimumStay(){return t(he)},set viaMinimumStay(ie){D(he,ie,!0)},get viaLabels(){return t(fe)},set viaLabels(ie){D(fe,ie,!0)}})},$$slots:{default:!0}})},$$slots:{default:!0}})});var gt=l(Je,2);de(gt,()=>Ba,(Qe,_t)=>{_t(Qe,{value:"departures",children:(Xt,vr)=>{dr(Xt,{class:"overflow-y-auto overflow-x-hidden bg-background rounded-lg",children:(Jt,Tr)=>{xc(Jt,{get time(){return t(Ie)},set time(ie){D(Ie,ie,!0)}})},$$slots:{default:!0}})},$$slots:{default:!0}})});var Ot=l(gt,2);de(Ot,()=>Ba,(Qe,_t)=>{_t(Qe,{value:"isochrones",children:(Xt,vr)=>{dr(Xt,{class:"overflow-y-auto overflow-x-hidden bg-background rounded-lg",children:(Jt,Tr)=>{Dc(Jt,{get serverConfig(){return t(E)},get geocodingBiasPlace(){return t(x)},get one(){return t(Y)},set one(ie){D(Y,ie,!0)},get maxTravelTime(){return t(pe)},set maxTravelTime(ie){D(pe,ie)},get time(){return t(Ie)},set time(ie){D(Ie,ie,!0)},get useRoutedTransfers(){return t(xe)},set useRoutedTransfers(ie){D(xe,ie,!0)},get pedestrianProfile(){return t(Se)},set pedestrianProfile(ie){D(Se,ie,!0)},get requireCarTransport(){return t(Oe)},set requireCarTransport(ie){D(Oe,ie,!0)},get requireBikeTransport(){return t(Ae)},set requireBikeTransport(ie){D(Ae,ie,!0)},get transitModes(){return t(Z)},set transitModes(ie){D(Z,ie,!0)},get maxTransfers(){return t(ye)},set maxTransfers(ie){D(ye,ie,!0)},get preTransitModes(){return t(le)},set preTransitModes(ie){D(le,ie,!0)},get postTransitModes(){return t(_e)},set postTransitModes(ie){D(_e,ie,!0)},get maxPreTransitTime(){return t(Fe)},set maxPreTransitTime(ie){D(Fe,ie)},get maxPostTransitTime(){return t(Ne)},set maxPostTransitTime(ie){D(Ne,ie)},get arriveBy(){return t(q)},set arriveBy(ie){D(q,ie,!0)},get elevationCosts(){return t(be)},set elevationCosts(ie){D(be,ie,!0)},get ignorePreTransitRentalReturnConstraints(){return t(ue)},set ignorePreTransitRentalReturnConstraints(ie){D(ue,ie,!0)},get ignorePostTransitRentalReturnConstraints(){return t(me)},set ignorePostTransitRentalReturnConstraints(ie){D(me,ie,!0)},get options(){return t(We)},set options(ie){D(We,ie,!0)},get preTransitProviderGroups(){return t(se)},set preTransitProviderGroups(ie){D(se,ie,!0)},get postTransitProviderGroups(){return t(we)},set postTransitProviderGroups(ie){D(we,ie,!0)},get directProviderGroups(){return t(Ee)},set directProviderGroups(ie){D(Ee,ie,!0)}})},$$slots:{default:!0}})},$$slots:{default:!0}})}),n(tt,mt)},$$slots:{default:!0}})}),n(Be,ft)},$$slots:{default:!0}});var oe=l(V,2);{var ae=Be=>{var et=Bu(),ft=y(et);tr(ft,{class:"min-h-0 md:flex md:flex-col md:mb-2} ",children:(qe,ut)=>{{let He=M(()=>g?"border-0 shadow-none":"");dr(qe,{get class(){return`scrollable w-[520px] h-full md:h-[70vh] ${t(He)??""} overflow-x-hidden bg-background rounded-lg mb-2`},children:(tt,rt)=>{{let mt=M(()=>mn(t(te),t($)));hl(tt,{get baseResponse(){return t(Ht)},get routingResponses(){return t(Ut)},get baseQuery(){return t(ot)},selectItinerary:vt=>{ca("",{selectedItinerary:vt,scrollY:void 0,activeTab:"connections"})},get updateStartDest(){return t(mt)}})}},$$slots:{default:!0}})}},$$slots:{default:!0}});var Xe=l(ft,2);{var At=qe=>{var ut=Q(),He=y(ut);nt(He,17,()=>t(Ut),Nt,(tt,rt,mt)=>{var vt=Q(),Je=y(vt);gr(Je,()=>t(rt),null,(gt,Ot)=>{var Qe=Q(),_t=y(Qe);nt(_t,17,()=>t(Ot).itineraries,Nt,(Xt,vr,Jt)=>{En(Xt,{get itinerary(){return t(vr)},id:`${mt}-${Jt}`,selected:!1,selectItinerary:()=>{ca("",{selectedItinerary:t(vr),activeTab:"connections"})},get level(){return t(S)},get theme(){return F}})}),n(gt,Qe)}),n(tt,vt)}),n(qe,ut)};z(Xe,qe=>{t(u)&&!kt.state.selectedItinerary&&qe(At)})}n(Be,et)};z(oe,Be=>{t(f)=="connections"&&t(Ut).length!==0&&!kt.state.selectedItinerary&&Be(ae)})}var Te=l(oe,2);{var Me=Be=>{var et=ju(),ft=y(et);tr(ft,{class:"min-h-0 md:mb-2 md:flex",children:(qe,ut)=>{dr(qe,{class:"w-[520px] bg-background rounded-lg  flex flex-col mb-2",children:(He,tt)=>{var rt=Gu(),mt=y(rt),vt=v(mt),Je=v(vt,!0);c(vt);var gt=l(vt,2);at(gt,{variant:"ghost",onclick:()=>{history.back()},children:(_t,Xt)=>{Rr(_t,{})},$$slots:{default:!0}}),c(mt);var Ot=l(mt,2),Qe=v(Ot);xd(Qe,{get itinerary(){return kt.state.selectedItinerary}}),c(Ot),U(()=>{G(Je,W.journeyDetails),Et(Ot,1,"p-2 md:p-4 overflow-y-auto overflow-x-hidden min-h-0 "+(t(u)?"md:max-h-[60vh]":""))}),n(He,rt)},$$slots:{default:!0}})},$$slots:{default:!0}});var Xe=l(ft,2);{var At=qe=>{var ut=Uu(),He=y(ut);En(He,{get itinerary(){return kt.state.selectedItinerary},selected:!0,get level(){return t(S)},get theme(){return F}});var tt=l(He,2);Ou(tt,{get itinerary(){return kt.state.selectedItinerary},get theme(){return F}}),n(qe,ut)};z(Xe,qe=>{t(u)&&qe(At)})}n(Be,et)};z(Te,Be=>{t(f)=="connections"&&kt.state.selectedItinerary&&Be(Me)})}var je=l(Te,2);{var dt=Be=>{tr(Be,{class:"min-h-0 md:mb-2",children:(et,ft)=>{dr(et,{class:"w-[520px] md:max-h-[60vh] h-full bg-background rounded-lg flex flex-col mb-2",children:(Xe,At)=>{var qe=Hu(),ut=y(qe),He=v(ut),tt=v(He);{var rt=Qe=>{var _t=ke();U(()=>G(_t,W.arrivals)),n(Qe,_t)},mt=Qe=>{var _t=ke();U(()=>G(_t,W.departures)),n(Qe,_t)};z(tt,Qe=>{kt.state.stopArriveBy?Qe(rt):Qe(mt,!1)})}var vt=l(tt);c(He);var Je=l(He,2);at(Je,{variant:"ghost",onclick:()=>{history.back()},children:(Qe,_t)=>{Rr(Qe,{})},$$slots:{default:!0}}),c(ut);var gt=l(ut,2),Ot=v(gt);_c(Ot,{get stopId(){return kt.state.selectedStop.stopId},get stopName(){return kt.state.selectedStop.name},get time(){return kt.state.selectedStop.time},get arriveBy(){return kt.state.stopArriveBy},get stop(){return t(ne)},set stop(Qe){D(ne,Qe,!0)},get stopMarker(){return t(B)},set stopMarker(Qe){D(B,Qe,!0)},get stopNameFromResponse(){return t(Gt)},set stopNameFromResponse(Qe){D(Gt,Qe,!0)}}),c(gt),U(()=>G(vt,` in
						${t(Gt)??""}`)),n(Xe,qe)},$$slots:{default:!0}})},$$slots:{default:!0}})};z(je,Be=>{t(f)=="departures"&&kt.state.selectedStop&&Be(dt)})}var zt=l(je,2);{var lt=Be=>{{let et=M(()=>t(We).status=="DONE"?"hide":"");tr(Be,{get class(){return`min-h-0 md:mb-2 ${t(et)??""}`},children:(ft,Xe)=>{dr(ft,{class:"w-[520px] overflow-y-auto overflow-x-hidden bg-background rounded-lg",children:(At,qe)=>{Lc(At,{get options(){return t(We)}})},$$slots:{default:!0}})},$$slots:{default:!0}})}};z(zt,Be=>{t(f)=="isochrones"&&t(Y).match&&Be(lt)})}n(k,K)},r=new URLSearchParams(window.location.search),s=!!r?.has("debug"),d=!!r?.has("dark"),m=!!r?.has("light"),g=window.innerWidth<768;let f=M(()=>kt.state.activeTab??(r?.has("one")?"isochrones":r?.has("stopId")?"departures":"connections")),T=ce(void 0),_=ce("none"),u=ce(!g),h,L,E=ce(void 0),p=ce(!1);Ze(()=>{t(f)=="isochrones"&&D(_,"none")});let F=(d?"dark":m?"light":void 0)??(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");F==="dark"&&document.documentElement.classList.add("dark");let x=ce([2.258882912876089,48.72559118651327]),S=ce(0),w=ce(15),O=ce(void 0),A=ce(void 0),J=M(()=>Oi(F,t(S),window.location.origin+window.location.pathname,pa.getConfig().baseUrl?pa.getConfig().baseUrl+"/":window.location.origin+window.location.pathname));const P=new bt.GeolocateControl({positionOptions:{enableHighAccuracy:!0},showAccuracyCircle:!1}),C=()=>{P.trigger()};sa(async()=>{Li().then(k=>{k.response.headers.has("Link")&&D(T,k.response.headers.get("Link").replace(/^<(.*)>; rel="license"$/,"$1"),!0);const K=k.data;K&&(D(x,[K.lon,K.lat]),D(w,K.zoom,!0),D(E,K.serverConfig,!0)),D(p,!0)}),await Mn(),N()});const N=()=>{if(r){const k=r.get("tripId");k!==null&&aa(k,!0);const K=r.get("stopId");if(K!==null){const V=r.has("time")?new Date(r.get("time")):new Date;qr("",K,V,r.get("stopArriveBy")=="true",!0)}}};function I(k,K){if(k){const V=parseInt(k);return isNaN(V)?K:V}else return K}let X=ce(void 0),re=ce(void 0),j=ce(void 0),B=ce(void 0),te=ce($e(la(r?.get("fromPlace"),r?.get("fromName")))),$=ce($e(la(r?.get("toPlace"),r?.get("toName")))),Y=ce($e(la(r?.get("one"),r?.get("oneName")))),ne=ce(void 0),ge=Qt("via"),fe=ce($e(r?.has("viaLabel0")?Array.from({length:ge.length}).reduce((k,K,V)=>(k[`viaLabel${V}`]=r?.get(`viaLabel${V}`)??"",k),{}):{})),Re=ce($e(r?.has("via")?ge.map((k,K)=>la(k,t(fe)[`viaLabel${K}`])):void 0)),he=ce($e(r?.has("via")?Qt("viaMinimumStay").map(k=>I(k,0)):void 0)),Ie=ce($e(new Date(r?.get("time")||Date.now()))),Le=r?.get("timetableView")!="false",ze=$e(r?.get("searchWindow")?parseInt(r.get("searchWindow")):Pt.searchWindow),Ve=$e(r?.get("numItineraries")?I(r.get("numItineraries"),Pt.numItineraries):Pt.numItineraries),ee=$e(r?.get("maxItineraries")?I(r.get("maxItineraries"),void 0):void 0),q=ce(r?.get("arriveBy")=="true"),De=$e(r?.get("algorithm")??Pt.algorithm),xe=ce($e(r?.get("useRoutedTransfers")=="true"||Pt.useRoutedTransfers)),Se=ce($e(r?.has("pedestrianProfile")?r.get("pedestrianProfile"):Pt.pedestrianProfile)),Ae=ce(r?.get("requireBikeTransport")=="true"),Oe=ce(r?.get("requireCarTransport")=="true"),Z=ce($e(Qt("transitModes",Pt.transitModes))),le=ce($e(Da(Qt("preTransitModes",Pt.preTransitModes),Qt("preTransitRentalFormFactors")))),_e=ce($e(Da(Qt("postTransitModes",Pt.postTransitModes),Qt("postTransitRentalFormFactors")))),ve=ce($e(Da(Qt("directModes",Pt.directModes),Qt("directRentalFormFactors")))),se=ce($e(Qt("preTransitRentalProviderGroups"))),we=ce($e(Qt("postTransitRentalProviderGroups"))),Ee=ce($e(Qt("directRentalProviderGroups"))),be=ce($e(r?.get("elevationCosts")??"NONE")),ye=ce($e(I(r?.get("maxTransfers"),Pt.maxTransfers))),pe=M(()=>I(r?.get("maxTravelTime"),Math.min(Pt.maxTravelTime,60*(t(E)?.maxOneToAllTravelTimeLimit??1/0)))),Fe=M(()=>I(r?.get("maxPreTransitTime"),Math.min(Pt.maxPreTransitTime,t(E)?.maxPrePostTransitTimeLimit??1/0))),Ne=M(()=>I(r?.get("maxPostTransitTime"),Math.min(Pt.maxPostTransitTime,t(E)?.maxPrePostTransitTimeLimit??1/0))),Ke=M(()=>I(r?.get("maxDirectTime"),Math.min(Pt.maxDirectTime,t(E)?.maxDirectTimeLimit??1/0))),ue=ce(r?.get("ignorePreTransitRentalReturnConstraints")=="true"),me=ce(r?.get("ignorePostTransitRentalReturnConstraints")=="true"),Ue=ce(r?.get("ignoreDirectRentalReturnConstraints")=="true"),st=r?.get("slowDirect")=="true",xt=ce($e([])),We=ce($e({displayLevel:r?.get("isochronesDisplayLevel")??Pt.isochronesDisplayLevel,color:r?.get("isochronesColor")??Pt.isochronesColor,opacity:I(r?.get("isochronesOpacity"),Pt.isochronesOpacity),status:"DONE",errorMessage:void 0,errorCode:void 0}));const ct=r?.get("isochronesCircleResolution")?I(r.get("isochronesCircleResolution"),Pt.circleResolution):Pt.circleResolution,Ct=k=>k.match?.type==="STOP"?k.match.id:k.match?.level?`${yr(k.match)},${k.match.level}`:`${yr(k.match)}`,wt=(k,K)=>k.some(V=>V.startsWith("RENTAL_"))?Array.from(new Set(K)):[];let ot=M(()=>t(te).match&&t($).match?{query:ns({time:t(Ie).toISOString(),fromPlace:Ct(t(te)),toPlace:Ct(t($)),arriveBy:t(q),timetableView:Le,searchWindow:ze,numItineraries:Ve,maxItineraries:ee,withFares:!0,slowDirect:st,fastestDirectFactor:1.5,pedestrianProfile:t(Se),joinInterlinedLegs:!1,transitModes:t(Z).length==ba.length?Pt.transitModes:t(Z),preTransitModes:Kr(t(le)),postTransitModes:Kr(t(_e)),directModes:Kr(t(ve)),preTransitRentalFormFactors:fa(t(le)),postTransitRentalFormFactors:fa(t(_e)),directRentalFormFactors:fa(t(ve)),preTransitRentalProviderGroups:wt(t(le),t(se)),postTransitRentalProviderGroups:wt(t(_e),t(we)),directRentalProviderGroups:wt(t(ve),t(Ee)),requireBikeTransport:t(Ae),requireCarTransport:t(Oe),elevationCosts:t(be),useRoutedTransfers:t(xe),maxTransfers:t(ye),maxMatchingDistance:t(Se)=="WHEELCHAIR"?8:250,maxPreTransitTime:t(Fe),maxPostTransitTime:t(Ne),maxDirectTime:t(Ke),ignorePreTransitRentalReturnConstraints:t(ue),ignorePostTransitRentalReturnConstraints:t(me),ignoreDirectRentalReturnConstraints:t(Ue),algorithm:De,via:t(Re)?t(Re).map(k=>k.match?.id):void 0,viaMinimumStay:t(he)})}:void 0),pt=M(()=>t(Y)?.match?{query:{one:Ct(t(Y)),maxTravelTime:Math.ceil(t(pe)/60),time:t(Ie).toISOString(),transitModes:t(Z),maxTransfers:t(ye),arriveBy:t(q),useRoutedTransfers:t(xe),pedestrianProfile:t(Se),requireBikeTransport:t(Ae),requireCarTransport:t(Oe),preTransitModes:Kr(t(le)),postTransitModes:Kr(t(_e)),maxPreTransitTime:t(Fe),maxPostTransitTime:t(Ne),elevationCosts:t(be),maxMatchingDistance:t(Se)=="WHEELCHAIR"?8:250,ignorePreTransitRentalReturnConstraints:t(ue),ignorePostTransitRentalReturnConstraints:t(me)}}:void 0),Dt,Ht=ce(void 0),Ut=ce($e([])),Gt=ce("");Ze(()=>{t(ot)&&t(ot)!=L&&t(f)=="connections"&&(L=t(ot),clearTimeout(Dt),Dt=setTimeout(()=>{const k=Ua(t(ot)).then(mn(t(te),t($))),K=t(ot).query;D(Ht,k,!0),D(Ut,[k],!0),ya({...K,...K.fromPlace==t(te).label?{}:{fromName:t(te).label},...K.toPlace==t($).label?{}:{toName:t($).label},...t(fe)},{activeTab:"connections"},!0)},400))});let jt;Ze(()=>{if(t(pt)&&t(f)=="isochrones"){const[k,K,V]=[t(We).color,t(We).opacity,t(We).displayLevel];h!=t(pt)&&(h=t(pt),clearTimeout(jt),t(We).status="WORKING",t(We).errorMessage=void 0,jt=setTimeout(async()=>{try{const{data:oe,error:ae,response:Te}=await Ci(t(pt));if(ae){t(We).status="FAILED",t(We).errorCode=Te.status,t(We).errorMessage=ae.error;return}const Me=oe.all.map(je=>({lat:je.place?.lat,lng:je.place?.lon,seconds:t(pe)-60*(je.duration??0),name:je.place?.name}));D(xt,[...Me],!0),t(We).status=t(xt).length==0?"EMPTY":"WORKING"}catch(oe){t(We).status="FAILED",t(We).errorMessage=String(oe),t(We).errorCode=404}},60)),Pa(()=>{const oe=t(pt).query;ya({...oe,...oe.one==t(Y).label?{}:{oneName:t(Y).label},maxTravelTime:oe.maxTravelTime*60,isochronesColor:k,isochronesOpacity:K,isochronesDisplayLevel:V,...ct&&ct>2?{isochronesCircleResolution:ct}:{}},{activeTab:"isochrones"},!0)})}}),addEventListener("paste",k=>{const K=k.clipboardData.getData("text"),V=JSON.parse(K);console.log("paste: ",V);const oe=new Promise((ae,Te)=>{ae(V)});D(Ht,oe,!0),D(Ut,[oe],!0)});const Yt=(k,K)=>{const V=bt.LngLat.convert(k[0].legs[0].from),oe=new bt.LngLatBounds(V,V);k.forEach(ae=>{ae.legs.forEach(Te=>{oe.extend(Te.from),oe.extend(Te.to),Te.intermediateStops?.forEach(Me=>{oe.extend(Me)})})}),K.flyTo({...K.cameraForBounds(oe,{padding:{top:96,right:96,bottom:g?window.innerHeight*.3:96,left:g?96:640}})})},$t=k=>{t(A)?.flyTo({center:k.match,zoom:11})},Vt=()=>{kt.state.selectedItinerary&&t(A)&&Yt([kt.state.selectedItinerary],t(A))};Ze(()=>{t(A)&&t(A).addControl(P)}),Ze(()=>{t(A)&&(kt.state.selectedItinerary&&t(f)=="connections"?Vt():t(f)=="departures"&&t(ne)&&t(ne).match?$t(t(ne)):t(f)=="isochrones"&&t(Y)&&t(Y).match&&$t(t(Y)))}),Ze(()=>{!t(A)||t(f)!="connections"||!t(ot)||Promise.all(t(Ut)).then(k=>{if(t(A)){let K=k.flatMap(V=>V.itineraries);K.length!==0&&Yt(K,t(A))}})});var qt=Q(),Zt=y(qt);{var R=k=>{{let K=M(()=>Ye("h-dvh overflow-clip",F)),V=M(()=>t(u)?t(J):void 0);Ni(k,{get class(){return t(K)},get style(){return t(V)},attribution:!1,get map(){return t(A)},set map(oe){D(A,oe,!0)},get bounds(){return t(O)},set bounds(oe){D(O,oe,!0)},get zoom(){return t(w)},set zoom(oe){D(w,oe,!0)},get center(){return t(x)},set center(oe){D(x,oe)},children:(oe,ae)=>{var Te=$u(),Me=y(Te);{var je=He=>{tr(He,{position:"top-right",class:"text-right",children:(tt,rt)=>{ac(tt,{get bounds(){return t(O)},get level(){return t(S)},get zoom(){return t(w)}})},$$slots:{default:!0}})};z(Me,He=>{s&&He(je)})}var dt=l(Me,2);oc(dt,{get bounds(){return t(O)},get zoom(){return t(w)},get level(){return t(S)},set level(He){D(S,He,!0)}});var zt=l(dt,2);{var lt=He=>{var tt=Q(),rt=y(tt);{var mt=Je=>{sc(Je,{class:"relative z-10 h-full mt-5 flex flex-col",get showMap(){return t(u)},set showMap(gt){D(u,gt,!0)},children:(gt,Ot)=>{o(gt)},$$slots:{default:!0}})},vt=Je=>{var gt=Wu(),Ot=v(gt);o(Ot),c(gt),n(Je,gt)};z(rt,Je=>{g?Je(mt):Je(vt,!1)})}n(He,tt)};z(zt,He=>{He(lt)})}var Be=l(zt,2),et=v(Be),ft=v(et),Xe=l(v(ft),3);{var At=He=>{var tt=Yu(),rt=l(y(tt)),mt=v(rt,!0);c(rt),U(()=>{yt(rt,"href",t(T)),G(mt,W.timetableSources)}),n(He,tt)};z(Xe,He=>{t(T)&&He(At)})}c(ft),c(et),c(Be);var qe=l(Be,2);{var ut=He=>{var tt=Ku(),rt=y(tt);{var mt=Lt=>{var Tt=Zu(),ir=y(Tt);tr(ir,{position:"top-right",class:"pb-4 text-right",children:(Dr,mr)=>{var an=qu(),nn=y(an);at(nn,{size:"icon",onclick:()=>{D(_,(function(){switch(t(_)){case"rt":return"route";case"route":return"mode";case"mode":return"none";case"none":return"rt"}})(),!0)},children:(La,so)=>{var on=Q(),lo=y(on);{var co=zr=>{ui(zr,{class:"h-[1.2rem] w-[1.2rem]"})},uo=zr=>{var sn=Q(),vo=y(sn);{var fo=Mr=>{vi(Mr,{class:"h-[1.2rem] w-[1.2rem]"})},mo=Mr=>{var ln=Q(),go=y(ln);{var ho=Br=>{fi(Br,{class:"h-[1.2rem] w-[1.2rem]"})},po=Br=>{mi(Br,{class:"h-[1.2rem] w-[1.2rem]"})};z(go,Br=>{t(_)=="none"?Br(ho):Br(po,!1)},!0)}n(Mr,ln)};z(vo,Mr=>{t(_)=="mode"?Mr(fo):Mr(mo,!1)},!0)}n(zr,sn)};z(lo,zr=>{t(_)=="rt"?zr(co):zr(uo,!1)})}n(La,on)},$$slots:{default:!0}});var io=l(nn,2);at(io,{size:"icon",onclick:()=>C(),children:(La,so)=>{Xa(La,{class:"w-5 h-5"})},$$slots:{default:!0}}),n(Dr,an)},$$slots:{default:!0}});var fr=l(ir,2);Iu(fr,{get map(){return t(A)},get bounds(){return t(O)},get zoom(){return t(w)},get theme(){return F},get debug(){return s}}),n(Lt,Tt)};z(rt,Lt=>{t(f)!="isochrones"&&Lt(mt)})}var vt=l(rt,2);Nu(vt,{get map(){return t(A)},get bounds(){return t(O)},get zoom(){return t(w)},get colorMode(){return t(_)}});var Je=l(vt,2);{let Lt=M(()=>t(q)?t(le):t(_e)),Tt=M(()=>t(Se)==="WHEELCHAIR"),ir=M(()=>t(q)?t(Fe):t(Ne)),fr=M(()=>t(f)=="isochrones");Ac(Je,{get map(){return t(A)},get bounds(){return t(O)},get isochronesData(){return t(xt)},get streetModes(){return t(Lt)},get wheelchair(){return t(Tt)},get maxAllTime(){return t(ir)},get circleResolution(){return ct},get active(){return t(fr)},get options(){return t(We)},set options(Dr){D(We,Dr,!0)}})}var gt=l(Je,2);pr(gt,{trigger:"contextmenu",get children(){return a}});var Ot=l(gt,2);{var Qe=Lt=>{Hr(Lt,{color:"green",draggable:!0,get level(){return t(S)},get location(){return t(te)},set location(Tt){D(te,Tt,!0)},get marker(){return t(X)},set marker(Tt){D(X,Tt,!0)}})};z(Ot,Lt=>{t(te)&&t(f)=="connections"&&Lt(Qe)})}var _t=l(Ot,2);{var Xt=Lt=>{Hr(Lt,{color:"black",draggable:!1,get level(){return t(S)},get location(){return t(ne)},set location(Tt){D(ne,Tt,!0)},get marker(){return t(B)},set marker(Tt){D(B,Tt,!0)}})};z(_t,Lt=>{t(ne)&&t(f)=="departures"&&Lt(Xt)})}var vr=l(_t,2);{var Jt=Lt=>{Hr(Lt,{color:"red",draggable:!0,get level(){return t(S)},get location(){return t($)},set location(Tt){D($,Tt,!0)},get marker(){return t(re)},set marker(Tt){D(re,Tt,!0)}})};z(vr,Lt=>{t($)&&t(f)=="connections"&&Lt(Jt)})}var Tr=l(vr,2);{var ie=Lt=>{Hr(Lt,{color:"yellow",draggable:!0,get level(){return t(S)},get location(){return t(Y)},set location(Tt){D(Y,Tt,!0)},get marker(){return t(j)},set marker(Tt){D(j,Tt,!0)}})};z(Tr,Lt=>{t(Y)&&t(f)=="isochrones"&&Lt(ie)})}n(He,tt)};z(qe,He=>{t(u)&&He(ut)})}U(()=>Et(Be,1,`maplibregl-ctrl-${g?"top-left":"bottom-right"}`)),n(oe,Te)},$$slots:{default:!0}})}};z(Zt,k=>{t(p)&&k(R)})}n(i,qt),Ce()}export{tv as component};
//# sourceMappingURL=2.y0UQfM9x.js.map
