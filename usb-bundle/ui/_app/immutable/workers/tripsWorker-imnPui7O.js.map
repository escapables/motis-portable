{"version":3,"file":"tripsWorker-imnPui7O.js","sources":["../../../node_modules/.pnpm/@mapbox+polyline@1.2.1/node_modules/@mapbox/polyline/src/polyline.js","../../../node_modules/.pnpm/@hey-api+client-fetch@0.4.4/node_modules/@hey-api/client-fetch/dist/index.js","../../../api/dist/chunk-FDF4H3WD.js","../../../src/lib/Color.ts","../../../src/lib/modeStyle.ts","../../../src/lib/tripsWorker.ts"],"sourcesContent":["'use strict';\n\n/**\n * Based off of [the offical Google document](https://developers.google.com/maps/documentation/utilities/polylinealgorithm)\n *\n * Some parts from [this implementation](http://facstaff.unca.edu/mcmcclur/GoogleMaps/EncodePolyline/PolylineEncoder.js)\n * by [Mark McClure](http://facstaff.unca.edu/mcmcclur/)\n *\n * @module polyline\n */\n\nvar polyline = {};\n\nfunction py2_round(value) {\n    // Google's polyline algorithm uses the same rounding strategy as Python 2, which is different from JS for negative values\n    return Math.floor(Math.abs(value) + 0.5) * (value >= 0 ? 1 : -1);\n}\n\nfunction encode(current, previous, factor) {\n    current = py2_round(current * factor);\n    previous = py2_round(previous * factor);\n    var coordinate = (current - previous) * 2;\n    if (coordinate < 0) {\n        coordinate = -coordinate - 1\n    }\n    var output = '';\n    while (coordinate >= 0x20) {\n        output += String.fromCharCode((0x20 | (coordinate & 0x1f)) + 63);\n        coordinate /= 32;\n    }\n    output += String.fromCharCode((coordinate | 0) + 63);\n    return output;\n}\n\n/**\n * Decodes to a [latitude, longitude] coordinates array.\n *\n * This is adapted from the implementation in Project-OSRM.\n *\n * @param {String} str\n * @param {Number} precision\n * @returns {Array}\n *\n * @see https://github.com/Project-OSRM/osrm-frontend/blob/master/WebContent/routing/OSRM.RoutingGeometry.js\n */\npolyline.decode = function(str, precision) {\n    var index = 0,\n        lat = 0,\n        lng = 0,\n        coordinates = [],\n        shift = 0,\n        result = 0,\n        byte = null,\n        latitude_change,\n        longitude_change,\n        factor = Math.pow(10, Number.isInteger(precision) ? precision : 5);\n\n    // Coordinates have variable length when encoded, so just keep\n    // track of whether we've hit the end of the string. In each\n    // loop iteration, a single coordinate is decoded.\n    while (index < str.length) {\n\n        // Reset shift, result, and byte\n        byte = null;\n        shift = 1;\n        result = 0;\n\n        do {\n            byte = str.charCodeAt(index++) - 63;\n            result += (byte & 0x1f) * shift;\n            shift *= 32;\n        } while (byte >= 0x20);\n\n        latitude_change = (result & 1) ? ((-result - 1) / 2) : (result / 2);\n\n        shift = 1;\n        result = 0;\n\n        do {\n            byte = str.charCodeAt(index++) - 63;\n            result += (byte & 0x1f) * shift;\n            shift *= 32;\n        } while (byte >= 0x20);\n\n        longitude_change = (result & 1) ? ((-result - 1) / 2) : (result / 2);\n\n        lat += latitude_change;\n        lng += longitude_change;\n\n        coordinates.push([lat / factor, lng / factor]);\n    }\n\n    return coordinates;\n};\n\n/**\n * Encodes the given [latitude, longitude] coordinates array.\n *\n * @param {Array.<Array.<Number>>} coordinates\n * @param {Number} precision\n * @returns {String}\n */\npolyline.encode = function(coordinates, precision) {\n    if (!coordinates.length) { return ''; }\n\n    var factor = Math.pow(10, Number.isInteger(precision) ? precision : 5),\n        output = encode(coordinates[0][0], 0, factor) + encode(coordinates[0][1], 0, factor);\n\n    for (var i = 1; i < coordinates.length; i++) {\n        var a = coordinates[i], b = coordinates[i - 1];\n        output += encode(a[0], b[0], factor);\n        output += encode(a[1], b[1], factor);\n    }\n\n    return output;\n};\n\nfunction flipped(coords) {\n    var flipped = [];\n    for (var i = 0; i < coords.length; i++) {\n        var coord = coords[i].slice();\n        flipped.push([coord[1], coord[0]]);\n    }\n    return flipped;\n}\n\n/**\n * Encodes a GeoJSON LineString feature/geometry.\n *\n * @param {Object} geojson\n * @param {Number} precision\n * @returns {String}\n */\npolyline.fromGeoJSON = function(geojson, precision) {\n    if (geojson && geojson.type === 'Feature') {\n        geojson = geojson.geometry;\n    }\n    if (!geojson || geojson.type !== 'LineString') {\n        throw new Error('Input must be a GeoJSON LineString');\n    }\n    return polyline.encode(flipped(geojson.coordinates), precision);\n};\n\n/**\n * Decodes to a GeoJSON LineString geometry.\n *\n * @param {String} str\n * @param {Number} precision\n * @returns {Object}\n */\npolyline.toGeoJSON = function(str, precision) {\n    var coords = polyline.decode(str, precision);\n    return {\n        type: 'LineString',\n        coordinates: flipped(coords)\n    };\n};\n\nif (typeof module === 'object' && module.exports) {\n    module.exports = polyline;\n}\n","var T=/\\{[^{}]+\\}/g,h=({allowReserved:i,name:n,value:e})=>{if(e==null)return \"\";if(typeof e==\"object\")throw new Error(\"Deeply-nested arrays/objects aren\\u2019t supported. Provide your own `querySerializer()` to handle these.\");return `${n}=${i?e:encodeURIComponent(e)}`},U=i=>{switch(i){case\"label\":return \".\";case\"matrix\":return \";\";case\"simple\":return \",\";default:return \"&\"}},$=i=>{switch(i){case\"form\":return \",\";case\"pipeDelimited\":return \"|\";case\"spaceDelimited\":return \"%20\";default:return \",\"}},D=i=>{switch(i){case\"label\":return \".\";case\"matrix\":return \";\";case\"simple\":return \",\";default:return \"&\"}},j=({allowReserved:i,explode:n,name:e,style:a,value:o})=>{if(!n){let r=(i?o:o.map(c=>encodeURIComponent(c))).join($(a));switch(a){case\"label\":return `.${r}`;case\"matrix\":return `;${e}=${r}`;case\"simple\":return r;default:return `${e}=${r}`}}let s=U(a),t=o.map(r=>a===\"label\"||a===\"simple\"?i?r:encodeURIComponent(r):h({allowReserved:i,name:e,value:r})).join(s);return a===\"label\"||a===\"matrix\"?s+t:t},C=({allowReserved:i,explode:n,name:e,style:a,value:o})=>{if(o instanceof Date)return `${e}=${o.toISOString()}`;if(a!==\"deepObject\"&&!n){let r=[];Object.entries(o).forEach(([u,l])=>{r=[...r,u,i?l:encodeURIComponent(l)];});let c=r.join(\",\");switch(a){case\"form\":return `${e}=${c}`;case\"label\":return `.${c}`;case\"matrix\":return `;${e}=${c}`;default:return c}}let s=D(a),t=Object.entries(o).map(([r,c])=>h({allowReserved:i,name:a===\"deepObject\"?`${e}[${r}]`:r,value:c})).join(s);return a===\"label\"||a===\"matrix\"?s+t:t},_=({path:i,url:n})=>{let e=n,a=n.match(T);if(a)for(let o of a){let s=!1,t=o.substring(1,o.length-1),r=\"simple\";t.endsWith(\"*\")&&(s=!0,t=t.substring(0,t.length-1)),t.startsWith(\".\")?(t=t.substring(1),r=\"label\"):t.startsWith(\";\")&&(t=t.substring(1),r=\"matrix\");let c=i[t];if(c==null)continue;if(Array.isArray(c)){e=e.replace(o,j({explode:s,name:t,style:r,value:c}));continue}if(typeof c==\"object\"){e=e.replace(o,C({explode:s,name:t,style:r,value:c}));continue}if(r===\"matrix\"){e=e.replace(o,`;${h({name:t,value:c})}`);continue}let u=encodeURIComponent(r===\"label\"?`.${c}`:c);e=e.replace(o,u);}return e},b=({allowReserved:i,array:n,object:e}={})=>o=>{let s=[];if(o&&typeof o==\"object\")for(let t in o){let r=o[t];if(r!=null){if(Array.isArray(r)){s=[...s,j({allowReserved:i,explode:!0,name:t,style:\"form\",value:r,...n})];continue}if(typeof r==\"object\"){s=[...s,C({allowReserved:i,explode:!0,name:t,style:\"deepObject\",value:r,...e})];continue}s=[...s,h({allowReserved:i,name:t,value:r})];}}return s.join(\"&\")},A=i=>{if(!i)return;let n=i.split(\";\")[0].trim();if(n.startsWith(\"application/json\")||n.endsWith(\"+json\"))return \"json\";if(n===\"multipart/form-data\")return \"formData\";if([\"application/\",\"audio/\",\"image/\",\"video/\"].some(e=>n.startsWith(e)))return \"blob\";if(n.startsWith(\"text/\"))return \"text\"},w=({baseUrl:i,path:n,query:e,querySerializer:a,url:o})=>{let s=o.startsWith(\"/\")?o:`/${o}`,t=i+s;n&&(t=_({path:n,url:t}));let r=e?a(e):\"\";return r.startsWith(\"?\")&&(r=r.substring(1)),r&&(t+=`?${r}`),t},R=(i,n)=>{let e={...i,...n};return e.baseUrl?.endsWith(\"/\")&&(e.baseUrl=e.baseUrl.substring(0,e.baseUrl.length-1)),e.headers=O(i.headers,n.headers),e},O=(...i)=>{let n=new Headers;for(let e of i){if(!e||typeof e!=\"object\")continue;let a=e instanceof Headers?e.entries():Object.entries(e);for(let[o,s]of a)if(s===null)n.delete(o);else if(Array.isArray(s))for(let t of s)n.append(o,t);else s!==void 0&&n.set(o,typeof s==\"object\"?JSON.stringify(s):s);}return n},y=class{_fns;constructor(){this._fns=[];}clear(){this._fns=[];}exists(n){return this._fns.indexOf(n)!==-1}eject(n){let e=this._fns.indexOf(n);e!==-1&&(this._fns=[...this._fns.slice(0,e),...this._fns.slice(e+1)]);}use(n){this._fns=[...this._fns,n];}},P=()=>({error:new y,request:new y,response:new y}),q=(i,n,e)=>{typeof e==\"string\"||e instanceof Blob?i.append(n,e):i.append(n,JSON.stringify(e));},k={bodySerializer:i=>{let n=new FormData;return Object.entries(i).forEach(([e,a])=>{a!=null&&(Array.isArray(a)?a.forEach(o=>q(n,e,o)):q(n,e,a));}),n}},E={bodySerializer:i=>JSON.stringify(i)},z=(i,n,e)=>{typeof e==\"string\"?i.append(n,e):i.append(n,JSON.stringify(e));},H={bodySerializer:i=>{let n=new URLSearchParams;return Object.entries(i).forEach(([e,a])=>{a!=null&&(Array.isArray(a)?a.forEach(o=>z(n,e,o)):z(n,e,a));}),n}},W=b({allowReserved:!1,array:{explode:!0,style:\"form\"},object:{explode:!0,style:\"deepObject\"}}),B={\"Content-Type\":\"application/json\"},x=(i={})=>({...E,baseUrl:\"\",fetch:globalThis.fetch,headers:B,parseAs:\"auto\",querySerializer:W,...i});var J=(i={})=>{let n=R(x(),i),e=()=>({...n}),a=t=>(n=R(n,t),e()),o=P(),s=async t=>{let r={...n,...t,headers:O(n.headers,t.headers)};r.body&&r.bodySerializer&&(r.body=r.bodySerializer(r.body)),r.body||r.headers.delete(\"Content-Type\");let c=w({baseUrl:r.baseUrl??\"\",path:r.path,query:r.query,querySerializer:typeof r.querySerializer==\"function\"?r.querySerializer:b(r.querySerializer),url:r.url}),u={redirect:\"follow\",...r},l=new Request(c,u);for(let f of o.request._fns)l=await f(l,r);let I=r.fetch,p=await I(l);for(let f of o.response._fns)p=await f(p,l,r);let g={request:l,response:p};if(p.ok){if(p.status===204||p.headers.get(\"Content-Length\")===\"0\")return {data:{},...g};if(r.parseAs===\"stream\")return {data:p.body,...g};let f=(r.parseAs===\"auto\"?A(p.headers.get(\"Content-Type\")):r.parseAs)??\"json\",S=await p[f]();return f===\"json\"&&r.responseTransformer&&(S=await r.responseTransformer(S)),{data:S,...g}}let m=await p.text();try{m=JSON.parse(m);}catch{}let d=m;for(let f of o.error._fns)d=await f(m,p,l,r);if(d=d||{},r.throwOnError)throw d;return {error:d,...g}};return {connect:t=>s({...t,method:\"CONNECT\"}),delete:t=>s({...t,method:\"DELETE\"}),get:t=>s({...t,method:\"GET\"}),getConfig:e,head:t=>s({...t,method:\"HEAD\"}),interceptors:o,options:t=>s({...t,method:\"OPTIONS\"}),patch:t=>s({...t,method:\"PATCH\"}),post:t=>s({...t,method:\"POST\"}),put:t=>s({...t,method:\"PUT\"}),request:s,setConfig:a,trace:t=>s({...t,method:\"TRACE\"})}};\n\nexport { J as createClient, x as createConfig, k as formDataBodySerializer, E as jsonBodySerializer, H as urlSearchParamsBodySerializer };\n//# sourceMappingURL=index.js.map\n//# sourceMappingURL=index.js.map","// openapi/services.gen.ts\nimport { createClient, createConfig } from \"@hey-api/client-fetch\";\nvar client = createClient(createConfig());\nvar plan = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v5/plan\"\n  });\n};\nvar oneToMany = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v1/one-to-many\"\n  });\n};\nvar oneToAll = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v1/one-to-all\"\n  });\n};\nvar reverseGeocode = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v1/reverse-geocode\"\n  });\n};\nvar geocode = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v1/geocode\"\n  });\n};\nvar trip = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v5/trip\"\n  });\n};\nvar stoptimes = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v5/stoptimes\"\n  });\n};\nvar trips = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v5/map/trips\"\n  });\n};\nvar initial = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v1/map/initial\"\n  });\n};\nvar stops = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v1/map/stops\"\n  });\n};\nvar levels = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v1/map/levels\"\n  });\n};\nvar rentals = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/v1/rentals\"\n  });\n};\nvar transfers = (options) => {\n  return (options?.client ?? client).get({\n    ...options,\n    url: \"/api/debug/transfers\"\n  });\n};\n\nexport {\n  client,\n  plan,\n  oneToMany,\n  oneToAll,\n  reverseGeocode,\n  geocode,\n  trip,\n  stoptimes,\n  trips,\n  initial,\n  stops,\n  levels,\n  rentals,\n  transfers\n};\n","export type RGBA = [number, number, number, number];\nexport function hexToRgb(hex: string): RGBA {\n\tconst result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\tif (!result) {\n\t\tthrow `${hex} is not a hex color #RRGGBB`;\n\t}\n\treturn [parseInt(result[1], 16), parseInt(result[2], 16), parseInt(result[3], 16), 255];\n}\n\nexport function rgbToHex(rgba: RGBA): string {\n\treturn '#' + ((1 << 24) | (rgba[0] << 16) | (rgba[1] << 8) | rgba[2]).toString(16).slice(1);\n}\n\nexport const getDelayColor = (delay: number, realTime: boolean): RGBA => {\n\tdelay = delay / 60000;\n\tif (!realTime) {\n\t\treturn [100, 100, 100, 255];\n\t}\n\tif (delay <= -30) {\n\t\treturn [255, 0, 255, 255];\n\t} else if (delay <= -6) {\n\t\treturn [138, 82, 254, 255];\n\t} else if (delay <= 3) {\n\t\treturn [69, 194, 74, 255];\n\t} else if (delay <= 5) {\n\t\treturn [255, 237, 0, 255];\n\t} else if (delay <= 10) {\n\t\treturn [255, 102, 0, 255];\n\t} else if (delay <= 15) {\n\t\treturn [255, 48, 71, 255];\n\t}\n\treturn [163, 0, 10, 255];\n};\n","import type { Mode, Rental } from '@motis-project/motis-client';\n\nexport type Colorable = { routeColor?: string; routeTextColor?: string; mode: Mode };\n\nexport type TripInfo = { tripId?: string; displayName?: string };\n\nexport type RentalInfo = { rental?: Rental };\n\nexport type LegLike = Colorable & TripInfo & RentalInfo;\n\nexport const getModeStyle = (l: LegLike): [string, string, string] => {\n\tswitch (l.mode) {\n\t\tcase 'WALK':\n\t\t\treturn ['walk', 'hsl(var(--foreground) / 1)', 'hsl(var(--background) / 1)'];\n\t\tcase 'BIKE':\n\t\t\treturn ['bike', 'hsl(var(--foreground) / 1)', 'hsl(var(--background) / 1)'];\n\n\t\tcase 'RENTAL':\n\t\t\tswitch (l.rental?.formFactor) {\n\t\t\t\tcase 'BICYCLE':\n\t\t\t\t\treturn ['bike', '#075985', 'white'];\n\t\t\t\tcase 'CARGO_BICYCLE':\n\t\t\t\t\treturn ['cargo_bike', '#075985', 'white'];\n\t\t\t\tcase 'CAR':\n\t\t\t\t\treturn ['car', '#4c4947', 'white'];\n\t\t\t\tcase 'MOPED':\n\t\t\t\t\treturn ['moped', '#075985', 'white'];\n\t\t\t\tcase 'SCOOTER_SEATED':\n\t\t\t\t\treturn ['seated_scooter', '#075985', 'white'];\n\t\t\t\tcase 'SCOOTER_STANDING':\n\t\t\t\t\treturn ['scooter', '#075985', 'white'];\n\t\t\t\tcase 'OTHER':\n\t\t\t\tdefault:\n\t\t\t\t\treturn ['other', '#075985', 'white'];\n\t\t\t}\n\n\t\tcase 'CAR':\n\t\tcase 'CAR_PARKING':\n\t\t\treturn ['car', '#4c4947', 'white'];\n\n\t\tcase 'FLEX':\n\t\tcase 'ODM':\n\t\t\treturn ['taxi', '#fdb813', 'white'];\n\n\t\tcase 'TRANSIT':\n\t\tcase 'BUS':\n\t\t\treturn ['bus', '#ff9800', 'white'];\n\t\tcase 'COACH':\n\t\t\treturn ['bus', '#9ccc65', 'black'];\n\n\t\tcase 'TRAM':\n\t\t\treturn ['tram', '#ebe717', 'white'];\n\n\t\tcase 'SUBURBAN':\n\t\t\treturn ['sbahn', '#4caf50', 'white'];\n\n\t\tcase 'SUBWAY':\n\t\t\treturn ['ubahn', '#3f51b5', 'white'];\n\n\t\tcase 'FERRY':\n\t\t\treturn ['ship', '#00acc1', 'white'];\n\n\t\tcase 'AIRPLANE':\n\t\t\treturn ['plane', '#90a4ae', 'white'];\n\n\t\tcase 'HIGHSPEED_RAIL':\n\t\t\treturn ['train', '#9c27b0', 'white'];\n\n\t\tcase 'LONG_DISTANCE':\n\t\t\treturn ['train', '#e91e63', 'white'];\n\n\t\tcase 'NIGHT_RAIL':\n\t\t\treturn ['train', '#1a237e', 'white'];\n\n\t\tcase 'REGIONAL_FAST_RAIL':\n\t\tcase 'REGIONAL_RAIL':\n\t\tcase 'RAIL':\n\t\t\treturn ['train', '#f44336', 'white'];\n\n\t\tcase 'FUNICULAR':\n\t\t\treturn ['funicular', '#795548', 'white'];\n\n\t\tcase 'CABLE_CAR':\n\t\t\treturn ['tram', '#795548', 'white'];\n\n\t\tcase 'AERIAL_LIFT':\n\t\t\treturn ['aerial_lift', '#795548', 'white'];\n\t}\n\n\treturn ['train', '#000000', 'white'];\n};\n\nexport const getColor = (l: Colorable): [string, string] => {\n\tconst [_, defaultColor, defaultTextColor] = getModeStyle(l);\n\tif (!l.routeColor) {\n\t\treturn [defaultColor, defaultTextColor];\n\t}\n\treturn [`#${l.routeColor}`, `#${l.routeTextColor}`];\n};\n\nexport const routeBorderColor = (l: Colorable) => {\n\treturn `border-color: ${getColor(l)[0]}`;\n};\n\nexport const routeColor = (l: Colorable) => {\n\tconst [color, textColor] = getColor(l);\n\treturn `background-color: ${color}; color: ${textColor}; fill: ${textColor}`;\n};\n","/// <reference lib=\"webworker\" />trips\nimport polyline from '@mapbox/polyline';\nimport { client, trips, type Mode, type TripSegment } from '@motis-project/motis-client';\nimport type { Trip, TransferData, MetaData, Query } from './types';\nimport type { QuerySerializerOptions } from '@hey-api/client-fetch';\nimport { getDelayColor, hexToRgb } from './Color';\nimport { getModeStyle, getColor } from './modeStyle';\n\n//MATH\nconst ease = (t: number) => t * t * (3 - 2 * t);\nconst R = 6371;\nconst TO_RAD = Math.PI / 180;\nconst TO_DEG = 180 / Math.PI;\n\nconst getSpacialData = (\n\tpath: Float64Array,\n\ti: number,\n\tsegmentDistances: Float64Array,\n\theadings: Float32Array\n) => {\n\tconst i2 = i * 2;\n\tconst i1 = i2 - 2;\n\tconst lon2 = path[i2] * TO_RAD;\n\tconst lat2 = path[i2 + 1] * TO_RAD;\n\tconst lon1 = path[i1] * TO_RAD;\n\tconst lat1 = path[i1 + 1] * TO_RAD;\n\n\tconst dLon = lon2 - lon1;\n\tconst dLat = lat2 - lat1;\n\n\tconst cosLat1 = Math.cos(lat1);\n\tconst cosLat2 = Math.cos(lat2);\n\tconst sinLat1 = Math.sin(lat1);\n\tconst sinLat2 = Math.sin(lat2);\n\tconst cosDLon = Math.cos(dLon);\n\n\t// Haversine Distance\n\tconst a = Math.sin(dLat / 2) ** 2 + cosLat1 * cosLat2 * Math.sin(dLon / 2) ** 2;\n\tconst dist = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a)) * R;\n\tsegmentDistances[i - 1] = dist;\n\n\t// Bearing\n\tconst y = Math.sin(dLon) * cosLat2;\n\tconst x = cosLat1 * sinLat2 - sinLat1 * cosLat2 * cosDLon;\n\theadings[i - 1] = (-(Math.atan2(y, x) * TO_DEG + 360) % 360) + 90;\n};\n\n//PROCESSING\nlet status: number;\nconst tripsMap = new Map<string, Trip>();\nconst metaDataMap = new Map<string, MetaData>();\nlet metadata: MetaData[] = [];\nconst fetchData = async (query: Query) => {\n\tconst { data, response } = await trips({ query });\n\tstatus = response.status;\n\tif (!data) return;\n\n\ttripsMap.clear();\n\tmetaDataMap.clear();\n\n\tconst tripBuilders = new Map<\n\t\tstring,\n\t\t{\n\t\t\tpaths: Float64Array[];\n\t\t\ttimestamps: Float64Array[];\n\t\t\theadings: Float32Array[];\n\t\t\trealtime: boolean;\n\t\t\tmode: Mode;\n\t\t\trouteColor?: string;\n\t\t\tdepartureDelay: number;\n\t\t\tarrivalDelay: number;\n\t\t}\n\t>();\n\n\tfor (const d of data) {\n\t\tconst id = d.trips[0].tripId;\n\t\tconst processed = processSegment(d);\n\n\t\tif (!tripBuilders.has(id)) {\n\t\t\ttripBuilders.set(id, {\n\t\t\t\tpaths: [processed.path],\n\t\t\t\ttimestamps: [processed.timestamps],\n\t\t\t\theadings: [processed.headings],\n\t\t\t\trealtime: processed.realtime,\n\t\t\t\tmode: processed.mode,\n\t\t\t\trouteColor: processed.routeColor,\n\t\t\t\tdepartureDelay: processed.departureDelay,\n\t\t\t\tarrivalDelay: processed.arrivalDelay\n\t\t\t});\n\t\t} else {\n\t\t\tconst b = tripBuilders.get(id)!;\n\t\t\tb.paths.push(processed.path);\n\t\t\tb.timestamps.push(processed.timestamps);\n\t\t\tb.headings.push(processed.headings);\n\t\t}\n\n\t\tmetaDataMap.set(id, {\n\t\t\tid,\n\t\t\tdisplayName: d.trips[0].displayName,\n\t\t\ttz: d.from.tz,\n\t\t\tfrom: d.from.name,\n\t\t\tto: d.to.name,\n\t\t\trealtime: d.realTime,\n\t\t\tarrival: d.arrival,\n\t\t\tdeparture: d.departure,\n\t\t\tscheduledArrival: d.scheduledArrival,\n\t\t\tscheduledDeparture: d.scheduledDeparture,\n\t\t\tdepartureDelay: processed.departureDelay,\n\t\t\tarrivalDelay: processed.arrivalDelay\n\t\t});\n\t}\n\n\ttripBuilders.forEach((b, id) => {\n\t\tlet pathLen = 0;\n\t\tlet tsLen = 0;\n\t\tlet hdLen = 0;\n\n\t\tfor (let i = 0; i < b.paths.length; i++) {\n\t\t\tpathLen += b.paths[i].length;\n\t\t\ttsLen += b.timestamps[i].length;\n\t\t\thdLen += b.headings[i].length;\n\t\t}\n\n\t\tconst path = new Float64Array(pathLen);\n\t\tconst timestamps = new Float64Array(tsLen);\n\t\tconst headings = new Float32Array(hdLen);\n\n\t\tlet pOff = 0,\n\t\t\ttOff = 0,\n\t\t\thOff = 0;\n\t\tfor (let i = 0; i < b.paths.length; i++) {\n\t\t\tpath.set(b.paths[i], pOff);\n\t\t\ttimestamps.set(b.timestamps[i], tOff);\n\t\t\theadings.set(b.headings[i], hOff);\n\n\t\t\tpOff += b.paths[i].length;\n\t\t\ttOff += b.timestamps[i].length;\n\t\t\thOff += b.headings[i].length;\n\t\t}\n\n\t\ttripsMap.set(id, {\n\t\t\trealtime: b.realtime,\n\t\t\tmode: b.mode,\n\t\t\trouteColor: b.routeColor,\n\t\t\tpath,\n\t\t\ttimestamps,\n\t\t\theadings,\n\t\t\tcurrentIndx: 0,\n\t\t\tdepartureDelay: b.departureDelay,\n\t\t\tarrivalDelay: b.arrivalDelay\n\t\t});\n\t});\n\tmetadata = Array.from(metaDataMap.values());\n};\nconst processSegment = (s: TripSegment): Trip => {\n\tconst departure = new Date(s.departure).getTime();\n\tconst arrival = new Date(s.arrival).getTime();\n\tconst totalDuration = arrival - departure;\n\n\tconst decoded = polyline.decode(s.polyline);\n\tconst count = decoded.length;\n\n\tconst path = new Float64Array(count * 2);\n\tconst timestamps = new Float64Array(count);\n\tconst headings = new Float32Array(count);\n\tconst segmentDistances = new Float64Array(count);\n\n\tlet totalDistance = 0;\n\n\tfor (let i = 0; i < count; i++) {\n\t\tconst p = decoded[i];\n\t\tconst lon = p[1];\n\t\tconst lat = p[0];\n\t\tpath[i * 2] = lon;\n\t\tpath[i * 2 + 1] = lat;\n\n\t\tif (i > 0) {\n\t\t\tgetSpacialData(path, i, segmentDistances, headings);\n\t\t\ttotalDistance += segmentDistances[i - 1];\n\t\t}\n\t}\n\n\tif (count > 1) headings[count - 1] = headings[count - 2];\n\n\tconst invTotalDist = totalDistance === 0 ? 0 : 1 / totalDistance;\n\tlet cumulativeDist = 0;\n\tfor (let i = 0; i < count; i++) {\n\t\ttimestamps[i] = departure + cumulativeDist * invTotalDist * totalDuration;\n\t\tcumulativeDist += segmentDistances[i];\n\t}\n\n\treturn {\n\t\trealtime: s.realTime,\n\t\tmode: s.mode,\n\t\trouteColor: s.routeColor,\n\t\tpath,\n\t\ttimestamps,\n\t\theadings,\n\t\tcurrentIndx: 0,\n\t\tdepartureDelay: departure - new Date(s.scheduledDeparture).getTime(),\n\t\tarrivalDelay: arrival - new Date(s.scheduledArrival).getTime()\n\t};\n};\n\n//STATE UPDATE\nfunction updateState(data: TransferData, colorMode: string) {\n\tlet posIndex = 0;\n\tlet colorIndex = 0;\n\tlet angleIndex = 0;\n\tconst time = Date.now();\n\tlet color;\n\ttripsMap.forEach((t) => {\n\t\tconst stamps = t.timestamps;\n\t\tconst path = t.path;\n\t\tconst headings = t.headings;\n\t\tconst len = stamps.length;\n\n\t\tswitch (colorMode) {\n\t\t\tcase 'rt':\n\t\t\t\tcolor = getDelayColor(t.departureDelay, t.realtime);\n\t\t\t\tbreak;\n\t\t\tcase 'mode':\n\t\t\t\tcolor = hexToRgb(getModeStyle(t)[1]);\n\t\t\t\tbreak;\n\t\t\tcase 'route':\n\t\t\t\tcolor = hexToRgb(getColor(t)[0]);\n\t\t\t\tbreak;\n\t\t\tcase 'none':\n\t\t\t\tcolor = hexToRgb(getColor(t)[0]);\n\t\t\t\tbreak;\n\t\t}\n\t\tdata.colors[colorIndex] = color![0];\n\t\tdata.colors[colorIndex + 1] = color![1];\n\t\tdata.colors[colorIndex + 2] = color![2];\n\n\t\tlet curr = t.currentIndx;\n\t\twhile (curr < len - 1 && stamps[curr] < time) {\n\t\t\tcurr++;\n\t\t}\n\t\tt.currentIndx = curr;\n\n\t\tconst last = stamps[len - 1];\n\n\t\tif (curr === 0) {\n\t\t\tdata.positions[posIndex] = path[0];\n\t\t\tdata.positions[posIndex + 1] = path[1];\n\t\t\tdata.angles[angleIndex] = headings[0];\n\t\t} else if (curr === len - 1 && time >= last) {\n\t\t\tconst idx = 2 * (len - 1);\n\t\t\tdata.positions[posIndex] = path[idx];\n\t\t\tdata.positions[posIndex + 1] = path[idx + 1];\n\t\t\tdata.angles[angleIndex] = headings[len - 1];\n\t\t} else if (last > time) {\n\t\t\tconst t0 = stamps[curr - 1];\n\t\t\tconst t1 = stamps[curr];\n\n\t\t\tconst r = ease((time - t0) / (t1 - t0));\n\n\t\t\tconst prevIdx = 2 * (curr - 1);\n\t\t\tconst nextIdx = 2 * curr;\n\n\t\t\tconst x0 = path[prevIdx];\n\t\t\tconst y0 = path[prevIdx + 1];\n\n\t\t\tconst x1 = path[nextIdx];\n\t\t\tconst y1 = path[nextIdx + 1];\n\n\t\t\tdata.positions[posIndex] = x0 + (x1 - x0) * r;\n\t\t\tdata.positions[posIndex + 1] = y0 + (y1 - y0) * r;\n\t\t\tdata.angles[angleIndex] = headings[curr - 1];\n\t\t}\n\n\t\tcolorIndex += 3;\n\t\tangleIndex++;\n\t\tposIndex += 2;\n\t});\n\n\tdata.length = angleIndex;\n}\n\n//MESSAGING\nself.onmessage = async (e) => {\n\tswitch (e.data.type) {\n\t\tcase 'init': {\n\t\t\tconst querySerializer = { array: { explode: false } } as QuerySerializerOptions;\n\t\t\tclient.setConfig({ baseUrl: e.data.baseUrl, querySerializer });\n\t\t\tbreak;\n\t\t}\n\t\tcase 'fetch':\n\t\t\tawait fetchData(e.data.query);\n\t\t\tpostMessage({ type: 'fetch-complete', status });\n\t\t\tbreak;\n\t\tcase 'update': {\n\t\t\tconst positions = new Float64Array(e.data.positions.buffer);\n\t\t\tconst angles = new Float32Array(e.data.angles.buffer);\n\t\t\tconst colors = new Uint8Array(e.data.colors.buffer);\n\t\t\tconst hovIndex = e.data.index;\n\t\t\tconst data = {\n\t\t\t\tcolors,\n\t\t\t\tpositions,\n\t\t\t\tangles,\n\t\t\t\tlength: 0\n\t\t\t};\n\t\t\tupdateState(data, e.data.colorMode);\n\t\t\tpostMessage(\n\t\t\t\t{\n\t\t\t\t\tangles: data.angles,\n\t\t\t\t\tpositions: data.positions,\n\t\t\t\t\tcolors: data.colors,\n\t\t\t\t\tlength: data.length,\n\t\t\t\t\tmetadata: hovIndex !== -1 ? metadata[hovIndex] : null\n\t\t\t\t},\n\t\t\t\t[data.angles.buffer, data.positions.buffer, data.colors.buffer]\n\t\t\t);\n\t\t\tbreak;\n\t\t}\n\t}\n};\n\nexport {};\n"],"names":["polyline","py2_round","value","encode","current","previous","factor","coordinate","output","str","precision","index","lat","lng","coordinates","shift","result","byte","latitude_change","longitude_change","i","a","b","flipped","coords","coord","geojson","module","T","h","e","U","$","D","j","o","r","c","s","C","l","_","t","A","w","R","O","y","n","P","E","W","B","x","J","f","I","p","g","S","d","client","createClient","createConfig","trips","options","hexToRgb","hex","getDelayColor","delay","realTime","getModeStyle","getColor","defaultColor","defaultTextColor","ease","TO_RAD","TO_DEG","getSpacialData","path","segmentDistances","headings","i2","i1","lon2","lat2","lon1","lat1","dLon","dLat","cosLat1","cosLat2","sinLat1","sinLat2","cosDLon","dist","status","tripsMap","metaDataMap","metadata","fetchData","query","data","response","tripBuilders","id","processed","processSegment","pathLen","tsLen","hdLen","timestamps","pOff","tOff","hOff","departure","arrival","totalDuration","decoded","count","totalDistance","lon","invTotalDist","cumulativeDist","updateState","colorMode","posIndex","colorIndex","angleIndex","time","color","stamps","len","curr","last","idx","t0","t1","prevIdx","nextIdx","x0","y0","x1","y1","querySerializer","positions","angles","colors","hovIndex"],"mappings":"2LAWA,IAAIA,EAAW,CAAA,EAEf,SAASC,EAAUC,EAAO,CAEtB,OAAO,KAAK,MAAM,KAAK,IAAIA,CAAK,EAAI,EAAG,GAAKA,GAAS,EAAI,EAAI,GACjE,CAEA,SAASC,EAAOC,EAASC,EAAUC,EAAQ,CACvCF,EAAUH,EAAUG,EAAUE,CAAM,EACpCD,EAAWJ,EAAUI,EAAWC,CAAM,EACtC,IAAIC,GAAcH,EAAUC,GAAY,EACpCE,EAAa,IACbA,EAAa,CAACA,EAAa,GAG/B,QADIC,EAAS,GACND,GAAc,IACjBC,GAAU,OAAO,cAAc,GAAQD,EAAa,IAAS,EAAE,EAC/DA,GAAc,GAElB,OAAAC,GAAU,OAAO,cAAcD,EAAa,GAAK,EAAE,EAC5CC,CACX,CAaAR,EAAS,OAAS,SAASS,EAAKC,EAAW,CAevC,QAdIC,EAAQ,EACRC,EAAM,EACNC,EAAM,EACNC,EAAc,CAAA,EACdC,EAAQ,EACRC,EAAS,EACTC,EAAO,KACPC,EACAC,EACAb,EAAS,KAAK,IAAI,GAAI,OAAO,UAAUI,CAAS,EAAIA,EAAY,CAAC,EAK9DC,EAAQF,EAAI,QAAQ,CAGvBQ,EAAO,KACPF,EAAQ,EACRC,EAAS,EAET,GACIC,EAAOR,EAAI,WAAWE,GAAO,EAAI,GACjCK,IAAWC,EAAO,IAAQF,EAC1BA,GAAS,SACJE,GAAQ,IAEjBC,EAAmBF,EAAS,GAAO,CAACA,EAAS,GAAK,EAAMA,EAAS,EAEjED,EAAQ,EACRC,EAAS,EAET,GACIC,EAAOR,EAAI,WAAWE,GAAO,EAAI,GACjCK,IAAWC,EAAO,IAAQF,EAC1BA,GAAS,SACJE,GAAQ,IAEjBE,EAAoBH,EAAS,GAAO,CAACA,EAAS,GAAK,EAAMA,EAAS,EAElEJ,GAAOM,EACPL,GAAOM,EAEPL,EAAY,KAAK,CAACF,EAAMN,EAAQO,EAAMP,CAAM,CAAC,CACrD,CAEI,OAAOQ,CACX,EASAd,EAAS,OAAS,SAASc,EAAaJ,EAAW,CAC/C,GAAI,CAACI,EAAY,OAAU,MAAO,GAKlC,QAHIR,EAAS,KAAK,IAAI,GAAI,OAAO,UAAUI,CAAS,EAAIA,EAAY,CAAC,EACjEF,EAASL,EAAOW,EAAY,CAAC,EAAE,CAAC,EAAG,EAAGR,CAAM,EAAIH,EAAOW,EAAY,CAAC,EAAE,CAAC,EAAG,EAAGR,CAAM,EAE9Ec,EAAI,EAAGA,EAAIN,EAAY,OAAQM,IAAK,CACzC,IAAIC,EAAIP,EAAYM,CAAC,EAAGE,EAAIR,EAAYM,EAAI,CAAC,EAC7CZ,GAAUL,EAAOkB,EAAE,CAAC,EAAGC,EAAE,CAAC,EAAGhB,CAAM,EACnCE,GAAUL,EAAOkB,EAAE,CAAC,EAAGC,EAAE,CAAC,EAAGhB,CAAM,CAC3C,CAEI,OAAOE,CACX,EAEA,SAASe,EAAQC,EAAQ,CAErB,QADID,EAAU,CAAA,EACLH,EAAI,EAAGA,EAAII,EAAO,OAAQJ,IAAK,CACpC,IAAIK,EAAQD,EAAOJ,CAAC,EAAE,MAAK,EAC3BG,EAAQ,KAAK,CAACE,EAAM,CAAC,EAAGA,EAAM,CAAC,CAAC,CAAC,CACzC,CACI,OAAOF,CACX,CASAvB,EAAS,YAAc,SAAS0B,EAAShB,EAAW,CAIhD,GAHIgB,GAAWA,EAAQ,OAAS,YAC5BA,EAAUA,EAAQ,UAElB,CAACA,GAAWA,EAAQ,OAAS,aAC7B,MAAM,IAAI,MAAM,oCAAoC,EAExD,OAAO1B,EAAS,OAAOuB,EAAQG,EAAQ,WAAW,EAAGhB,CAAS,CAClE,EASAV,EAAS,UAAY,SAASS,EAAKC,EAAW,CAC1C,IAAIc,EAASxB,EAAS,OAAOS,EAAKC,CAAS,EAC3C,MAAO,CACH,KAAM,aACN,YAAaa,EAAQC,CAAM,EAEnC,EAEkCG,EAAO,UACrCA,UAAiB3B,oCC/JjB4B,EAAE,cAAcC,EAAE,CAAC,CAAC,cAAcT,EAAE,KAAK,EAAE,MAAMU,CAAC,IAAI,CAAC,GAAGA,GAAG,KAAK,MAAO,GAAG,GAAG,OAAOA,GAAG,SAAS,MAAM,IAAI,MAAM,sGAA2G,EAAE,MAAO,GAAG,CAAC,IAAIV,EAAEU,EAAE,mBAAmBA,CAAC,CAAC,EAAE,EAAEC,EAAEX,GAAG,CAAC,OAAOA,EAAC,CAAE,IAAI,QAAQ,MAAO,IAAI,IAAI,SAAS,MAAO,IAAI,IAAI,SAAS,MAAO,IAAI,QAAQ,MAAO,GAAG,CAAC,EAAEY,EAAEZ,GAAG,CAAC,OAAOA,EAAC,CAAE,IAAI,OAAO,MAAO,IAAI,IAAI,gBAAgB,MAAO,IAAI,IAAI,iBAAiB,MAAO,MAAM,QAAQ,MAAO,GAAG,CAAC,EAAEa,EAAEb,GAAG,CAAC,OAAOA,EAAC,CAAE,IAAI,QAAQ,MAAO,IAAI,IAAI,SAAS,MAAO,IAAI,IAAI,SAAS,MAAO,IAAI,QAAQ,MAAO,GAAG,CAAC,EAAEc,EAAE,CAAC,CAAC,cAAcd,EAAE,QAAQ,EAAE,KAAKU,EAAE,MAAMT,EAAE,MAAMc,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,IAAIC,GAAGhB,EAAEe,EAAEA,EAAE,IAAIE,GAAG,mBAAmBA,CAAC,CAAC,GAAG,KAAKL,EAAEX,CAAC,CAAC,EAAE,OAAOA,GAAG,IAAI,QAAQ,MAAO,IAAIe,CAAC,GAAG,IAAI,SAAS,MAAO,IAAIN,CAAC,IAAIM,CAAC,GAAG,IAAI,SAAS,OAAOA,EAAE,QAAQ,MAAO,GAAGN,CAAC,IAAIM,CAAC,EAAE,CAAC,CAAC,IAAIE,EAAEP,EAAEV,CAAC,EAAE,EAAEc,EAAE,IAAIC,GAAGf,IAAI,SAASA,IAAI,SAASD,EAAEgB,EAAE,mBAAmBA,CAAC,EAAEP,EAAE,CAAC,cAAcT,EAAE,KAAKU,EAAE,MAAMM,CAAC,CAAC,CAAC,EAAE,KAAKE,CAAC,EAAE,OAAOjB,IAAI,SAASA,IAAI,SAASiB,EAAE,EAAE,CAAC,EAAEC,EAAE,CAAC,CAAC,cAAcnB,EAAE,QAAQ,EAAE,KAAKU,EAAE,MAAMT,EAAE,MAAMc,CAAC,IAAI,CAAC,GAAGA,aAAa,KAAK,MAAO,GAAGL,CAAC,IAAIK,EAAE,YAAW,CAAE,GAAG,GAAGd,IAAI,cAAc,CAAC,EAAE,CAAC,IAAIe,EAAE,CAAA,EAAG,OAAO,QAAQD,CAAC,EAAE,QAAQ,CAAC,CAAC,EAAEK,CAAC,IAAI,CAACJ,EAAE,CAAC,GAAGA,EAAE,EAAEhB,EAAEoB,EAAE,mBAAmBA,CAAC,CAAC,CAAE,CAAC,EAAE,IAAIH,EAAED,EAAE,KAAK,GAAG,EAAE,OAAOf,EAAC,CAAE,IAAI,OAAO,MAAO,GAAGS,CAAC,IAAIO,CAAC,GAAG,IAAI,QAAQ,MAAO,IAAIA,CAAC,GAAG,IAAI,SAAS,MAAO,IAAIP,CAAC,IAAIO,CAAC,GAAG,QAAQ,OAAOA,CAAC,CAAC,CAAC,IAAIC,EAAEL,EAAEZ,CAAC,EAAE,EAAE,OAAO,QAAQc,CAAC,EAAE,IAAI,CAAC,CAACC,EAAEC,CAAC,IAAIR,EAAE,CAAC,cAAcT,EAAE,KAAKC,IAAI,aAAa,GAAGS,CAAC,IAAIM,CAAC,IAAIA,EAAE,MAAMC,CAAC,CAAC,CAAC,EAAE,KAAKC,CAAC,EAAE,OAAOjB,IAAI,SAASA,IAAI,SAASiB,EAAE,EAAE,CAAC,EAAEG,EAAE,CAAC,CAAC,KAAKrB,EAAE,IAAI,CAAC,IAAI,CAAC,IAAIU,EAAE,EAAET,EAAE,EAAE,MAAMO,CAAC,EAAE,GAAGP,EAAE,QAAQc,KAAKd,EAAE,CAAC,IAAIiB,EAAE,GAAG,EAAEH,EAAE,UAAU,EAAEA,EAAE,OAAO,CAAC,EAAEC,EAAE,SAAS,EAAE,SAAS,GAAG,IAAIE,EAAE,GAAG,EAAE,EAAE,UAAU,EAAE,EAAE,OAAO,CAAC,GAAG,EAAE,WAAW,GAAG,GAAG,EAAE,EAAE,UAAU,CAAC,EAAEF,EAAE,SAAS,EAAE,WAAW,GAAG,IAAI,EAAE,EAAE,UAAU,CAAC,EAAEA,EAAE,UAAU,IAAIC,EAAEjB,EAAE,CAAC,EAAE,GAAGiB,GAAG,KAAK,SAAS,GAAG,MAAM,QAAQA,CAAC,EAAE,CAACP,EAAEA,EAAE,QAAQK,EAAED,EAAE,CAAC,QAAQI,EAAE,KAAK,EAAE,MAAMF,EAAE,MAAMC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,GAAG,OAAOA,GAAG,SAAS,CAACP,EAAEA,EAAE,QAAQK,EAAEI,EAAE,CAAC,QAAQD,EAAE,KAAK,EAAE,MAAMF,EAAE,MAAMC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,GAAGD,IAAI,SAAS,CAACN,EAAEA,EAAE,QAAQK,EAAE,IAAIN,EAAE,CAAC,KAAK,EAAE,MAAMQ,CAAC,CAAC,CAAC,EAAE,EAAE,QAAQ,CAAC,IAAI,EAAE,mBAAmBD,IAAI,QAAQ,IAAIC,CAAC,GAAGA,CAAC,EAAEP,EAAEA,EAAE,QAAQK,EAAE,CAAC,CAAE,CAAC,OAAOL,CAAC,EAAER,EAAE,CAAC,CAAC,cAAcF,EAAE,MAAM,EAAE,OAAOU,CAAC,EAAE,CAAA,IAAKK,GAAG,CAAC,IAAI,EAAE,CAAA,EAAG,GAAGA,GAAG,OAAOA,GAAG,SAAS,QAAQO,KAAKP,EAAE,CAAC,IAAIC,EAAED,EAAEO,CAAC,EAAE,GAAGN,GAAG,KAAK,CAAC,GAAG,MAAM,QAAQA,CAAC,EAAE,CAAC,EAAE,CAAC,GAAG,EAAEF,EAAE,CAAC,cAAcd,EAAE,QAAQ,GAAG,KAAKsB,EAAE,MAAM,OAAO,MAAMN,EAAE,GAAG,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,GAAG,OAAOA,GAAG,SAAS,CAAC,EAAE,CAAC,GAAG,EAAEG,EAAE,CAAC,cAAcnB,EAAE,QAAQ,GAAG,KAAKsB,EAAE,MAAM,aAAa,MAAMN,EAAE,GAAGN,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,EAAE,CAAC,GAAG,EAAED,EAAE,CAAC,cAAcT,EAAE,KAAKsB,EAAE,MAAMN,CAAC,CAAC,CAAC,CAAE,CAAC,CAAC,OAAO,EAAE,KAAK,GAAG,CAAC,EAAEO,EAAEvB,GAAG,CAAC,GAAG,CAACA,EAAE,OAAO,IAAI,EAAEA,EAAE,MAAM,GAAG,EAAE,CAAC,EAAE,KAAI,EAAG,GAAG,EAAE,WAAW,kBAAkB,GAAG,EAAE,SAAS,OAAO,EAAE,MAAO,OAAO,GAAG,IAAI,sBAAsB,MAAO,WAAW,GAAG,CAAC,eAAe,SAAS,SAAS,QAAQ,EAAE,KAAKU,GAAG,EAAE,WAAWA,CAAC,CAAC,EAAE,MAAO,OAAO,GAAG,EAAE,WAAW,OAAO,EAAE,MAAO,MAAM,EAAEc,EAAE,CAAC,CAAC,QAAQxB,EAAE,KAAK,EAAE,MAAMU,EAAE,gBAAgBT,EAAE,IAAIc,CAAC,IAAI,CAAC,IAAIG,EAAEH,EAAE,WAAW,GAAG,EAAEA,EAAE,IAAIA,CAAC,GAAG,EAAEf,EAAEkB,EAAE,IAAI,EAAEG,EAAE,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,GAAG,IAAIL,EAAEN,EAAET,EAAES,CAAC,EAAE,GAAG,OAAOM,EAAE,WAAW,GAAG,IAAIA,EAAEA,EAAE,UAAU,CAAC,GAAGA,IAAI,GAAG,IAAIA,CAAC,IAAI,CAAC,EAAES,EAAE,CAACzB,EAAE,IAAI,CAAC,IAAIU,EAAE,CAAC,GAAGV,EAAE,GAAG,CAAC,EAAE,OAAOU,EAAE,SAAS,SAAS,GAAG,IAAIA,EAAE,QAAQA,EAAE,QAAQ,UAAU,EAAEA,EAAE,QAAQ,OAAO,CAAC,GAAGA,EAAE,QAAQgB,EAAE1B,EAAE,QAAQ,EAAE,OAAO,EAAEU,CAAC,EAAEgB,EAAE,IAAI1B,IAAI,CAAC,IAAI,EAAE,IAAI,QAAQ,QAAQU,KAAKV,EAAE,CAAC,GAAG,CAACU,GAAG,OAAOA,GAAG,SAAS,SAAS,IAAIT,EAAES,aAAa,QAAQA,EAAE,QAAO,EAAG,OAAO,QAAQA,CAAC,EAAE,OAAO,CAACK,EAAEG,CAAC,IAAIjB,EAAE,GAAGiB,IAAI,KAAK,EAAE,OAAOH,CAAC,UAAU,MAAM,QAAQG,CAAC,EAAE,QAAQ,KAAKA,EAAE,EAAE,OAAOH,EAAE,CAAC,OAAOG,IAAI,QAAQ,EAAE,IAAIH,EAAE,OAAOG,GAAG,SAAS,KAAK,UAAUA,CAAC,EAAEA,CAAC,CAAE,CAAC,OAAO,CAAC,EAAES,EAAE,KAAK,CAAC,KAAK,aAAa,CAAC,KAAK,KAAK,CAAA,CAAG,CAAC,OAAO,CAAC,KAAK,KAAK,CAAA,CAAG,CAAC,OAAOC,EAAE,CAAC,OAAO,KAAK,KAAK,QAAQA,CAAC,IAAI,EAAE,CAAC,MAAMA,EAAE,CAAC,IAAIlB,EAAE,KAAK,KAAK,QAAQkB,CAAC,EAAElB,IAAI,KAAK,KAAK,KAAK,CAAC,GAAG,KAAK,KAAK,MAAM,EAAEA,CAAC,EAAE,GAAG,KAAK,KAAK,MAAMA,EAAE,CAAC,CAAC,EAAG,CAAC,IAAIkB,EAAE,CAAC,KAAK,KAAK,CAAC,GAAG,KAAK,KAAKA,CAAC,CAAE,CAAC,EAAEC,EAAE,KAAK,CAAC,MAAM,IAAIF,EAAE,QAAQ,IAAIA,EAAE,SAAS,IAAIA,CAAC,GAA0PG,EAAE,CAAC,eAAe9B,GAAG,KAAK,UAAUA,CAAC,CAAC,EAA6O+B,EAAE7B,EAAE,CAAC,cAAc,GAAG,MAAM,CAAC,QAAQ,GAAG,MAAM,MAAM,EAAE,OAAO,CAAC,QAAQ,GAAG,MAAM,YAAY,CAAC,CAAC,EAAE8B,GAAE,CAAC,eAAe,kBAAkB,EAAEC,EAAE,CAACjC,EAAE,CAAA,KAAM,CAAC,GAAG8B,EAAE,QAAQ,GAAG,MAAM,WAAW,MAAM,QAAQE,GAAE,QAAQ,OAAO,gBAAgBD,EAAE,GAAG/B,CAAC,GAAOkC,GAAE,CAAClC,EAAE,CAAA,IAAK,CAAC,IAAI,EAAEyB,EAAEQ,EAAC,EAAGjC,CAAC,EAAEU,EAAE,KAAK,CAAC,GAAG,CAAC,GAAGT,EAAE,IAAI,EAAEwB,EAAE,EAAE,CAAC,EAAEf,KAAKK,EAAEc,EAAC,EAAGX,EAAE,MAAM,GAAG,CAAC,IAAIF,EAAE,CAAC,GAAG,EAAE,GAAG,EAAE,QAAQU,EAAE,EAAE,QAAQ,EAAE,OAAO,CAAC,EAAEV,EAAE,MAAMA,EAAE,iBAAiBA,EAAE,KAAKA,EAAE,eAAeA,EAAE,IAAI,GAAGA,EAAE,MAAMA,EAAE,QAAQ,OAAO,cAAc,EAAE,IAAIC,EAAEO,EAAE,CAAC,QAAQR,EAAE,SAAS,GAAG,KAAKA,EAAE,KAAK,MAAMA,EAAE,MAAM,gBAAgB,OAAOA,EAAE,iBAAiB,WAAWA,EAAE,gBAAgBd,EAAEc,EAAE,eAAe,EAAE,IAAIA,EAAE,GAAG,CAAC,EAAE,EAAE,CAAC,SAAS,SAAS,GAAGA,CAAC,EAAEI,EAAE,IAAI,QAAQH,EAAE,CAAC,EAAE,QAAQkB,KAAKpB,EAAE,QAAQ,KAAKK,EAAE,MAAMe,EAAEf,EAAEJ,CAAC,EAAE,IAAIoB,EAAEpB,EAAE,MAAMqB,EAAE,MAAMD,EAAEhB,CAAC,EAAE,QAAQe,KAAKpB,EAAE,SAAS,KAAKsB,EAAE,MAAMF,EAAEE,EAAEjB,EAAEJ,CAAC,EAAE,IAAIsB,EAAE,CAAC,QAAQlB,EAAE,SAASiB,CAAC,EAAE,GAAGA,EAAE,GAAG,CAAC,GAAGA,EAAE,SAAS,KAAKA,EAAE,QAAQ,IAAI,gBAAgB,IAAI,IAAI,MAAO,CAAC,KAAK,CAAA,EAAG,GAAGC,CAAC,EAAE,GAAGtB,EAAE,UAAU,SAAS,MAAO,CAAC,KAAKqB,EAAE,KAAK,GAAGC,CAAC,EAAE,IAAIH,GAAGnB,EAAE,UAAU,OAAOO,EAAEc,EAAE,QAAQ,IAAI,cAAc,CAAC,EAAErB,EAAE,UAAU,OAAOuB,EAAE,MAAMF,EAAEF,CAAC,IAAI,OAAOA,IAAI,QAAQnB,EAAE,sBAAsBuB,EAAE,MAAMvB,EAAE,oBAAoBuB,CAAC,GAAG,CAAC,KAAKA,EAAE,GAAGD,CAAC,CAAC,CAAC,IAAI,EAAE,MAAMD,EAAE,KAAI,EAAG,GAAG,CAAC,EAAE,KAAK,MAAM,CAAC,CAAE,MAAM,CAAC,CAAC,IAAIG,EAAE,EAAE,QAAQL,KAAKpB,EAAE,MAAM,KAAKyB,EAAE,MAAML,EAAE,EAAEE,EAAEjB,EAAEJ,CAAC,EAAE,GAAGwB,EAAEA,GAAG,CAAA,EAAGxB,EAAE,aAAa,MAAMwB,EAAE,MAAO,CAAC,MAAMA,EAAE,GAAGF,CAAC,CAAC,EAAE,MAAO,CAAC,QAAQ,GAAGpB,EAAE,CAAC,GAAG,EAAE,OAAO,SAAS,CAAC,EAAE,OAAO,GAAGA,EAAE,CAAC,GAAG,EAAE,OAAO,QAAQ,CAAC,EAAE,IAAI,GAAGA,EAAE,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC,EAAE,UAAUR,EAAE,KAAK,GAAGQ,EAAE,CAAC,GAAG,EAAE,OAAO,MAAM,CAAC,EAAE,aAAaH,EAAE,QAAQ,GAAGG,EAAE,CAAC,GAAG,EAAE,OAAO,SAAS,CAAC,EAAE,MAAM,GAAGA,EAAE,CAAC,GAAG,EAAE,OAAO,OAAO,CAAC,EAAE,KAAK,GAAGA,EAAE,CAAC,GAAG,EAAE,OAAO,MAAM,CAAC,EAAE,IAAI,GAAGA,EAAE,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC,EAAE,QAAQA,EAAE,UAAUjB,EAAE,MAAM,GAAGiB,EAAE,CAAC,GAAG,EAAE,OAAO,OAAO,CAAC,CAAC,CAAC,ECE10LuB,EAASC,GAAaC,GAAc,EA2CpCC,GAASC,IACHA,GAAS,QAAUJ,GAAQ,IAAI,CACrC,GAAGI,EACH,IAAK,mBACT,CAAG,EChDI,SAASC,EAASC,EAAmB,CAC3C,MAAMnD,EAAS,4CAA4C,KAAKmD,CAAG,EACnE,GAAI,CAACnD,EACJ,KAAM,GAAGmD,CAAG,8BAEb,MAAO,CAAC,SAASnD,EAAO,CAAC,EAAG,EAAE,EAAG,SAASA,EAAO,CAAC,EAAG,EAAE,EAAG,SAASA,EAAO,CAAC,EAAG,EAAE,EAAG,GAAG,CACvF,CAMO,MAAMoD,GAAgB,CAACC,EAAeC,KAC5CD,EAAQA,EAAQ,IACXC,EAGDD,GAAS,IACL,CAAC,IAAK,EAAG,IAAK,GAAG,EACdA,GAAS,GACZ,CAAC,IAAK,GAAI,IAAK,GAAG,EACfA,GAAS,EACZ,CAAC,GAAI,IAAK,GAAI,GAAG,EACdA,GAAS,EACZ,CAAC,IAAK,IAAK,EAAG,GAAG,EACdA,GAAS,GACZ,CAAC,IAAK,IAAK,EAAG,GAAG,EACdA,GAAS,GACZ,CAAC,IAAK,GAAI,GAAI,GAAG,EAElB,CAAC,IAAK,EAAG,GAAI,GAAG,EAff,CAAC,IAAK,IAAK,IAAK,GAAG,GCNfE,EAAgB/B,GAAyC,CACrE,OAAQA,EAAE,KAAA,CACT,IAAK,OACJ,MAAO,CAAC,OAAQ,6BAA8B,4BAA4B,EAC3E,IAAK,OACJ,MAAO,CAAC,OAAQ,6BAA8B,4BAA4B,EAE3E,IAAK,SACJ,OAAQA,EAAE,QAAQ,WAAA,CACjB,IAAK,UACJ,MAAO,CAAC,OAAQ,UAAW,OAAO,EACnC,IAAK,gBACJ,MAAO,CAAC,aAAc,UAAW,OAAO,EACzC,IAAK,MACJ,MAAO,CAAC,MAAO,UAAW,OAAO,EAClC,IAAK,QACJ,MAAO,CAAC,QAAS,UAAW,OAAO,EACpC,IAAK,iBACJ,MAAO,CAAC,iBAAkB,UAAW,OAAO,EAC7C,IAAK,mBACJ,MAAO,CAAC,UAAW,UAAW,OAAO,EACtC,IAAK,QACL,QACC,MAAO,CAAC,QAAS,UAAW,OAAO,CAAA,CAGtC,IAAK,MACL,IAAK,cACJ,MAAO,CAAC,MAAO,UAAW,OAAO,EAElC,IAAK,OACL,IAAK,MACJ,MAAO,CAAC,OAAQ,UAAW,OAAO,EAEnC,IAAK,UACL,IAAK,MACJ,MAAO,CAAC,MAAO,UAAW,OAAO,EAClC,IAAK,QACJ,MAAO,CAAC,MAAO,UAAW,OAAO,EAElC,IAAK,OACJ,MAAO,CAAC,OAAQ,UAAW,OAAO,EAEnC,IAAK,WACJ,MAAO,CAAC,QAAS,UAAW,OAAO,EAEpC,IAAK,SACJ,MAAO,CAAC,QAAS,UAAW,OAAO,EAEpC,IAAK,QACJ,MAAO,CAAC,OAAQ,UAAW,OAAO,EAEnC,IAAK,WACJ,MAAO,CAAC,QAAS,UAAW,OAAO,EAEpC,IAAK,iBACJ,MAAO,CAAC,QAAS,UAAW,OAAO,EAEpC,IAAK,gBACJ,MAAO,CAAC,QAAS,UAAW,OAAO,EAEpC,IAAK,aACJ,MAAO,CAAC,QAAS,UAAW,OAAO,EAEpC,IAAK,qBACL,IAAK,gBACL,IAAK,OACJ,MAAO,CAAC,QAAS,UAAW,OAAO,EAEpC,IAAK,YACJ,MAAO,CAAC,YAAa,UAAW,OAAO,EAExC,IAAK,YACJ,MAAO,CAAC,OAAQ,UAAW,OAAO,EAEnC,IAAK,cACJ,MAAO,CAAC,cAAe,UAAW,OAAO,CAAA,CAG3C,MAAO,CAAC,QAAS,UAAW,OAAO,CACpC,EAEagC,EAAYhC,GAAmC,CAC3D,KAAM,CAACC,EAAGgC,EAAcC,CAAgB,EAAIH,EAAa/B,CAAC,EAC1D,OAAKA,EAAE,WAGA,CAAC,IAAIA,EAAE,UAAU,GAAI,IAAIA,EAAE,cAAc,EAAE,EAF1C,CAACiC,EAAcC,CAAgB,CAGxC,ECzFMC,GAAQjC,GAAcA,EAAIA,GAAK,EAAI,EAAIA,GACvCG,GAAI,KACJ+B,EAAS,KAAK,GAAK,IACnBC,GAAS,IAAM,KAAK,GAEpBC,GAAiB,CACtBC,EACA3D,EACA4D,EACAC,IACI,CACJ,MAAMC,EAAK9D,EAAI,EACT+D,EAAKD,EAAK,EACVE,EAAOL,EAAKG,CAAE,EAAIN,EAClBS,EAAON,EAAKG,EAAK,CAAC,EAAIN,EACtBU,EAAOP,EAAKI,CAAE,EAAIP,EAClBW,EAAOR,EAAKI,EAAK,CAAC,EAAIP,EAEtBY,EAAOJ,EAAOE,EACdG,EAAOJ,EAAOE,EAEdG,EAAU,KAAK,IAAIH,CAAI,EACvBI,EAAU,KAAK,IAAIN,CAAI,EACvBO,EAAU,KAAK,IAAIL,CAAI,EACvBM,EAAU,KAAK,IAAIR,CAAI,EACvBS,EAAU,KAAK,IAAIN,CAAI,EAGvBnE,EAAI,KAAK,IAAIoE,EAAO,CAAC,GAAK,EAAIC,EAAUC,EAAU,KAAK,IAAIH,EAAO,CAAC,GAAK,EACxEO,EAAO,EAAI,KAAK,MAAM,KAAK,KAAK1E,CAAC,EAAG,KAAK,KAAK,EAAIA,CAAC,CAAC,EAAIwB,GAC9DmC,EAAiB5D,EAAI,CAAC,EAAI2E,EAG1B,MAAMhD,EAAI,KAAK,IAAIyC,CAAI,EAAIG,EACrB,EAAID,EAAUG,EAAUD,EAAUD,EAAUG,EAClDb,EAAS7D,EAAI,CAAC,EAAK,EAAE,KAAK,MAAM2B,EAAG,CAAC,EAAI8B,GAAS,KAAO,IAAO,EAChE,EAGA,IAAImB,EACJ,MAAMC,MAAe,IACfC,MAAkB,IACxB,IAAIC,EAAuB,CAAA,EAC3B,MAAMC,GAAY,MAAOC,GAAiB,CACzC,KAAM,CAAE,KAAAC,EAAM,SAAAC,CAAA,EAAa,MAAMvC,GAAM,CAAE,MAAAqC,EAAO,EAEhD,GADAL,EAASO,EAAS,OACd,CAACD,EAAM,OAEXL,EAAS,MAAA,EACTC,EAAY,MAAA,EAEZ,MAAMM,MAAmB,IAczB,UAAW5C,KAAK0C,EAAM,CACrB,MAAMG,EAAK7C,EAAE,MAAM,CAAC,EAAE,OAChB8C,EAAYC,GAAe/C,CAAC,EAElC,GAAI,CAAC4C,EAAa,IAAIC,CAAE,EACvBD,EAAa,IAAIC,EAAI,CACpB,MAAO,CAACC,EAAU,IAAI,EACtB,WAAY,CAACA,EAAU,UAAU,EACjC,SAAU,CAACA,EAAU,QAAQ,EAC7B,SAAUA,EAAU,SACpB,KAAMA,EAAU,KAChB,WAAYA,EAAU,WACtB,eAAgBA,EAAU,eAC1B,aAAcA,EAAU,YAAA,CACxB,MACK,CACN,MAAMpF,EAAIkF,EAAa,IAAIC,CAAE,EAC7BnF,EAAE,MAAM,KAAKoF,EAAU,IAAI,EAC3BpF,EAAE,WAAW,KAAKoF,EAAU,UAAU,EACtCpF,EAAE,SAAS,KAAKoF,EAAU,QAAQ,CACnC,CAEAR,EAAY,IAAIO,EAAI,CACnB,GAAAA,EACA,YAAa7C,EAAE,MAAM,CAAC,EAAE,YACxB,GAAIA,EAAE,KAAK,GACX,KAAMA,EAAE,KAAK,KACb,GAAIA,EAAE,GAAG,KACT,SAAUA,EAAE,SACZ,QAASA,EAAE,QACX,UAAWA,EAAE,UACb,iBAAkBA,EAAE,iBACpB,mBAAoBA,EAAE,mBACtB,eAAgB8C,EAAU,eAC1B,aAAcA,EAAU,YAAA,CACxB,CACF,CAEAF,EAAa,QAAQ,CAAClF,EAAGmF,IAAO,CAC/B,IAAIG,EAAU,EACVC,EAAQ,EACRC,EAAQ,EAEZ,QAAS1F,EAAI,EAAGA,EAAIE,EAAE,MAAM,OAAQF,IACnCwF,GAAWtF,EAAE,MAAMF,CAAC,EAAE,OACtByF,GAASvF,EAAE,WAAWF,CAAC,EAAE,OACzB0F,GAASxF,EAAE,SAASF,CAAC,EAAE,OAGxB,MAAM2D,EAAO,IAAI,aAAa6B,CAAO,EAC/BG,EAAa,IAAI,aAAaF,CAAK,EACnC5B,EAAW,IAAI,aAAa6B,CAAK,EAEvC,IAAIE,EAAO,EACVC,EAAO,EACPC,EAAO,EACR,QAAS9F,EAAI,EAAGA,EAAIE,EAAE,MAAM,OAAQF,IACnC2D,EAAK,IAAIzD,EAAE,MAAMF,CAAC,EAAG4F,CAAI,EACzBD,EAAW,IAAIzF,EAAE,WAAWF,CAAC,EAAG6F,CAAI,EACpChC,EAAS,IAAI3D,EAAE,SAASF,CAAC,EAAG8F,CAAI,EAEhCF,GAAQ1F,EAAE,MAAMF,CAAC,EAAE,OACnB6F,GAAQ3F,EAAE,WAAWF,CAAC,EAAE,OACxB8F,GAAQ5F,EAAE,SAASF,CAAC,EAAE,OAGvB6E,EAAS,IAAIQ,EAAI,CAChB,SAAUnF,EAAE,SACZ,KAAMA,EAAE,KACR,WAAYA,EAAE,WACd,KAAAyD,EACA,WAAAgC,EACA,SAAA9B,EACA,YAAa,EACb,eAAgB3D,EAAE,eAClB,aAAcA,EAAE,YAAA,CAChB,CACF,CAAC,EACD6E,EAAW,MAAM,KAAKD,EAAY,OAAA,CAAQ,CAC3C,EACMS,GAAkBrE,GAAyB,CAChD,MAAM6E,EAAY,IAAI,KAAK7E,EAAE,SAAS,EAAE,QAAA,EAClC8E,EAAU,IAAI,KAAK9E,EAAE,OAAO,EAAE,QAAA,EAC9B+E,EAAgBD,EAAUD,EAE1BG,EAAUtH,EAAS,OAAOsC,EAAE,QAAQ,EACpCiF,EAAQD,EAAQ,OAEhBvC,EAAO,IAAI,aAAawC,EAAQ,CAAC,EACjCR,EAAa,IAAI,aAAaQ,CAAK,EACnCtC,EAAW,IAAI,aAAasC,CAAK,EACjCvC,EAAmB,IAAI,aAAauC,CAAK,EAE/C,IAAIC,EAAgB,EAEpB,QAASpG,EAAI,EAAGA,EAAImG,EAAOnG,IAAK,CAC/B,MAAMqC,EAAI6D,EAAQlG,CAAC,EACbqG,EAAMhE,EAAE,CAAC,EACT7C,EAAM6C,EAAE,CAAC,EACfsB,EAAK3D,EAAI,CAAC,EAAIqG,EACd1C,EAAK3D,EAAI,EAAI,CAAC,EAAIR,EAEdQ,EAAI,IACP0D,GAAeC,EAAM3D,EAAG4D,EAAkBC,CAAQ,EAClDuC,GAAiBxC,EAAiB5D,EAAI,CAAC,EAEzC,CAEImG,EAAQ,IAAGtC,EAASsC,EAAQ,CAAC,EAAItC,EAASsC,EAAQ,CAAC,GAEvD,MAAMG,EAAeF,IAAkB,EAAI,EAAI,EAAIA,EACnD,IAAIG,EAAiB,EACrB,QAASvG,EAAI,EAAGA,EAAImG,EAAOnG,IAC1B2F,EAAW3F,CAAC,EAAI+F,EAAYQ,EAAiBD,EAAeL,EAC5DM,GAAkB3C,EAAiB5D,CAAC,EAGrC,MAAO,CACN,SAAUkB,EAAE,SACZ,KAAMA,EAAE,KACR,WAAYA,EAAE,WACd,KAAAyC,EACA,WAAAgC,EACA,SAAA9B,EACA,YAAa,EACb,eAAgBkC,EAAY,IAAI,KAAK7E,EAAE,kBAAkB,EAAE,QAAA,EAC3D,aAAc8E,EAAU,IAAI,KAAK9E,EAAE,gBAAgB,EAAE,QAAA,CAAQ,CAE/D,EAGA,SAASsF,GAAYtB,EAAoBuB,EAAmB,CAC3D,IAAIC,EAAW,EACXC,EAAa,EACbC,EAAa,EACjB,MAAMC,EAAO,KAAK,IAAA,EAClB,IAAIC,EACJjC,EAAS,QAASvD,GAAM,CACvB,MAAMyF,EAASzF,EAAE,WACXqC,EAAOrC,EAAE,KACTuC,EAAWvC,EAAE,SACb0F,EAAMD,EAAO,OAEnB,OAAQN,EAAA,CACP,IAAK,KACJK,EAAQ9D,GAAc1B,EAAE,eAAgBA,EAAE,QAAQ,EAClD,MACD,IAAK,OACJwF,EAAQhE,EAASK,EAAa7B,CAAC,EAAE,CAAC,CAAC,EACnC,MACD,IAAK,QACJwF,EAAQhE,EAASM,EAAS9B,CAAC,EAAE,CAAC,CAAC,EAC/B,MACD,IAAK,OACJwF,EAAQhE,EAASM,EAAS9B,CAAC,EAAE,CAAC,CAAC,EAC/B,KAAA,CAEF4D,EAAK,OAAOyB,CAAU,EAAIG,EAAO,CAAC,EAClC5B,EAAK,OAAOyB,EAAa,CAAC,EAAIG,EAAO,CAAC,EACtC5B,EAAK,OAAOyB,EAAa,CAAC,EAAIG,EAAO,CAAC,EAEtC,IAAIG,EAAO3F,EAAE,YACb,KAAO2F,EAAOD,EAAM,GAAKD,EAAOE,CAAI,EAAIJ,GACvCI,IAED3F,EAAE,YAAc2F,EAEhB,MAAMC,EAAOH,EAAOC,EAAM,CAAC,EAE3B,GAAIC,IAAS,EACZ/B,EAAK,UAAUwB,CAAQ,EAAI/C,EAAK,CAAC,EACjCuB,EAAK,UAAUwB,EAAW,CAAC,EAAI/C,EAAK,CAAC,EACrCuB,EAAK,OAAO0B,CAAU,EAAI/C,EAAS,CAAC,UAC1BoD,IAASD,EAAM,GAAKH,GAAQK,EAAM,CAC5C,MAAMC,EAAM,GAAKH,EAAM,GACvB9B,EAAK,UAAUwB,CAAQ,EAAI/C,EAAKwD,CAAG,EACnCjC,EAAK,UAAUwB,EAAW,CAAC,EAAI/C,EAAKwD,EAAM,CAAC,EAC3CjC,EAAK,OAAO0B,CAAU,EAAI/C,EAASmD,EAAM,CAAC,CAC3C,SAAWE,EAAOL,EAAM,CACvB,MAAMO,EAAKL,EAAOE,EAAO,CAAC,EACpBI,EAAKN,EAAOE,CAAI,EAEhBjG,EAAIuC,IAAMsD,EAAOO,IAAOC,EAAKD,EAAG,EAEhCE,EAAU,GAAKL,EAAO,GACtBM,EAAU,EAAIN,EAEdO,EAAK7D,EAAK2D,CAAO,EACjBG,EAAK9D,EAAK2D,EAAU,CAAC,EAErBI,GAAK/D,EAAK4D,CAAO,EACjBI,GAAKhE,EAAK4D,EAAU,CAAC,EAE3BrC,EAAK,UAAUwB,CAAQ,EAAIc,GAAME,GAAKF,GAAMxG,EAC5CkE,EAAK,UAAUwB,EAAW,CAAC,EAAIe,GAAME,GAAKF,GAAMzG,EAChDkE,EAAK,OAAO0B,CAAU,EAAI/C,EAASoD,EAAO,CAAC,CAC5C,CAEAN,GAAc,EACdC,IACAF,GAAY,CACb,CAAC,EAEDxB,EAAK,OAAS0B,CACf,CAGA,KAAK,UAAY,MAAO,GAAM,CAC7B,OAAQ,EAAE,KAAK,KAAA,CACd,IAAK,OAAQ,CACZ,MAAMgB,EAAkB,CAAE,MAAO,CAAE,QAAS,GAAM,EAClDnF,EAAO,UAAU,CAAE,QAAS,EAAE,KAAK,QAAS,gBAAAmF,EAAiB,EAC7D,KACD,CACA,IAAK,QACJ,MAAM5C,GAAU,EAAE,KAAK,KAAK,EAC5B,YAAY,CAAE,KAAM,iBAAkB,OAAAJ,CAAA,CAAQ,EAC9C,MACD,IAAK,SAAU,CACd,MAAMiD,EAAY,IAAI,aAAa,EAAE,KAAK,UAAU,MAAM,EACpDC,EAAS,IAAI,aAAa,EAAE,KAAK,OAAO,MAAM,EAC9CC,EAAS,IAAI,WAAW,EAAE,KAAK,OAAO,MAAM,EAC5CC,EAAW,EAAE,KAAK,MAClB9C,EAAO,CACZ,OAAA6C,EACA,UAAAF,EACA,OAAAC,EACA,OAAQ,CAAA,EAETtB,GAAYtB,EAAM,EAAE,KAAK,SAAS,EAClC,YACC,CACC,OAAQA,EAAK,OACb,UAAWA,EAAK,UAChB,OAAQA,EAAK,OACb,OAAQA,EAAK,OACb,SAAU8C,IAAa,GAAKjD,EAASiD,CAAQ,EAAI,IAAA,EAElD,CAAC9C,EAAK,OAAO,OAAQA,EAAK,UAAU,OAAQA,EAAK,OAAO,MAAM,CAAA,EAE/D,KACD,CAAA,CAEF","x_google_ignoreList":[0,1]}